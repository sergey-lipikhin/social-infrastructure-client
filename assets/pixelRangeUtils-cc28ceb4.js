const E=9999999e31,L=2e-7,S={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function g(t){return S[t]??[-34028234663852886e22,34028234663852886e22]}function x(t,f,c){if(t.depthCount&&t.depthCount>1)return;const{pixels:b,statistics:a,pixelType:o}=t,h=b[0].length,m=t.bandMasks??[],d=t.mask??new Uint8Array(h).fill(255),M=o==="f32"||o==="f64",p=g(o);let r=!1;for(let s=0;s<b.length;s++){const n=typeof f=="number"?f:f[s];if(n==null)continue;const A=(a==null?void 0:a[s].minValue)??p[0],k=(a==null?void 0:a[s].maxValue)??p[1];if(A>n+Number.EPSILON||k<n-Number.EPSILON)continue;const i=m[s]||new Uint8Array(h).fill(255),l=b[s],N=c==null?void 0:c.customFloatTolerance;if(M&&N!==0){let e=N;e||(e=Math.abs(n)>=E?L*Math.abs(n):o==="f32"?2**-23:Number.EPSILON);for(let u=0;u<l.length;u++)i[u]&&Math.abs(l[u]-n)<e&&(l[u]=0,i[u]=0,d[u]=0,r=!0)}else for(let e=0;e<l.length;e++)i[e]&&l[e]===n&&(l[e]=0,i[e]=0,d[e]=0,r=!0);m[s]=i}r&&(t.bandMasks=m,t.mask=d),r&&"updateStatistics"in t&&t.updateStatistics()}export{g as s,x as u};
