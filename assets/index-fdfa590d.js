(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function aae(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j9={exports:{}},qM={},V9={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=Symbol.for("react.element"),lae=Symbol.for("react.portal"),uae=Symbol.for("react.fragment"),cae=Symbol.for("react.strict_mode"),dae=Symbol.for("react.profiler"),hae=Symbol.for("react.provider"),pae=Symbol.for("react.context"),fae=Symbol.for("react.forward_ref"),mae=Symbol.for("react.suspense"),yae=Symbol.for("react.memo"),gae=Symbol.for("react.lazy"),hV=Symbol.iterator;function vae(t){return t===null||typeof t!="object"?null:(t=hV&&t[hV]||t["@@iterator"],typeof t=="function"?t:null)}var z9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U9=Object.assign,B9={};function G0(t,e,i){this.props=t,this.context=e,this.refs=B9,this.updater=i||z9}G0.prototype.isReactComponent={};G0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};G0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G9(){}G9.prototype=G0.prototype;function L3(t,e,i){this.props=t,this.context=e,this.refs=B9,this.updater=i||z9}var R3=L3.prototype=new G9;R3.constructor=L3;U9(R3,G0.prototype);R3.isPureReactComponent=!0;var pV=Array.isArray,H9=Object.prototype.hasOwnProperty,F3={current:null},q9={key:!0,ref:!0,__self:!0,__source:!0};function W9(t,e,i){var r,n={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)H9.call(e,r)&&!q9.hasOwnProperty(r)&&(n[r]=e[r]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)n[r]===void 0&&(n[r]=a[r]);return{$$typeof:w1,type:t,key:s,ref:o,props:n,_owner:F3.current}}function _ae(t,e){return{$$typeof:w1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function D3(t){return typeof t=="object"&&t!==null&&t.$$typeof===w1}function wae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var fV=/\/+/g;function UI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wae(""+t.key):e.toString(36)}function s$(t,e,i,r,n){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case w1:case lae:o=!0}}if(o)return o=t,n=n(o),t=r===""?"."+UI(o,0):r,pV(n)?(i="",t!=null&&(i=t.replace(fV,"$&/")+"/"),s$(n,e,i,"",function(c){return c})):n!=null&&(D3(n)&&(n=_ae(n,i+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(fV,"$&/")+"/")+t)),e.push(n)),1;if(o=0,r=r===""?".":r+":",pV(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+UI(s,a);o+=s$(s,e,i,l,n)}else if(l=vae(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+UI(s,a++),o+=s$(s,e,i,l,n);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gS(t,e,i){if(t==null)return t;var r=[],n=0;return s$(t,r,"","",function(s){return e.call(i,s,n++)}),r}function bae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hn={current:null},o$={transition:null},Sae={ReactCurrentDispatcher:Hn,ReactCurrentBatchConfig:o$,ReactCurrentOwner:F3};Ke.Children={map:gS,forEach:function(t,e,i){gS(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return gS(t,function(){e++}),e},toArray:function(t){return gS(t,function(e){return e})||[]},only:function(t){if(!D3(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=G0;Ke.Fragment=uae;Ke.Profiler=dae;Ke.PureComponent=L3;Ke.StrictMode=cae;Ke.Suspense=mae;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sae;Ke.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=U9({},t.props),n=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=F3.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)H9.call(e,l)&&!q9.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=i;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:w1,type:t.type,key:n,ref:s,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:pae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hae,_context:t},t.Consumer=t};Ke.createElement=W9;Ke.createFactory=function(t){var e=W9.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:fae,render:t}};Ke.isValidElement=D3;Ke.lazy=function(t){return{$$typeof:gae,_payload:{_status:-1,_result:t},_init:bae}};Ke.memo=function(t,e){return{$$typeof:yae,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=o$.transition;o$.transition={};try{t()}finally{o$.transition=e}};Ke.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ke.useCallback=function(t,e){return Hn.current.useCallback(t,e)};Ke.useContext=function(t){return Hn.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return Hn.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return Hn.current.useEffect(t,e)};Ke.useId=function(){return Hn.current.useId()};Ke.useImperativeHandle=function(t,e,i){return Hn.current.useImperativeHandle(t,e,i)};Ke.useInsertionEffect=function(t,e){return Hn.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return Hn.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return Hn.current.useMemo(t,e)};Ke.useReducer=function(t,e,i){return Hn.current.useReducer(t,e,i)};Ke.useRef=function(t){return Hn.current.useRef(t)};Ke.useState=function(t){return Hn.current.useState(t)};Ke.useSyncExternalStore=function(t,e,i){return Hn.current.useSyncExternalStore(t,e,i)};Ke.useTransition=function(){return Hn.current.useTransition()};Ke.version="18.2.0";V9.exports=Ke;var Ul=V9.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xae=Ul,$ae=Symbol.for("react.element"),Eae=Symbol.for("react.fragment"),Mae=Object.prototype.hasOwnProperty,Tae=xae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Iae={key:!0,ref:!0,__self:!0,__source:!0};function Z9(t,e,i){var r,n={},s=null,o=null;i!==void 0&&(s=""+i),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Mae.call(e,r)&&!Iae.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:$ae,type:t,key:s,ref:o,props:n,_owner:Tae.current}}qM.Fragment=Eae;qM.jsx=Z9;qM.jsxs=Z9;j9.exports=qM;var Da=j9.exports,IP={},Y9={exports:{}},ro={},J9={exports:{}},K9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,le){var Ee=q.length;q.push(le);e:for(;0<Ee;){var ft=Ee-1>>>1,mt=q[ft];if(0<n(mt,le))q[ft]=le,q[Ee]=mt,Ee=ft;else break e}}function i(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var le=q[0],Ee=q.pop();if(Ee!==le){q[0]=Ee;e:for(var ft=0,mt=q.length,Dr=mt>>>1;ft<Dr;){var Wn=2*(ft+1)-1,yu=q[Wn],Xo=Wn+1,gp=q[Xo];if(0>n(yu,Ee))Xo<mt&&0>n(gp,yu)?(q[ft]=gp,q[Xo]=Ee,ft=Xo):(q[ft]=yu,q[Wn]=Ee,ft=Wn);else if(Xo<mt&&0>n(gp,Ee))q[ft]=gp,q[Xo]=Ee,ft=Xo;else break e}}return le}function n(q,le){var Ee=q.sortIndex-le.sortIndex;return Ee!==0?Ee:q.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,p=null,f=3,y=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(q){for(var le=i(c);le!==null;){if(le.callback===null)r(c);else if(le.startTime<=q)r(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=i(c)}}function $(q){if(v=!1,b(q),!g)if(i(l)!==null)g=!0,Dt(T);else{var le=i(c);le!==null&&we($,le.startTime-q)}}function T(q,le){g=!1,v&&(v=!1,w(L),L=-1),y=!0;var Ee=f;try{for(b(le),p=i(l);p!==null&&(!(p.expirationTime>le)||q&&!H());){var ft=p.callback;if(typeof ft=="function"){p.callback=null,f=p.priorityLevel;var mt=ft(p.expirationTime<=le);le=t.unstable_now(),typeof mt=="function"?p.callback=mt:p===i(l)&&r(l),b(le)}else r(l);p=i(l)}if(p!==null)var Dr=!0;else{var Wn=i(c);Wn!==null&&we($,Wn.startTime-le),Dr=!1}return Dr}finally{p=null,f=Ee,y=!1}}var I=!1,A=null,L=-1,z=5,j=-1;function H(){return!(t.unstable_now()-j<z)}function J(){if(A!==null){var q=t.unstable_now();j=q;var le=!0;try{le=A(!0,q)}finally{le?ue():(I=!1,A=null)}}else I=!1}var ue;if(typeof S=="function")ue=function(){S(J)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,pe=re.port2;re.port1.onmessage=J,ue=function(){pe.postMessage(null)}}else ue=function(){_(J,0)};function Dt(q){A=q,I||(I=!0,ue())}function we(q,le){L=_(function(){q(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){g||y||(g=!0,Dt(T))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var le=3;break;default:le=f}var Ee=f;f=le;try{return q()}finally{f=Ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,le){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Ee=f;f=q;try{return le()}finally{f=Ee}},t.unstable_scheduleCallback=function(q,le,Ee){var ft=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ft+Ee:ft):Ee=ft,q){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=Ee+mt,q={id:h++,callback:le,priorityLevel:q,startTime:Ee,expirationTime:mt,sortIndex:-1},Ee>ft?(q.sortIndex=Ee,e(c,q),i(l)===null&&q===i(c)&&(v?(w(L),L=-1):v=!0,we($,Ee-ft))):(q.sortIndex=mt,e(l,q),g||y||(g=!0,Dt(T))),q},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(q){var le=f;return function(){var Ee=f;f=le;try{return q.apply(this,arguments)}finally{f=Ee}}}})(K9);J9.exports=K9;var kae=J9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q9=Ul,Xs=kae;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X9=new Set,yb={};function Vm(t,e){f0(t,e),f0(t+"Capture",e)}function f0(t,e){for(yb[t]=e,t=0;t<e.length;t++)X9.add(e[t])}var kc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kP=Object.prototype.hasOwnProperty,Cae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mV={},yV={};function Pae(t){return kP.call(yV,t)?!0:kP.call(mV,t)?!1:Cae.test(t)?yV[t]=!0:(mV[t]=!0,!1)}function Aae(t,e,i,r){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Oae(t,e,i,r){if(e===null||typeof e>"u"||Aae(t,e,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qn(t,e,i,r,n,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jr[e]=new qn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var N3=/[\-:]([a-z])/g;function j3(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(N3,j3);Jr[e]=new qn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(N3,j3);Jr[e]=new qn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(N3,j3);Jr[e]=new qn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new qn(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function V3(t,e,i,r){var n=Jr.hasOwnProperty(e)?Jr[e]:null;(n!==null?n.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Oae(e,i,n,r)&&(i=null),r||n===null?Pae(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):n.mustUseProperty?t[n.propertyName]=i===null?n.type===3?!1:"":i:(e=n.attributeName,r=n.attributeNamespace,i===null?t.removeAttribute(e):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}var Dc=Q9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vS=Symbol.for("react.element"),cg=Symbol.for("react.portal"),dg=Symbol.for("react.fragment"),z3=Symbol.for("react.strict_mode"),CP=Symbol.for("react.profiler"),e7=Symbol.for("react.provider"),t7=Symbol.for("react.context"),U3=Symbol.for("react.forward_ref"),PP=Symbol.for("react.suspense"),AP=Symbol.for("react.suspense_list"),B3=Symbol.for("react.memo"),Kd=Symbol.for("react.lazy"),i7=Symbol.for("react.offscreen"),gV=Symbol.iterator;function Tv(t){return t===null||typeof t!="object"?null:(t=gV&&t[gV]||t["@@iterator"],typeof t=="function"?t:null)}var bi=Object.assign,BI;function f_(t){if(BI===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);BI=e&&e[1]||""}return`
`+BI+t}var GI=!1;function HI(t,e){if(!t||GI)return"";GI=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=r.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{GI=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?f_(t):""}function Lae(t){switch(t.tag){case 5:return f_(t.type);case 16:return f_("Lazy");case 13:return f_("Suspense");case 19:return f_("SuspenseList");case 0:case 2:case 15:return t=HI(t.type,!1),t;case 11:return t=HI(t.type.render,!1),t;case 1:return t=HI(t.type,!0),t;default:return""}}function OP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dg:return"Fragment";case cg:return"Portal";case CP:return"Profiler";case z3:return"StrictMode";case PP:return"Suspense";case AP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t7:return(t.displayName||"Context")+".Consumer";case e7:return(t._context.displayName||"Context")+".Provider";case U3:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B3:return e=t.displayName||null,e!==null?e:OP(t.type)||"Memo";case Kd:e=t._payload,t=t._init;try{return OP(t(e))}catch{}}return null}function Rae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OP(e);case 8:return e===z3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gh(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r7(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fae(t){var e=r7(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _S(t){t._valueTracker||(t._valueTracker=Fae(t))}function n7(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=r7(t)?t.checked?"true":"false":t.value),t=r,t!==i?(e.setValue(t),!0):!1}function qE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function LP(t,e){var i=e.checked;return bi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function vV(t,e){var i=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;i=Gh(e.value!=null?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s7(t,e){e=e.checked,e!=null&&V3(t,"checked",e,!1)}function RP(t,e){s7(t,e);var i=Gh(e.value),r=e.type;if(i!=null)r==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?FP(t,e.type,i):e.hasOwnProperty("defaultValue")&&FP(t,e.type,Gh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _V(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function FP(t,e,i){(e!=="number"||qE(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var m_=Array.isArray;function jg(t,e,i,r){if(t=t.options,e){e={};for(var n=0;n<i.length;n++)e["$"+i[n]]=!0;for(i=0;i<t.length;i++)n=e.hasOwnProperty("$"+t[i].value),t[i].selected!==n&&(t[i].selected=n),n&&r&&(t[i].defaultSelected=!0)}else{for(i=""+Gh(i),e=null,n=0;n<t.length;n++){if(t[n].value===i){t[n].selected=!0,r&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function DP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return bi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wV(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(K(92));if(m_(i)){if(1<i.length)throw Error(K(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:Gh(i)}}function o7(t,e){var i=Gh(e.value),r=Gh(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),r!=null&&(t.defaultValue=""+r)}function bV(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a7(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a7(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wS,l7=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,r,n){MSApp.execUnsafeLocalFunction(function(){return t(e,i,r,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wS=wS||document.createElement("div"),wS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wS.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gb(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Mw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dae=["Webkit","ms","Moz","O"];Object.keys(Mw).forEach(function(t){Dae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mw[e]=Mw[t]})});function u7(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Mw.hasOwnProperty(t)&&Mw[t]?(""+e).trim():e+"px"}function c7(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=u7(i,e[i],r);i==="float"&&(i="cssFloat"),r?t.setProperty(i,n):t[i]=n}}var Nae=bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jP(t,e){if(e){if(Nae[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function VP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zP=null;function G3(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var UP=null,Vg=null,zg=null;function SV(t){if(t=x1(t)){if(typeof UP!="function")throw Error(K(280));var e=t.stateNode;e&&(e=KM(e),UP(t.stateNode,t.type,e))}}function d7(t){Vg?zg?zg.push(t):zg=[t]:Vg=t}function h7(){if(Vg){var t=Vg,e=zg;if(zg=Vg=null,SV(t),e)for(t=0;t<e.length;t++)SV(e[t])}}function p7(t,e){return t(e)}function f7(){}var qI=!1;function m7(t,e,i){if(qI)return t(e,i);qI=!0;try{return p7(t,e,i)}finally{qI=!1,(Vg!==null||zg!==null)&&(f7(),h7())}}function vb(t,e){var i=t.stateNode;if(i===null)return null;var r=KM(i);if(r===null)return null;i=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(K(231,e,typeof i));return i}var BP=!1;if(kc)try{var Iv={};Object.defineProperty(Iv,"passive",{get:function(){BP=!0}}),window.addEventListener("test",Iv,Iv),window.removeEventListener("test",Iv,Iv)}catch{BP=!1}function jae(t,e,i,r,n,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(i,c)}catch(h){this.onError(h)}}var Tw=!1,WE=null,ZE=!1,GP=null,Vae={onError:function(t){Tw=!0,WE=t}};function zae(t,e,i,r,n,s,o,a,l){Tw=!1,WE=null,jae.apply(Vae,arguments)}function Uae(t,e,i,r,n,s,o,a,l){if(zae.apply(this,arguments),Tw){if(Tw){var c=WE;Tw=!1,WE=null}else throw Error(K(198));ZE||(ZE=!0,GP=c)}}function zm(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function y7(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xV(t){if(zm(t)!==t)throw Error(K(188))}function Bae(t){var e=t.alternate;if(!e){if(e=zm(t),e===null)throw Error(K(188));return e!==t?null:t}for(var i=t,r=e;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return xV(n),t;if(s===r)return xV(n),e;s=s.sibling}throw Error(K(188))}if(i.return!==r.return)i=n,r=s;else{for(var o=!1,a=n.child;a;){if(a===i){o=!0,i=n,r=s;break}if(a===r){o=!0,r=n,i=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===i){o=!0,i=s,r=n;break}if(a===r){o=!0,r=s,i=n;break}a=a.sibling}if(!o)throw Error(K(189))}}if(i.alternate!==r)throw Error(K(190))}if(i.tag!==3)throw Error(K(188));return i.stateNode.current===i?t:e}function g7(t){return t=Bae(t),t!==null?v7(t):null}function v7(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v7(t);if(e!==null)return e;t=t.sibling}return null}var _7=Xs.unstable_scheduleCallback,$V=Xs.unstable_cancelCallback,Gae=Xs.unstable_shouldYield,Hae=Xs.unstable_requestPaint,Fi=Xs.unstable_now,qae=Xs.unstable_getCurrentPriorityLevel,H3=Xs.unstable_ImmediatePriority,w7=Xs.unstable_UserBlockingPriority,YE=Xs.unstable_NormalPriority,Wae=Xs.unstable_LowPriority,b7=Xs.unstable_IdlePriority,WM=null,Kl=null;function Zae(t){if(Kl&&typeof Kl.onCommitFiberRoot=="function")try{Kl.onCommitFiberRoot(WM,t,void 0,(t.current.flags&128)===128)}catch{}}var Za=Math.clz32?Math.clz32:Kae,Yae=Math.log,Jae=Math.LN2;function Kae(t){return t>>>=0,t===0?32:31-(Yae(t)/Jae|0)|0}var bS=64,SS=4194304;function y_(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function JE(t,e){var i=t.pendingLanes;if(i===0)return 0;var r=0,n=t.suspendedLanes,s=t.pingedLanes,o=i&268435455;if(o!==0){var a=o&~n;a!==0?r=y_(a):(s&=o,s!==0&&(r=y_(s)))}else o=i&~n,o!==0?r=y_(o):s!==0&&(r=y_(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&n)&&(n=r&-r,s=e&-e,n>=s||n===16&&(s&4194240)!==0))return e;if(r&4&&(r|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)i=31-Za(e),n=1<<i,r|=t[i],e&=~n;return r}function Qae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xae(t,e){for(var i=t.suspendedLanes,r=t.pingedLanes,n=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Za(s),a=1<<o,l=n[o];l===-1?(!(a&i)||a&r)&&(n[o]=Qae(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function HP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function S7(){var t=bS;return bS<<=1,!(bS&4194240)&&(bS=64),t}function WI(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function b1(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Za(e),t[e]=i}function ele(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<i;){var n=31-Za(i),s=1<<n;e[n]=0,r[n]=-1,t[n]=-1,i&=~s}}function q3(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var r=31-Za(i),n=1<<r;n&e|t[r]&e&&(t[r]|=e),i&=~n}}var Ot=0;function x7(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $7,W3,E7,M7,T7,qP=!1,xS=[],Ph=null,Ah=null,Oh=null,_b=new Map,wb=new Map,ch=[],tle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EV(t,e){switch(t){case"focusin":case"focusout":Ph=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Oh=null;break;case"pointerover":case"pointerout":_b.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wb.delete(e.pointerId)}}function kv(t,e,i,r,n,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},e!==null&&(e=x1(e),e!==null&&W3(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function ile(t,e,i,r,n){switch(e){case"focusin":return Ph=kv(Ph,t,e,i,r,n),!0;case"dragenter":return Ah=kv(Ah,t,e,i,r,n),!0;case"mouseover":return Oh=kv(Oh,t,e,i,r,n),!0;case"pointerover":var s=n.pointerId;return _b.set(s,kv(_b.get(s)||null,t,e,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,wb.set(s,kv(wb.get(s)||null,t,e,i,r,n)),!0}return!1}function I7(t){var e=Vf(t.target);if(e!==null){var i=zm(e);if(i!==null){if(e=i.tag,e===13){if(e=y7(i),e!==null){t.blockedOn=e,T7(t.priority,function(){E7(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function a$(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=WP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var r=new i.constructor(i.type,i);zP=r,i.target.dispatchEvent(r),zP=null}else return e=x1(i),e!==null&&W3(e),t.blockedOn=i,!1;e.shift()}return!0}function MV(t,e,i){a$(t)&&i.delete(e)}function rle(){qP=!1,Ph!==null&&a$(Ph)&&(Ph=null),Ah!==null&&a$(Ah)&&(Ah=null),Oh!==null&&a$(Oh)&&(Oh=null),_b.forEach(MV),wb.forEach(MV)}function Cv(t,e){t.blockedOn===e&&(t.blockedOn=null,qP||(qP=!0,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,rle)))}function bb(t){function e(n){return Cv(n,t)}if(0<xS.length){Cv(xS[0],t);for(var i=1;i<xS.length;i++){var r=xS[i];r.blockedOn===t&&(r.blockedOn=null)}}for(Ph!==null&&Cv(Ph,t),Ah!==null&&Cv(Ah,t),Oh!==null&&Cv(Oh,t),_b.forEach(e),wb.forEach(e),i=0;i<ch.length;i++)r=ch[i],r.blockedOn===t&&(r.blockedOn=null);for(;0<ch.length&&(i=ch[0],i.blockedOn===null);)I7(i),i.blockedOn===null&&ch.shift()}var Ug=Dc.ReactCurrentBatchConfig,KE=!0;function nle(t,e,i,r){var n=Ot,s=Ug.transition;Ug.transition=null;try{Ot=1,Z3(t,e,i,r)}finally{Ot=n,Ug.transition=s}}function sle(t,e,i,r){var n=Ot,s=Ug.transition;Ug.transition=null;try{Ot=4,Z3(t,e,i,r)}finally{Ot=n,Ug.transition=s}}function Z3(t,e,i,r){if(KE){var n=WP(t,e,i,r);if(n===null)rk(t,e,r,QE,i),EV(t,r);else if(ile(n,t,e,i,r))r.stopPropagation();else if(EV(t,r),e&4&&-1<tle.indexOf(t)){for(;n!==null;){var s=x1(n);if(s!==null&&$7(s),s=WP(t,e,i,r),s===null&&rk(t,e,r,QE,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else rk(t,e,r,null,i)}}var QE=null;function WP(t,e,i,r){if(QE=null,t=G3(r),t=Vf(t),t!==null)if(e=zm(t),e===null)t=null;else if(i=e.tag,i===13){if(t=y7(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return QE=t,null}function k7(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qae()){case H3:return 1;case w7:return 4;case YE:case Wae:return 16;case b7:return 536870912;default:return 16}default:return 16}}var gh=null,Y3=null,l$=null;function C7(){if(l$)return l$;var t,e=Y3,i=e.length,r,n="value"in gh?gh.value:gh.textContent,s=n.length;for(t=0;t<i&&e[t]===n[t];t++);var o=i-t;for(r=1;r<=o&&e[i-r]===n[s-r];r++);return l$=n.slice(t,1<r?1-r:void 0)}function u$(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $S(){return!0}function TV(){return!1}function no(t){function e(i,r,n,s,o){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],this[a]=i?i(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$S:TV,this.isPropagationStopped=TV,this}return bi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=$S)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=$S)},persist:function(){},isPersistent:$S}),e}var H0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},J3=no(H0),S1=bi({},H0,{view:0,detail:0}),ole=no(S1),ZI,YI,Pv,ZM=bi({},S1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K3,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pv&&(Pv&&t.type==="mousemove"?(ZI=t.screenX-Pv.screenX,YI=t.screenY-Pv.screenY):YI=ZI=0,Pv=t),ZI)},movementY:function(t){return"movementY"in t?t.movementY:YI}}),IV=no(ZM),ale=bi({},ZM,{dataTransfer:0}),lle=no(ale),ule=bi({},S1,{relatedTarget:0}),JI=no(ule),cle=bi({},H0,{animationName:0,elapsedTime:0,pseudoElement:0}),dle=no(cle),hle=bi({},H0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ple=no(hle),fle=bi({},H0,{data:0}),kV=no(fle),mle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gle[t])?!!e[t]:!1}function K3(){return vle}var _le=bi({},S1,{key:function(t){if(t.key){var e=mle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=u$(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K3,charCode:function(t){return t.type==="keypress"?u$(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?u$(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wle=no(_le),ble=bi({},ZM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CV=no(ble),Sle=bi({},S1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K3}),xle=no(Sle),$le=bi({},H0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ele=no($le),Mle=bi({},ZM,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tle=no(Mle),Ile=[9,13,27,32],Q3=kc&&"CompositionEvent"in window,Iw=null;kc&&"documentMode"in document&&(Iw=document.documentMode);var kle=kc&&"TextEvent"in window&&!Iw,P7=kc&&(!Q3||Iw&&8<Iw&&11>=Iw),PV=String.fromCharCode(32),AV=!1;function A7(t,e){switch(t){case"keyup":return Ile.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O7(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hg=!1;function Cle(t,e){switch(t){case"compositionend":return O7(e);case"keypress":return e.which!==32?null:(AV=!0,PV);case"textInput":return t=e.data,t===PV&&AV?null:t;default:return null}}function Ple(t,e){if(hg)return t==="compositionend"||!Q3&&A7(t,e)?(t=C7(),l$=Y3=gh=null,hg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P7&&e.locale!=="ko"?null:e.data;default:return null}}var Ale={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OV(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ale[t.type]:e==="textarea"}function L7(t,e,i,r){d7(r),e=XE(e,"onChange"),0<e.length&&(i=new J3("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var kw=null,Sb=null;function Ole(t){H7(t,0)}function YM(t){var e=mg(t);if(n7(e))return t}function Lle(t,e){if(t==="change")return e}var R7=!1;if(kc){var KI;if(kc){var QI="oninput"in document;if(!QI){var LV=document.createElement("div");LV.setAttribute("oninput","return;"),QI=typeof LV.oninput=="function"}KI=QI}else KI=!1;R7=KI&&(!document.documentMode||9<document.documentMode)}function RV(){kw&&(kw.detachEvent("onpropertychange",F7),Sb=kw=null)}function F7(t){if(t.propertyName==="value"&&YM(Sb)){var e=[];L7(e,Sb,t,G3(t)),m7(Ole,e)}}function Rle(t,e,i){t==="focusin"?(RV(),kw=e,Sb=i,kw.attachEvent("onpropertychange",F7)):t==="focusout"&&RV()}function Fle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return YM(Sb)}function Dle(t,e){if(t==="click")return YM(e)}function Nle(t,e){if(t==="input"||t==="change")return YM(e)}function jle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nl=typeof Object.is=="function"?Object.is:jle;function xb(t,e){if(nl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!kP.call(e,n)||!nl(t[n],e[n]))return!1}return!0}function FV(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function DV(t,e){var i=FV(t);t=0;for(var r;i;){if(i.nodeType===3){if(r=t+i.textContent.length,t<=e&&r>=e)return{node:i,offset:e-t};t=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=FV(i)}}function D7(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D7(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N7(){for(var t=window,e=qE();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=qE(t.document)}return e}function X3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Vle(t){var e=N7(),i=t.focusedElem,r=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&D7(i.ownerDocument.documentElement,i)){if(r!==null&&X3(i)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!t.extend&&s>r&&(n=r,r=s,s=n),n=DV(i,s);var o=DV(i,r);n&&o&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zle=kc&&"documentMode"in document&&11>=document.documentMode,pg=null,ZP=null,Cw=null,YP=!1;function NV(t,e,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;YP||pg==null||pg!==qE(r)||(r=pg,"selectionStart"in r&&X3(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cw&&xb(Cw,r)||(Cw=r,r=XE(ZP,"onSelect"),0<r.length&&(e=new J3("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=pg)))}function ES(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var fg={animationend:ES("Animation","AnimationEnd"),animationiteration:ES("Animation","AnimationIteration"),animationstart:ES("Animation","AnimationStart"),transitionend:ES("Transition","TransitionEnd")},XI={},j7={};kc&&(j7=document.createElement("div").style,"AnimationEvent"in window||(delete fg.animationend.animation,delete fg.animationiteration.animation,delete fg.animationstart.animation),"TransitionEvent"in window||delete fg.transitionend.transition);function JM(t){if(XI[t])return XI[t];if(!fg[t])return t;var e=fg[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in j7)return XI[t]=e[i];return t}var V7=JM("animationend"),z7=JM("animationiteration"),U7=JM("animationstart"),B7=JM("transitionend"),G7=new Map,jV="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function op(t,e){G7.set(t,e),Vm(e,[t])}for(var ek=0;ek<jV.length;ek++){var tk=jV[ek],Ule=tk.toLowerCase(),Ble=tk[0].toUpperCase()+tk.slice(1);op(Ule,"on"+Ble)}op(V7,"onAnimationEnd");op(z7,"onAnimationIteration");op(U7,"onAnimationStart");op("dblclick","onDoubleClick");op("focusin","onFocus");op("focusout","onBlur");op(B7,"onTransitionEnd");f0("onMouseEnter",["mouseout","mouseover"]);f0("onMouseLeave",["mouseout","mouseover"]);f0("onPointerEnter",["pointerout","pointerover"]);f0("onPointerLeave",["pointerout","pointerover"]);Vm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vm("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var g_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gle=new Set("cancel close invalid load scroll toggle".split(" ").concat(g_));function VV(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,Uae(r,e,void 0,t),t.currentTarget=null}function H7(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var r=t[i],n=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;VV(n,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;VV(n,a,c),s=l}}}if(ZE)throw t=GP,ZE=!1,GP=null,t}function ii(t,e){var i=e[eA];i===void 0&&(i=e[eA]=new Set);var r=t+"__bubble";i.has(r)||(q7(e,t,2,!1),i.add(r))}function ik(t,e,i){var r=0;e&&(r|=4),q7(i,t,r,e)}var MS="_reactListening"+Math.random().toString(36).slice(2);function $b(t){if(!t[MS]){t[MS]=!0,X9.forEach(function(i){i!=="selectionchange"&&(Gle.has(i)||ik(i,!1,t),ik(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[MS]||(e[MS]=!0,ik("selectionchange",!1,e))}}function q7(t,e,i,r){switch(k7(e)){case 1:var n=nle;break;case 4:n=sle;break;default:n=Z3}i=n.bind(null,e,i,t),n=void 0,!BP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),r?n!==void 0?t.addEventListener(e,i,{capture:!0,passive:n}):t.addEventListener(e,i,!0):n!==void 0?t.addEventListener(e,i,{passive:n}):t.addEventListener(e,i,!1)}function rk(t,e,i,r,n){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=Vf(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}m7(function(){var c=s,h=G3(i),p=[];e:{var f=G7.get(t);if(f!==void 0){var y=J3,g=t;switch(t){case"keypress":if(u$(i)===0)break e;case"keydown":case"keyup":y=wle;break;case"focusin":g="focus",y=JI;break;case"focusout":g="blur",y=JI;break;case"beforeblur":case"afterblur":y=JI;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=IV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=lle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=xle;break;case V7:case z7:case U7:y=dle;break;case B7:y=Ele;break;case"scroll":y=ole;break;case"wheel":y=Tle;break;case"copy":case"cut":case"paste":y=ple;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=CV}var v=(e&4)!==0,_=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var S=c,b;S!==null;){b=S;var $=b.stateNode;if(b.tag===5&&$!==null&&(b=$,w!==null&&($=vb(S,w),$!=null&&v.push(Eb(S,$,b)))),_)break;S=S.return}0<v.length&&(f=new y(f,g,null,i,h),p.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&i!==zP&&(g=i.relatedTarget||i.fromElement)&&(Vf(g)||g[Cc]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(g=i.relatedTarget||i.toElement,y=c,g=g?Vf(g):null,g!==null&&(_=zm(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(v=IV,$="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(v=CV,$="onPointerLeave",w="onPointerEnter",S="pointer"),_=y==null?f:mg(y),b=g==null?f:mg(g),f=new v($,S+"leave",y,i,h),f.target=_,f.relatedTarget=b,$=null,Vf(h)===c&&(v=new v(w,S+"enter",g,i,h),v.target=b,v.relatedTarget=_,$=v),_=$,y&&g)t:{for(v=y,w=g,S=0,b=v;b;b=Qm(b))S++;for(b=0,$=w;$;$=Qm($))b++;for(;0<S-b;)v=Qm(v),S--;for(;0<b-S;)w=Qm(w),b--;for(;S--;){if(v===w||w!==null&&v===w.alternate)break t;v=Qm(v),w=Qm(w)}v=null}else v=null;y!==null&&zV(p,f,y,v,!1),g!==null&&_!==null&&zV(p,_,g,v,!0)}}e:{if(f=c?mg(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var T=Lle;else if(OV(f))if(R7)T=Nle;else{T=Fle;var I=Rle}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=Dle);if(T&&(T=T(t,c))){L7(p,T,i,h);break e}I&&I(t,f,c),t==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&FP(f,"number",f.value)}switch(I=c?mg(c):window,t){case"focusin":(OV(I)||I.contentEditable==="true")&&(pg=I,ZP=c,Cw=null);break;case"focusout":Cw=ZP=pg=null;break;case"mousedown":YP=!0;break;case"contextmenu":case"mouseup":case"dragend":YP=!1,NV(p,i,h);break;case"selectionchange":if(zle)break;case"keydown":case"keyup":NV(p,i,h)}var A;if(Q3)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else hg?A7(t,i)&&(L="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(L="onCompositionStart");L&&(P7&&i.locale!=="ko"&&(hg||L!=="onCompositionStart"?L==="onCompositionEnd"&&hg&&(A=C7()):(gh=h,Y3="value"in gh?gh.value:gh.textContent,hg=!0)),I=XE(c,L),0<I.length&&(L=new kV(L,t,null,i,h),p.push({event:L,listeners:I}),A?L.data=A:(A=O7(i),A!==null&&(L.data=A)))),(A=kle?Cle(t,i):Ple(t,i))&&(c=XE(c,"onBeforeInput"),0<c.length&&(h=new kV("onBeforeInput","beforeinput",null,i,h),p.push({event:h,listeners:c}),h.data=A))}H7(p,e)})}function Eb(t,e,i){return{instance:t,listener:e,currentTarget:i}}function XE(t,e){for(var i=e+"Capture",r=[];t!==null;){var n=t,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=vb(t,i),s!=null&&r.unshift(Eb(t,s,n)),s=vb(t,e),s!=null&&r.push(Eb(t,s,n))),t=t.return}return r}function Qm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zV(t,e,i,r,n){for(var s=e._reactName,o=[];i!==null&&i!==r;){var a=i,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,n?(l=vb(i,s),l!=null&&o.unshift(Eb(i,l,a))):n||(l=vb(i,s),l!=null&&o.push(Eb(i,l,a)))),i=i.return}o.length!==0&&t.push({event:e,listeners:o})}var Hle=/\r\n?/g,qle=/\u0000|\uFFFD/g;function UV(t){return(typeof t=="string"?t:""+t).replace(Hle,`
`).replace(qle,"")}function TS(t,e,i){if(e=UV(e),UV(t)!==e&&i)throw Error(K(425))}function e2(){}var JP=null,KP=null;function QP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var XP=typeof setTimeout=="function"?setTimeout:void 0,Wle=typeof clearTimeout=="function"?clearTimeout:void 0,BV=typeof Promise=="function"?Promise:void 0,Zle=typeof queueMicrotask=="function"?queueMicrotask:typeof BV<"u"?function(t){return BV.resolve(null).then(t).catch(Yle)}:XP;function Yle(t){setTimeout(function(){throw t})}function nk(t,e){var i=e,r=0;do{var n=i.nextSibling;if(t.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){t.removeChild(n),bb(e);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);bb(e)}function Lh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function GV(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var q0=Math.random().toString(36).slice(2),Yl="__reactFiber$"+q0,Mb="__reactProps$"+q0,Cc="__reactContainer$"+q0,eA="__reactEvents$"+q0,Jle="__reactListeners$"+q0,Kle="__reactHandles$"+q0;function Vf(t){var e=t[Yl];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Cc]||i[Yl]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=GV(t);t!==null;){if(i=t[Yl])return i;t=GV(t)}return e}t=i,i=t.parentNode}return null}function x1(t){return t=t[Yl]||t[Cc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mg(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function KM(t){return t[Mb]||null}var tA=[],yg=-1;function ap(t){return{current:t}}function oi(t){0>yg||(t.current=tA[yg],tA[yg]=null,yg--)}function Qt(t,e){yg++,tA[yg]=t.current,t.current=e}var Hh={},bn=ap(Hh),ms=ap(!1),vm=Hh;function m0(t,e){var i=t.type.contextTypes;if(!i)return Hh;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function ys(t){return t=t.childContextTypes,t!=null}function t2(){oi(ms),oi(bn)}function HV(t,e,i){if(bn.current!==Hh)throw Error(K(168));Qt(bn,e),Qt(ms,i)}function W7(t,e,i){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in e))throw Error(K(108,Rae(t)||"Unknown",n));return bi({},i,r)}function i2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hh,vm=bn.current,Qt(bn,t),Qt(ms,ms.current),!0}function qV(t,e,i){var r=t.stateNode;if(!r)throw Error(K(169));i?(t=W7(t,e,vm),r.__reactInternalMemoizedMergedChildContext=t,oi(ms),oi(bn),Qt(bn,t)):oi(ms),Qt(ms,i)}var oc=null,QM=!1,sk=!1;function Z7(t){oc===null?oc=[t]:oc.push(t)}function Qle(t){QM=!0,Z7(t)}function lp(){if(!sk&&oc!==null){sk=!0;var t=0,e=Ot;try{var i=oc;for(Ot=1;t<i.length;t++){var r=i[t];do r=r(!0);while(r!==null)}oc=null,QM=!1}catch(n){throw oc!==null&&(oc=oc.slice(t+1)),_7(H3,lp),n}finally{Ot=e,sk=!1}}return null}var gg=[],vg=0,r2=null,n2=0,Po=[],Ao=0,_m=null,dc=1,hc="";function Cp(t,e){gg[vg++]=n2,gg[vg++]=r2,r2=t,n2=e}function Y7(t,e,i){Po[Ao++]=dc,Po[Ao++]=hc,Po[Ao++]=_m,_m=t;var r=dc;t=hc;var n=32-Za(r)-1;r&=~(1<<n),i+=1;var s=32-Za(e)+n;if(30<s){var o=n-n%5;s=(r&(1<<o)-1).toString(32),r>>=o,n-=o,dc=1<<32-Za(e)+n|i<<n|r,hc=s+t}else dc=1<<s|i<<n|r,hc=t}function eD(t){t.return!==null&&(Cp(t,1),Y7(t,1,0))}function tD(t){for(;t===r2;)r2=gg[--vg],gg[vg]=null,n2=gg[--vg],gg[vg]=null;for(;t===_m;)_m=Po[--Ao],Po[Ao]=null,hc=Po[--Ao],Po[Ao]=null,dc=Po[--Ao],Po[Ao]=null}var qs=null,Gs=null,hi=!1,Na=null;function J7(t,e){var i=Fo(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function WV(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qs=t,Gs=Lh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qs=t,Gs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=_m!==null?{id:dc,overflow:hc}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=Fo(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,qs=t,Gs=null,!0):!1;default:return!1}}function iA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rA(t){if(hi){var e=Gs;if(e){var i=e;if(!WV(t,e)){if(iA(t))throw Error(K(418));e=Lh(i.nextSibling);var r=qs;e&&WV(t,e)?J7(r,i):(t.flags=t.flags&-4097|2,hi=!1,qs=t)}}else{if(iA(t))throw Error(K(418));t.flags=t.flags&-4097|2,hi=!1,qs=t}}}function ZV(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qs=t}function IS(t){if(t!==qs)return!1;if(!hi)return ZV(t),hi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!QP(t.type,t.memoizedProps)),e&&(e=Gs)){if(iA(t))throw K7(),Error(K(418));for(;e;)J7(t,e),e=Lh(e.nextSibling)}if(ZV(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){Gs=Lh(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}Gs=null}}else Gs=qs?Lh(t.stateNode.nextSibling):null;return!0}function K7(){for(var t=Gs;t;)t=Lh(t.nextSibling)}function y0(){Gs=qs=null,hi=!1}function iD(t){Na===null?Na=[t]:Na.push(t)}var Xle=Dc.ReactCurrentBatchConfig;function Ca(t,e){if(t&&t.defaultProps){e=bi({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var s2=ap(null),o2=null,_g=null,rD=null;function nD(){rD=_g=o2=null}function sD(t){var e=s2.current;oi(s2),t._currentValue=e}function nA(t,e,i){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===i)break;t=t.return}}function Bg(t,e){o2=t,rD=_g=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fs=!0),t.firstContext=null)}function Ho(t){var e=t._currentValue;if(rD!==t)if(t={context:t,memoizedValue:e,next:null},_g===null){if(o2===null)throw Error(K(308));_g=t,o2.dependencies={lanes:0,firstContext:t}}else _g=_g.next=t;return e}var zf=null;function oD(t){zf===null?zf=[t]:zf.push(t)}function Q7(t,e,i,r){var n=e.interleaved;return n===null?(i.next=i,oD(e)):(i.next=n.next,n.next=i),e.interleaved=i,Pc(t,r)}function Pc(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Qd=!1;function aD(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X7(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rh(t,e,i){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pt&2){var n=r.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),r.pending=e,Pc(t,i)}return n=r.interleaved,n===null?(e.next=e,oD(r)):(e.next=n.next,n.next=e),r.interleaved=e,Pc(t,i)}function c$(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,q3(t,i)}}function YV(t,e){var i=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=o:s=s.next=o,i=i.next}while(i!==null);s===null?n=s=e:s=s.next=e}else n=s=e;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function a2(t,e,i,r){var n=t.updateQueue;Qd=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var p=n.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,y=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(f=e,y=i,v.tag){case 1:if(g=v.payload,typeof g=="function"){p=g.call(y,p,f);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(y,p,f):g,f==null)break e;p=bi({},p,f);break e;case 2:Qd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=p):h=h.next=y,o|=f;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;f=a,a=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(1);if(h===null&&(l=p),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else s===null&&(n.shared.lanes=0);bm|=o,t.lanes=o,t.memoizedState=p}}function JV(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(K(191,n));n.call(r)}}}var eH=new Q9.Component().refs;function sA(t,e,i,r){e=t.memoizedState,i=i(r,e),i=i==null?e:bi({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var XM={isMounted:function(t){return(t=t._reactInternals)?zm(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=zn(),n=Dh(t),s=gc(r,n);s.payload=e,i!=null&&(s.callback=i),e=Rh(t,s,n),e!==null&&(Ya(e,t,n,r),c$(e,t,n))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=zn(),n=Dh(t),s=gc(r,n);s.tag=1,s.payload=e,i!=null&&(s.callback=i),e=Rh(t,s,n),e!==null&&(Ya(e,t,n,r),c$(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=zn(),r=Dh(t),n=gc(i,r);n.tag=2,e!=null&&(n.callback=e),e=Rh(t,n,r),e!==null&&(Ya(e,t,r,i),c$(e,t,r))}};function KV(t,e,i,r,n,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xb(i,r)||!xb(n,s):!0}function tH(t,e,i){var r=!1,n=Hh,s=e.contextType;return typeof s=="object"&&s!==null?s=Ho(s):(n=ys(e)?vm:bn.current,r=e.contextTypes,s=(r=r!=null)?m0(t,n):Hh),e=new e(i,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=XM,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=s),e}function QV(t,e,i,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&XM.enqueueReplaceState(e,e.state,null)}function oA(t,e,i,r){var n=t.stateNode;n.props=i,n.state=t.memoizedState,n.refs=eH,aD(t);var s=e.contextType;typeof s=="object"&&s!==null?n.context=Ho(s):(s=ys(e)?vm:bn.current,n.context=m0(t,s)),n.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sA(t,e,s,i),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&XM.enqueueReplaceState(n,n.state,null),a2(t,i,n,r),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Av(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(K(309));var r=i.stateNode}if(!r)throw Error(K(147,t));var n=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=n.refs;a===eH&&(a=n.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!i._owner)throw Error(K(290,t))}return t}function kS(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function XV(t){var e=t._init;return e(t._payload)}function iH(t){function e(w,S){if(t){var b=w.deletions;b===null?(w.deletions=[S],w.flags|=16):b.push(S)}}function i(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function r(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function n(w,S){return w=Nh(w,S),w.index=0,w.sibling=null,w}function s(w,S,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<S?(w.flags|=2,S):b):(w.flags|=2,S)):(w.flags|=1048576,S)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,S,b,$){return S===null||S.tag!==6?(S=hk(b,w.mode,$),S.return=w,S):(S=n(S,b),S.return=w,S)}function l(w,S,b,$){var T=b.type;return T===dg?h(w,S,b.props.children,$,b.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Kd&&XV(T)===S.type)?($=n(S,b.props),$.ref=Av(w,S,b),$.return=w,$):($=y$(b.type,b.key,b.props,null,w.mode,$),$.ref=Av(w,S,b),$.return=w,$)}function c(w,S,b,$){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=pk(b,w.mode,$),S.return=w,S):(S=n(S,b.children||[]),S.return=w,S)}function h(w,S,b,$,T){return S===null||S.tag!==7?(S=Xf(b,w.mode,$,T),S.return=w,S):(S=n(S,b),S.return=w,S)}function p(w,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=hk(""+S,w.mode,b),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vS:return b=y$(S.type,S.key,S.props,null,w.mode,b),b.ref=Av(w,null,S),b.return=w,b;case cg:return S=pk(S,w.mode,b),S.return=w,S;case Kd:var $=S._init;return p(w,$(S._payload),b)}if(m_(S)||Tv(S))return S=Xf(S,w.mode,b,null),S.return=w,S;kS(w,S)}return null}function f(w,S,b,$){var T=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:a(w,S,""+b,$);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vS:return b.key===T?l(w,S,b,$):null;case cg:return b.key===T?c(w,S,b,$):null;case Kd:return T=b._init,f(w,S,T(b._payload),$)}if(m_(b)||Tv(b))return T!==null?null:h(w,S,b,$,null);kS(w,b)}return null}function y(w,S,b,$,T){if(typeof $=="string"&&$!==""||typeof $=="number")return w=w.get(b)||null,a(S,w,""+$,T);if(typeof $=="object"&&$!==null){switch($.$$typeof){case vS:return w=w.get($.key===null?b:$.key)||null,l(S,w,$,T);case cg:return w=w.get($.key===null?b:$.key)||null,c(S,w,$,T);case Kd:var I=$._init;return y(w,S,b,I($._payload),T)}if(m_($)||Tv($))return w=w.get(b)||null,h(S,w,$,T,null);kS(S,$)}return null}function g(w,S,b,$){for(var T=null,I=null,A=S,L=S=0,z=null;A!==null&&L<b.length;L++){A.index>L?(z=A,A=null):z=A.sibling;var j=f(w,A,b[L],$);if(j===null){A===null&&(A=z);break}t&&A&&j.alternate===null&&e(w,A),S=s(j,S,L),I===null?T=j:I.sibling=j,I=j,A=z}if(L===b.length)return i(w,A),hi&&Cp(w,L),T;if(A===null){for(;L<b.length;L++)A=p(w,b[L],$),A!==null&&(S=s(A,S,L),I===null?T=A:I.sibling=A,I=A);return hi&&Cp(w,L),T}for(A=r(w,A);L<b.length;L++)z=y(A,w,L,b[L],$),z!==null&&(t&&z.alternate!==null&&A.delete(z.key===null?L:z.key),S=s(z,S,L),I===null?T=z:I.sibling=z,I=z);return t&&A.forEach(function(H){return e(w,H)}),hi&&Cp(w,L),T}function v(w,S,b,$){var T=Tv(b);if(typeof T!="function")throw Error(K(150));if(b=T.call(b),b==null)throw Error(K(151));for(var I=T=null,A=S,L=S=0,z=null,j=b.next();A!==null&&!j.done;L++,j=b.next()){A.index>L?(z=A,A=null):z=A.sibling;var H=f(w,A,j.value,$);if(H===null){A===null&&(A=z);break}t&&A&&H.alternate===null&&e(w,A),S=s(H,S,L),I===null?T=H:I.sibling=H,I=H,A=z}if(j.done)return i(w,A),hi&&Cp(w,L),T;if(A===null){for(;!j.done;L++,j=b.next())j=p(w,j.value,$),j!==null&&(S=s(j,S,L),I===null?T=j:I.sibling=j,I=j);return hi&&Cp(w,L),T}for(A=r(w,A);!j.done;L++,j=b.next())j=y(A,w,L,j.value,$),j!==null&&(t&&j.alternate!==null&&A.delete(j.key===null?L:j.key),S=s(j,S,L),I===null?T=j:I.sibling=j,I=j);return t&&A.forEach(function(J){return e(w,J)}),hi&&Cp(w,L),T}function _(w,S,b,$){if(typeof b=="object"&&b!==null&&b.type===dg&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case vS:e:{for(var T=b.key,I=S;I!==null;){if(I.key===T){if(T=b.type,T===dg){if(I.tag===7){i(w,I.sibling),S=n(I,b.props.children),S.return=w,w=S;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Kd&&XV(T)===I.type){i(w,I.sibling),S=n(I,b.props),S.ref=Av(w,I,b),S.return=w,w=S;break e}i(w,I);break}else e(w,I);I=I.sibling}b.type===dg?(S=Xf(b.props.children,w.mode,$,b.key),S.return=w,w=S):($=y$(b.type,b.key,b.props,null,w.mode,$),$.ref=Av(w,S,b),$.return=w,w=$)}return o(w);case cg:e:{for(I=b.key;S!==null;){if(S.key===I)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){i(w,S.sibling),S=n(S,b.children||[]),S.return=w,w=S;break e}else{i(w,S);break}else e(w,S);S=S.sibling}S=pk(b,w.mode,$),S.return=w,w=S}return o(w);case Kd:return I=b._init,_(w,S,I(b._payload),$)}if(m_(b))return g(w,S,b,$);if(Tv(b))return v(w,S,b,$);kS(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(i(w,S.sibling),S=n(S,b),S.return=w,w=S):(i(w,S),S=hk(b,w.mode,$),S.return=w,w=S),o(w)):i(w,S)}return _}var g0=iH(!0),rH=iH(!1),$1={},Ql=ap($1),Tb=ap($1),Ib=ap($1);function Uf(t){if(t===$1)throw Error(K(174));return t}function lD(t,e){switch(Qt(Ib,e),Qt(Tb,t),Qt(Ql,$1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:NP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=NP(e,t)}oi(Ql),Qt(Ql,e)}function v0(){oi(Ql),oi(Tb),oi(Ib)}function nH(t){Uf(Ib.current);var e=Uf(Ql.current),i=NP(e,t.type);e!==i&&(Qt(Tb,t),Qt(Ql,i))}function uD(t){Tb.current===t&&(oi(Ql),oi(Tb))}var vi=ap(0);function l2(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ok=[];function cD(){for(var t=0;t<ok.length;t++)ok[t]._workInProgressVersionPrimary=null;ok.length=0}var d$=Dc.ReactCurrentDispatcher,ak=Dc.ReactCurrentBatchConfig,wm=0,wi=null,yr=null,Pr=null,u2=!1,Pw=!1,kb=0,eue=0;function en(){throw Error(K(321))}function dD(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!nl(t[i],e[i]))return!1;return!0}function hD(t,e,i,r,n,s){if(wm=s,wi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,d$.current=t===null||t.memoizedState===null?nue:sue,t=i(r,n),Pw){s=0;do{if(Pw=!1,kb=0,25<=s)throw Error(K(301));s+=1,Pr=yr=null,e.updateQueue=null,d$.current=oue,t=i(r,n)}while(Pw)}if(d$.current=c2,e=yr!==null&&yr.next!==null,wm=0,Pr=yr=wi=null,u2=!1,e)throw Error(K(300));return t}function pD(){var t=kb!==0;return kb=0,t}function Bl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?wi.memoizedState=Pr=t:Pr=Pr.next=t,Pr}function qo(){if(yr===null){var t=wi.alternate;t=t!==null?t.memoizedState:null}else t=yr.next;var e=Pr===null?wi.memoizedState:Pr.next;if(e!==null)Pr=e,yr=t;else{if(t===null)throw Error(K(310));yr=t,t={memoizedState:yr.memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},Pr===null?wi.memoizedState=Pr=t:Pr=Pr.next=t}return Pr}function Cb(t,e){return typeof e=="function"?e(t):e}function lk(t){var e=qo(),i=e.queue;if(i===null)throw Error(K(311));i.lastRenderedReducer=t;var r=yr,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((wm&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,wi.lanes|=h,bm|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,nl(r,e.memoizedState)||(fs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,i.lastRenderedState=r}if(t=i.interleaved,t!==null){n=t;do s=n.lane,wi.lanes|=s,bm|=s,n=n.next;while(n!==t)}else n===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function uk(t){var e=qo(),i=e.queue;if(i===null)throw Error(K(311));i.lastRenderedReducer=t;var r=i.dispatch,n=i.pending,s=e.memoizedState;if(n!==null){i.pending=null;var o=n=n.next;do s=t(s,o.action),o=o.next;while(o!==n);nl(s,e.memoizedState)||(fs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),i.lastRenderedState=s}return[s,r]}function sH(){}function oH(t,e){var i=wi,r=qo(),n=e(),s=!nl(r.memoizedState,n);if(s&&(r.memoizedState=n,fs=!0),r=r.queue,fD(uH.bind(null,i,r,t),[t]),r.getSnapshot!==e||s||Pr!==null&&Pr.memoizedState.tag&1){if(i.flags|=2048,Pb(9,lH.bind(null,i,r,n,e),void 0,null),Rr===null)throw Error(K(349));wm&30||aH(i,e,n)}return n}function aH(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=wi.updateQueue,e===null?(e={lastEffect:null,stores:null},wi.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function lH(t,e,i,r){e.value=i,e.getSnapshot=r,cH(e)&&dH(t)}function uH(t,e,i){return i(function(){cH(e)&&dH(t)})}function cH(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!nl(t,i)}catch{return!0}}function dH(t){var e=Pc(t,1);e!==null&&Ya(e,t,1,-1)}function e4(t){var e=Bl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cb,lastRenderedState:t},e.queue=t,t=t.dispatch=rue.bind(null,wi,t),[e.memoizedState,t]}function Pb(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},e=wi.updateQueue,e===null?(e={lastEffect:null,stores:null},wi.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t)),t}function hH(){return qo().memoizedState}function h$(t,e,i,r){var n=Bl();wi.flags|=t,n.memoizedState=Pb(1|e,i,void 0,r===void 0?null:r)}function eT(t,e,i,r){var n=qo();r=r===void 0?null:r;var s=void 0;if(yr!==null){var o=yr.memoizedState;if(s=o.destroy,r!==null&&dD(r,o.deps)){n.memoizedState=Pb(e,i,s,r);return}}wi.flags|=t,n.memoizedState=Pb(1|e,i,s,r)}function t4(t,e){return h$(8390656,8,t,e)}function fD(t,e){return eT(2048,8,t,e)}function pH(t,e){return eT(4,2,t,e)}function fH(t,e){return eT(4,4,t,e)}function mH(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yH(t,e,i){return i=i!=null?i.concat([t]):null,eT(4,4,mH.bind(null,e,t),i)}function mD(){}function gH(t,e){var i=qo();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&dD(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function vH(t,e){var i=qo();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&dD(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function _H(t,e,i){return wm&21?(nl(i,e)||(i=S7(),wi.lanes|=i,bm|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fs=!0),t.memoizedState=i)}function tue(t,e){var i=Ot;Ot=i!==0&&4>i?i:4,t(!0);var r=ak.transition;ak.transition={};try{t(!1),e()}finally{Ot=i,ak.transition=r}}function wH(){return qo().memoizedState}function iue(t,e,i){var r=Dh(t);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},bH(t))SH(e,i);else if(i=Q7(t,e,i,r),i!==null){var n=zn();Ya(i,t,r,n),xH(i,e,r)}}function rue(t,e,i){var r=Dh(t),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(bH(t))SH(e,n);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,i);if(n.hasEagerState=!0,n.eagerState=a,nl(a,o)){var l=e.interleaved;l===null?(n.next=n,oD(e)):(n.next=l.next,l.next=n),e.interleaved=n;return}}catch{}finally{}i=Q7(t,e,n,r),i!==null&&(n=zn(),Ya(i,t,r,n),xH(i,e,r))}}function bH(t){var e=t.alternate;return t===wi||e!==null&&e===wi}function SH(t,e){Pw=u2=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function xH(t,e,i){if(i&4194240){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,q3(t,i)}}var c2={readContext:Ho,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},nue={readContext:Ho,useCallback:function(t,e){return Bl().memoizedState=[t,e===void 0?null:e],t},useContext:Ho,useEffect:t4,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,h$(4194308,4,mH.bind(null,e,t),i)},useLayoutEffect:function(t,e){return h$(4194308,4,t,e)},useInsertionEffect:function(t,e){return h$(4,2,t,e)},useMemo:function(t,e){var i=Bl();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=Bl();return e=i!==void 0?i(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iue.bind(null,wi,t),[r.memoizedState,t]},useRef:function(t){var e=Bl();return t={current:t},e.memoizedState=t},useState:e4,useDebugValue:mD,useDeferredValue:function(t){return Bl().memoizedState=t},useTransition:function(){var t=e4(!1),e=t[0];return t=tue.bind(null,t[1]),Bl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var r=wi,n=Bl();if(hi){if(i===void 0)throw Error(K(407));i=i()}else{if(i=e(),Rr===null)throw Error(K(349));wm&30||aH(r,e,i)}n.memoizedState=i;var s={value:i,getSnapshot:e};return n.queue=s,t4(uH.bind(null,r,s,t),[t]),r.flags|=2048,Pb(9,lH.bind(null,r,s,i,e),void 0,null),i},useId:function(){var t=Bl(),e=Rr.identifierPrefix;if(hi){var i=hc,r=dc;i=(r&~(1<<32-Za(r)-1)).toString(32)+i,e=":"+e+"R"+i,i=kb++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=eue++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sue={readContext:Ho,useCallback:gH,useContext:Ho,useEffect:fD,useImperativeHandle:yH,useInsertionEffect:pH,useLayoutEffect:fH,useMemo:vH,useReducer:lk,useRef:hH,useState:function(){return lk(Cb)},useDebugValue:mD,useDeferredValue:function(t){var e=qo();return _H(e,yr.memoizedState,t)},useTransition:function(){var t=lk(Cb)[0],e=qo().memoizedState;return[t,e]},useMutableSource:sH,useSyncExternalStore:oH,useId:wH,unstable_isNewReconciler:!1},oue={readContext:Ho,useCallback:gH,useContext:Ho,useEffect:fD,useImperativeHandle:yH,useInsertionEffect:pH,useLayoutEffect:fH,useMemo:vH,useReducer:uk,useRef:hH,useState:function(){return uk(Cb)},useDebugValue:mD,useDeferredValue:function(t){var e=qo();return yr===null?e.memoizedState=t:_H(e,yr.memoizedState,t)},useTransition:function(){var t=uk(Cb)[0],e=qo().memoizedState;return[t,e]},useMutableSource:sH,useSyncExternalStore:oH,useId:wH,unstable_isNewReconciler:!1};function _0(t,e){try{var i="",r=e;do i+=Lae(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:n,digest:null}}function ck(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function aA(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var aue=typeof WeakMap=="function"?WeakMap:Map;function $H(t,e,i){i=gc(-1,i),i.tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){h2||(h2=!0,gA=r),aA(t,e)},i}function EH(t,e,i){i=gc(-1,i),i.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var n=e.value;i.payload=function(){return r(n)},i.callback=function(){aA(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){aA(t,e),typeof r!="function"&&(Fh===null?Fh=new Set([this]):Fh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),i}function i4(t,e,i){var r=t.pingCache;if(r===null){r=t.pingCache=new aue;var n=new Set;r.set(e,n)}else n=r.get(e),n===void 0&&(n=new Set,r.set(e,n));n.has(i)||(n.add(i),t=bue.bind(null,t,e,i),e.then(t,t))}function r4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function n4(t,e,i,r,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=gc(-1,1),e.tag=2,Rh(i,e,1))),i.lanes|=1),t)}var lue=Dc.ReactCurrentOwner,fs=!1;function Nn(t,e,i,r){e.child=t===null?rH(e,null,i,r):g0(e,t.child,i,r)}function s4(t,e,i,r,n){i=i.render;var s=e.ref;return Bg(e,n),r=hD(t,e,i,r,s,n),i=pD(),t!==null&&!fs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Ac(t,e,n)):(hi&&i&&eD(e),e.flags|=1,Nn(t,e,r,n),e.child)}function o4(t,e,i,r,n){if(t===null){var s=i.type;return typeof s=="function"&&!xD(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=s,MH(t,e,s,r,n)):(t=y$(i.type,null,r,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&n)){var o=s.memoizedProps;if(i=i.compare,i=i!==null?i:xb,i(o,r)&&t.ref===e.ref)return Ac(t,e,n)}return e.flags|=1,t=Nh(s,r),t.ref=e.ref,t.return=e,e.child=t}function MH(t,e,i,r,n){if(t!==null){var s=t.memoizedProps;if(xb(s,r)&&t.ref===e.ref)if(fs=!1,e.pendingProps=r=s,(t.lanes&n)!==0)t.flags&131072&&(fs=!0);else return e.lanes=t.lanes,Ac(t,e,n)}return lA(t,e,i,r,n)}function TH(t,e,i){var r=e.pendingProps,n=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(bg,Ns),Ns|=i;else{if(!(i&1073741824))return t=s!==null?s.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qt(bg,Ns),Ns|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,Qt(bg,Ns),Ns|=r}else s!==null?(r=s.baseLanes|i,e.memoizedState=null):r=i,Qt(bg,Ns),Ns|=r;return Nn(t,e,n,i),e.child}function IH(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function lA(t,e,i,r,n){var s=ys(i)?vm:bn.current;return s=m0(e,s),Bg(e,n),i=hD(t,e,i,r,s,n),r=pD(),t!==null&&!fs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Ac(t,e,n)):(hi&&r&&eD(e),e.flags|=1,Nn(t,e,i,n),e.child)}function a4(t,e,i,r,n){if(ys(i)){var s=!0;i2(e)}else s=!1;if(Bg(e,n),e.stateNode===null)p$(t,e),tH(e,i,r),oA(e,i,r,n),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=i.contextType;typeof c=="object"&&c!==null?c=Ho(c):(c=ys(i)?vm:bn.current,c=m0(e,c));var h=i.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&QV(e,o,r,c),Qd=!1;var f=e.memoizedState;o.state=f,a2(e,r,o,n),l=e.memoizedState,a!==r||f!==l||ms.current||Qd?(typeof h=="function"&&(sA(e,i,h,r),l=e.memoizedState),(a=Qd||KV(e,i,a,r,f,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,X7(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ca(e.type,a),o.props=c,p=e.pendingProps,f=o.context,l=i.contextType,typeof l=="object"&&l!==null?l=Ho(l):(l=ys(i)?vm:bn.current,l=m0(e,l));var y=i.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||f!==l)&&QV(e,o,r,l),Qd=!1,f=e.memoizedState,o.state=f,a2(e,r,o,n);var g=e.memoizedState;a!==p||f!==g||ms.current||Qd?(typeof y=="function"&&(sA(e,i,y,r),g=e.memoizedState),(c=Qd||KV(e,i,c,r,f,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return uA(t,e,i,r,s,n)}function uA(t,e,i,r,n,s){IH(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return n&&qV(e,i,!1),Ac(t,e,s);r=e.stateNode,lue.current=e;var a=o&&typeof i.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=g0(e,t.child,null,s),e.child=g0(e,null,a,s)):Nn(t,e,a,s),e.memoizedState=r.state,n&&qV(e,i,!0),e.child}function kH(t){var e=t.stateNode;e.pendingContext?HV(t,e.pendingContext,e.pendingContext!==e.context):e.context&&HV(t,e.context,!1),lD(t,e.containerInfo)}function l4(t,e,i,r,n){return y0(),iD(n),e.flags|=256,Nn(t,e,i,r),e.child}var cA={dehydrated:null,treeContext:null,retryLane:0};function dA(t){return{baseLanes:t,cachePool:null,transitions:null}}function CH(t,e,i){var r=e.pendingProps,n=vi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(n&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Qt(vi,n&1),t===null)return rA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=rT(o,r,0,null),t=Xf(t,r,i,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=dA(i),e.memoizedState=cA,t):yD(e,o));if(n=t.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return uue(t,e,o,r,a,n,i);if(s){s=r.fallback,o=e.mode,n=t.child,a=n.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==n?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Nh(n,l),r.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=Nh(a,s):(s=Xf(s,o,i,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?dA(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~i,e.memoizedState=cA,r}return s=t.child,t=s.sibling,r=Nh(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=i),r.return=e,r.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=r,e.memoizedState=null,r}function yD(t,e){return e=rT({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function CS(t,e,i,r){return r!==null&&iD(r),g0(e,t.child,null,i),t=yD(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uue(t,e,i,r,n,s,o){if(i)return e.flags&256?(e.flags&=-257,r=ck(Error(K(422))),CS(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,n=e.mode,r=rT({mode:"visible",children:r.children},n,0,null),s=Xf(s,n,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&g0(e,t.child,null,o),e.child.memoizedState=dA(o),e.memoizedState=cA,s);if(!(e.mode&1))return CS(t,e,o,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=ck(s,r,void 0),CS(t,e,o,r)}if(a=(o&t.childLanes)!==0,fs||a){if(r=Rr,r!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Pc(t,n),Ya(r,t,n,-1))}return SD(),r=ck(Error(K(421))),CS(t,e,o,r)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=Sue.bind(null,t),n._reactRetry=e,null):(t=s.treeContext,Gs=Lh(n.nextSibling),qs=e,hi=!0,Na=null,t!==null&&(Po[Ao++]=dc,Po[Ao++]=hc,Po[Ao++]=_m,dc=t.id,hc=t.overflow,_m=e),e=yD(e,r.children),e.flags|=4096,e)}function u4(t,e,i){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nA(t.return,e,i)}function dk(t,e,i,r,n){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function PH(t,e,i){var r=e.pendingProps,n=r.revealOrder,s=r.tail;if(Nn(t,e,r.children,i),r=vi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u4(t,i,e);else if(t.tag===19)u4(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qt(vi,r),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(i=e.child,n=null;i!==null;)t=i.alternate,t!==null&&l2(t)===null&&(n=i),i=i.sibling;i=n,i===null?(n=e.child,e.child=null):(n=i.sibling,i.sibling=null),dk(e,!1,n,i,s);break;case"backwards":for(i=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&l2(t)===null){e.child=n;break}t=n.sibling,n.sibling=i,i=n,n=t}dk(e,!0,i,null,s);break;case"together":dk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function p$(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ac(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),bm|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,i=Nh(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=Nh(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function cue(t,e,i){switch(e.tag){case 3:kH(e),y0();break;case 5:nH(e);break;case 1:ys(e.type)&&i2(e);break;case 4:lD(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,n=e.memoizedProps.value;Qt(s2,r._currentValue),r._currentValue=n;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qt(vi,vi.current&1),e.flags|=128,null):i&e.child.childLanes?CH(t,e,i):(Qt(vi,vi.current&1),t=Ac(t,e,i),t!==null?t.sibling:null);Qt(vi,vi.current&1);break;case 19:if(r=(i&e.childLanes)!==0,t.flags&128){if(r)return PH(t,e,i);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Qt(vi,vi.current),r)break;return null;case 22:case 23:return e.lanes=0,TH(t,e,i)}return Ac(t,e,i)}var AH,hA,OH,LH;AH=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};hA=function(){};OH=function(t,e,i,r){var n=t.memoizedProps;if(n!==r){t=e.stateNode,Uf(Ql.current);var s=null;switch(i){case"input":n=LP(t,n),r=LP(t,r),s=[];break;case"select":n=bi({},n,{value:void 0}),r=bi({},r,{value:void 0}),s=[];break;case"textarea":n=DP(t,n),r=DP(t,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=e2)}jP(i,r);var o;i=null;for(c in n)if(!r.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yb.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=n!=null?n[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(s||(s=[]),s.push(c,i)),i=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yb.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ii("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}i&&(s=s||[]).push("style",i);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};LH=function(t,e,i,r){i!==r&&(e.flags|=4)};function Ov(t,e){if(!hi)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,r=0;if(e)for(var n=t.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=r,t.childLanes=i,e}function due(t,e,i){var r=e.pendingProps;switch(tD(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return ys(e.type)&&t2(),tn(e),null;case 3:return r=e.stateNode,v0(),oi(ms),oi(bn),cD(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(IS(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Na!==null&&(wA(Na),Na=null))),hA(t,e),tn(e),null;case 5:uD(e);var n=Uf(Ib.current);if(i=e.type,t!==null&&e.stateNode!=null)OH(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return tn(e),null}if(t=Uf(Ql.current),IS(e)){r=e.stateNode,i=e.type;var s=e.memoizedProps;switch(r[Yl]=e,r[Mb]=s,t=(e.mode&1)!==0,i){case"dialog":ii("cancel",r),ii("close",r);break;case"iframe":case"object":case"embed":ii("load",r);break;case"video":case"audio":for(n=0;n<g_.length;n++)ii(g_[n],r);break;case"source":ii("error",r);break;case"img":case"image":case"link":ii("error",r),ii("load",r);break;case"details":ii("toggle",r);break;case"input":vV(r,s),ii("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ii("invalid",r);break;case"textarea":wV(r,s),ii("invalid",r)}jP(i,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&TS(r.textContent,a,t),n=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&TS(r.textContent,a,t),n=["children",""+a]):yb.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ii("scroll",r)}switch(i){case"input":_S(r),_V(r,s,!0);break;case"textarea":_S(r),bV(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=e2)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a7(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(i,{is:r.is}):(t=o.createElement(i),i==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,i),t[Yl]=e,t[Mb]=r,AH(t,e,!1,!1),e.stateNode=t;e:{switch(o=VP(i,r),i){case"dialog":ii("cancel",t),ii("close",t),n=r;break;case"iframe":case"object":case"embed":ii("load",t),n=r;break;case"video":case"audio":for(n=0;n<g_.length;n++)ii(g_[n],t);n=r;break;case"source":ii("error",t),n=r;break;case"img":case"image":case"link":ii("error",t),ii("load",t),n=r;break;case"details":ii("toggle",t),n=r;break;case"input":vV(t,r),n=LP(t,r),ii("invalid",t);break;case"option":n=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},n=bi({},r,{value:void 0}),ii("invalid",t);break;case"textarea":wV(t,r),n=DP(t,r),ii("invalid",t);break;default:n=r}jP(i,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?c7(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&l7(t,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&gb(t,l):typeof l=="number"&&gb(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ii("scroll",t):l!=null&&V3(t,s,l,o))}switch(i){case"input":_S(t),_V(t,r,!1);break;case"textarea":_S(t),bV(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gh(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?jg(t,!!r.multiple,s,!1):r.defaultValue!=null&&jg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=e2)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)LH(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(i=Uf(Ib.current),Uf(Ql.current),IS(e)){if(r=e.stateNode,i=e.memoizedProps,r[Yl]=e,(s=r.nodeValue!==i)&&(t=qs,t!==null))switch(t.tag){case 3:TS(r.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&TS(r.nodeValue,i,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[Yl]=e,e.stateNode=r}return tn(e),null;case 13:if(oi(vi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(hi&&Gs!==null&&e.mode&1&&!(e.flags&128))K7(),y0(),e.flags|=98560,s=!1;else if(s=IS(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Yl]=e}else y0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),s=!1}else Na!==null&&(wA(Na),Na=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vi.current&1?vr===0&&(vr=3):SD())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return v0(),hA(t,e),t===null&&$b(e.stateNode.containerInfo),tn(e),null;case 10:return sD(e.type._context),tn(e),null;case 17:return ys(e.type)&&t2(),tn(e),null;case 19:if(oi(vi),s=e.memoizedState,s===null)return tn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ov(s,!1);else{if(vr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=l2(t),o!==null){for(e.flags|=128,Ov(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=i,i=e.child;i!==null;)s=i,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Qt(vi,vi.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fi()>w0&&(e.flags|=128,r=!0,Ov(s,!1),e.lanes=4194304)}else{if(!r)if(t=l2(o),t!==null){if(e.flags|=128,r=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Ov(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hi)return tn(e),null}else 2*Fi()-s.renderingStartTime>w0&&i!==1073741824&&(e.flags|=128,r=!0,Ov(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(i=s.last,i!==null?i.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fi(),e.sibling=null,i=vi.current,Qt(vi,r?i&1|2:i&1),e):(tn(e),null);case 22:case 23:return bD(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ns&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function hue(t,e){switch(tD(e),e.tag){case 1:return ys(e.type)&&t2(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return v0(),oi(ms),oi(bn),cD(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uD(e),null;case 13:if(oi(vi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));y0()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oi(vi),null;case 4:return v0(),null;case 10:return sD(e.type._context),null;case 22:case 23:return bD(),null;case 24:return null;default:return null}}var PS=!1,mn=!1,pue=typeof WeakSet=="function"?WeakSet:Set,de=null;function wg(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){ki(t,e,r)}else i.current=null}function pA(t,e,i){try{i()}catch(r){ki(t,e,r)}}var c4=!1;function fue(t,e){if(JP=KE,t=N7(),X3(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var o=0,a=-1,l=-1,c=0,h=0,p=t,f=null;t:for(;;){for(var y;p!==i||n!==0&&p.nodeType!==3||(a=o+n),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)f=p,p=y;for(;;){if(p===t)break t;if(f===i&&++c===n&&(a=o),f===s&&++h===r&&(l=o),(y=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=y}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(KP={focusedElem:t,selectionRange:i},KE=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ca(e.type,v),_);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch($){ki(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return g=c4,c4=!1,g}function Aw(t,e,i){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&t)===t){var s=n.destroy;n.destroy=void 0,s!==void 0&&pA(e,i,s)}n=n.next}while(n!==r)}}function tT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}}function fA(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function RH(t){var e=t.alternate;e!==null&&(t.alternate=null,RH(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yl],delete e[Mb],delete e[eA],delete e[Jle],delete e[Kle])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FH(t){return t.tag===5||t.tag===3||t.tag===4}function d4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mA(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=e2));else if(r!==4&&(t=t.child,t!==null))for(mA(t,e,i),t=t.sibling;t!==null;)mA(t,e,i),t=t.sibling}function yA(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yA(t,e,i),t=t.sibling;t!==null;)yA(t,e,i),t=t.sibling}var Gr=null,Oa=!1;function Gc(t,e,i){for(i=i.child;i!==null;)DH(t,e,i),i=i.sibling}function DH(t,e,i){if(Kl&&typeof Kl.onCommitFiberUnmount=="function")try{Kl.onCommitFiberUnmount(WM,i)}catch{}switch(i.tag){case 5:mn||wg(i,e);case 6:var r=Gr,n=Oa;Gr=null,Gc(t,e,i),Gr=r,Oa=n,Gr!==null&&(Oa?(t=Gr,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Gr.removeChild(i.stateNode));break;case 18:Gr!==null&&(Oa?(t=Gr,i=i.stateNode,t.nodeType===8?nk(t.parentNode,i):t.nodeType===1&&nk(t,i),bb(t)):nk(Gr,i.stateNode));break;case 4:r=Gr,n=Oa,Gr=i.stateNode.containerInfo,Oa=!0,Gc(t,e,i),Gr=r,Oa=n;break;case 0:case 11:case 14:case 15:if(!mn&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pA(i,e,o),n=n.next}while(n!==r)}Gc(t,e,i);break;case 1:if(!mn&&(wg(i,e),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(a){ki(i,e,a)}Gc(t,e,i);break;case 21:Gc(t,e,i);break;case 22:i.mode&1?(mn=(r=mn)||i.memoizedState!==null,Gc(t,e,i),mn=r):Gc(t,e,i);break;default:Gc(t,e,i)}}function h4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new pue),e.forEach(function(r){var n=xue.bind(null,t,r);i.has(r)||(i.add(r),r.then(n,n))})}}function ea(t,e){var i=e.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gr=a.stateNode,Oa=!1;break e;case 3:Gr=a.stateNode.containerInfo,Oa=!0;break e;case 4:Gr=a.stateNode.containerInfo,Oa=!0;break e}a=a.return}if(Gr===null)throw Error(K(160));DH(s,o,n),Gr=null,Oa=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){ki(n,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NH(e,t),e=e.sibling}function NH(t,e){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ea(e,t),gl(t),r&4){try{Aw(3,t,t.return),tT(3,t)}catch(v){ki(t,t.return,v)}try{Aw(5,t,t.return)}catch(v){ki(t,t.return,v)}}break;case 1:ea(e,t),gl(t),r&512&&i!==null&&wg(i,i.return);break;case 5:if(ea(e,t),gl(t),r&512&&i!==null&&wg(i,i.return),t.flags&32){var n=t.stateNode;try{gb(n,"")}catch(v){ki(t,t.return,v)}}if(r&4&&(n=t.stateNode,n!=null)){var s=t.memoizedProps,o=i!==null?i.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&s7(n,s),VP(a,o);var c=VP(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?c7(n,p):h==="dangerouslySetInnerHTML"?l7(n,p):h==="children"?gb(n,p):V3(n,h,p,c)}switch(a){case"input":RP(n,s);break;case"textarea":o7(n,s);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?jg(n,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?jg(n,!!s.multiple,s.defaultValue,!0):jg(n,!!s.multiple,s.multiple?[]:"",!1))}n[Mb]=s}catch(v){ki(t,t.return,v)}}break;case 6:if(ea(e,t),gl(t),r&4){if(t.stateNode===null)throw Error(K(162));n=t.stateNode,s=t.memoizedProps;try{n.nodeValue=s}catch(v){ki(t,t.return,v)}}break;case 3:if(ea(e,t),gl(t),r&4&&i!==null&&i.memoizedState.isDehydrated)try{bb(e.containerInfo)}catch(v){ki(t,t.return,v)}break;case 4:ea(e,t),gl(t);break;case 13:ea(e,t),gl(t),n=t.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(_D=Fi())),r&4&&h4(t);break;case 22:if(h=i!==null&&i.memoizedState!==null,t.mode&1?(mn=(c=mn)||h,ea(e,t),mn=c):ea(e,t),gl(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(de=t,h=t.child;h!==null;){for(p=de=h;de!==null;){switch(f=de,y=f.child,f.tag){case 0:case 11:case 14:case 15:Aw(4,f,f.return);break;case 1:wg(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,i=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){ki(r,i,v)}}break;case 5:wg(f,f.return);break;case 22:if(f.memoizedState!==null){f4(p);continue}}y!==null?(y.return=f,de=y):f4(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{n=p.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=u7("display",o))}catch(v){ki(t,t.return,v)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(v){ki(t,t.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ea(e,t),gl(t),r&4&&h4(t);break;case 21:break;default:ea(e,t),gl(t)}}function gl(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(FH(i)){var r=i;break e}i=i.return}throw Error(K(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(gb(n,""),r.flags&=-33);var s=d4(t);yA(t,s,n);break;case 3:case 4:var o=r.stateNode.containerInfo,a=d4(t);mA(t,a,o);break;default:throw Error(K(161))}}catch(l){ki(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mue(t,e,i){de=t,jH(t)}function jH(t,e,i){for(var r=(t.mode&1)!==0;de!==null;){var n=de,s=n.child;if(n.tag===22&&r){var o=n.memoizedState!==null||PS;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||mn;a=PS;var c=mn;if(PS=o,(mn=l)&&!c)for(de=n;de!==null;)o=de,l=o.child,o.tag===22&&o.memoizedState!==null?m4(n):l!==null?(l.return=o,de=l):m4(n);for(;s!==null;)de=s,jH(s),s=s.sibling;de=n,PS=a,mn=c}p4(t)}else n.subtreeFlags&8772&&s!==null?(s.return=n,de=s):p4(t)}}function p4(t){for(;de!==null;){var e=de;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mn||tT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mn)if(i===null)r.componentDidMount();else{var n=e.elementType===e.type?i.memoizedProps:Ca(e.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&JV(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}JV(e,o,i)}break;case 5:var a=e.stateNode;if(i===null&&e.flags&4){i=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&bb(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}mn||e.flags&512&&fA(e)}catch(f){ki(e,e.return,f)}}if(e===t){de=null;break}if(i=e.sibling,i!==null){i.return=e.return,de=i;break}de=e.return}}function f4(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var i=e.sibling;if(i!==null){i.return=e.return,de=i;break}de=e.return}}function m4(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{tT(4,e)}catch(l){ki(e,i,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var n=e.return;try{r.componentDidMount()}catch(l){ki(e,n,l)}}var s=e.return;try{fA(e)}catch(l){ki(e,s,l)}break;case 5:var o=e.return;try{fA(e)}catch(l){ki(e,o,l)}}}catch(l){ki(e,e.return,l)}if(e===t){de=null;break}var a=e.sibling;if(a!==null){a.return=e.return,de=a;break}de=e.return}}var yue=Math.ceil,d2=Dc.ReactCurrentDispatcher,gD=Dc.ReactCurrentOwner,Bo=Dc.ReactCurrentBatchConfig,pt=0,Rr=null,nr=null,Zr=0,Ns=0,bg=ap(0),vr=0,Ab=null,bm=0,iT=0,vD=0,Ow=null,ps=null,_D=0,w0=1/0,ic=null,h2=!1,gA=null,Fh=null,AS=!1,vh=null,p2=0,Lw=0,vA=null,f$=-1,m$=0;function zn(){return pt&6?Fi():f$!==-1?f$:f$=Fi()}function Dh(t){return t.mode&1?pt&2&&Zr!==0?Zr&-Zr:Xle.transition!==null?(m$===0&&(m$=S7()),m$):(t=Ot,t!==0||(t=window.event,t=t===void 0?16:k7(t.type)),t):1}function Ya(t,e,i,r){if(50<Lw)throw Lw=0,vA=null,Error(K(185));b1(t,i,r),(!(pt&2)||t!==Rr)&&(t===Rr&&(!(pt&2)&&(iT|=i),vr===4&&dh(t,Zr)),gs(t,r),i===1&&pt===0&&!(e.mode&1)&&(w0=Fi()+500,QM&&lp()))}function gs(t,e){var i=t.callbackNode;Xae(t,e);var r=JE(t,t===Rr?Zr:0);if(r===0)i!==null&&$V(i),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(i!=null&&$V(i),e===1)t.tag===0?Qle(y4.bind(null,t)):Z7(y4.bind(null,t)),Zle(function(){!(pt&6)&&lp()}),i=null;else{switch(x7(r)){case 1:i=H3;break;case 4:i=w7;break;case 16:i=YE;break;case 536870912:i=b7;break;default:i=YE}i=WH(i,VH.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function VH(t,e){if(f$=-1,m$=0,pt&6)throw Error(K(327));var i=t.callbackNode;if(Gg()&&t.callbackNode!==i)return null;var r=JE(t,t===Rr?Zr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=f2(t,r);else{e=r;var n=pt;pt|=2;var s=UH();(Rr!==t||Zr!==e)&&(ic=null,w0=Fi()+500,Qf(t,e));do try{_ue();break}catch(a){zH(t,a)}while(1);nD(),d2.current=s,pt=n,nr!==null?e=0:(Rr=null,Zr=0,e=vr)}if(e!==0){if(e===2&&(n=HP(t),n!==0&&(r=n,e=_A(t,n))),e===1)throw i=Ab,Qf(t,0),dh(t,r),gs(t,Fi()),i;if(e===6)dh(t,r);else{if(n=t.current.alternate,!(r&30)&&!gue(n)&&(e=f2(t,r),e===2&&(s=HP(t),s!==0&&(r=s,e=_A(t,s))),e===1))throw i=Ab,Qf(t,0),dh(t,r),gs(t,Fi()),i;switch(t.finishedWork=n,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Pp(t,ps,ic);break;case 3:if(dh(t,r),(r&130023424)===r&&(e=_D+500-Fi(),10<e)){if(JE(t,0)!==0)break;if(n=t.suspendedLanes,(n&r)!==r){zn(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=XP(Pp.bind(null,t,ps,ic),e);break}Pp(t,ps,ic);break;case 4:if(dh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,n=-1;0<r;){var o=31-Za(r);s=1<<o,o=e[o],o>n&&(n=o),r&=~s}if(r=n,r=Fi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yue(r/1960))-r,10<r){t.timeoutHandle=XP(Pp.bind(null,t,ps,ic),r);break}Pp(t,ps,ic);break;case 5:Pp(t,ps,ic);break;default:throw Error(K(329))}}}return gs(t,Fi()),t.callbackNode===i?VH.bind(null,t):null}function _A(t,e){var i=Ow;return t.current.memoizedState.isDehydrated&&(Qf(t,e).flags|=256),t=f2(t,e),t!==2&&(e=ps,ps=i,e!==null&&wA(e)),t}function wA(t){ps===null?ps=t:ps.push.apply(ps,t)}function gue(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!nl(s(),n))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dh(t,e){for(e&=~vD,e&=~iT,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-Za(e),r=1<<i;t[i]=-1,e&=~r}}function y4(t){if(pt&6)throw Error(K(327));Gg();var e=JE(t,0);if(!(e&1))return gs(t,Fi()),null;var i=f2(t,e);if(t.tag!==0&&i===2){var r=HP(t);r!==0&&(e=r,i=_A(t,r))}if(i===1)throw i=Ab,Qf(t,0),dh(t,e),gs(t,Fi()),i;if(i===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pp(t,ps,ic),gs(t,Fi()),null}function wD(t,e){var i=pt;pt|=1;try{return t(e)}finally{pt=i,pt===0&&(w0=Fi()+500,QM&&lp())}}function Sm(t){vh!==null&&vh.tag===0&&!(pt&6)&&Gg();var e=pt;pt|=1;var i=Bo.transition,r=Ot;try{if(Bo.transition=null,Ot=1,t)return t()}finally{Ot=r,Bo.transition=i,pt=e,!(pt&6)&&lp()}}function bD(){Ns=bg.current,oi(bg)}function Qf(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Wle(i)),nr!==null)for(i=nr.return;i!==null;){var r=i;switch(tD(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&t2();break;case 3:v0(),oi(ms),oi(bn),cD();break;case 5:uD(r);break;case 4:v0();break;case 13:oi(vi);break;case 19:oi(vi);break;case 10:sD(r.type._context);break;case 22:case 23:bD()}i=i.return}if(Rr=t,nr=t=Nh(t.current,null),Zr=Ns=e,vr=0,Ab=null,vD=iT=bm=0,ps=Ow=null,zf!==null){for(e=0;e<zf.length;e++)if(i=zf[e],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var o=s.next;s.next=n,r.next=o}i.pending=r}zf=null}return t}function zH(t,e){do{var i=nr;try{if(nD(),d$.current=c2,u2){for(var r=wi.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}u2=!1}if(wm=0,Pr=yr=wi=null,Pw=!1,kb=0,gD.current=null,i===null||i.return===null){vr=1,Ab=e,nr=null;break}e:{var s=t,o=i.return,a=i,l=e;if(e=Zr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=r4(o);if(y!==null){y.flags&=-257,n4(y,o,a,s,e),y.mode&1&&i4(s,c,e),e=y,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){i4(s,c,e),SD();break e}l=Error(K(426))}}else if(hi&&a.mode&1){var _=r4(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),n4(_,o,a,s,e),iD(_0(l,a));break e}}s=l=_0(l,a),vr!==4&&(vr=2),Ow===null?Ow=[s]:Ow.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=$H(s,l,e);YV(s,w);break e;case 1:a=l;var S=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fh===null||!Fh.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var $=EH(s,a,e);YV(s,$);break e}}s=s.return}while(s!==null)}GH(i)}catch(T){e=T,nr===i&&i!==null&&(nr=i=i.return);continue}break}while(1)}function UH(){var t=d2.current;return d2.current=c2,t===null?c2:t}function SD(){(vr===0||vr===3||vr===2)&&(vr=4),Rr===null||!(bm&268435455)&&!(iT&268435455)||dh(Rr,Zr)}function f2(t,e){var i=pt;pt|=2;var r=UH();(Rr!==t||Zr!==e)&&(ic=null,Qf(t,e));do try{vue();break}catch(n){zH(t,n)}while(1);if(nD(),pt=i,d2.current=r,nr!==null)throw Error(K(261));return Rr=null,Zr=0,vr}function vue(){for(;nr!==null;)BH(nr)}function _ue(){for(;nr!==null&&!Gae();)BH(nr)}function BH(t){var e=qH(t.alternate,t,Ns);t.memoizedProps=t.pendingProps,e===null?GH(t):nr=e,gD.current=null}function GH(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=hue(i,e),i!==null){i.flags&=32767,nr=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vr=6,nr=null;return}}else if(i=due(i,e,Ns),i!==null){nr=i;return}if(e=e.sibling,e!==null){nr=e;return}nr=e=t}while(e!==null);vr===0&&(vr=5)}function Pp(t,e,i){var r=Ot,n=Bo.transition;try{Bo.transition=null,Ot=1,wue(t,e,i,r)}finally{Bo.transition=n,Ot=r}return null}function wue(t,e,i,r){do Gg();while(vh!==null);if(pt&6)throw Error(K(327));i=t.finishedWork;var n=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(ele(t,s),t===Rr&&(nr=Rr=null,Zr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||AS||(AS=!0,WH(YE,function(){return Gg(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=Bo.transition,Bo.transition=null;var o=Ot;Ot=1;var a=pt;pt|=4,gD.current=null,fue(t,i),NH(i,t),Vle(KP),KE=!!JP,KP=JP=null,t.current=i,mue(i),Hae(),pt=a,Ot=o,Bo.transition=s}else t.current=i;if(AS&&(AS=!1,vh=t,p2=n),s=t.pendingLanes,s===0&&(Fh=null),Zae(i.stateNode),gs(t,Fi()),e!==null)for(r=t.onRecoverableError,i=0;i<e.length;i++)n=e[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(h2)throw h2=!1,t=gA,gA=null,t;return p2&1&&t.tag!==0&&Gg(),s=t.pendingLanes,s&1?t===vA?Lw++:(Lw=0,vA=t):Lw=0,lp(),null}function Gg(){if(vh!==null){var t=x7(p2),e=Bo.transition,i=Ot;try{if(Bo.transition=null,Ot=16>t?16:t,vh===null)var r=!1;else{if(t=vh,vh=null,p2=0,pt&6)throw Error(K(331));var n=pt;for(pt|=4,de=t.current;de!==null;){var s=de,o=s.child;if(de.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(de=c;de!==null;){var h=de;switch(h.tag){case 0:case 11:case 15:Aw(8,h,s)}var p=h.child;if(p!==null)p.return=h,de=p;else for(;de!==null;){h=de;var f=h.sibling,y=h.return;if(RH(h),h===c){de=null;break}if(f!==null){f.return=y,de=f;break}de=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}de=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,de=o;else e:for(;de!==null;){if(s=de,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Aw(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,de=w;break e}de=s.return}}var S=t.current;for(de=S;de!==null;){o=de;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,de=b;else e:for(o=S;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tT(9,a)}}catch(T){ki(a,a.return,T)}if(a===o){de=null;break e}var $=a.sibling;if($!==null){$.return=a.return,de=$;break e}de=a.return}}if(pt=n,lp(),Kl&&typeof Kl.onPostCommitFiberRoot=="function")try{Kl.onPostCommitFiberRoot(WM,t)}catch{}r=!0}return r}finally{Ot=i,Bo.transition=e}}return!1}function g4(t,e,i){e=_0(i,e),e=$H(t,e,1),t=Rh(t,e,1),e=zn(),t!==null&&(b1(t,1,e),gs(t,e))}function ki(t,e,i){if(t.tag===3)g4(t,t,i);else for(;e!==null;){if(e.tag===3){g4(e,t,i);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fh===null||!Fh.has(r))){t=_0(i,t),t=EH(e,t,1),e=Rh(e,t,1),t=zn(),e!==null&&(b1(e,1,t),gs(e,t));break}}e=e.return}}function bue(t,e,i){var r=t.pingCache;r!==null&&r.delete(e),e=zn(),t.pingedLanes|=t.suspendedLanes&i,Rr===t&&(Zr&i)===i&&(vr===4||vr===3&&(Zr&130023424)===Zr&&500>Fi()-_D?Qf(t,0):vD|=i),gs(t,e)}function HH(t,e){e===0&&(t.mode&1?(e=SS,SS<<=1,!(SS&130023424)&&(SS=4194304)):e=1);var i=zn();t=Pc(t,e),t!==null&&(b1(t,e,i),gs(t,i))}function Sue(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),HH(t,i)}function xue(t,e){var i=0;switch(t.tag){case 13:var r=t.stateNode,n=t.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),HH(t,i)}var qH;qH=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||ms.current)fs=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return fs=!1,cue(t,e,i);fs=!!(t.flags&131072)}else fs=!1,hi&&e.flags&1048576&&Y7(e,n2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;p$(t,e),t=e.pendingProps;var n=m0(e,bn.current);Bg(e,i),n=hD(null,e,r,t,n,i);var s=pD();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ys(r)?(s=!0,i2(e)):s=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,aD(e),n.updater=XM,e.stateNode=n,n._reactInternals=e,oA(e,r,t,i),e=uA(null,e,r,!0,s,i)):(e.tag=0,hi&&s&&eD(e),Nn(null,e,n,i),e=e.child),e;case 16:r=e.elementType;e:{switch(p$(t,e),t=e.pendingProps,n=r._init,r=n(r._payload),e.type=r,n=e.tag=Eue(r),t=Ca(r,t),n){case 0:e=lA(null,e,r,t,i);break e;case 1:e=a4(null,e,r,t,i);break e;case 11:e=s4(null,e,r,t,i);break e;case 14:e=o4(null,e,r,Ca(r.type,t),i);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Ca(r,n),lA(t,e,r,n,i);case 1:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Ca(r,n),a4(t,e,r,n,i);case 3:e:{if(kH(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,n=s.element,X7(t,e),a2(e,r,null,i);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){n=_0(Error(K(423)),e),e=l4(t,e,r,i,n);break e}else if(r!==n){n=_0(Error(K(424)),e),e=l4(t,e,r,i,n);break e}else for(Gs=Lh(e.stateNode.containerInfo.firstChild),qs=e,hi=!0,Na=null,i=rH(e,null,r,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(y0(),r===n){e=Ac(t,e,i);break e}Nn(t,e,r,i)}e=e.child}return e;case 5:return nH(e),t===null&&rA(e),r=e.type,n=e.pendingProps,s=t!==null?t.memoizedProps:null,o=n.children,QP(r,n)?o=null:s!==null&&QP(r,s)&&(e.flags|=32),IH(t,e),Nn(t,e,o,i),e.child;case 6:return t===null&&rA(e),null;case 13:return CH(t,e,i);case 4:return lD(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=g0(e,null,r,i):Nn(t,e,r,i),e.child;case 11:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Ca(r,n),s4(t,e,r,n,i);case 7:return Nn(t,e,e.pendingProps,i),e.child;case 8:return Nn(t,e,e.pendingProps.children,i),e.child;case 12:return Nn(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(r=e.type._context,n=e.pendingProps,s=e.memoizedProps,o=n.value,Qt(s2,r._currentValue),r._currentValue=o,s!==null)if(nl(s.value,o)){if(s.children===n.children&&!ms.current){e=Ac(t,e,i);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=gc(-1,i&-i),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=i,l=s.alternate,l!==null&&(l.lanes|=i),nA(s.return,i,e),a.lanes|=i;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),nA(o,i,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nn(t,e,n.children,i),e=e.child}return e;case 9:return n=e.type,r=e.pendingProps.children,Bg(e,i),n=Ho(n),r=r(n),e.flags|=1,Nn(t,e,r,i),e.child;case 14:return r=e.type,n=Ca(r,e.pendingProps),n=Ca(r.type,n),o4(t,e,r,n,i);case 15:return MH(t,e,e.type,e.pendingProps,i);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Ca(r,n),p$(t,e),e.tag=1,ys(r)?(t=!0,i2(e)):t=!1,Bg(e,i),tH(e,r,n),oA(e,r,n,i),uA(null,e,r,!0,t,i);case 19:return PH(t,e,i);case 22:return TH(t,e,i)}throw Error(K(156,e.tag))};function WH(t,e){return _7(t,e)}function $ue(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fo(t,e,i,r){return new $ue(t,e,i,r)}function xD(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Eue(t){if(typeof t=="function")return xD(t)?1:0;if(t!=null){if(t=t.$$typeof,t===U3)return 11;if(t===B3)return 14}return 2}function Nh(t,e){var i=t.alternate;return i===null?(i=Fo(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function y$(t,e,i,r,n,s){var o=2;if(r=t,typeof t=="function")xD(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case dg:return Xf(i.children,n,s,e);case z3:o=8,n|=8;break;case CP:return t=Fo(12,i,e,n|2),t.elementType=CP,t.lanes=s,t;case PP:return t=Fo(13,i,e,n),t.elementType=PP,t.lanes=s,t;case AP:return t=Fo(19,i,e,n),t.elementType=AP,t.lanes=s,t;case i7:return rT(i,n,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e7:o=10;break e;case t7:o=9;break e;case U3:o=11;break e;case B3:o=14;break e;case Kd:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Fo(o,i,e,n),e.elementType=t,e.type=r,e.lanes=s,e}function Xf(t,e,i,r){return t=Fo(7,t,r,e),t.lanes=i,t}function rT(t,e,i,r){return t=Fo(22,t,r,e),t.elementType=i7,t.lanes=i,t.stateNode={isHidden:!1},t}function hk(t,e,i){return t=Fo(6,t,null,e),t.lanes=i,t}function pk(t,e,i){return e=Fo(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mue(t,e,i,r,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=WI(0),this.expirationTimes=WI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=WI(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function $D(t,e,i,r,n,s,o,a,l){return t=new Mue(t,e,i,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fo(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},aD(s),t}function Tue(t,e,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cg,key:r==null?null:""+r,children:t,containerInfo:e,implementation:i}}function ZH(t){if(!t)return Hh;t=t._reactInternals;e:{if(zm(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ys(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var i=t.type;if(ys(i))return W7(t,i,e)}return e}function YH(t,e,i,r,n,s,o,a,l){return t=$D(i,r,!0,t,n,s,o,a,l),t.context=ZH(null),i=t.current,r=zn(),n=Dh(i),s=gc(r,n),s.callback=e??null,Rh(i,s,n),t.current.lanes=n,b1(t,n,r),gs(t,r),t}function nT(t,e,i,r){var n=e.current,s=zn(),o=Dh(n);return i=ZH(i),e.context===null?e.context=i:e.pendingContext=i,e=gc(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rh(n,e,o),t!==null&&(Ya(t,n,o,s),c$(t,n,o)),o}function m2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function v4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function ED(t,e){v4(t,e),(t=t.alternate)&&v4(t,e)}function Iue(){return null}var JH=typeof reportError=="function"?reportError:function(t){console.error(t)};function MD(t){this._internalRoot=t}sT.prototype.render=MD.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));nT(t,e,null,null)};sT.prototype.unmount=MD.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sm(function(){nT(null,t,null,null)}),e[Cc]=null}};function sT(t){this._internalRoot=t}sT.prototype.unstable_scheduleHydration=function(t){if(t){var e=M7();t={blockedOn:null,target:t,priority:e};for(var i=0;i<ch.length&&e!==0&&e<ch[i].priority;i++);ch.splice(i,0,t),i===0&&I7(t)}};function TD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function oT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _4(){}function kue(t,e,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var c=m2(o);s.call(c)}}var o=YH(e,r,t,0,null,!1,!1,"",_4);return t._reactRootContainer=o,t[Cc]=o.current,$b(t.nodeType===8?t.parentNode:t),Sm(),o}for(;n=t.lastChild;)t.removeChild(n);if(typeof r=="function"){var a=r;r=function(){var c=m2(l);a.call(c)}}var l=$D(t,0,!1,null,null,!1,!1,"",_4);return t._reactRootContainer=l,t[Cc]=l.current,$b(t.nodeType===8?t.parentNode:t),Sm(function(){nT(e,l,i,r)}),l}function aT(t,e,i,r,n){var s=i._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=m2(o);a.call(l)}}nT(e,o,t,n)}else o=kue(i,e,t,n,r);return m2(o)}$7=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=y_(e.pendingLanes);i!==0&&(q3(e,i|1),gs(e,Fi()),!(pt&6)&&(w0=Fi()+500,lp()))}break;case 13:Sm(function(){var r=Pc(t,1);if(r!==null){var n=zn();Ya(r,t,1,n)}}),ED(t,1)}};W3=function(t){if(t.tag===13){var e=Pc(t,134217728);if(e!==null){var i=zn();Ya(e,t,134217728,i)}ED(t,134217728)}};E7=function(t){if(t.tag===13){var e=Dh(t),i=Pc(t,e);if(i!==null){var r=zn();Ya(i,t,e,r)}ED(t,e)}};M7=function(){return Ot};T7=function(t,e){var i=Ot;try{return Ot=t,e()}finally{Ot=i}};UP=function(t,e,i){switch(e){case"input":if(RP(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var n=KM(r);if(!n)throw Error(K(90));n7(r),RP(r,n)}}}break;case"textarea":o7(t,i);break;case"select":e=i.value,e!=null&&jg(t,!!i.multiple,e,!1)}};p7=wD;f7=Sm;var Cue={usingClientEntryPoint:!1,Events:[x1,mg,KM,d7,h7,wD]},Lv={findFiberByHostInstance:Vf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Pue={bundleType:Lv.bundleType,version:Lv.version,rendererPackageName:Lv.rendererPackageName,rendererConfig:Lv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g7(t),t===null?null:t.stateNode},findFiberByHostInstance:Lv.findFiberByHostInstance||Iue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var OS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!OS.isDisabled&&OS.supportsFiber)try{WM=OS.inject(Pue),Kl=OS}catch{}}ro.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cue;ro.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TD(e))throw Error(K(200));return Tue(t,e,null,i)};ro.createRoot=function(t,e){if(!TD(t))throw Error(K(299));var i=!1,r="",n=JH;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=$D(t,1,!1,null,null,i,!1,r,n),t[Cc]=e.current,$b(t.nodeType===8?t.parentNode:t),new MD(e)};ro.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=g7(e),t=t===null?null:t.stateNode,t};ro.flushSync=function(t){return Sm(t)};ro.hydrate=function(t,e,i){if(!oT(e))throw Error(K(200));return aT(null,t,e,!0,i)};ro.hydrateRoot=function(t,e,i){if(!TD(t))throw Error(K(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",o=JH;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),e=YH(e,null,t,1,i??null,n,!1,s,o),t[Cc]=e.current,$b(t),r)for(t=0;t<r.length;t++)i=r[t],n=i._getVersion,n=n(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,n]:e.mutableSourceEagerHydrationData.push(i,n);return new sT(e)};ro.render=function(t,e,i){if(!oT(e))throw Error(K(200));return aT(null,t,e,!1,i)};ro.unmountComponentAtNode=function(t){if(!oT(t))throw Error(K(40));return t._reactRootContainer?(Sm(function(){aT(null,null,t,!1,function(){t._reactRootContainer=null,t[Cc]=null})}),!0):!1};ro.unstable_batchedUpdates=wD;ro.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!oT(i))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return aT(t,e,i,!1,r)};ro.version="18.2.0-next-9e3b772b8-20220608";function KH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KH)}catch(t){console.error(t)}}KH(),Y9.exports=ro;var Aue=Y9.exports,w4=Aue;IP.createRoot=w4.createRoot,IP.hydrateRoot=w4.hydrateRoot;function bA(t,e,i){var r,n,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,i||(a=t.apply(s,n),s=n=null))}var c=function(){s=this,n=arguments,o=Date.now();var h=i&&!r;return r||(r=setTimeout(l,e)),h&&(a=t.apply(s,n),s=n=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,n),s=n=null,clearTimeout(r),r=null)},c}bA.debounce=bA;var Oue=bA;const Lue=aae(Oue);let _h;function V(t){return typeof _h[t]=="function"?_h[t]=_h[t](globalThis):_h[t]}var P9,A9,O9,L9;_h=(P9=globalThis.dojoConfig)!=null&&P9.has||(A9=globalThis.esriConfig)!=null&&A9.has?{...(O9=globalThis.dojoConfig)==null?void 0:O9.has,...(L9=globalThis.esriConfig)==null?void 0:L9.has}:{},V.add=(t,e,i,r)=>((r||_h[t]===void 0)&&(_h[t]=e),i&&V(t)),V.cache=_h,V.add("esri-deprecation-warnings",!0),V.add("esri-force-fullscreen-debug",!1),(()=>{var e;V.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(V.add("host-browser",t),V.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),V.add("dom",t),V("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(V.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),V.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),V.add("khtml",n.includes("Konqueror")?s:void 0),V.add("edge",parseFloat(r.split("Edge/")[1])||void 0),V.add("opr",parseFloat(r.split("OPR/")[1])||void 0),V.add("webkit",!V("wp")&&!V("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),V.add("chrome",!V("edge")&&!V("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),V.add("android",!V("wp")&&parseFloat(r.split("Android ")[1])||void 0),V.add("safari",!n.includes("Safari")||V("wp")||V("chrome")||V("android")||V("edge")||V("opr")?void 0:parseFloat(n.split("Version/")[1])),V.add("mac",n.includes("Macintosh")),!V("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));V.add(o,l),V.add("ios",l)}V("webkit")||(!r.includes("Gecko")||V("wp")||V("khtml")||V("edge")||V.add("mozilla",s),V("mozilla")&&V.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&V.add("esri-mobile",e),i&&V.add("esri-iPhone",i),V.add("esri-geolocation",!!navigator.geolocation)}V.add("esri-wasm","WebAssembly"in globalThis),V.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),V.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),V.add("esri-atomics","Atomics"in globalThis),V.add("esri-workers","Worker"in globalThis),V.add("web-feat:cache","caches"in globalThis),V.add("esri-workers-arraybuffer-transfer",!V("safari")||Number(V("safari"))>=12),V.add("workers-pool-size",8),V.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),V.add("featurelayer-simplify-payload-size-factors",[1,1,4]),V.add("featurelayer-animation-enabled",!0),V.add("featurelayer-snapshot-enabled",!0),V.add("featurelayer-snapshot-point-min-threshold",8e4),V.add("featurelayer-snapshot-point-max-threshold",4e5),V.add("featurelayer-snapshot-point-coverage",.1),V.add("featurelayer-advanced-symbols",!1),V.add("featurelayer-pbf",!0),V.add("featurelayer-pbf-statistics",!1),V.add("feature-layers-workers",!0),V.add("feature-polyline-generalization-factor",1),V.add("mapview-transitions-duration",200),V.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),V.add("mapserver-pbf-version-support",10.81),V.add("mapservice-popup-identify-max-tolerance",20),V.add("heatmap-allow-raster-fallback",!1),V.add("heatmap-force-raster",!1),V("host-webworker")||V("host-browser")&&(V.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),V.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{V.add("esri-image-decode",!0,!0,!0)}).catch(()=>{V.add("esri-image-decode",!1,!0,!0)})}return!1}),V.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();let fk=class Ap{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Ap._m}getInt(){return this._seed=(Ap._a*this._seed+Ap._c)%Ap._m,this._seed}getFloat(){return this.getInt()/(Ap._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Ap._m*r}};fk._m=2147483647,fk._a=48271,fk._c=0;const Rue=1.5,x6e=1/Rue,$6e=.5;function Fue(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):t.filter((i,r,n)=>n.indexOf(i)===r)}function lT(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function E6e(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],i=!0);return i}function M6e(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(o=>i(o,s))),n=t.filter(s=>!e.some(o=>i(o,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function T6e(t){return t&&typeof t.length=="number"}const Due=!!Array.prototype.fill;function I6e(t,e){if(Due)return new Array(t).fill(e);const i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}function k6e(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=r;return i}let QH=class{constructor(){this.last=0}};const XH=new QH;function SA(t,e,i,r){r=r||XH;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function Nue(t,e,i,r){const n=i??t.length,s=SA(t,e,n,r);if(s!==-1)return t[s]=t[n-1],i==null&&t.pop(),e}const ta=new Set;function jue(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;ta.clear();for(let a=0;a<r;++a)ta.add(e[a]);n=n||XH;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(ta.has(t[a])&&(s&&s.push(t[a]),ta.delete(t[a]),t[a]=t[i-1],--i,--a,ta.size===0||i===0))return ta.clear(),i;for(let a=0;a<o;++a)if(ta.has(t[a])&&(s&&s.push(t[a]),ta.delete(t[a]),t[a]=t[i-1],--i,--a,ta.size===0||i===0))return ta.clear(),i;return ta.clear(),i}function P6e(t,e){let i=0;for(let r=0;r<t.length;++r){const n=t[r];e(n,r)&&(t[i]=n,i++)}t.length=i}function xA(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Pi(t,e){return t!=null}const A6e=[];function O6e(t){return t instanceof ArrayBuffer}function ID(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function eq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function tq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function kD(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function iq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function CD(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function rq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function uT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function cT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Vue(t){return!("buffer"in t)}function L6e(t){return t!=null?Vue(t)?8*t.length+12:t.byteLength+zue:0}const zue=145,R6e=1024;function F6e(t){return cT(t)||uT(t)||CD(t)||kD(t)||ID(t)}function D6e(t){return cT(t)||uT(t)}function N6e(t){return cT(t)?179769e303:uT(t)?3402823e32:rq(t)?4294967295:iq(t)?65535:eq(t)||tq(t)?255:CD(t)?2147483647:kD(t)?32767:ID(t)?127:256}function nq(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&nq(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function F(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=aq(t);if(e!=null)return e;if(y2(t))return t.clone();if(sq(t))return t.map(F);if(oq(t))return t.clone();const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=F(t[r]);return i}function $A(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=aq(t);if(e!=null)return e;if(sq(t)){let i=!0;const r=t.map(n=>{const s=$A(n);return n!=null&&s==null&&(i=!1),s});return i?r:null}if(y2(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!oq(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const n=t[r],s=$A(n);if(n!=null&&s==null)return null;i[r]=s}return i}return null}function y2(t){return typeof t.clone=="function"}function sq(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function oq(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function b4(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function aq(t){if(ID(t)||eq(t)||tq(t)||kD(t)||iq(t)||CD(t)||rq(t)||uT(t)||cT(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,F(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(F(i));return e}return null}function PD(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function lq(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&lT(t,e):t instanceof Set?e instanceof Set&&Bue(t,e):t instanceof Map?e instanceof Map&&Gue(t,e):!!b4(t)&&b4(e)&&Uue(t,e))}function Uue(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function Bue(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Gue(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function uq(t,e,i=!1){return dq(t,e,i)}function E1(t,e){if(e!=null)return e[t]||cq(t.split("."),!1,e)}function Sn(t,e,i){const r=t.split("."),n=r.pop(),s=cq(r,!0,i);s&&n&&(s[n]=e)}function cq(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function dq(t,e,i){return e?Object.keys(e).reduce((r,n)=>{let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=F(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.concat():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):r[n]=o.concat())):o&&typeof o=="object"?r[n]=dq(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)},t||{}):t}var R9;const Ye={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(R9=globalThis.location)==null?void 0:R9.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(uq(Ye,globalThis.esriConfig,!0),delete Ye.has),!Ye.assetsPath){{const t="4.27";Ye.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Ye.defaultAssetsPath=Ye.assetsPath}const Hue="modulepreload",que=function(t){return"/social-infrastructure-client/"+t},S4={},O=function(e,i,r){if(!i||i.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=que(s),s in S4)return;S4[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=n.length-1;h>=0;h--){const p=n[h];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Hue,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,p)=>{c.addEventListener("load",h),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function u(t,e,i,r){var n,s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function g$(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}const Wue=/\{([^\}]+)\}/g;function x4(t){return t??""}function Wo(t,e){return t.replaceAll(Wue,typeof e=="object"?(i,r)=>x4(E1(r,e)):(i,r)=>x4(e(r)))}function AD(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function OD(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function j6e(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function Ob(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const $4={info:0,warn:1,error:2,none:3};let U=class ln{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,ln._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=ln.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=ln._loggers;return ln._loggers=e,i},set throttlingDisabled(e){ln._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,ln._loggers.get(e)||new ln({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!ln._throttlingDisabled){const n=this._argsToKey(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=ln._tickCounter)return;this._loggedMessages[e].set(n,ln._tickCounter),ln._scheduleTickCounterIncrement()}for(const n of Ye.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...r){console[e](`[${i}]`,...r)}_matchLevel(e){const i=Ye.log.level||"warn";return $4[this._parentWithMember("level",i)]<=$4[e]}_argsToKey(...e){return OD(JSON.stringify(e,(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}static _scheduleTickCounterIncrement(){ln._tickCounterScheduled||(ln._tickCounterScheduled=!0,Promise.resolve().then(()=>{ln._tickCounter++,ln._tickCounterScheduled=!1}))}};U._loggers=new Map,U._tickCounter=0,U._tickCounterScheduled=!1,U._throttlingDisabled=!1;function M1(t,e){for(const[i,r]of t)if(e(r,i))return!0;return!1}function V6e(t,e){for(const[i,r]of t)if(e(r,i))return r;return null}function Sg(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}const Hg=U.getLogger("esri.core.accessorSupport.ensureTypes");function Zue(t){return t==null?t:new Date(t)}function Yue(t){return t==null?t:!!t}function T1(t){return t==null?t:t.toString()}function Oo(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function LD(t){return t==null?t:Math.round(parseFloat(t))}function hq(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function g2(t,e){return e!=null&&t&&!(e instanceof t)}function pq(t){return t&&"isCollection"in t}function E4(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Jue(t,e){if(!e||!e.constructor||!pq(e.constructor))return EA(t,e)?e:new t(e);const i=E4(t.prototype.itemType),r=E4(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(EA(t,e),e):new t(e):e}function EA(t,e){return!!hq(e)&&(Hg.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+hT(t)+"'"),!0)}function dT(t,e){return e==null?e:pq(t)?Jue(t,e):g2(t,e)?EA(t,e)?e:new t(e):e}function hT(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const Kue=new WeakMap;function Que(t){switch(t){case Number:return Oo;case Mt:return LD;case Boolean:return Yue;case String:return T1;case Date:return Zue;default:return Sg(Kue,t,()=>dT.bind(null,t))}}function Xt(t,e){const i=Que(t);return arguments.length===1?i:i(e)}function Lb(t,e,i){return arguments.length===1?Lb.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Xue(t,e){return arguments.length===1?Lb(i=>Xt(t,i)):Lb(i=>Xt(t,i),e)}function fq(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>fq(t,e-1,r)):t(i)}function v2(t,e,i){if(arguments.length===2)return s=>v2(t,e,s);if(!i)return i;i=fq(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function ece(t,e,i){return arguments.length===2?v2(r=>Xt(t,r),e):v2(r=>Xt(t,r),e,i)}function mq(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function MA(t,e){if(arguments.length===2)return MA(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),n=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(i.has(a)||n.some(p=>c==="string"&&p===String||c==="number"&&p===Number))||c==="object"&&n.some(p=>!g2(a,p))?a:(h&&r.length?(s||(s=r.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),Hg.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(p=>hT(p)).join(", ")),Hg.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Hg.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function iu(t,e){if(arguments.length===2)return iu(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=Xt(c),r.push(hT(c)),n.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!g2(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,h=i[c];if(!h)return Hg.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!g2(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!hq(l)){const p={};for(const f in l)f!==t.key&&(p[f]=l[f]);return h(p)}return h(l)}}let Mt=class{};const U6e={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function tce(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function yq(t){switch(t.type){case"native":return Xt(t.value);case"array":return Lb(yq(t.value));case"one-of":return ice(t);default:return null}}function ice(t){let e=null;return(i,r)=>IA(i,t)?i:(e==null&&(e=TA(t)),Hg.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function TA(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Mt:return"integer";case Date:return"date";default:return hT(t.value)}case"array":return`array of ${TA(t.value)}`;case"one-of":{const e=t.values.map(i=>TA(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function IA(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Mt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!IA(i,e.value));case"one-of":return e.values.some(i=>IA(t,i))}}function eo(t){return Et(()=>t.forEach(e=>e!=null&&e.remove()))}function Et(t){return{remove:()=>{t&&(t(),t=void 0)}}}function B6e(t){return Et(()=>{const e=t();e!=null&&e.remove()})}function rce(t){return Et(()=>t==null?void 0:t.abort())}function G6e(t){return Et(t!=null?()=>t.destroy():void 0)}function pc(t,e){return t!=null?e(t):null}function Hr(t,e){return W0(t,e),t}function W0(t,e){if(t==null)throw new Error(e??"value is None")}function Ue(t){return t==null||t.destroy(),null}function H6e(t){return t==null||t.dispose(),null}function zt(t){return t==null||t.remove(),null}function vs(t){return t==null||t.abort(),null}function q6e(t){return t==null||t.release(),null}function nce(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function sce(t){return null}function W6e(t,e){const i=new Array;for(const r of t)i.push(r!=null?e(r):null);return i}function Z6e(t,e){for(const i of t)pc(i,e)}function Y6e(t){return t}function Bn(t){return t.__accessor__??null}function oce(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function v$(t,e,i){return i?_2(t,e,{policy:i,path:""}):_2(t,e,null)}function _2(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=F(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.concat():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(i){const h=i.path;i.path=o,r[s]=_2(l,c,i),i.path=h}else r[s]=_2(l,c,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=c);return r},t||{}):t}function gq(t){return Array.isArray(t)?t:t.split(".")}function M4(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function ace(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...M4(i));return e}return M4(t)}function vq(t,e,i,r){const n=ace(e);if(n.length!==1){const s=n.map(o=>r(t,o,i));return eo(s)}return r(t,n[0],i)}function _q(t){let e=!1;return()=>{e||(e=!0,t())}}function wq(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=Bn(e);return oce(r,i)?r.get(i):e[i]}function bq(t,e,i){if(t==null)return t;const r=wq(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:bq(r,e,i+1)}function I1(t,e,i=0){return typeof e!="string"||e.includes(".")?bq(t,gq(e),i):wq(e,t)}function w2(t,e){return I1(t,e)}function T4(t,e){return I1(e,t)!==void 0}function k1(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=F(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function pT(t,e){const i=k1(t);let r=i[e];return r||(r=i[e]={}),r}function lce(t,e){return v$(t,e,cce)}const uce=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function cce(t){return uce.test(t)?"replace":"merge"}function dce(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>r===""?"$":(E1(r,e)??"").toString())}let Sq=class{constructor(e,i,r){this.name=e,this.details=r,this.message=(i&&dce(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},C=class xq extends Sq{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return F(i)}catch{return"[object]"}}))}}catch(e){throw U.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new xq(e.name,e.message,e.details)}};C.prototype.type="error";function b2(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))b2(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(n.length-1,1)[0];return void b2(w2(t,n),s,i)}const r=t.__accessor__;r!=null&&hce(e,r),t[e]=i}}function hce(t,e){if(V("esri-unknown-property-errors")&&!pce(t,e))throw new C("set:unknown-property",fce(t,e))}function pce(t,e){return e.metadatas[t]!=null}function fce(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function d(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=pT(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&U.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let p=w2(this,l);if(typeof p=="function"){h||(h=l.split(".").slice(0,-1).join("."));const f=w2(this,h);f&&(p=p.bind(f))}return p},n.readOnly||(n.set=c?function(p){this._override(i,p)}:function(p){b2(this,l,p)})}const o=t.type,a=t.types;n.cast||(o?n.cast=mce(o):a&&(Array.isArray(a)?n.cast=Lb(iu(a[0])):n.cast=iu(a))),lce(n,t),t.range&&(n.cast=yce(n.cast,t.range))}}function $q(t,e,i){const r=pT(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function mce(t){let e=0,i=t;if(tce(t))return yq(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(mq(r))return e===0?MA(r):v2(MA(r),e);if(e===1)return Xue(r);if(e>1)return ece(r,e);const n=t;return n.from?n.from:Xt(n)}function yce(t,e){return i=>{let r=+t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}const Eq=Symbol("Accessor-beforeDestroy");var cc;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(cc||(cc={}));var bt;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(bt||(bt={}));const S2={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},v_=[];let Rw=S2;function Ce(t){Rw.onObservableAccessed(t)}let _$=!1,w$=!1;function Oc(t,e,i){if(_$)return RD(t,e,i);Mq(t);const r=e.call(i);return Tq(),r}function gce(t,e){return Oc(S2,t,e)}function RD(t,e,i){const r=_$;_$=!0,Mq(t);let n=null;try{n=e.call(i)}catch(s){w$&&U.getLogger("esri.core.accessorSupport.tracking").error(s)}return Tq(),_$=r,n}function Mq(t){Rw=t,v_.push(t)}function Tq(){const t=v_.length;if(t>1){const e=v_.pop();Rw=v_[t-2],e.onTrackingEnd()}else if(t===1){const e=v_.pop();Rw=S2,e.onTrackingEnd()}else Rw=S2}function Iq(t,e){const i=e.observerObject;if(i.flags&bt.DepTrackingInitialized)return;const r=w$;w$=!1,i.flags&bt.AutoTracked?RD(e,e.metadata.get,t):kq(t,e),w$=r}const vce=[];function kq(t,e){const i=e.observerObject;i.flags&bt.ExplicitlyTracking||(i.flags|=bt.ExplicitlyTracking,RD(e,()=>{const r=e.metadata.dependsOn||vce;for(const n of r)if(typeof n!="string"||n.includes(".")){const s=gq(n);for(let o=0,a=t;o<s.length&&a!=null&&typeof a=="object";++o)a=I4(a,s[o],o!==s.length-1)}else I4(t,n,!1)}),i.flags&=~bt.ExplicitlyTracking)}function I4(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=Bn(t);if(n){const s=n.propertiesByName.get(r);s&&(Ce(s.observerObject),Iq(t,s))}return i?t[r]:void 0}function _ce(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let Zo=class extends Sq{constructor(e,i,r){super(e,i,r)}};Zo.prototype.type="warning";function Cq(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const kA=U.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function k4(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||Sce(t)&&Sn("read.reader",Z0(t),e))}function Z0(t){var i,r;const e=t.ndimArray??0;if(e>1)return bce(t);if(e===1)return C4(t);if("type"in t&&Aq(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=C4(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const c=s(o,a,l);return c&&new t.type(c)}}return FD(t)}function FD(t){return"type"in t?wce(t.type):xce(t.types)}function wce(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void kA.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function Pq(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>Pq(t,n,i,r-1)):t(e,void 0,i)}function bce(t){const e=FD(t),i=Pq.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function C4(t){const e=FD(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function Aq(t){if(!Cq(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?DD(e.Type):Oq(e.Type))}function Sce(t){return"types"in t?Oq(t.types):DD(t.type)}function DD(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Aq(t))}function Oq(t){for(const e in t.typeMap)if(!DD(t.typeMap[e]))return!1;return!0}function xce(t){let e=null;const i=t.errorContext??"type";return(r,n,s)=>{if(r==null)return r;const o=typeof r;if(o!=="object")return void kA.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);e||(e=$ce(t));const a=t.key;if(typeof a!="string")return;const l=r[a],c=l?e[l]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!c){const p=`Type '${l||"unknown"}' is not supported`;return s&&s.messages&&r&&s.messages.push(new Zo(`${i}:unsupported`,p,{definition:r,context:s})),void kA.error(p)}const h=new c;return h.read(r,s),h}}function $ce(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=k1(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;(i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(e[a.json.type[0]]=s);const l=(r=a.json)==null?void 0:r.write;if(!l||!l.writer){e[n]=s;continue}const c=l.target,h=typeof c=="string"?c:t.key,p={};l.writer(n,p,h),p[h]&&(e[p[h]]=s)}return e}function Ece(t){if(t.json||(t.json={}),A4(t.json),O4(t.json),P4(t.json),t.json.origins)for(const e in t.json.origins)A4(t.json.origins[e]),O4(t.json.origins[e]),P4(t.json.origins[e]);return!0}function P4(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function A4(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function O4(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function L4(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&Cq(t.type))?e.write.writer=Ice:i>1?e.write.writer=kce(i):e.types?Array.isArray(e.types)?e.write.writer=Tce(e.types[0]):e.write.writer=Mce(e.types):e.write.writer=Rb}function Mce(t){return(e,i,r,n)=>e?Lq(e,t,n)?Rb(e,i,r,n):void 0:Rb(e,i,r,n)}function Lq(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new C(`${r}:unsupported`,n,{definition:t,context:i})),U.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function Tce(t){return(e,i,r,n)=>!e||!Array.isArray(e)?Rb(e,i,r,n):Rb(e.filter(s=>Lq(s,t,n)),i,r,n)}function Rb(t,e,i,r){Sn(i,x2(t,r),e)}function x2(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?$2(t):t}function $2(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Ice(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>x2(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[x2(t,r)],Sn(i,n,e)}function Rq(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>Rq(r,e,i-1)):x2(t,e)}function kce(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=Rq(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Sn(r,s,i)}}function Cce(t,e){return ND(t,"any",e==null?void 0:e.origin)}function CA(t,e){return ND(t,"read",e==null?void 0:e.origin)}function Fq(t,e){return ND(t,"write",e==null?void 0:e.origin)}function ND(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function Pce(t){const e=Ace(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],n=r.types?Oce(r):e;k4(n,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),L4(n,r)}k4(e,t.json,!0),L4(e,t.json)}function Ace(t){return t.json.types?PA(t.json):t.type?Dq(t):PA(t)}function Oce(t){return t.type?Dq(t):PA(t)}function Dq(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!mq(i);)i=i[0],e++;return{type:i,ndimArray:e}}function PA(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function Lce(t){Ece(t)&&(_ce(t),Pce(t))}const mk=new Set,yk=new Set;function E(t){return e=>{e.prototype.declaredClass=t,Fce(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!mk.has(n.initialize)&&(mk.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!yk.has(n.destroy)&&(yk.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);mk.clear(),yk.clear();class s extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[Eq];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,c.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=k1(e.prototype),s.prototype.declaredClass=t,s}}function Rce(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;Ce(r.observerObject);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function Fce(t){const e=t.prototype,i=k1(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];Lce(s),r[n]={enumerable:!0,configurable:!0,get:Rce(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===cc.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}function Q6e(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function Dce(t,e){for(const i of t)if(i!=null&&e(i))return i}function E2(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Kr=class AA{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(E2(e)){const r=this._getOrCreateGroup(i);for(const n of e)this._isHandle(n)&&r.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&E2(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof AA)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof AA?i.removeAll():i.remove()}};function Nce(t){return t&&t.release&&typeof t.release=="function"}function jce(t){return t&&t.acquire&&typeof t.acquire=="function"}let ru=class OA{constructor(e,i,r,n=1,s=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(OA.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):jce(i)&&i.acquire(...e),i}release(e){e&&!OA.test.disabled&&(this._releaseFunction?this._releaseFunction(e):Nce(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};ru.test={disabled:!1};let Vce=class{constructor(e,i){this._observers=e,this._observer=i}remove(){xA(this._observers,this._observer)}},Nq=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return zce;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new Vce(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const zce=Et();var Ve;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Ve||(Ve={}));const LA=Ve.USER+1;function wh(t){switch(t){case"defaults":return Ve.DEFAULTS;case"service":return Ve.SERVICE;case"portal-item":return Ve.PORTAL_ITEM;case"web-scene":return Ve.WEB_SCENE;case"web-map":return Ve.WEB_MAP;case"link-chart":return Ve.LINK_CHART;case"user":return Ve.USER;default:return null}}function M2(t){switch(t){case Ve.DEFAULTS:return"defaults";case Ve.SERVICE:return"service";case Ve.PORTAL_ITEM:return"portal-item";case Ve.WEB_SCENE:return"web-scene";case Ve.WEB_MAP:return"web-map";case Ve.LINK_CHART:return"link-chart";case Ve.USER:return"user"}return void 0}function Uce(t){return M2(t)}let R4=class{constructor(e,i){this.propertyName=e,this.metadata=i,this.observerObject=new Bce,this._accessed=null,this._handles=null,this.observerObject.flags=bt.Dirty|(i.nonNullable?bt.NonNullable:0)|(i.hasOwnProperty("value")?bt.HasDefaultValue:0)|(i.get===void 0?bt.DepTrackingInitialized:0)|(i.dependsOn===void 0?bt.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){const i=this.observerObject;Ce(i);const r=e.store,n=this.propertyName,s=i.flags,o=r.get(n);if(s&bt.Computing||~s&bt.Dirty&&r.has(n))return o;i.flags|=bt.Computing;const a=e.host;let l;s&bt.AutoTracked?l=Oc(this,this.metadata.get,a):(kq(a,this),l=this.metadata.get.call(a)),r.set(n,l,Ve.COMPUTED);const c=r.get(n);return c===o?i.flags&=~bt.Dirty:gce(this.commit,this),i.flags&=~bt.Computing,c}onObservableAccessed(e){if(e===this.observerObject)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=bt.DepTrackingInitialized;const i=this._accessed;if(i==null||i.length===0)return;let r=this._handles;r==null&&(r=[],this._handles=r);for(let n=0;n<i.length;++n)r.push(i[n].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~bt.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},Bce=class extends Nq{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&bt.Overriden&&(this.flags|=bt.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&bt.Dirty&&this.onCommitted(),super.destroy()}},Gce=class jq{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new jq;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,F(r))}),i}get(e){return this._values.get(e)}originOf(){return Ve.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function LS(t,e,i){return t!==void 0}function F4(t,e,i,r){return t!==void 0&&(!(i==null&&t.observerObject.flags&bt.NonNullable)||(r.lifecycle,cc.INITIALIZING,!1))}function Hce(t){return t&&typeof t.destroy=="function"}U.getLogger("esri.core.accessorSupport.Properties");let qce=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=cc.INITIALIZING,this.store=new Gce,this._origin=Ve.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new R4(r,i[r]);this.propertiesByName.set(r,n)}this.metadatas=i}initialize(){this.lifecycle=cc.CONSTRUCTING}constructed(){this.lifecycle=cc.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const r=this.internalGet(e);r&&Hce(r)&&(r.destroy(),~i.observerObject.flags&bt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==cc.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);Ce(i.observerObject);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.observerObject.flags&bt.HasDefaultValue)return"defaults"}return M2(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(LS(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);LS(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!LS(n))return"";const s=new Set,o=Oc({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=n.metadata.get)==null?void 0:l.call(e)});let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;if(s.size===0)return a;r+="  ";for(const l of s)l instanceof R4&&(a+=`${r}${l.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(LS(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.observerObject.flags&bt.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e),r=i==null?void 0:i.observerObject;r&&r.flags&bt.Overriden&&(r.flags&=~bt.Overriden,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!F4(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(gk.release(s),!o)return;i=a}r.observerObject.flags|=bt.Overriden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!F4(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(gk.release(o),!a)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=wh(e)}getDefaultOrigin(){return M2(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==cc.INITIALIZING?this._origin:Ve.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;n.has(s,r)&&PD(i,n.get(s))&&~e.observerObject.flags&bt.Overriden&&r===n.originOf(s)||(e.invalidate(),n.set(s,i,r),e.commit(),Iq(this.host,e))}_cast(e,i){const r=gk.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},Wce=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const gk=new ru(Wce);let Zce;function Yce(){return Zce}function Jce(t){t.length=0}let jn=class{constructor(e=50,i=50){this._pool=new ru(Array,void 0,Jce,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return vk.acquire()}static release(e){return vk.release(e)}static prune(){vk.prune()}};const vk=new jn(100);let Vq=class extends ru{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=sce(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const RS=[];function T2(t){RS.push(t),RS.length===1&&queueMicrotask(()=>{const e=RS.slice();RS.length=0;for(const i of e)i()})}let Fw=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var RA;(function(t){const e=(s,o,a,l)=>{let c=o,h=o;const p=a>>>1,f=s[c-1];for(;h<=p;){h=c<<1,h<a&&l(s[h-1],s[h])<0&&++h;const y=s[h-1];if(l(y,f)<=0)break;s[c-1]=y,c=h}s[c-1]=f},i=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(s,h,a,l);const c=o+1;for(let h=a-1;h>o;h--){const p=s[o];s[o]=s[h],s[h]=p,e(s,c,h,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(s,h,a,l),yield;const c=o+1;for(let h=a-1;h>o;h--){const p=s[o];s[o]=s[h],s[h]=p,e(s,c,h,l),yield}}t.sort=r,t.iterableSort=n})(RA||(RA={}));const D4=RA,Kce=1.5,Qce=1.1;let em=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new QH,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>N4(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,N4(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=SA(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(SA(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=jue(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){D4.sort(this.data,0,this.length,e)}iterableSort(e){return D4.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){for(let r=0;r<this.length;++r){const n=this.data[r];if(e.call(i,n,r))return n}}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const r=this.length,n=this.data;for(let s=0;s<r;++s)e.call(i,n[s],s,n)}forEach(e,i){for(let r=0;r<this.length;++r)e.call(i,this.data[r],r,this.data)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}};function N4(t){t.data.length>Kce*t.length&&(t.data.length=Math.floor(t.length*Qce))}function Xce(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(r)}}}}const Y0=Xce(globalThis);function fT(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function mT(t,e,i){if(!fT(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const r=e.slice();for(const n of r)t.addEventListener(n,i);return{remove(){for(const n of r)t.removeEventListener(n,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function zq(t,e,i){if(!fT(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=mT(t,e,n=>{r.remove(),i.call(t,n)});return{remove(){r.remove()}}}const ede={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Va({key:t}){return ede[t]||t}function Ut(t="Aborted"){return new C("AbortError",t)}function Tt(t,e="Aborted"){if(to(t))throw Ut(e)}function yT(t){return t!=null?"aborted"in t?t:t.signal:t}function to(t){const e=yT(t);return e!=null&&e.aborted}function Wl(t){if(xn(t))throw t}function I2(t){if(!xn(t))throw t}function Ws(t,e){const i=yT(t);if(i!=null){if(!i.aborted)return zq(i,"abort",()=>e());e()}}function jD(t,e){const i=yT(t);if(i!=null)return Tt(i),zq(i,"abort",()=>e(Ut()))}function xm(t,e){return yT(e)==null?t:new Promise((i,r)=>{let n=Ws(e,()=>r(Ut()));const s=()=>n=zt(n);t.then(s,s),t.then(i,r)})}function xn(t){return(t==null?void 0:t.name)==="AbortError"}async function qg(t){try{return await t}catch(e){if(!xn(e))throw e;return}}async function Di(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),n=await Di(r),s={};return i.map((o,a)=>s[o]=n[a]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function Uq(t){return(await Di(t)).filter(e=>!!e.value).map(e=>e.value)}function C1(t,e=void 0,i){const r=new AbortController;return Ws(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(e)},t);Ws(r,()=>{o&&(clearTimeout(o),s(Ut()))})})}function Nc(t){return t&&typeof t.then=="function"}function FA(t){return Nc(t)?t:Promise.resolve(t)}function tm(t,e=-1){let i,r,n,s,o=null;const a=(...l)=>{if(i){r=l,s&&s.reject(Ut()),s=bs();const f=s.promise;if(o){const y=o;o=null,y.abort()}return f}if(n=s||bs(),s=null,e>0){const f=new AbortController;i=FA(t(...l,f.signal));const y=i;C1(e).then(()=>{i===y&&(s?f.abort():o=f)})}else i=1,i=FA(t(...l));const c=()=>{const f=r;r=n=i=o=null,f!=null&&a(...f)},h=i,p=n;return h.then(c,c),h.then(p.resolve,p.reject),p.promise};return a}function bs(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>Y0.setTimeout(()=>r.reject(s),n),r.promise=i,r}async function j4(t){await Promise.resolve(),Tt(t)}function uze(t){return t}function cze(t){return .001*t}function dze(){return performance.now()}let tde=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},ide=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},DA=0;const Rv={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},NA=["prepare","preRender","render","postRender","update","finish"],jA=[],$m=new em;let rde=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const k2={frameTasks:$m,willDispatch:!1,clearFrameTasks:nde,dispatch:Hq,executeFrameTasks:sde};function J0(t){const e=new ide(t);return jA.push(e),k2.willDispatch||(k2.willDispatch=!0,T2(Hq)),e}function b0(t){const e=new tde(t);return $m.push(e),C2==null&&(DA=performance.now(),C2=requestAnimationFrame(Bq)),new rde(e)}let C2=null;function nde(t=!1){$m.forAll(e=>{e.removed=!0}),t&&Gq()}function Bq(){const t=performance.now();C2=null,C2=$m.length>0?requestAnimationFrame(Bq):null,k2.executeFrameTasks(t)}function sde(t){const e=t-DA;DA=t;const i=1e3/60,r=Math.max(0,e-i);Rv.time=t,Rv.frameDuration=i-r;for(let n=0;n<NA.length;n++){const s=performance.now(),o=NA[n];$m.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(Rv.elapsedFrameTime=performance.now()-t,Rv.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,Rv)))}),ode[n].record(performance.now()-s)}Gq(),ade.record(performance.now()-t)}const FS=new em;function Gq(){$m.forAll(t=>{t.removed&&FS.push(t)}),$m.removeUnorderedMany(FS.data,FS.length),FS.clear()}function Hq(){for(;jA.length;){const t=jA.shift();t.isActive&&t.callback()}k2.willDispatch=!1}function mze(t=1,e){const i=bs(),r=()=>{to(e)?i.reject(Ut()):t===0?i():(--t,T2(()=>r()))};return r(),i.promise}const ode=NA.map(t=>new Fw(t)),ade=new Fw("total");function lde(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let ude=0;function Wg(){return++ude}let gT=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new cde(e),V4.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;V4.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,r=this._observerObject;for(let n=0;n<i.length;++n)e.push(i[n].observe(r));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},cde=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=dde}};const V4=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function dde(){}let Zg=!1;const P2=[];function qq(t,e){let i=new gT(s),r=null,n=!1;function s(){if(!i||n)return;if(Zg)return void Yq(s);const a=r;i.clear(),Zg=!0,n=!0,r=Oc(i,t),n=!1,Zg=!1,e(r,a),Jq()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Oc(i,t),n=!1,{remove:o}}function Wq(t,e){let i=new gT(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=Oc(i,t),r):null}return o(),{remove:s}}function Zq(t){let e=new gT(r),i=!1;function r(){e&&!i&&(Zg?Yq(r):(e.clear(),Zg=!0,i=!0,Oc(e,t),i=!1,Zg=!1,Jq()))}function n(){e&&(e.destroy(),e=null)}return i=!0,Oc(e,t),i=!1,{remove:n}}function Yq(t){P2.includes(t)||P2.unshift(t)}function Jq(){for(;P2.length;)P2.pop()()}var Dw;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(Dw||(Dw={}));let Fb=class{constructor(){this.uid=Wg(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(Dw.Untracked,e,i,r,n,s,PD)}static acquireTracked(e,i,r,n){return this.pool.acquire(Dw.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===Dw.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,a){this.uid=Wg(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Wg(),this.removed=!0}};Fb.pool=new Vq(Fb);const b$=new jn,vc=new Set;let A2;function O2(t){vc.delete(t),vc.add(t),A2||(A2=J0(fde))}function hde(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function pde(t){for(const e of vc.values())e.target===t&&(e.removed=!0)}function fde(){let t=10;for(;A2&&t--;){A2=null;const e=mde(),i=b$.acquire();for(const r of e){const n=r.uid;hde(r),n===r.uid&&r.removed&&i.push(r)}for(const r of vc)r.removed&&(i.push(r),vc.delete(r));for(const r of i)Fb.pool.release(r);b$.release(i),b$.release(e),VA.forEach(r=>r())}}function mde(){const t=b$.acquire();t.length=vc.size;let e=0;for(const i of vc)t[e]=i,++e;return vc.clear(),t}const VA=new Set;function yde(t){return VA.add(t),{remove(){VA.delete(t)}}}function gde(t,e,i){let r=vq(t,e,i,(n,s,o)=>{let a,l,c=Wq(()=>I1(n,s),(h,p)=>{n.__accessor__.destroyed||a&&a.uid!==l?r.remove():(a||(a=Fb.acquireUntracked(h,o,p,n,s),l=a.uid),O2(a))});return{remove:_q(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,O2(a)),a=null),r=c=null})}});return r}function vde(t,e,i){const r=vq(t,e,i,(n,s,o)=>{let a=!1;return qq(()=>I1(n,s),(l,c)=>{n.__accessor__.destroyed?r.remove():a||(a=!0,PD(c,l)||o.call(n,l,c,s,n),a=!1)})});return r}function _de(t,e,i,r=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:r?vde(t,e,i):gde(t,e,i)}function wde(t,e,i){let r,n,s=Wq(t,(o,a)=>{r&&r.uid!==n?s.remove():(r||(r=Fb.acquireTracked(o,e,a,i),n=r.uid),O2(r))});return{remove:_q(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,O2(r)),r=null),s=null})}}function bde(t,e,i){let r=!1;return qq(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function Sde(t,e,i=!1,r=lq){return i?bde(t,e,r):wde(t,e,r)}function z4(t){return lde(vc,e=>e.oldValue===t)}var Kq,Qq;function xde(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const dd=Symbol("Accessor-Handles"),zA=Symbol("Accessor-Initialized");let X=class Xq{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}k1(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let p;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{p=l.apply(this,c)}catch(f){throw this.inherited=h,f}return this.inherited=h,p}:e[a]}for(const a in i){const l=xde(i[a]);d(l)(o.prototype,a)}return E(r)(o)}constructor(...e){if(this[Kq]=null,this[Qq]=!1,this.constructor===Xq)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new qce(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e)),U4.register(this,i.propertiesByName,this)}postscript(e){const i=this.__accessor__,r=i.ctorArgs||e;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[zA]=!0}initialize(){}[Eq](){this[dd]=Ue(this[dd])}destroy(){var e;this.destroyed||(U4.unregister(this),pde(this),this.__accessor__.destroy(),(e=Yce())==null||e.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[zA]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return w2(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return b2(this,e,i),this}watch(e,i,r){return _de(this,e,i,r)}own(e){this.addHandles(e)}addHandles(e,i){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}let r=this[dd];r==null&&(r=this[dd]=new Kr),r.add(e,i)}removeHandles(e){const i=this[dd];i!=null&&i.remove(e)}removeAllHandles(){const e=this[dd];e!=null&&e.removeAll()}hasHandles(e){const i=this[dd];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};Kq=dd,Qq=zA;const U4=new FinalizationRegistry(t=>{for(const e of t.values())e.destroy()});let $de=class eW{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new eW;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,F(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Ve.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===Ve.DEFAULTS){const n=this._values.get(e);if(n&&n.origin!=null&&n.origin>r)return}this._values.set(e,new Ede(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===Ve.DEFAULTS?e:Ve.USER}},Ede=class{constructor(e,i){this.value=e,this.origin=i}};function tW(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),Ve.DEFAULTS)});const r=t.metadatas;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Ve.DEFAULTS)})}function Mde(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&T4(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&T4(n,i))return!0;return!1}function Tde(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Ide(t,e,i,r,n){let s=CA(e[i],n);Tde(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=CA(e[o],n),Mde(s,i,r)&&(t[o]=!0)}function kde(t,e,i,r){const n=i.metadatas,s=Cce(n[e],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const iW={origin:"service"};function rW(t,e,i=iW){if(!e||typeof e!="object")return;const r=Bn(t),n=r.metadatas,s={};for(const o of Object.getOwnPropertyNames(e))Ide(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=CA(n[o],i).read,l=a&&a.source;let c;c=l&&typeof l=="string"?I1(e,l):e[o],a&&a.reader&&(c=a.reader.call(t,c,e,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||kde(t,o,r,i)}r.setDefaultOrigin("user")}function Cde(t,e,i,r=iW){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||t.loaded?r&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)})}function Pde(t,e,i,r,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,s,i,n),s}function nW(t,e,i,r,n,s){if(!r||!r.write)return!1;const o=t.get(i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1)return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new C("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&s&&s.messages?s.messages.push(a):a&&!s&&U.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Ve.DEFAULTS)&&Ade(t,i,s,r,o)||!n.ignoreOrigin&&s&&s.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<wh(s.origin))}function Ade(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return lT(o,n)}return!1}return s===n}function Ode(t,e,i,r){const n=Bn(t),s=n.metadatas,o=Fq(s[e],r);return!!o&&nW(t,n,e,o,i,r)}function sW(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return v$(e,t.toJSON(i));const r=Bn(t),n=r.metadatas;for(const a in n){const l=Fq(n[a],i);if(!nW(t,r,a,l,void 0,i))continue;const c=t.get(a),h=Pde(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,i);Object.keys(h).length>0&&(e=v$(e,h),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>v$(e,h,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:Uce(r.store.originOf(a)),newOrigin:i.origin}))}return e}const K0=t=>{let e=class extends t{constructor(...i){super(...i);const r=Bn(this),n=r.store,s=new $de;r.store=s,tW(r,n,s)}read(i,r){rW(this,i,r)}write(i,r){return sW(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Lde.call(this,i,r)}};return e=u([E("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Lde(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let G=class extends K0(X){};G=u([E("esri.core.JSONSupport")],G);function Q(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const c=$q(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))})}}let Ge=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&Sn(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const r in e)i[e[r]]=r;return i}_getKeysSorted(e){const i=[];for(const r in e)i.push(r);return i.sort(),i}};function $n(){return function(t,e){return new Ge(t,{ignoreUnknown:!0,...e})}}let VD=class{constructor(e,i,r,n){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const It=new VD(6378137,1/298.257223563,3e5,.006694379990137799),_c=new VD(3396190,1/169.8944472236118,23e4),qh=new VD(1737400,0,0);var Em;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Em||(Em={}));let m;const M={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(m=2e3;m<=2045;m++)M[m]=0;for(m=2056;m<=2065;m++)M[m]=0;for(m=2067;m<=2135;m++)M[m]=0;for(m=2137;m<=2154;m++)M[m]=0;for(m=2161;m<=2170;m++)M[m]=0;for(m=2172;m<=2193;m++)M[m]=0;for(m=2195;m<=2198;m++)M[m]=0;for(m=2200;m<=2203;m++)M[m]=0;for(m=2205;m<=2217;m++)M[m]=0;for(m=2222;m<=2224;m++)M[m]=1;for(m=2225;m<=2250;m++)M[m]=2;for(m=2251;m<=2253;m++)M[m]=1;for(m=2257;m<=2264;m++)M[m]=2;for(m=2274;m<=2279;m++)M[m]=2;for(m=2280;m<=2282;m++)M[m]=1;for(m=2283;m<=2289;m++)M[m]=2;for(m=2290;m<=2292;m++)M[m]=0;for(m=2308;m<=2313;m++)M[m]=0;for(m=2315;m<=2491;m++)M[m]=0;for(m=2494;m<=2866;m++)M[m]=0;for(m=2867;m<=2869;m++)M[m]=1;for(m=2870;m<=2888;m++)M[m]=2;for(m=2891;m<=2895;m++)M[m]=2;for(m=2896;m<=2898;m++)M[m]=1;for(m=2902;m<=2908;m++)M[m]=2;for(m=2915;m<=2920;m++)M[m]=2;for(m=2921;m<=2923;m++)M[m]=1;for(m=2924;m<=2930;m++)M[m]=2;for(m=2931;m<=2962;m++)M[m]=0;for(m=2964;m<=2968;m++)M[m]=2;for(m=2969;m<=2973;m++)M[m]=0;for(m=2975;m<=2991;m++)M[m]=0;for(m=2995;m<=3051;m++)M[m]=0;for(m=3054;m<=3079;m++)M[m]=0;for(m=3081;m<=3088;m++)M[m]=0;for(m=3092;m<=3101;m++)M[m]=0;for(m=3106;m<=3138;m++)M[m]=0;for(m=3146;m<=3151;m++)M[m]=0;for(m=3153;m<=3166;m++)M[m]=0;for(m=3168;m<=3172;m++)M[m]=0;for(m=3174;m<=3203;m++)M[m]=0;for(m=3294;m<=3358;m++)M[m]=0;for(m=3367;m<=3403;m++)M[m]=0;for(m=3408;m<=3416;m++)M[m]=0;for(m=3417;m<=3438;m++)M[m]=2;for(m=3441;m<=3446;m++)M[m]=2;for(m=3447;m<=3450;m++)M[m]=0;for(m=3451;m<=3459;m++)M[m]=2;for(m=3460;m<=3478;m++)M[m]=0;for(m=3554;m<=3559;m++)M[m]=0;for(m=3560;m<=3570;m++)M[m]=2;for(m=3571;m<=3581;m++)M[m]=0;for(m=3594;m<=3597;m++)M[m]=0;for(m=3601;m<=3604;m++)M[m]=0;for(m=3637;m<=3639;m++)M[m]=0;for(m=3665;m<=3667;m++)M[m]=0;for(m=3693;m<=3695;m++)M[m]=0;for(m=3701;m<=3727;m++)M[m]=0;for(m=3728;m<=3739;m++)M[m]=2;for(m=3740;m<=3751;m++)M[m]=0;for(m=3753;m<=3760;m++)M[m]=2;for(m=3761;m<=3773;m++)M[m]=0;for(m=3775;m<=3777;m++)M[m]=0;for(m=3779;m<=3781;m++)M[m]=0;for(m=3783;m<=3785;m++)M[m]=0;for(m=3788;m<=3791;m++)M[m]=0;for(m=3797;m<=3802;m++)M[m]=0;for(m=3814;m<=3816;m++)M[m]=0;for(m=3825;m<=3829;m++)M[m]=0;for(m=3832;m<=3841;m++)M[m]=0;for(m=3844;m<=3852;m++)M[m]=0;for(m=3873;m<=3885;m++)M[m]=0;for(m=3890;m<=3893;m++)M[m]=0;for(m=3907;m<=3912;m++)M[m]=0;for(m=3942;m<=3950;m++)M[m]=0;for(m=3968;m<=3970;m++)M[m]=0;for(m=3973;m<=3976;m++)M[m]=0;for(m=3986;m<=3989;m++)M[m]=0;for(m=3994;m<=3997;m++)M[m]=0;for(m=4048;m<=4051;m++)M[m]=0;for(m=4056;m<=4063;m++)M[m]=0;for(m=4093;m<=4096;m++)M[m]=0;for(m=4390;m<=4398;m++)M[m]=0;for(m=4399;m<=4413;m++)M[m]=2;for(m=4418;m<=4433;m++)M[m]=2;for(m=4455;m<=4457;m++)M[m]=2;for(m=4484;m<=4489;m++)M[m]=0;for(m=4491;m<=4554;m++)M[m]=0;for(m=4568;m<=4589;m++)M[m]=0;for(m=4652;m<=4656;m++)M[m]=0;for(m=4766;m<=4800;m++)M[m]=0;for(m=5014;m<=5016;m++)M[m]=0;for(m=5069;m<=5072;m++)M[m]=0;for(m=5105;m<=5130;m++)M[m]=0;for(m=5173;m<=5188;m++)M[m]=0;for(m=5253;m<=5259;m++)M[m]=0;for(m=5269;m<=5275;m++)M[m]=0;for(m=5292;m<=5311;m++)M[m]=0;for(m=5329;m<=5331;m++)M[m]=0;for(m=5343;m<=5349;m++)M[m]=0;for(m=5355;m<=5357;m++)M[m]=0;for(m=5387;m<=5389;m++)M[m]=0;for(m=5459;m<=5463;m++)M[m]=0;for(m=5479;m<=5482;m++)M[m]=0;for(m=5518;m<=5520;m++)M[m]=0;for(m=5530;m<=5539;m++)M[m]=0;for(m=5550;m<=5552;m++)M[m]=0;for(m=5562;m<=5583;m++)M[m]=0;for(m=5623;m<=5625;m++)M[m]=2;for(m=5631;m<=5639;m++)M[m]=0;for(m=5649;m<=5653;m++)M[m]=0;for(m=5663;m<=5680;m++)M[m]=0;for(m=5682;m<=5685;m++)M[m]=0;for(m=5875;m<=5877;m++)M[m]=0;for(m=5896;m<=5899;m++)M[m]=0;for(m=5921;m<=5940;m++)M[m]=0;for(m=6050;m<=6125;m++)M[m]=0;for(m=6244;m<=6275;m++)M[m]=0;for(m=6328;m<=6348;m++)M[m]=0;for(m=6350;m<=6356;m++)M[m]=0;for(m=6366;m<=6372;m++)M[m]=0;for(m=6381;m<=6387;m++)M[m]=0;for(m=6393;m<=6404;m++)M[m]=0;for(m=6480;m<=6483;m++)M[m]=0;for(m=6511;m<=6514;m++)M[m]=0;for(m=6579;m<=6581;m++)M[m]=0;for(m=6619;m<=6624;m++)M[m]=0;for(m=6625;m<=6627;m++)M[m]=2;for(m=6628;m<=6632;m++)M[m]=0;for(m=6634;m<=6637;m++)M[m]=0;for(m=6669;m<=6692;m++)M[m]=0;for(m=6707;m<=6709;m++)M[m]=0;for(m=6720;m<=6723;m++)M[m]=0;for(m=6732;m<=6738;m++)M[m]=0;for(m=6931;m<=6933;m++)M[m]=0;for(m=6956;m<=6959;m++)M[m]=0;for(m=7005;m<=7007;m++)M[m]=0;for(m=7057;m<=7070;m++)M[m]=2;for(m=7074;m<=7082;m++)M[m]=0;for(m=7109;m<=7118;m++)M[m]=0;for(m=7119;m<=7127;m++)M[m]=1;for(m=7374;m<=7376;m++)M[m]=0;for(m=7528;m<=7586;m++)M[m]=0;for(m=7587;m<=7645;m++)M[m]=2;for(m=7692;m<=7696;m++)M[m]=0;for(m=7755;m<=7787;m++)M[m]=0;for(m=7791;m<=7795;m++)M[m]=0;for(m=7799;m<=7801;m++)M[m]=0;for(m=7803;m<=7805;m++)M[m]=0;for(m=7825;m<=7831;m++)M[m]=0;for(m=7845;m<=7859;m++)M[m]=0;for(m=8013;m<=8032;m++)M[m]=0;for(m=8065;m<=8068;m++)M[m]=1;for(m=8518;m<=8529;m++)M[m]=2;for(m=8533;m<=8536;m++)M[m]=2;for(m=8538;m<=8540;m++)M[m]=2;for(m=8677;m<=8679;m++)M[m]=0;for(m=8836;m<=8840;m++)M[m]=0;for(m=8857;m<=8859;m++)M[m]=0;for(m=8908;m<=8910;m++)M[m]=0;for(m=9154;m<=9159;m++)M[m]=0;for(m=9205;m<=9218;m++)M[m]=0;for(m=9271;m<=9273;m++)M[m]=0;for(m=9295;m<=9297;m++)M[m]=0;for(m=9356;m<=9360;m++)M[m]=0;for(m=9404;m<=9407;m++)M[m]=0;for(m=9476;m<=9482;m++)M[m]=0;for(m=9487;m<=9494;m++)M[m]=0;for(m=9697;m<=9699;m++)M[m]=0;for(m=9821;m<=9865;m++)M[m]=0;for(m=20002;m<=20032;m++)M[m]=0;for(m=20047;m<=20049;m++)M[m]=0;for(m=20062;m<=20092;m++)M[m]=0;for(m=20135;m<=20138;m++)M[m]=0;for(m=20248;m<=20258;m++)M[m]=0;for(m=20348;m<=20358;m++)M[m]=0;for(m=20436;m<=20440;m++)M[m]=0;for(m=20822;m<=20824;m++)M[m]=0;for(m=20904;m<=20932;m++)M[m]=0;for(m=20934;m<=20936;m++)M[m]=0;for(m=21004;m<=21032;m++)M[m]=0;for(m=21035;m<=21037;m++)M[m]=0;for(m=21095;m<=21097;m++)M[m]=0;for(m=21148;m<=21150;m++)M[m]=0;for(m=21207;m<=21264;m++)M[m]=0;for(m=21307;m<=21364;m++)M[m]=0;for(m=21413;m<=21423;m++)M[m]=0;for(m=21453;m<=21463;m++)M[m]=0;for(m=21473;m<=21483;m++)M[m]=0;for(m=21780;m<=21782;m++)M[m]=0;for(m=21891;m<=21894;m++)M[m]=0;for(m=21896;m<=21899;m++)M[m]=0;for(m=22171;m<=22177;m++)M[m]=0;for(m=22181;m<=22187;m++)M[m]=0;for(m=22191;m<=22197;m++)M[m]=0;for(m=22207;m<=22222;m++)M[m]=0;for(m=22234;m<=22236;m++)M[m]=0;for(m=22243;m<=22250;m++)M[m]=0;for(m=22262;m<=22265;m++)M[m]=0;for(m=22307;m<=22322;m++)M[m]=0;for(m=22348;m<=22357;m++)M[m]=0;for(m=22407;m<=22422;m++)M[m]=0;for(m=22462;m<=22465;m++)M[m]=0;for(m=22521;m<=22525;m++)M[m]=0;for(m=22607;m<=22622;m++)M[m]=0;for(m=22641;m<=22646;m++)M[m]=0;for(m=22648;m<=22657;m++)M[m]=0;for(m=22707;m<=22722;m++)M[m]=0;for(m=22762;m<=22765;m++)M[m]=0;for(m=22991;m<=22994;m++)M[m]=0;for(m=23028;m<=23038;m++)M[m]=0;for(m=23830;m<=23853;m++)M[m]=0;for(m=23866;m<=23872;m++)M[m]=0;for(m=23877;m<=23884;m++)M[m]=0;for(m=23886;m<=23894;m++)M[m]=0;for(m=23946;m<=23948;m++)M[m]=0;for(m=24311;m<=24313;m++)M[m]=0;for(m=24342;m<=24347;m++)M[m]=0;for(m=24370;m<=24374;m++)M[m]=10;for(m=24375;m<=24381;m++)M[m]=0;for(m=24718;m<=24721;m++)M[m]=0;for(m=24817;m<=24821;m++)M[m]=0;for(m=24877;m<=24882;m++)M[m]=0;for(m=24891;m<=24893;m++)M[m]=0;for(m=25391;m<=25395;m++)M[m]=0;for(m=25828;m<=25838;m++)M[m]=0;for(m=26191;m<=26195;m++)M[m]=0;for(m=26391;m<=26393;m++)M[m]=0;for(m=26701;m<=26722;m++)M[m]=0;for(m=26729;m<=26799;m++)M[m]=2;for(m=26801;m<=26803;m++)M[m]=2;for(m=26811;m<=26813;m++)M[m]=2;for(m=26847;m<=26870;m++)M[m]=2;for(m=26891;m<=26899;m++)M[m]=0;for(m=26901;m<=26923;m++)M[m]=0;for(m=26929;m<=26946;m++)M[m]=0;for(m=26948;m<=26998;m++)M[m]=0;for(m=27037;m<=27040;m++)M[m]=0;for(m=27205;m<=27232;m++)M[m]=0;for(m=27258;m<=27260;m++)M[m]=0;for(m=27391;m<=27398;m++)M[m]=0;for(m=27561;m<=27564;m++)M[m]=0;for(m=27571;m<=27574;m++)M[m]=0;for(m=27581;m<=27584;m++)M[m]=0;for(m=27591;m<=27594;m++)M[m]=0;for(m=28191;m<=28193;m++)M[m]=0;for(m=28348;m<=28358;m++)M[m]=0;for(m=28402;m<=28432;m++)M[m]=0;for(m=28462;m<=28492;m++)M[m]=0;for(m=29118;m<=29122;m++)M[m]=0;for(m=29168;m<=29172;m++)M[m]=0;for(m=29177;m<=29185;m++)M[m]=0;for(m=29187;m<=29195;m++)M[m]=0;for(m=29900;m<=29903;m++)M[m]=0;for(m=30161;m<=30179;m++)M[m]=0;for(m=30491;m<=30494;m++)M[m]=0;for(m=30729;m<=30732;m++)M[m]=0;for(m=31251;m<=31259;m++)M[m]=0;for(m=31265;m<=31268;m++)M[m]=0;for(m=31275;m<=31279;m++)M[m]=0;for(m=31281;m<=31297;m++)M[m]=0;for(m=31461;m<=31469;m++)M[m]=0;for(m=31491;m<=31495;m++)M[m]=0;for(m=31917;m<=31922;m++)M[m]=0;for(m=31965;m<=32e3;m++)M[m]=0;for(m=32001;m<=32003;m++)M[m]=2;for(m=32005;m<=32031;m++)M[m]=2;for(m=32033;m<=32060;m++)M[m]=2;for(m=32064;m<=32067;m++)M[m]=2;for(m=32074;m<=32077;m++)M[m]=2;for(m=32081;m<=32086;m++)M[m]=0;for(m=32107;m<=32130;m++)M[m]=0;for(m=32133;m<=32159;m++)M[m]=0;for(m=32164;m<=32167;m++)M[m]=2;for(m=32180;m<=32199;m++)M[m]=0;for(m=32201;m<=32260;m++)M[m]=0;for(m=32301;m<=32360;m++)M[m]=0;for(m=32601;m<=32662;m++)M[m]=0;for(m=32664;m<=32667;m++)M[m]=2;for(m=32701;m<=32761;m++)M[m]=0;for(m=53001;m<=53004;m++)M[m]=0;for(m=53008;m<=53019;m++)M[m]=0;for(m=53021;m<=53032;m++)M[m]=0;for(m=53034;m<=53037;m++)M[m]=0;for(m=53042;m<=53046;m++)M[m]=0;for(m=53074;m<=53080;m++)M[m]=0;for(m=54001;m<=54004;m++)M[m]=0;for(m=54008;m<=54019;m++)M[m]=0;for(m=54021;m<=54032;m++)M[m]=0;for(m=54034;m<=54037;m++)M[m]=0;for(m=54042;m<=54046;m++)M[m]=0;for(m=54048;m<=54053;m++)M[m]=0;for(m=54074;m<=54080;m++)M[m]=0;for(m=54098;m<=54101;m++)M[m]=0;for(m=102001;m<=102040;m++)M[m]=0;for(m=102042;m<=102063;m++)M[m]=0;for(m=102065;m<=102067;m++)M[m]=0;for(m=102070;m<=102117;m++)M[m]=0;for(m=102122;m<=102216;m++)M[m]=0;for(m=102221;m<=102377;m++)M[m]=0;for(m=102382;m<=102388;m++)M[m]=0;for(m=102389;m<=102398;m++)M[m]=2;for(m=102399;m<=102444;m++)M[m]=0;for(m=102445;m<=102447;m++)M[m]=2;for(m=102448;m<=102458;m++)M[m]=0;for(m=102459;m<=102468;m++)M[m]=2;for(m=102469;m<=102499;m++)M[m]=0;for(m=102500;m<=102519;m++)M[m]=1;for(m=102520;m<=102524;m++)M[m]=0;for(m=102525;m<=102529;m++)M[m]=2;for(m=102530;m<=102588;m++)M[m]=0;for(m=102590;m<=102598;m++)M[m]=0;for(m=102601;m<=102603;m++)M[m]=0;for(m=102605;m<=102628;m++)M[m]=0;for(m=102629;m<=102646;m++)M[m]=2;for(m=102648;m<=102700;m++)M[m]=2;for(m=102701;m<=102703;m++)M[m]=0;for(m=102707;m<=102730;m++)M[m]=2;for(m=102733;m<=102758;m++)M[m]=2;for(m=102767;m<=102900;m++)M[m]=0;for(m=102901;m<=102933;m++)M[m]=2;for(m=102934;m<=102950;m++)M[m]=13;for(m=102951;m<=102955;m++)M[m]=0;for(m=102961;m<=102963;m++)M[m]=0;for(m=102965;m<=102969;m++)M[m]=0;for(m=102971;m<=102973;m++)M[m]=0;for(m=102975;m<=102989;m++)M[m]=0;for(m=102990;m<=102992;m++)M[m]=1;for(m=102997;m<=103002;m++)M[m]=0;for(m=103003;m<=103008;m++)M[m]=2;for(m=103009;m<=103011;m++)M[m]=0;for(m=103012;m<=103014;m++)M[m]=2;for(m=103019;m<=103021;m++)M[m]=0;for(m=103022;m<=103024;m++)M[m]=2;for(m=103029;m<=103031;m++)M[m]=0;for(m=103032;m<=103034;m++)M[m]=2;for(m=103065;m<=103068;m++)M[m]=0;for(m=103074;m<=103076;m++)M[m]=0;for(m=103077;m<=103079;m++)M[m]=1;for(m=103080;m<=103082;m++)M[m]=0;for(m=103083;m<=103085;m++)M[m]=2;for(m=103090;m<=103093;m++)M[m]=0;for(m=103097;m<=103099;m++)M[m]=0;for(m=103100;m<=103102;m++)M[m]=2;for(m=103107;m<=103109;m++)M[m]=0;for(m=103110;m<=103112;m++)M[m]=2;for(m=103113;m<=103116;m++)M[m]=0;for(m=103117;m<=103120;m++)M[m]=2;for(m=103153;m<=103157;m++)M[m]=0;for(m=103158;m<=103162;m++)M[m]=2;for(m=103163;m<=103165;m++)M[m]=0;for(m=103166;m<=103168;m++)M[m]=1;for(m=103169;m<=103171;m++)M[m]=2;for(m=103186;m<=103188;m++)M[m]=0;for(m=103189;m<=103191;m++)M[m]=2;for(m=103192;m<=103195;m++)M[m]=0;for(m=103196;m<=103199;m++)M[m]=2;for(m=103200;m<=103224;m++)M[m]=0;for(m=103225;m<=103227;m++)M[m]=1;for(m=103232;m<=103237;m++)M[m]=0;for(m=103238;m<=103243;m++)M[m]=2;for(m=103244;m<=103246;m++)M[m]=0;for(m=103247;m<=103249;m++)M[m]=2;for(m=103254;m<=103256;m++)M[m]=0;for(m=103257;m<=103259;m++)M[m]=2;for(m=103264;m<=103266;m++)M[m]=0;for(m=103267;m<=103269;m++)M[m]=2;for(m=103300;m<=103375;m++)M[m]=0;for(m=103381;m<=103383;m++)M[m]=0;for(m=103384;m<=103386;m++)M[m]=1;for(m=103387;m<=103389;m++)M[m]=0;for(m=103390;m<=103392;m++)M[m]=2;for(m=103397;m<=103399;m++)M[m]=0;for(m=103400;m<=103471;m++)M[m]=2;for(m=103476;m<=103478;m++)M[m]=0;for(m=103479;m<=103481;m++)M[m]=2;for(m=103486;m<=103488;m++)M[m]=0;for(m=103489;m<=103491;m++)M[m]=2;for(m=103492;m<=103495;m++)M[m]=0;for(m=103496;m<=103499;m++)M[m]=2;for(m=103528;m<=103543;m++)M[m]=0;for(m=103544;m<=103548;m++)M[m]=2;for(m=103549;m<=103551;m++)M[m]=0;for(m=103552;m<=103554;m++)M[m]=1;for(m=103555;m<=103557;m++)M[m]=2;for(m=103558;m<=103560;m++)M[m]=0;for(m=103571;m<=103573;m++)M[m]=0;for(m=103574;m<=103576;m++)M[m]=2;for(m=103577;m<=103580;m++)M[m]=0;for(m=103581;m<=103583;m++)M[m]=2;for(m=103595;m<=103694;m++)M[m]=0;for(m=103696;m<=103699;m++)M[m]=0;for(m=103700;m<=103793;m++)M[m]=2;for(m=103794;m<=103890;m++)M[m]=0;for(m=103891;m<=103896;m++)M[m]=2;for(m=103900;m<=103971;m++)M[m]=2;for(m=103972;m<=103977;m++)M[m]=0;for(m=112e3;m<=112101;m++)M[m]=0;const Rde={102113:!0,102100:!0,3857:!0,3785:!0},Fde={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},B4='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',DS=[-20037508342788905e-9,20037508342788905e-9],NS=[-20037508342787e-6,20037508342787e-6],oW={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:DS,origin:NS,dx:1e-5},102100:{wkTemplate:B4,valid:DS,origin:NS,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:DS,origin:NS,dx:1e-5},3857:{wkTemplate:B4,valid:DS,origin:NS,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Si(t,e){return t===e||t!=null&&e!=null&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||Mm(t)&&Mm(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function Go(t){return Or(t)&&t.wkid&&oW[t.wkid]||null}function zD(t){return!!Or(t)&&(t.wkid?M[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function Dde(t){return!(BD(t)||HD(t))}function Db(t){return Or(t)&&t.wkid===4326}function xze(t){return Or(t)&&t.wkid===Em.CGCS2000}function Mm(t){return Or(t)&&t.wkid!=null&&Rde[t.wkid]===!0}function Nde(t){return Or(t)&&t.wkid===32662}function UD(t){return t===Em.GCSMARS2000||t===Em.GCSMARS2000_SPHERE}function BD(t){return Or(t)&&t.wkid!=null&&UD(t.wkid)}function GD(t){return t===Em.GCSMOON2000}function HD(t){return Or(t)&&t.wkid!=null&&GD(t.wkid)}function jde(t){return Or(t)&&t.wkid!=null&&Fde[t.wkid]===!0}function Or(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const Vde={wkid:4326,wkt:Wo(oW[4326].wkTemplate,{Central_Meridian:"0.0"})},zde={wkid:102100,latestWkid:3857},Ude={wkid:32662};function qD(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Bde=qD(It),aW=qD(_c),lW=qD(qh),Gde={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${It.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function WD(t){return t!=null&&(BD(t)||Si(t,aW))?_c:t!=null&&(HD(t)||Si(t,lW))?qh:It}function $ze(t){return UD(t)?_c:GD(t)?qh:It}const uW=39.37,Hde=It.radius*Math.PI/200,cW=/UNIT\[([^\]]+)\]\]$/i,im=M,dW=/UNIT\[([^\]]+)\]/i,qde=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Wde=$n()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),vl=t=>t*t,Hc=t=>t*t*t,Nb={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:vl(.001)},"square-centimeters":{inBaseUnits:vl(.01)},"square-decimeters":{inBaseUnits:vl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:vl(1e3)},"square-inches":{inBaseUnits:vl(.0254)},"square-feet":{inBaseUnits:vl(.3048)},"square-yards":{inBaseUnits:vl(.9144)},"square-miles":{inBaseUnits:vl(1609.344)},"square-us-feet":{inBaseUnits:vl(1200/3937)},acres:{inBaseUnits:.0015625*vl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Hc(.001)},"cubic-centimeters":{inBaseUnits:1e3*Hc(.01)},"cubic-decimeters":{inBaseUnits:1e3*Hc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Hc(1e3)},"cubic-inches":{inBaseUnits:1e3*Hc(.0254)},"cubic-feet":{inBaseUnits:1e3*Hc(.3048)},"cubic-yards":{inBaseUnits:1e3*Hc(.9144)},"cubic-miles":{inBaseUnits:1e3*Hc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Zde=(()=>{const t={};for(const e in Nb)for(const i in Nb[e].units)t[i]=e;return t})();function Yde(t,e,i){return t*Nb[i].units[e].inBaseUnits}function Jde(t,e,i){return t/Nb[i].units[e].inBaseUnits}const hW=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],Kde=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function UA(t){const e=Zde[t];if(!e)throw new Error("unknown type");return e}function G4(t,e=null){return e=e||UA(t),Nb[e].baseUnit===t}function ht(t,e,i){if(e===i)return t;const r=UA(e);if(r!==UA(i))throw new Error("incompatible units");const n=G4(e,r)?t:Yde(t,e,r);return G4(i,r)?n:Jde(n,i,r)}function pW(t,e){const i=ht(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function fW(t,e){const i=ht(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function mW(t,e){const i=ht(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function yW(t,e){const i=ht(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Qde(t,e){const i=ht(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Xde(t,e){const i=ht(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function gW(t,e,i){return ht(t,e,"meters")/(i*Math.PI/180)}function vW(t){return Wde.fromJSON(t.toLowerCase())||null}function S0(t){if(t!=null&&!Dde(t))return 1;const e=Ss(t);return e>1e5?1:e}function _W(t){return Ss(t)>=WD(t).metersPerDegree?"meters":P1(t)}function Ss(t,e=It.metersPerDegree){return ehe(t,!0)??e}function ehe(t,e=!1){const i=t!=null?t.wkid:null,r=t!=null?t.wkt:null;let n=null;if(i){if(UD(i))return _c.metersPerDegree;if(GD(i))return qh.metersPerDegree;n=im.values[im[i]],!n&&e&&qde.has(i)&&(n=Hde)}else r&&(SW(r)?n=H4(cW.exec(r),n):bW(r)&&(n=H4(dW.exec(r),n)));return n}function Eze(t){return t.isGeographic?1:Ss(t)}function H4(t,e){return t&&t[1]?wW(t[1]):e}function wW(t){return parseFloat(t.split(",")[1])}function P1(t){const e=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let r=null;if(e)r=im.units[im[e]];else if(i){const n=SW(i)?cW:bW(i)?dW:null;if(n){const s=n.exec(i);s&&s[1]&&(r=ihe(s[1]))}}return r!=null?vW(r):null}function Mze(t){const e=P1(t);return e!=null&&hW.includes(e)?e:null}function Tze(t){const e=_W(t);return e!=null&&hW.includes(e)?e:null}function Ize(t){const e=P1(t);return e==null?null:Kde.get(e)}function bW(t){return/^GEOCCS/i.test(t)}function SW(t){return/^PROJCS/i.test(t)}const the=1e-7;function ihe(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!im.units.includes(i)){const r=wW(t);i=null;const n=im.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<the){i=im.units[s];break}}return i}function kze(t){const e=P1(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const rhe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},nhe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},she={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},ohe=$n()(rhe),ahe=$n()(nhe),Cze=$n()(she);function ie(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=$q(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}var $l;let yt=$l=class extends G{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return $l.WebMercator;if(t.wkid===4326)return $l.WGS84}const e=new $l;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Db(this)}get isWebMercator(){return Mm(this)}get isGeographic(){return zD(this)}get isWrappable(){return jde(this)}get metersPerUnit(){return Ss(this)}get unit(){return P1(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===$l.WGS84)return $l.WGS84;if(this===$l.WebMercator)return $l.WebMercator;const t=new $l;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=F(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return e==null||r?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===e&&n.referenceServiceName===i:n.id===e}return Si(this,t)}toJSON(t){return this.write(void 0,t)}};yt.GCS_NAD_1927=null,yt.WGS84=null,yt.WebMercator=null,yt.PlateCarree=null,u([d({readOnly:!0})],yt.prototype,"isWGS84",null),u([d({readOnly:!0})],yt.prototype,"isWebMercator",null),u([d({readOnly:!0})],yt.prototype,"isGeographic",null),u([d({readOnly:!0})],yt.prototype,"isWrappable",null),u([d({type:Mt,json:{write:!0}})],yt.prototype,"latestWkid",void 0),u([d({readOnly:!0})],yt.prototype,"metersPerUnit",null),u([d({readOnly:!0})],yt.prototype,"unit",null),u([d({type:Mt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],yt.prototype,"wkid",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],yt.prototype,"wkt",void 0),u([ie("wkt"),ie("web-scene","wkt")],yt.prototype,"writeWkt",null),u([d({type:Mt,json:{write:!0}})],yt.prototype,"vcsWkid",void 0),u([d({type:Mt,json:{write:!0}})],yt.prototype,"latestVcsWkid",void 0),u([d()],yt.prototype,"imageCoordinateSystem",void 0),yt=$l=u([E("esri.geometry.SpatialReference")],yt),yt.prototype.toJSON.isDefaultToJSON=!0,yt.GCS_NAD_1927=new yt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),yt.WGS84=new yt(Vde),yt.WebMercator=new yt(zde),yt.PlateCarree=new yt(Ude),Object.freeze&&(Object.freeze(yt.GCS_NAD_1927),Object.freeze(yt.WGS84),Object.freeze(yt.WebMercator));const _e=yt;let El=class extends G{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=_e.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof _e)return e;if(e!=null){const r=new _e;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};u([d()],El.prototype,"type",void 0),u([d({readOnly:!0})],El.prototype,"cache",null),u([d({readOnly:!0})],El.prototype,"extent",null),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],El.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],El.prototype,"hasZ",void 0),u([d({type:_e,json:{write:!0},value:_e.WGS84})],El.prototype,"spatialReference",void 0),u([Q("spatialReference")],El.prototype,"readSpatialReference",null),El=u([E("esri.geometry.Geometry")],El);const up=El,lhe=Object.prototype.toString;function uhe(t){const e="__accessorMetadata__"in t?Xt(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return che.apply(this,i)}}function che(t,e,i,r){pT(t,e).cast=r}function dhe(t){return(e,i)=>{pT(e,t).cast=e[i]}}function Re(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&lhe.call(t[0])==="[object Function]"?uhe(t[0]):t.length===1&&typeof t[0]=="string"?dhe(t[0]):void 0}function hhe(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}const phe=57.29577951308232,fhe=.017453292519943;function q4(t){return t*phe}function W4(t){return t*fhe}function Aze(t){return Math.PI/2-2*Math.atan(Math.exp(-t/It.radius))}function BA(t){return t.wkid!=null||t.wkt!=null}const _k=[0,0];function L2(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,_k,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,_k,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,_k,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<a.length;h++){const p=a[h];c=[],l.push(c);for(let f=0;f<p.length;f++)c.push(e(p[f][0],p[f][1],[0,0],r)),p[f].length>2&&c[f].push(p[f][2]),p[f].length>3&&c[f].push(p[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function S$(t,e){const i=t&&(BA(t)?t:t.spatialReference),r=e&&(BA(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Si(r,i)||Mm(r)&&Db(i)||Mm(i)&&Db(r))}function A1(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(BA(e)?e:e.spatialReference);return S$(i,r)?Si(i,r)?F(t):Mm(r)?L2(t,xg,_e.WebMercator,!1,F(t)):Db(r)?L2(t,Nw,_e.WGS84,!1,F(t)):null:null}function xg(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=W4(e);return i[0]=W4(t)*It.radius,i[1]=It.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Nw(t,e,i=[0,0],r=!1){const n=q4(t/It.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=q4(Math.PI/2-2*Math.atan(Math.exp(-e/It.radius))),i}function Xl(t,e=!1,i=F(t)){return L2(t,xg,_e.WebMercator,e,i)}function Bf(t,e=!1,i=F(t)){return L2(t,Nw,_e.WGS84,e,i)}var x$;const Fv=[0,0];function Z4(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let kn=x$=class extends up{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new _e(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)U.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)U.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n&&n.isWebMercator){const a=xg(s.longitude,s.latitude,Fv);t=a[0],e=a[1]}}}else Z4(i)?(n=i,i=null):Z4(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?U.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&U.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return Nw(e,i,Fv)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",xg(i,t,Fv)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return Nw(t,e,Fv)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",xg(t,e,Fv)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new x$;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return x$.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:h}=t;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=xg(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=Nw(l,c),h=s}return e===l&&i===c&&r===o&&n===a&&s.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Go(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return hhe(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};u([d({readOnly:!0})],kn.prototype,"cache",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],kn.prototype,"hasM",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],kn.prototype,"hasZ",null),u([d({type:Number})],kn.prototype,"latitude",null),u([d({type:Number})],kn.prototype,"longitude",null),u([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Re(t=>isNaN(t)?t:Oo(t))],kn.prototype,"x",void 0),u([ie("x")],kn.prototype,"writeX",null),u([Q("x")],kn.prototype,"readX",null),u([d({type:Number,json:{write:!0}})],kn.prototype,"y",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],kn.prototype,"z",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],kn.prototype,"m",void 0),kn=x$=u([E("esri.geometry.Point")],kn),kn.prototype.toJSON.isDefaultToJSON=!0;const ce=kn,wk=[0,0];function vT(t,e){return e!=null&&Dn(t,e.x,e.y,e.z)}function Oze(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!x0(t,i))return!1;return!0}function mhe(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Dn(t,i,r,n)&&Dn(t,i,o,n)&&Dn(t,s,o,n)&&Dn(t,s,r,n)&&Dn(t,i,r,a)&&Dn(t,i,o,a)&&Dn(t,s,o,a)&&Dn(t,s,r,a):Dn(t,i,r)&&Dn(t,i,o)&&Dn(t,s,o)&&Dn(t,s,r)}function x0(t,e){return Dn(t,e[0],e[1])}function yhe(t,e){return Dn(t,e[0],e[1],e[2])}function Dn(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function xW(t,e){return wk[1]=e.y,wk[0]=e.x,ghe(t,wk)}function ghe(t,e){return $W(t.rings,e)}function $W(t,e){if(!t)return!1;if(vhe(t))return Y4(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=Y4(i,t[r],e);return i}function vhe(t){return!Array.isArray(t[0][0])}function Y4(t,e,i){const[r,n]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=e[a],[p,f]=e[o];(h<n&&f>=n||f<n&&h>=n)&&c+(n-h)/(f-h)*(p-c)<r&&(s=!s)}return s}function _he(t,e){return vT(t,e)}function whe(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function bhe(t,e){const{points:i,hasZ:r}=e,n=r?yhe:x0;for(const s of i)if(n(t,s))return!0;return!1}const Tm=[0,0],Im=[0,0],km=[0,0],Cm=[0,0],She=[Tm,Im,km,Cm],EW=[[km,Tm],[Tm,Im],[Im,Cm],[Cm,km]];function xhe(t,e){return $he(t,e.rings)}function $he(t,e){Tm[0]=t.xmin,Tm[1]=t.ymax,Im[0]=t.xmax,Im[1]=t.ymax,km[0]=t.xmin,km[1]=t.ymin,Cm[0]=t.xmax,Cm[1]=t.ymin;for(const i of She)if($W(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(x0(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(x0(t,s)||MW(r,s,EW))return!0;r=s}}return!1}function Ehe(t,e){Tm[0]=t.xmin,Tm[1]=t.ymax,Im[0]=t.xmax,Im[1]=t.ymax,km[0]=t.xmin,km[1]=t.ymin,Cm[0]=t.xmax,Cm[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(x0(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(x0(t,o)||MW(n,o,EW))return!0;n=o}}return!1}const Er=[0,0];function Mhe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],h=t[a][l+1];if(jb(s,o,c,h,Er)&&!(Er[0]===s[0]&&Er[1]===s[1]||Er[0]===c[0]&&Er[1]===c[1]||Er[0]===o[0]&&Er[1]===o[1]||Er[0]===h[0]&&Er[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let l=n+2;l<s;l++){const c=i[l],h=i[l+1];if(jb(o,a,c,h,Er)&&!(Er[0]===o[0]&&Er[1]===o[1]||Er[0]===c[0]&&Er[1]===c[1]||Er[0]===a[0]&&Er[1]===a[1]||Er[0]===h[0]&&Er[1]===h[1]))return!0}}}return!1}function MW(t,e,i){for(let r=0;r<i.length;r++)if(jb(t,e,i[r][0],i[r][1]))return!0;return!1}function jb(t,e,i,r,n){const[s,o]=t,[a,l]=e,[c,h]=i,[p,f]=r,y=p-c,g=s-c,v=a-s,_=f-h,w=o-h,S=l-o,b=_*v-y*S;if(b===0)return!1;const $=(y*w-_*g)/b,T=(v*w-S*g)/b;return $>=0&&$<=1&&T>=0&&T<=1&&(n&&(n[0]=s+$*(a-s),n[1]=o+$*(l-o)),!0)}function The(t){switch(t){case"esriGeometryEnvelope":case"extent":return whe;case"esriGeometryMultipoint":case"multipoint":return bhe;case"esriGeometryPoint":case"point":return _he;case"esriGeometryPolygon":case"polygon":return xhe;case"esriGeometryPolyline":case"polyline":return Ehe}}var po;function Ihe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function qc(t,e,i){return e==null?i:i==null?e:t(e,i)}let ur=po=class extends up{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return Ihe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?_e.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??_e.WGS84}}static fromBounds(t,e){return new po({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new po({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new ce({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new po;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&S$(e,i)&&(t=e.isWebMercator?Xl(t):Bf(t,!0)),t.type==="point"?vT(this,t):t.type==="extent"&&mhe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&S$(e,i)&&(t=e.isWebMercator?Xl(t):Bf(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Si(e,i)&&S$(e,i)&&(t=e.isWebMercator?Xl(t):Bf(t,!0)),The(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=qc(Math.min,this.zmin,t.zmin),this.zmax=qc(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=qc(Math.min,this.mmin,t.mmin),this.mmax=qc(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=qc(Math.max,this.zmin,t.zmin),this.zmax=qc(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=qc(Math.max,this.mmin,t.mmin),this.mmax=qc(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Go(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Bf(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=this._normalizeX(r.x,t).x),this.spatialReference=new _e(Wo((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??Go(r);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let p=0;p<c.length;p++)c[p].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let p=0;p<c.length;p++)c[p].push(h)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;t=t||Go(o);const[p,f]=t.valid;h=this._normalizeX(this.xmin,t);const y=h.x,g=h.frameId;h=this._normalizeX(this.xmax,t);const v=h.x,_=h.frameId,w=y===v&&a>0;if(a>2*f){const S=new po(l<c?y:v,n,f,s,o),b=new po(p,n,l<c?v:y,s,o),$=new po(0,n,f,s,o),T=new po(p,n,0,s,o),I=[],A=[];S.contains($)&&I.push(g),S.contains(T)&&A.push(g),b.contains($)&&I.push(_),b.contains(T)&&A.push(_);for(let L=g+1;L<_;L++)I.push(L),A.push(L);e.push({extent:S,frameIds:[g]},{extent:b,frameIds:[_]},{extent:$,frameIds:I},{extent:T,frameIds:A})}else y>v||w?e.push({extent:new po(y,n,f,s,o),frameIds:[g]},{extent:new po(p,n,v,s,o),frameIds:[_]}):e.push({extent:new po(y,n,v,s,o),frameIds:[g]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}_normalizeX(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}};u([d({readOnly:!0})],ur.prototype,"cache",null),u([d({readOnly:!0})],ur.prototype,"center",null),u([d({readOnly:!0})],ur.prototype,"extent",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ur.prototype,"hasM",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ur.prototype,"hasZ",null),u([d({readOnly:!0})],ur.prototype,"height",null),u([d({readOnly:!0})],ur.prototype,"width",null),u([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ur.prototype,"xmin",void 0),u([d({type:Number,json:{write:!0}})],ur.prototype,"ymin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ur.prototype,"mmin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ur.prototype,"zmin",void 0),u([d({type:Number,json:{write:!0}})],ur.prototype,"xmax",void 0),u([d({type:Number,json:{write:!0}})],ur.prototype,"ymax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ur.prototype,"mmax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ur.prototype,"zmax",void 0),ur=po=u([E("esri.geometry.Extent")],ur),ur.prototype.toJSON.isDefaultToJSON=!0;const lt=ur;function $0(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var GA;function J4(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function khe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let hd=GA=class extends up{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):khe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new lt,i=this.hasZ,r=this.hasM,n=i?3:2,s=t[0],o=J4(Math.min),a=J4(Math.max);let l,c,h,p,[f,y]=s,[g,v]=s;for(let _=0,w=t.length;_<w;_++){const S=t[_],[b,$]=S;if(f=o(f,b),y=o(y,$),g=a(g,b),v=a(v,$),i&&S.length>2){const T=S[2];l=o(l,T),h=a(h,T)}if(r&&S.length>n){const T=S[n];c=o(c,T),p=a(p,T)}}return e.xmin=f,e.ymin=y,e.xmax=g,e.ymax=v,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=h):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=c,e.mmax=p):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=F(this.points)}addPoint(t){return $0(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:F(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new GA(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new ce(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new ce(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?($0(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};u([d({readOnly:!0})],hd.prototype,"cache",null),u([d()],hd.prototype,"extent",null),u([d({type:[[Number]],json:{write:{isRequired:!0}}})],hd.prototype,"points",void 0),u([ie("points")],hd.prototype,"writePoints",null),hd=GA=u([E("esri.geometry.Multipoint")],hd),hd.prototype.toJSON.isDefaultToJSON=!0;const _T=hd;function Lze(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function Che(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function K4(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice(0);if(t.type==="polyline")return t.paths.slice(0);if(t.type==="multipoint")return t.points.slice(0);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function wT(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function TW(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function Phe(t,e,i,r){const[n,s]=e,[o,a]=i[r],[l,c]=i[r+1],h=l-o,p=c-a,f=h*h+p*p,y=(n-o)*h+(s-a)*p,g=Math.min(1,Math.max(0,y/f));return t[0]=o+h*g,t[1]=a+p*g,t}function Rze(t,e,i){let r,n,s,o,a=!1,l=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();)s=i.x,o=i.y,n>e!=o>e&&t<(s-r)*(e-n)/(o-n)+r&&(a=!a),l=Math.min(l,Ahe(t,e,r,n,s,o)),r=s,n=o;return l===0?0:(a?1:-1)*Math.sqrt(l)}function Ahe(t,e,i,r,n,s){let o=i,a=r,l=n-o,c=s-a;if(l!==0||c!==0){const h=((t-o)*l+(e-a)*c)/(l*l+c*c);h>1?(o=n,a=s):h>0&&(o+=l*h,a+=c*h)}return l=t-o,c=e-a,l*l+c*c}function IW(t,e){return TW(t,e,.5)}function Fze(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=wT(t[r],t[r+1]);return i}function Dze(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=wT(t[n],t[n+1]);if(e-r<s){const o=(e-r)/s;return TW(t[n],t[n+1],o)}r+=s}return t[i-1]}function kW(t,e,i){const r=t.length;let n=0,s=0,o=0;for(let a=0;a<r;a++){const l=t[a],c=t[(a+1)%r];let h=2;n+=l[0]*c[1]-c[0]*l[1],l.length>2&&c.length>2&&i&&(s+=l[0]*c[2]-c[0]*l[2],h=3),l.length>h&&c.length>h&&e&&(o+=l[0]*c[h]-c[0]*l[h])}return n<=0&&s<=0&&o<=0}function Ohe(t){const e=t.length;return e>2&&lT(t[0],t[e-1])}function Nze(t){if("rings"in t&&(Lhe(t),t.rings.length>0&&!kW(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function Lhe(t){if("rings"in t)for(const e of t.rings)Ohe(e)||e.push(e[0].slice())}function jze(t){return t.type!=="polygon"&&t.type!=="polyline"||Rhe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function Rhe(t,e){const i=Go(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const o of t){let a=1/0,l=-1/0;for(const h of o){const p=Fhe(h[0],r,n);a=Math.min(a,p),l=Math.max(l,p),h[0]=p}const c=l-a;s-c<c&&o.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function Fhe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function Vze(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let r=0;r<i;r++)e+=(t[r][0]-t[r+1][0])*(t[r][1]+t[r+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function CW(t){if(!t||t.numPoints<3)return 0;let e,i,r=0;if(t.seekPathStart(),!t.nextPoint())return 0;e=t.x,i=t.y;const n=e,s=i;for(;t.nextPoint();)r+=(e-t.x)*(i+t.y),e=t.x,i=t.y;return r+=(e-n)*(i+s),-.5*r}function zze(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((n,s)=>n.length===r[s].length)}function Uze(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Dhe(t){return t?Nhe(t.rings,t.hasZ??!1):null}function Nhe(t,e){if(!t||!t.length)return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=PW(t[s],e,n);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?jhe(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function PW(t,e,i){let r=0,n=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const y=t[f],g=t[(f+1)%t.length],[v,_,w]=y,S=v-l,b=_-c,[$,T,I]=g,A=$-l,L=T-c,z=S*L-A*b;if(o+=z,r+=(S+A)*z,n+=(b+L)*z,e&&y.length>2&&g.length>2){const j=w-h,H=I-h,J=S*H-A*j;s+=(j+H)*J,a+=J}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),_<i[2]&&(i[2]=_),_>i[3]&&(i[3]=_),e&&(w<i[4]&&(i[4]=w),w>i[5]&&(i[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[r/(6*o)+l,n/(6*o)+c,o];return e&&(i[4]===i[5]||a===0?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=s/(6*a)+h,p[4]=a)),p}function jhe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const h=t[l],p=t[l+1];if(h&&p){i[0]=h[0],i[1]=h[1],r[0]=p[0],r[1]=p[1],e&&h.length>2&&p.length>2&&(i[2]=h[2],r[2]=p[2]);const f=wT(i,r);if(f){n+=f;const y=IW(h,p);s+=f*y[0],o+=f*y[1],e&&y.length>2&&(a+=f*y[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function Vhe(t){const{hasZ:e,numPaths:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=PW(Che(t),t.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.numPoints?zhe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function zhe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,h=t.z;for(;t.nextPoint();){const p=t.x,f=t.y,y=t.z;i[0]=l,i[1]=c,r[0]=p,r[1]=f,e&&(i[2]=h,r[2]=y);const g=wT(i,r);if(g){n+=g;const v=IW(i,r);s+=g*v[0],o+=g*v[1],e&&v.length>2&&(a+=g*v[2])}l=p,c=f,h=y}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.numPoints?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const Uhe=1e-6;function Bze(t){let e=0;for(t.reset();t.nextPath();)e+=CW(t);if(e<Uhe){const n=Vhe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)Ghe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const Bhe=1/3;function Ghe(t,e,i){if(!t||!i||i.numPoints<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-n,s=.5*Bhe*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const h=CW(i),p=[r,n];return p[0]-=e[0],p[1]-=e[1],p[0]*=h,p[1]*=h,t[0]+=p[0],t[1]+=p[1],t}function Je(){return[0,0,0]}function Lc(t){return[t[0],t[1],t[2]]}function _s(t,e,i){return[t,e,i]}function Hhe(t){const e=Je(),i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function qhe(t,e){return new Float64Array(t,e,3)}function AW(){return Je()}function OW(){return _s(1,1,1)}function LW(){return _s(1,0,0)}function RW(){return _s(0,1,0)}function FW(){return _s(0,0,1)}const Whe=AW(),DW=OW(),Zhe=LW(),Yhe=RW(),Jhe=FW();Object.freeze(Object.defineProperty({__proto__:null,ONES:DW,UNIT_X:Zhe,UNIT_Y:Yhe,UNIT_Z:Jhe,ZEROS:Whe,clone:Lc,create:Je,createView:qhe,fromArray:Hhe,fromValues:_s,ones:OW,unitX:LW,unitY:RW,unitZ:FW,zeros:AW},Symbol.toStringTag,{value:"Module"}));let ZD=1e-6;function so(){return ZD}function Khe(t){ZD=t}const bT=Math.random,Qhe=Math.PI/180,Xhe=180/Math.PI;function YD(t){return t*Qhe}function epe(t){return t*Xhe}function tpe(t,e){return Math.abs(t-e)<=ZD*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:bT,equals:tpe,getEpsilon:so,setEpsilon:Khe,toDegree:epe,toRadian:YD},Symbol.toStringTag,{value:"Module"}));function ST(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function E0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function nu(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function JD(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function O1(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function NW(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function jW(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function ipe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function rpe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function npe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function spe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function ope(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function ape(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function lpe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function VW(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function jh(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function KD(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function Vb(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function zW(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function upe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function cpe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function R2(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function Do(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function F2(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=n*l-s*a,t[1]=s*o-r*l,t[2]=r*a-n*o,t}function UW(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function dpe(t,e,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+r[0]*c+n[0]*h,t[1]=e[1]*a+i[1]*l+r[1]*c+n[1]*h,t[2]=e[2]*a+i[2]*l+r[2]*c+n[2]*h,t}function hpe(t,e,i,r,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,p=3*l*o,f=l*s;return t[0]=e[0]*c+i[0]*h+r[0]*p+n[0]*f,t[1]=e[1]*c+i[1]*h+r[1]*p+n[1]*f,t[2]=e[2]*c+i[2]*h+r[2]*p+n[2]*f,t}function ppe(t,e){e=e||1;const i=bT,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function fpe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function mpe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function ype(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],l=e[1],c=e[2];let h=n*c-s*l,p=s*a-r*c,f=r*l-n*a,y=n*f-s*p,g=s*h-r*f,v=r*p-n*h;const _=2*o;return h*=_,p*=_,f*=_,y*=2,g*=2,v*=2,t[0]=a+h+y,t[1]=l+p+g,t[2]=c+f+v,t}function gpe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function vpe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function _pe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function wpe(t,e){E0(jS,t),E0(VS,e),R2(jS,jS),R2(VS,VS);const i=Do(jS,VS);return i>1?0:i<-1?Math.PI:Math.acos(i)}const jS=Je(),VS=Je();function bpe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function sr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Spe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],l=so();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function xpe(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Bs=O1,$pe=NW,Epe=jW,Mpe=KD,Tpe=Vb,Ipe=ST,D2=zW;Object.freeze(Object.defineProperty({__proto__:null,abs:npe,add:JD,angle:wpe,bezier:hpe,ceil:ipe,copy:E0,cross:F2,direction:xpe,dist:Mpe,distance:KD,div:Epe,divide:jW,dot:Do,equals:Spe,exactEquals:sr,floor:rpe,hermite:dpe,inverse:cpe,len:Ipe,length:ST,lerp:UW,max:ape,min:ope,mul:$pe,multiply:NW,negate:upe,normalize:R2,random:ppe,rotateX:gpe,rotateY:vpe,rotateZ:_pe,round:lpe,scale:VW,scaleAndAdd:jh,set:nu,sign:spe,sqrDist:Tpe,sqrLen:D2,squaredDistance:Vb,squaredLength:zW,str:bpe,sub:Bs,subtract:O1,transformMat3:mpe,transformMat4:fpe,transformQuat:ype},Symbol.toStringTag,{value:"Module"}));function kpe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Cpe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function Ppe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function BW(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function GW(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function HW(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function Ape(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Ope(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Lpe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Rpe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function Fpe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Dpe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function Npe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function qW(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function WW(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function ZW(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function YW(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function jpe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Vpe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function zpe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function Upe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function JW(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function Bpe(t,e){const i=bT;let r,n,s,o,a,l;e=e||1;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*c,t[3]=e*o*c,t}function Gpe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function Hpe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],c=i[3],h=c*r+a*s-l*n,p=c*n+l*r-o*s,f=c*s+o*n-a*r,y=-o*r-a*n-l*s;return t[0]=h*c+y*-o+p*-l-f*-a,t[1]=p*c+y*-a+f*-o-h*-l,t[2]=f*c+y*-l+h*-a-p*-o,t[3]=e[3],t}function qpe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Wpe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Zpe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3],h=so();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const Ype=BW,Jpe=GW,Kpe=HW,Qpe=qW,Xpe=WW,efe=ZW,tfe=YW;Object.freeze(Object.defineProperty({__proto__:null,add:Ppe,ceil:Ape,copy:kpe,dist:Qpe,distance:qW,div:Kpe,divide:HW,dot:Upe,equals:Zpe,exactEquals:Wpe,floor:Ope,inverse:Vpe,len:efe,length:ZW,lerp:JW,max:Rpe,min:Lpe,mul:Jpe,multiply:GW,negate:jpe,normalize:zpe,random:Bpe,round:Fpe,scale:Dpe,scaleAndAdd:Npe,set:Cpe,sqrDist:Xpe,sqrLen:tfe,squaredDistance:WW,squaredLength:YW,str:qpe,sub:Ype,subtract:BW,transformMat4:Gpe,transformQuat:Hpe},Symbol.toStringTag,{value:"Module"}));const Q4=new Float32Array(1);function Gze(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function xs(t,e,i){return Math.min(Math.max(t,e),i)}function Hze(t){return(t&t-1)==0}function qze(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Wze(t,e,i){return t+(e-t)*i}function ife(t){return t*Math.PI/180}function KW(t){return 180*t/Math.PI}function Zze(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Yze(t){return Math.acos(xs(t,-1,1))}function QW(t){return Math.asin(xs(t,-1,1))}function Yg(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const N2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function rfe(t){return N2.setFloat64(0,t),N2.getBigInt64(0)}function nfe(t){return N2.setBigInt64(0,t),N2.getFloat64(0)}const bk=BigInt("1000000");sfe(1);function sfe(t){const e=rfe(t=Math.abs(t)),i=nfe(e<=bk?bk:e-bk);return Math.abs(t-i)}function Jze(t){return XW(Math.max(-X4,Math.min(t,X4)))}function XW(t){return Q4[0]=t,Q4[0]}function Kze(t,e){const i=ST(t),r=QW(t[2]/i),n=Math.atan2(t[1]/i,t[0]/i);return nu(e,i,r,n),e}function Qze(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Yg(e,1)&&Yg(i,1)&&Yg(r,1))}const X4=XW(34028234663852886e22);function sl(t=dfe){return[t[0],t[1],t[2],t[3]]}function Xze(t){return[t[0],t[1],t[2],t[3]]}function QD(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function ofe(t,e,i,r,n=sl()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function e8e(t,e=sl()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function t8e(t,e){return new lt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function i8e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function r8e(t,e,i){if(e!=null)if("length"in e)HA(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else QD(i,t)}function Sk(t,e,i=t){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];n=Math.min(n,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=a,i}function n8e(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function afe(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function lfe(t){return t[1]>=t[3]?0:t[3]-t[1]}function s8e(t){return afe(t)*lfe(t)}function o8e(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function a8e(t,e){return eZ(t,e[0],e[1])}function l8e(t,e){return eZ(t,e.x,e.y)}function eZ(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function u8e(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function c8e(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function ufe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function d8e(t,e,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function cfe(t){return t?QD(t,e6):sl(e6)}function HA(t){return t!=null&&t.length===4}function h8e(t,e){return HA(t)&&HA(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const e6=[1/0,1/0,-1/0,-1/0],dfe=[0,0,0,0];function tZ(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function iZ(t){return t.points!==void 0}function rZ(t){return t.x!==void 0&&t.y!==void 0}function nZ(t){return t.paths!==void 0}function sZ(t){return t.rings!==void 0}function oZ(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const bh=oZ(Math.min),Sh=oZ(Math.max);function p8e(t,e){return nZ(e)?M0(t,e.paths,!1,!1):sZ(e)?M0(t,e.rings,!1,!1):iZ(e)?XD(t,e.points,!1,!1,!1,!1):tZ(e)?aZ(t,e):(rZ(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function f8e(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=hfe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return sl([e,r,i,n])}function hfe(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return sl([e,r,i,n])}function m8e(t,e){return nZ(e)?M0(t,e.paths,!0,!1):sZ(e)?M0(t,e.rings,!0,!1):iZ(e)?XD(t,e.points,!0,!1,!0,!1):tZ(e)?aZ(t,e,!0,!1,!0,!1):(rZ(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function M0(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,h]=e[0][0],[p,f]=e[0][0];for(let y=0;y<e.length;y++){const g=e[y];for(let v=0;v<g.length;v++){const _=g[v],[w,S]=_;if(c=bh(c,w),h=bh(h,S),p=Sh(p,w),f=Sh(f,S),i&&_.length>2){const b=_[2];s=bh(s,b),o=Sh(o,b)}if(r&&_.length>n){const b=_[n];a=bh(s,b),l=Sh(o,b)}}}return i?r?(t[0]=c,t[1]=h,t[2]=s,t[3]=a,t[4]=p,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=h,t[2]=s,t[3]=p,t[4]=f,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=h,t[2]=a,t[3]=p,t[4]=f,t[5]=l,t.length=6,t):(t[0]=c,t[1]=h,t[2]=p,t[3]=f,t.length=4,t)}function aZ(t,e,i,r,n,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let h=e.zmin,p=e.zmax,f=e.mmin,y=e.mmax;return n?(h=h||0,p=p||0,s?(f=f||0,y=y||0,t[0]=o,t[1]=l,t[2]=h,t[3]=f,t[4]=a,t[5]=c,t[6]=p,t[7]=y,t):(t[0]=o,t[1]=l,t[2]=h,t[3]=a,t[4]=c,t[5]=p,t)):s?(f=f||0,y=y||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=c,t[5]=y,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function XD(t,e,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let c,h,p,f,[y,g]=e[0],[v,_]=e[0];for(let w=0;w<e.length;w++){const S=e[w],[b,$]=S;if(y=bh(y,b),g=bh(g,$),v=Sh(v,b),_=Sh(_,$),l&&S.length>2){const T=S[2];c=bh(c,T),h=Sh(h,T)}if(a&&S.length>o){const T=S[o];p=bh(c,T),f=Sh(h,T)}}return n?(c=c||0,h=h||0,s?(p=p||0,f=f||0,t[0]=y,t[1]=g,t[2]=c,t[3]=p,t[4]=v,t[5]=_,t[6]=h,t[7]=f,t):(t[0]=y,t[1]=g,t[2]=c,t[3]=v,t[4]=_,t[5]=h,t)):s?(p=p||0,f=f||0,t[0]=y,t[1]=g,t[2]=p,t[3]=v,t[4]=_,t[5]=f,t):(t[0]=y,t[1]=g,t[2]=v,t[3]=_,t)}function pfe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function ffe(t){return t.points!==void 0}function mfe(t){return t.x!==void 0&&t.y!==void 0}function yfe(t){return t.paths!==void 0}function gfe(t){return t.rings!==void 0}const eN=[];function lZ(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function uZ(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function cZ(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function dZ(t,e,i,r,n,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function tN(t,e=!1,i=!1){return e?i?dZ(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):uZ(t[0],t[1],t[2],t[3],t[4],t[5]):i?cZ(t[0],t[1],t[2],t[3],t[4],t[5]):lZ(t[0],t[1],t[2],t[3])}function y8e(t){return t?pfe(t)?t:mfe(t)?_fe(t):gfe(t)?hZ(t):yfe(t)?pZ(t):ffe(t)?vfe(t):null:null}function vfe(t){const{hasZ:e,hasM:i,points:r}=t;return tN(XD(eN,r,e??!1,i??!1),e,i)}function _fe(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?dZ(e,i,r,n,e,i,r,n):uZ(e,i,r,e,i,r):s?cZ(e,i,n,e,i,n):lZ(e,i,e,i)}function hZ(t){const{hasZ:e,hasM:i,rings:r}=t,n=M0(eN,r,e??!1,i??!1);return n?tN(n,e,i):null}function pZ(t){const{hasZ:e,hasM:i,paths:r}=t,n=M0(eN,r,e??!1,i??!1);return n?tN(n,e,i):null}var $$;function t6(t){return!Array.isArray(t[0])}let Ml=$$=class extends up{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new $$(s)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,r,n=null,s=null;return t&&!Array.isArray(t)?(n=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||_e.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=s.length>3):i===void 0?i=r?s.length>3:s.length>2:r===void 0&&(r=i?s.length>3:s.length>2)),{rings:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=Dhe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new ce;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=hZ(this);if(!e)return null;const i=new lt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return Mhe(this.rings)}writeRings(t,e){e.rings=F(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(t6(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new $$;return t.spatialReference=this.spatialReference,t.rings=F(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,a],[l,c,h,p])=>n===l&&s===c&&(o==null&&h==null||o===h)&&(a==null&&p==null||a===p);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!lT(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=A1(t,this.spatialReference);return xW(this,e??t)}isClockwise(t){let e;return e=t6(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,kW(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new ce(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new ce(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new ce(i[0],i[1],i[2],i[3],this.spatialReference):new ce(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?($0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ce(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new ce(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?($0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([d({readOnly:!0})],Ml.prototype,"cache",null),u([d({readOnly:!0})],Ml.prototype,"centroid",null),u([d({readOnly:!0})],Ml.prototype,"extent",null),u([d({readOnly:!0})],Ml.prototype,"isSelfIntersecting",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ml.prototype,"rings",void 0),u([ie("rings")],Ml.prototype,"writeRings",null),Ml=$$=u([E("esri.geometry.Polygon")],Ml),Ml.prototype.toJSON.isDefaultToJSON=!0;const Un=Ml;var qA;function wfe(t){return!Array.isArray(t[0])}let pd=qA=class extends up{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,r,n=null,s=null;return t&&!Array.isArray(t)?(n=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||_e.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=!1):i===void 0?i=!r&&s.length>3:r===void 0&&(r=!i&&s.length>3)),{paths:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=pZ(this);if(!e)return null;const i=new lt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=F(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(wfe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new qA;return t.spatialReference=this.spatialReference,t.paths=F(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new ce(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new ce(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new ce(i[0],i[1],i[2],i[3],this.spatialReference):new ce(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?($0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new ce(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ce(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?($0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([d({readOnly:!0})],pd.prototype,"cache",null),u([d({readOnly:!0})],pd.prototype,"extent",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],pd.prototype,"paths",void 0),u([ie("paths")],pd.prototype,"writePaths",null),pd=qA=u([E("esri.geometry.Polyline")],pd),pd.prototype.toJSON.isDefaultToJSON=!0;const No=pd,bfe=$n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),i6=$n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function fZ(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function iN(t){return t.points!==void 0}function rN(t){return t.x!==void 0&&t.y!==void 0}function nN(t){return t.paths!==void 0}function rm(t){return t.rings!==void 0}function Wh(t){return t==null?null:t instanceof up?t:rN(t)?ce.fromJSON(t):nN(t)?No.fromJSON(t):rm(t)?Un.fromJSON(t):iN(t)?_T.fromJSON(t):fZ(t)?lt.fromJSON(t):null}function Q0(t){return t?rN(t)?"esriGeometryPoint":nN(t)?"esriGeometryPolyline":rm(t)?"esriGeometryPolygon":fZ(t)?"esriGeometryEnvelope":iN(t)?"esriGeometryMultipoint":null:null}const Sfe={esriGeometryPoint:ce,esriGeometryPolyline:No,esriGeometryPolygon:Un,esriGeometryEnvelope:lt,esriGeometryMultipoint:_T};function xfe(t){return t&&Sfe[t]||null}const Um={base:up,key:"type",typeMap:{extent:lt,multipoint:_T,point:ce,polyline:No,polygon:Un}};iu(Um);const Ft=t=>{let e=class extends t{clone(){var l;const i=Hr(Bn(this),"unable to clone instance of non-accessor class"),r=i.metadatas,n=i.store,s={},o=new Map;for(const c in r){const h=r[c],p=n==null?void 0:n.originOf(c),f=h.clonable;if(h.readOnly||f===!1||p!==Ve.USER&&p!==Ve.DEFAULTS&&p!==Ve.WEB_MAP&&p!==Ve.WEB_SCENE)continue;const y=this[c];let g=null;g=typeof f=="function"?f(y):f==="reference"?y:$A(y),y!=null&&g==null||(p===Ve.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=Bn(a))==null?void 0:l.store;if(c)for(const[h,p]of o)c.set(h,p,Ve.DEFAULTS)}return a}};return e=u([E("esri.core.Clonable")],e),e};let r6=class extends Ft(X){};r6=u([E("esri.core.Clonable")],r6);let E$=class mZ{constructor(){this._emitter=new mZ.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){const o=this._listenersMap&&this._listenersMap.get(n);if(!o)return!1;const a=this._target||this;return[...o].forEach(l=>{l.call(a,s)}),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return eo(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],l=a.indexOf(s);l>=0&&a.splice(l,1)}}}once(n,s){const o=this.on(n,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(n){const s=this._listenersMap&&this._listenersMap.get(n);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=u([E("esri.core.Evented")],n),n};let i=class extends X{constructor(){super(...arguments),this._emitter=new E$.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=u([E("esri.core.Evented")],i),t.EventedAccessor=i})(E$||(E$={}));const Vi=E$;var vt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(vt||(vt={}));function sN(t){return(e,i)=>{e[i]=t}}let xT=class extends Nq{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var ac;let $fe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const lo=new ru($fe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),Efe=()=>{};function xk(t){return t?t instanceof Mf?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function $k(t){if(t&&t.length)return t[0]}function Mfe(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function yZ(t,e,i,r){e&&e.forEach((n,s,o)=>{t.push(n),yZ(t,i.call(r,n,s,o),i,r)})}const Wc=new Set,Zc=new Set,Yc=new Set,Ek=new Map;let Tfe=0,Mf=ac=class extends Vi.EventedAccessor{static isCollection(t){return t!=null&&t instanceof ac}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new xT,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Tfe++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof ac?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Ce(this._observable),this._items}set items(t){this._emitBeforeChanges(vt.ADD)||(this._splice(0,this.length,xk(t)),this._emitAfterChanges(vt.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Efe,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(Ce(this._observable),this._emitBeforeChanges(vt.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(vt.ADD),this}addMany(t,e=this._items.length){if(Ce(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(vt.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,xk(t)),this._emitAfterChanges(vt.ADD),this}at(t){if(Ce(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ce(this._observable),!this.length||this._emitBeforeChanges(vt.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(vt.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ce(this._observable),this._createNewInstance({items:this._items.map(F)})}concat(...t){Ce(this._observable);const e=t.map(xk);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ce(this._observable),!this.length||this._emitBeforeChanges(vt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(vt.REMOVE)}every(t,e){return Ce(this._observable),this._items.every(t,e)}filter(t,e){let i;return Ce(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Ce(this._observable),this._items.find(t,e)}findIndex(t,e){return Ce(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ce(this._observable);const i=[];return yZ(i,this,t,e),new ac(i)}forEach(t,e){return Ce(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ce(this._observable),this._items[t]}getNextIndex(t){Ce(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ce(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ce(this._observable),this._items.indexOf(t,e)}join(t=","){return Ce(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ce(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ce(this._observable);const i=this._items.map(t,e);return new ac({items:i})}reorder(t,e=this.length-1){Ce(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(vt.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(vt.MOVE)}return t}}pop(){if(Ce(this._observable),!this.length||this._emitBeforeChanges(vt.REMOVE))return;const t=$k(this._splice(this.length-1,1));return this._emitAfterChanges(vt.REMOVE),t}push(...t){return Ce(this._observable),this._emitBeforeChanges(vt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(vt.ADD)),this.length}reduce(t,e){Ce(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ce(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ce(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ce(this._observable),t<0||t>=this.length||this._emitBeforeChanges(vt.REMOVE))return;const e=$k(this._splice(t,1));return this._emitAfterChanges(vt.REMOVE),e}removeMany(t){if(Ce(this._observable),!t||!t.length||this._emitBeforeChanges(vt.REMOVE))return[];const e=t instanceof ac?t.toArray():t,i=this._items,r=[],n=e.length;for(let s=0;s<n;s++){const o=e[s],a=i.indexOf(o);if(a>-1){const l=1+Mfe(e,i,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(vt.REMOVE),r}reverse(){if(Ce(this._observable),this._emitBeforeChanges(vt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(vt.MOVE),this}shift(){if(Ce(this._observable),!this.length||this._emitBeforeChanges(vt.REMOVE))return;const t=$k(this._splice(0,1));return this._emitAfterChanges(vt.REMOVE),t}slice(t=0,e=this.length){return Ce(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ce(this._observable),this._items.some(t,e)}sort(t){if(Ce(this._observable),!this.length||this._emitBeforeChanges(vt.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(vt.MOVE),this}splice(t,e,...i){Ce(this._observable);const r=(e?vt.REMOVE:0)|(i.length?vt.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return Ce(this._observable),this._items.slice()}toJSON(){return Ce(this._observable),this.toArray()}toLocaleString(){return Ce(this._observable),this._items.toLocaleString()}toString(){return Ce(this._observable),this._items.toString()}unshift(...t){return Ce(this._observable),!t.length||this._emitBeforeChanges(vt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(vt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=J0(()=>this._dispatchChange())),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=lo.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,s),t+=1,l-=1,c-=1);lo.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=lo.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);lo.release(a)}}if(i&&i.length){if(n){const h=[];for(const p of i){const f=n.ensureType(p);f==null&&p!=null||h.push(f)}i=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(a||l){const h=lo.acquire();h.target=this,h.cancellable=!0;const p=lo.acquire();p.target=this,p.cancellable=!1;for(const f of i)a?(h.reset(f),this.emit("before-add",h),h.defaultPrevented||(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),l&&(p.reset(f),this.emit("after-add",p)))):(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),p.reset(f),this.emit("after-add",p));lo.release(p),lo.release(h)}else{if(c)for(const h of i)r.push(h);else r.splice(t,0,...i);this._set("length",r.length)}}return(i&&i.length||o&&o.length)&&this._notifyChangeEvent(i,o),o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=lo.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,lo.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=lo.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),lo.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Wc.clear(),Zc.clear(),Yc.clear();for(const{added:l,removed:c}of i){if(l)if(Yc.size===0&&Zc.size===0)for(const h of l)Wc.add(h);else for(const h of l)Zc.has(h)?(Yc.add(h),Zc.delete(h)):Yc.has(h)||Wc.add(h);if(c)if(Yc.size===0&&Wc.size===0)for(const h of c)Zc.add(h);else for(const h of c)Wc.has(h)?Wc.delete(h):(Yc.delete(h),Zc.add(h))}const r=jn.acquire();Wc.forEach(l=>{r.push(l)});const n=jn.acquire();Zc.forEach(l=>{n.push(l)});const s=this._items,o=e.items,a=jn.acquire();if(Yc.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||n.length||a.length)){const l={target:this,added:r,removed:n,moved:a},c=e.listeners.length;for(let h=0;h<c;h++){const p=e.listeners[h];p.removed||p.callback.call(this,l)}}jn.release(r),jn.release(n),jn.release(a)}Wc.clear(),Zc.clear(),Yc.clear()}};Mf.ofType=t=>{if(!t)return ac;if(Ek.has(t))return Ek.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends ac{};return u([sN({Type:t,ensureType:typeof t=="function"?Xt(t):iu(t)})],i.prototype,"itemType",void 0),i=u([E(`esri.core.Collection<${e}>`)],i),Ek.set(t,i),i},u([d()],Mf.prototype,"length",void 0),u([d()],Mf.prototype,"items",null),Mf=ac=u([E("esri.core.Collection")],Mf);const se=Mf;var Zh;function gZ(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||r!=null&&+e>r)return Zh.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return Zh.INVALID_CODED_VALUE}return null}function oN(t){if(!(!t||t.type!=="range"))return{min:"range"in t?t.range[0]:t.minValue,max:"range"in t?t.range[1]:t.maxValue}}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Zh||(Zh={}));const Ife=U.getLogger("esri.support.arcadeOnDemand");let Mk;function su(){return Mk||(Mk=(async()=>{const t=await O(()=>import("./arcadeUtils-b9eca3d7.js").then(e=>e.au),["assets/arcadeUtils-b9eca3d7.js","assets/arcadeTimeUtils-4146daa5.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),Mk}const w8e=(t,e,i)=>aN.create(t,e,i,null,["$feature"],[]),b8e=(t,e,i)=>aN.create(t,e,i,null,["$feature","$view"],[]),kfe=(t,e,i,r)=>aN.create(t,e,i,r,["$feature","$view"],[]);let aN=class vZ{constructor(e,i,r,n,s,o,a){this.services=null,this.script=e,this.evaluate=n;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,r,n,s,o){const{arcade:a,Feature:l,Dictionary:c}=await su(),h=_e.fromJSON(i);let p;try{p=a.parseScript(e,o)}catch(L){return Ife.error(new C("arcade-bad-expression","Failed to parse arcade script",{script:e,error:L})),null}const f=s.reduce((L,z)=>({...L,[z]:null}),{});let y=null;n!=null&&(y=new c(n),y.immutable=!0,f.$config=null);const g=a.scriptUsesGeometryEngine(p),v=g&&a.enableGeometrySupport(),_=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(p),S=w&&a.enableAsyncSupport(),b={vars:f,spatialReference:h,useAsync:!!S};await Promise.all([v,_,S]);const $=new Set;await a.loadDependentModules($,p,null,w,g);const T=new c;T.immutable=!1,T.setField("scale",0);const I=a.compileScript(p,b),A=(L,z)=>("$view"in L&&L.$view&&(T.setField("scale",typeof L.$view=="object"&&"scale"in L.$view?L.$view.scale:void 0),L.$view=T),y&&(L.$config=y),I({vars:L,spatialReference:h,services:z}));return new vZ(e,a,p,A,new l,r,h)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Cfe=/^([0-9_])/,Pfe=/[^a-z0-9_\u0080-\uffff]+/gi;function Afe(t){return t==null?null:t.trim().replaceAll(Pfe,"_").replace(Cfe,"F$1")||null}const Ofe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Lfe=["field","normalizationField"];function n6(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(s6(Ofe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)s6(Lfe,r,e)}}function s6(t,e,i){if(t)for(const r of t){const n=E1(r,e),s=n&&typeof n!="function"&&i.get(n);s&&Sn(r,s.name,e)}}function _Z(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const Tk=new Set;function $T(t,e){return t&&e?(Tk.clear(),zb(Tk,t,e),Array.from(Tk).sort()):[]}function zb(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)Zs(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function Zs(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function S8e(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function Gn(t,e,i){var s;if(!i)return;const{arcadeUtils:r}=await su(),n=r.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map(o=>o.name));for(const o of n)Zs(t,e,o)}async function wZ(t,e,i){if(i&&i!=="1=1"){const{WhereClause:r}=await O(()=>import("./WhereClause-8e39ce65.js").then(s=>s.W),[]),n=r.create(i,e);if(!n.isStandardized)throw new C("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});zb(t,e,n.fieldNames)}}function lN({displayField:t,fields:e}){return t||(e&&e.length?Ik(e,"name-or-title")||Ik(e,"unique-identifier")||Ik(e,"type-or-category")||Rfe(e):null)}function Rfe(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function Ik(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function x8e(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function Ffe(t,e,i){i.onStatisticExpression?Gn(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function $8e(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(Dfe(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>Ffe(t,e.fieldsIndex,s))),await Promise.all(r)}async function Dfe(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(s=>Gn(t,e.fieldsIndex,s.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(Gn(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function E8e(t,e,i){e&&(e.timeInfo&&i!=null&&i.timeExtent&&zb(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&zb(t,e.fieldsIndex,[e.floorInfo.floorField]),i!=null&&i.where!=null&&await wZ(t,e.fieldsIndex,i.where))}async function M8e(t,e,i){e&&i&&await Promise.all(i.map(r=>Nfe(t,e,r)))}async function Nfe(t,e,i){e&&i&&(i.valueExpression?await Gn(t,e.fieldsIndex,i.valueExpression):i.field&&Zs(t,e.fieldsIndex,i.field))}function T8e(t){return t?$T(t.fieldsIndex,bZ(t)):[]}function jfe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?$T(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const Vfe=["oid","global-id","guid"],zfe=["oid","global-id"],Ufe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function Bfe(t){const e=new Set;uN(t).forEach(r=>e.add(r)),jfe(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function bZ(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function uN(t){return bZ(t).map(e=>e.toLowerCase())}function Gfe(t,e){var i;return t.editable&&!Vfe.includes(t.type)&&!uN(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function SZ(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||Bfe(e).includes(i)||zfe.includes(t.type)||Ufe.some(n=>n.test(i)))}async function I8e(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i&&i.length&&await Promise.all(i.map(n=>Hfe(t,r,n)))}async function Hfe(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Gn(t,e,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Zs(t,e,o.slice(1,-1))})}await wZ(t,e,n)}function qfe(t){const e=t.defaultValue;return e!==void 0&&EZ(t,e)?e:t.nullable?null:void 0}function xZ(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Wfe(t){return t===null||xZ(t)}const cN="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function Zfe(t){return t===null||cN(t)}function $Z(t){return t!=null&&typeof t=="string"}function Yfe(t){return t===null||$Z(t)}function Jfe(){return!0}function EZ(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?Zfe:cN;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?Wfe:xZ;break;case"string":case"esriFieldTypeString":i=t.nullable?Yfe:$Z;break;default:i=Jfe}return arguments.length===1?i:i(e)}const Kfe=["integer","small-integer","single","double"],Qfe=new Set([...Kfe,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),Xfe=["date","date-only","time-only","timestamp-offset"],eme=new Set([...Xfe,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function nm(t){return t!=null&&Qfe.has(t.type)}function o6(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function WA(t){return t!=null&&eme.has(t.type)}var Ub,T0;function k8e(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function tme(t,e){return t==null||t.nullable&&e===null?null:nm(t)&&!ime(t.type,Number(e))?Ub.OUT_OF_RANGE:EZ(t,e)?t.domain?gZ(t.domain,e):null:T0.INVALID_TYPE}function ime(t,e){const i=typeof t=="string"?dN(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?cN(e)&&e>=r&&e<=n:e>=r&&e<=n}function MZ(t){return oN(t.domain)||(nm(t)?dN(t.type):void 0)}function dN(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return rme;case"esriFieldTypeInteger":case"integer":return nme;case"esriFieldTypeBigInteger":case"big-integer":return sme;case"esriFieldTypeSingle":case"single":return ome;case"esriFieldTypeDouble":case"double":return ame}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Ub||(Ub={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(T0||(T0={}));const rme={min:-32768,max:32767,isInteger:!0},nme={min:-2147483648,max:2147483647,isInteger:!0},sme={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},ome={min:-34e37,max:12e37,isInteger:!1},ame={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function C8e(t,e,i){switch(t){case Zh.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Zh.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case T0.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case Ub.OUT_OF_RANGE:{const{min:r,max:n}=dN(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function lme(t,e){return!ume(t,e,null)}function ume(t,e,i){if(!e||!e.attributes||!t){if(i!=null)for(const s of t??[])i.add(s);return!0}const r=e.attributes;let n=!1;for(const s of t)if(!(s in r)){if(n=!0,i==null)break;i.add(s)}return n}function ZA(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let M$=class extends G{constructor(e){super(e),this.type=null}};u([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],M$.prototype,"type",void 0),M$=u([E("esri.popup.content.Content")],M$);const cp=M$;var YA;let Op=YA=class extends cp{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new YA({description:this.description,displayType:this.displayType,title:this.title})}};u([d({type:String,json:{write:!0}})],Op.prototype,"description",void 0),u([d({type:["auto","preview","list"],json:{write:!0}})],Op.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],Op.prototype,"title",void 0),u([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Op.prototype,"type",void 0),Op=YA=u([E("esri.popup.content.AttachmentsContent")],Op);const Bb=Op;var JA;let Lp=JA=class extends cp{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new JA({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?F(this.outFields):null})}};u([d()],Lp.prototype,"creator",void 0),u([d()],Lp.prototype,"destroyer",void 0),u([d()],Lp.prototype,"outFields",void 0),u([d({type:["custom"],readOnly:!0})],Lp.prototype,"type",void 0),Lp=JA=u([E("esri.popup.content.CustomContent")],Lp);const cme=Lp;var KA;let yy=KA=class extends G{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new KA({title:this.title,expression:this.expression})}};u([d({type:String,json:{write:!0}})],yy.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],yy.prototype,"expression",void 0),u([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],yy.prototype,"returnType",void 0),yy=KA=u([E("esri.popup.ElementExpressionInfo")],yy);const TZ=yy;var QA;let __=QA=class extends cp{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new QA({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};u([d({type:TZ,json:{write:!0}})],__.prototype,"expressionInfo",void 0),u([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],__.prototype,"type",void 0),__=QA=u([E("esri.popup.content.ExpressionContent")],__);const hN=__;function ye(t,e={}){const i=t instanceof Ge?t:new Ge(t,e),r={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(r.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(r.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(r.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(r.nonNullable=e.nonNullable),d(r)}let jw;var F9,D9;const dme=((F9=globalThis.esriConfig)==null?void 0:F9.locale)??((D9=globalThis.dojoConfig)==null?void 0:D9.locale);function IZ(){var t;return dme??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function Yr(){return jw===void 0&&(jw=IZ()),jw}const Vw=[];function ET(t){return Vw.push(t),{remove(){Vw.splice(Vw.indexOf(t),1)}}}const XA=[];function pN(t){return XA.push(t),{remove(){Vw.splice(XA.indexOf(t),1)}}}function hme(){const t=IZ();jw!==t&&(jw=t,[...XA].forEach(e=>{e.call(null,t)}),[...Vw].forEach(e=>{e.call(null,t)}))}var N9;(N9=globalThis.addEventListener)==null||N9.call(globalThis,"languagechange",hme);class Bm extends Error{}class pme extends Bm{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class fme extends Bm{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class mme extends Bm{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class w_ extends Bm{}class kZ extends Bm{constructor(e){super(`Invalid unit ${e}`)}}class Lo extends Bm{}class Jc extends Bm{constructor(){super("Zone is an abstract class")}}const oe="numeric",ol="short",Ys="long",j2={year:oe,month:oe,day:oe},CZ={year:oe,month:ol,day:oe},yme={year:oe,month:ol,day:oe,weekday:ol},PZ={year:oe,month:Ys,day:oe},AZ={year:oe,month:Ys,day:oe,weekday:Ys},OZ={hour:oe,minute:oe},LZ={hour:oe,minute:oe,second:oe},RZ={hour:oe,minute:oe,second:oe,timeZoneName:ol},FZ={hour:oe,minute:oe,second:oe,timeZoneName:Ys},DZ={hour:oe,minute:oe,hourCycle:"h23"},NZ={hour:oe,minute:oe,second:oe,hourCycle:"h23"},jZ={hour:oe,minute:oe,second:oe,hourCycle:"h23",timeZoneName:ol},VZ={hour:oe,minute:oe,second:oe,hourCycle:"h23",timeZoneName:Ys},zZ={year:oe,month:oe,day:oe,hour:oe,minute:oe},UZ={year:oe,month:oe,day:oe,hour:oe,minute:oe,second:oe},BZ={year:oe,month:ol,day:oe,hour:oe,minute:oe},GZ={year:oe,month:ol,day:oe,hour:oe,minute:oe,second:oe},gme={year:oe,month:ol,day:oe,weekday:ol,hour:oe,minute:oe},HZ={year:oe,month:Ys,day:oe,hour:oe,minute:oe,timeZoneName:ol},qZ={year:oe,month:Ys,day:oe,hour:oe,minute:oe,second:oe,timeZoneName:ol},WZ={year:oe,month:Ys,day:oe,weekday:Ys,hour:oe,minute:oe,timeZoneName:Ys},ZZ={year:oe,month:Ys,day:oe,weekday:Ys,hour:oe,minute:oe,second:oe,timeZoneName:Ys};class X0{get type(){throw new Jc}get name(){throw new Jc}get ianaName(){return this.name}get isUniversal(){throw new Jc}offsetName(e,i){throw new Jc}formatOffset(e,i){throw new Jc}offset(e){throw new Jc}equals(e){throw new Jc}get isValid(){throw new Jc}}let kk=null;class MT extends X0{static get instance(){return kk===null&&(kk=new MT),kk}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return JZ(e,i,r)}formatOffset(e,i){return Uw(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let T$={};function vme(t){return T$[t]||(T$[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),T$[t]}const _me={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function wme(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,c,h]=r;return[o,n,s,a,l,c,h]}function bme(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=_me[s];s==="era"?r[a]=o:ot(a)||(r[a]=parseInt(o,10))}return r}let zS={};class al extends X0{static create(e){return zS[e]||(zS[e]=new al(e)),zS[e]}static resetCache(){zS={},T$={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=al.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return JZ(e,i,r,this.name)}formatOffset(e,i){return Uw(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=vme(this.name);let[n,s,o,a,l,c,h]=r.formatToParts?bme(r,i):wme(r,i);a==="BC"&&(n=-Math.abs(n)+1);const f=yN({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let y=+i;const g=y%1e3;return y-=g>=0?g:1e3+g,(f-y)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let a6={};function Sme(t,e={}){const i=JSON.stringify([t,e]);let r=a6[i];return r||(r=new Intl.ListFormat(t,e),a6[i]=r),r}let eO={};function tO(t,e={}){const i=JSON.stringify([t,e]);let r=eO[i];return r||(r=new Intl.DateTimeFormat(t,e),eO[i]=r),r}let iO={};function xme(t,e={}){const i=JSON.stringify([t,e]);let r=iO[i];return r||(r=new Intl.NumberFormat(t,e),iO[i]=r),r}let rO={};function $me(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=rO[n];return s||(s=new Intl.RelativeTimeFormat(t,e),rO[n]=s),s}let b_=null;function Eme(){return b_||(b_=new Intl.DateTimeFormat().resolvedOptions().locale,b_)}function Mme(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=tO(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=tO(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function Tme(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function Ime(t){const e=[];for(let i=1;i<=12;i++){const r=$e.utc(2016,i,1);e.push(t(r))}return e}function kme(t){const e=[];for(let i=1;i<=7;i++){const r=$e.utc(2016,11,13+i);e.push(t(r))}return e}function US(t,e,i,r,n){const s=t.listingMode(i);return s==="error"?null:s==="en"?r(e):n(e)}function Cme(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class Pme{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=xme(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):mN(e,3);return Xi(i,this.padTo)}}}class Ame{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&al.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=tO(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ome{constructor(e,i,r){this.opts={style:"long",...r},!i&&YZ()&&(this.rtf=$me(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):Jme(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class si{static fromOpts(e){return si.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,r,n=!1){const s=e||Qi.defaultLocale,o=s||(n?"en-US":Eme()),a=i||Qi.defaultNumberingSystem,l=r||Qi.defaultOutputCalendar;return new si(o,a,l,s)}static resetCache(){b_=null,eO={},iO={},rO={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r}={}){return si.create(e,i,r)}constructor(e,i,r,n){const[s,o,a]=Mme(e);this.locale=s,this.numberingSystem=i||o||null,this.outputCalendar=r||a||null,this.intl=Tme(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Cme(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:si.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,r=!0){return US(this,e,r,XZ,()=>{const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=Ime(o=>this.extract(o,n,"month"))),this.monthsCache[s][e]})}weekdays(e,i=!1,r=!0){return US(this,e,r,iY,()=>{const n=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=kme(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return US(this,void 0,e,()=>rY,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$e.utc(2016,11,13,9),$e.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return US(this,e,i,nY,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[$e.utc(-40,1,1),$e.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new Pme(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new Ame(e,this.intl,i)}relFormatter(e={}){return new Ome(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Sme(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Ck=null;class qr extends X0{static get utcInstance(){return Ck===null&&(Ck=new qr(0)),Ck}static instance(e){return e===0?qr.utcInstance:new qr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new qr(IT(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Uw(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Uw(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return Uw(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Lme extends X0{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function hh(t,e){if(ot(t)||t===null)return e;if(t instanceof X0)return t;if(Rme(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?MT.instance:i==="utc"||i==="gmt"?qr.utcInstance:qr.parseSpecifier(i)||al.create(t)}else return sm(t)?qr.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new Lme(t)}let l6=()=>Date.now(),u6="system",c6=null,d6=null,h6=null,p6=60,f6;class Qi{static get now(){return l6}static set now(e){l6=e}static set defaultZone(e){u6=e}static get defaultZone(){return hh(u6,MT.instance)}static get defaultLocale(){return c6}static set defaultLocale(e){c6=e}static get defaultNumberingSystem(){return d6}static set defaultNumberingSystem(e){d6=e}static get defaultOutputCalendar(){return h6}static set defaultOutputCalendar(e){h6=e}static get twoDigitCutoffYear(){return p6}static set twoDigitCutoffYear(e){p6=e%100}static get throwOnInvalid(){return f6}static set throwOnInvalid(e){f6=e}static resetCaches(){si.resetCache(),al.resetCache()}}function ot(t){return typeof t>"u"}function sm(t){return typeof t=="number"}function TT(t){return typeof t=="number"&&t%1===0}function Rme(t){return typeof t=="string"}function Fme(t){return Object.prototype.toString.call(t)==="[object Date]"}function YZ(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Dme(t){return Array.isArray(t)?t:[t]}function m6(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function Nme(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function I0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fc(t,e,i){return TT(t)&&t>=e&&t<=i}function jme(t,e){return t-e*Math.floor(t/e)}function Xi(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Xd(t){if(!(ot(t)||t===null||t===""))return parseInt(t,10)}function vp(t){if(!(ot(t)||t===null||t===""))return parseFloat(t)}function fN(t){if(!(ot(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function mN(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function L1(t){return t%4===0&&(t%100!==0||t%400===0)}function zw(t){return L1(t)?366:365}function V2(t,e){const i=jme(e-1,12)+1,r=t+(e-i)/12;return i===2?L1(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function yN(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function z2(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||r===3?53:52}function nO(t){return t>99?t:t>Qi.twoDigitCutoffYear?1900+t:2e3+t}function JZ(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function IT(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function KZ(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Lo(`Invalid unit value ${t}`);return e}function U2(t,e){const i={};for(const r in t)if(I0(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=KZ(n)}return i}function Uw(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${Xi(i,2)}:${Xi(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Xi(i,2)}${Xi(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function kT(t){return Nme(t,["hour","minute","second","millisecond"])}const Vme=["January","February","March","April","May","June","July","August","September","October","November","December"],QZ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zme=["J","F","M","A","M","J","J","A","S","O","N","D"];function XZ(t){switch(t){case"narrow":return[...zme];case"short":return[...QZ];case"long":return[...Vme];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const eY=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],tY=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ume=["M","T","W","T","F","S","S"];function iY(t){switch(t){case"narrow":return[...Ume];case"short":return[...tY];case"long":return[...eY];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const rY=["AM","PM"],Bme=["Before Christ","Anno Domini"],Gme=["BC","AD"],Hme=["B","A"];function nY(t){switch(t){case"narrow":return[...Hme];case"short":return[...Gme];case"long":return[...Bme];default:return null}}function qme(t){return rY[t.hour<12?0:1]}function Wme(t,e){return iY(e)[t.weekday-1]}function Zme(t,e){return XZ(e)[t.month-1]}function Yme(t,e){return nY(e)[t.year<0?0:1]}function Jme(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const p=t==="days";switch(e){case 1:return p?"tomorrow":`next ${n[t][0]}`;case-1:return p?"yesterday":`last ${n[t][0]}`;case 0:return p?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=n[t],h=r?l?c[1]:c[2]||c[1]:l?n[t][0]:t;return o?`${a} ${h} ago`:`in ${a} ${h}`}function y6(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const Kme={D:j2,DD:CZ,DDD:PZ,DDDD:AZ,t:OZ,tt:LZ,ttt:RZ,tttt:FZ,T:DZ,TT:NZ,TTT:jZ,TTTT:VZ,f:zZ,ff:BZ,fff:HZ,ffff:WZ,F:UZ,FF:GZ,FFF:qZ,FFFF:ZZ};class gn{static create(e,i={}){return new gn(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return Kme[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Xi(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(e,y,g),o=y=>e.isOffsetFixed&&e.offset===0&&y.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,y.format):"",a=()=>r?qme(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,g)=>r?Zme(e,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),c=(y,g)=>r?Wme(e,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=gn.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(e,g):y},p=y=>r?Yme(e,y):s({era:y},"era"),f=y=>{switch(y){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(y)}};return y6(gn.parseFormat(i),f)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=r(c);return h?this.num(l.get(h),c.length):c},s=gn.parseFormat(i),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return y6(s,n(a))}}class Ua{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const sY=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ev(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function tv(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,a,l]=s(e,n);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function iv(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function oY(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=Xd(e[i+n]);return[r,null,i+n]}}const aY=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Qme=`(?:${aY.source}?(?:\\[(${sY.source})\\])?)?`,gN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,lY=RegExp(`${gN.source}${Qme}`),vN=RegExp(`(?:T${lY.source})?`),Xme=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,eye=/(\d{4})-?W(\d\d)(?:-?(\d))?/,tye=/(\d{4})-?(\d{3})/,iye=oY("weekYear","weekNumber","weekDay"),rye=oY("year","ordinal"),nye=/(\d{4})-(\d\d)-(\d\d)/,uY=RegExp(`${gN.source} ?(?:${aY.source}|(${sY.source}))?`),sye=RegExp(`(?: ${uY.source})?`);function Jg(t,e,i){const r=t[e];return ot(r)?i:Xd(r)}function oye(t,e){return[{year:Jg(t,e),month:Jg(t,e+1,1),day:Jg(t,e+2,1)},null,e+3]}function rv(t,e){return[{hours:Jg(t,e,0),minutes:Jg(t,e+1,0),seconds:Jg(t,e+2,0),milliseconds:fN(t[e+3])},null,e+4]}function R1(t,e){const i=!t[e]&&!t[e+1],r=IT(t[e+1],t[e+2]),n=i?null:qr.instance(r);return[{},n,e+3]}function F1(t,e){const i=t[e]?al.create(t[e]):null;return[{},i,e+1]}const aye=RegExp(`^T?${gN.source}$`),lye=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function uye(t){const[e,i,r,n,s,o,a,l,c]=t,h=e[0]==="-",p=l&&l[0]==="-",f=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:f(vp(i)),months:f(vp(r)),weeks:f(vp(n)),days:f(vp(s)),hours:f(vp(o)),minutes:f(vp(a)),seconds:f(vp(l),l==="-0"),milliseconds:f(fN(c),p)}]}const cye={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function _N(t,e,i,r,n,s,o){const a={year:e.length===2?nO(Xd(e)):Xd(e),month:QZ.indexOf(i)+1,day:Xd(r),hour:Xd(n),minute:Xd(s)};return o&&(a.second=Xd(o)),t&&(a.weekday=t.length>3?eY.indexOf(t)+1:tY.indexOf(t)+1),a}const dye=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function hye(t){const[,e,i,r,n,s,o,a,l,c,h,p]=t,f=_N(e,n,r,i,s,o,a);let y;return l?y=cye[l]:c?y=0:y=IT(h,p),[f,new qr(y)]}function pye(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const fye=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,mye=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yye=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function g6(t){const[,e,i,r,n,s,o,a]=t;return[_N(e,n,r,i,s,o,a),qr.utcInstance]}function gye(t){const[,e,i,r,n,s,o,a]=t;return[_N(e,a,i,r,n,s,o),qr.utcInstance]}const vye=ev(Xme,vN),_ye=ev(eye,vN),wye=ev(tye,vN),bye=ev(lY),cY=tv(oye,rv,R1,F1),Sye=tv(iye,rv,R1,F1),xye=tv(rye,rv,R1,F1),$ye=tv(rv,R1,F1);function Eye(t){return iv(t,[vye,cY],[_ye,Sye],[wye,xye],[bye,$ye])}function Mye(t){return iv(pye(t),[dye,hye])}function Tye(t){return iv(t,[fye,g6],[mye,g6],[yye,gye])}function Iye(t){return iv(t,[lye,uye])}const kye=tv(rv);function Cye(t){return iv(t,[aye,kye])}const Pye=ev(nye,sye),Aye=ev(uY),Oye=tv(rv,R1,F1);function Lye(t){return iv(t,[Pye,cY],[Aye,Oye])}const Rye="Invalid Duration",dY={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Fye={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...dY},uo=146097/400,Xm=146097/4800,Dye={years:{quarters:4,months:12,weeks:uo/7,days:uo,hours:uo*24,minutes:uo*24*60,seconds:uo*24*60*60,milliseconds:uo*24*60*60*1e3},quarters:{months:3,weeks:uo/28,days:uo/4,hours:uo*24/4,minutes:uo*24*60/4,seconds:uo*24*60*60/4,milliseconds:uo*24*60*60*1e3/4},months:{weeks:Xm/7,days:Xm,hours:Xm*24,minutes:Xm*24*60,seconds:Xm*24*60*60,milliseconds:Xm*24*60*60*1e3},...dY},Rp=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Nye=Rp.slice(0).reverse();function Kc(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new dt(r)}function jye(t){return t<0?Math.floor(t):Math.ceil(t)}function hY(t,e,i,r,n){const s=t[n][i],o=e[i]/s,a=Math.sign(o)===Math.sign(r[n]),l=!a&&r[n]!==0&&Math.abs(o)<=1?jye(o):Math.trunc(o);r[n]+=l,e[i]-=l*s}function Vye(t,e){Nye.reduce((i,r)=>ot(e[r])?i:(i&&hY(t,e,i,e,r),r),null)}function zye(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class dt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?Dye:Fye;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||si.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return dt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Lo(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new dt({values:U2(e,dt.normalizeUnit),loc:si.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(sm(e))return dt.fromMillis(e);if(dt.isDuration(e))return e;if(typeof e=="object")return dt.fromObject(e);throw new Lo(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=Iye(e);return r?dt.fromObject(r,i):dt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=Cye(e);return r?dt.fromObject(r,i):dt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Lo("need to specify a reason the Duration is invalid");const r=e instanceof Ua?e:new Ua(e,i);if(Qi.throwOnInvalid)throw new mme(r);return new dt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new kZ(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?gn.create(this.loc,r).formatDurationFromString(this,e):Rye}toHuman(e={}){const i=Rp.map(r=>{const n=this.values[r];return ot(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=mN(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let n=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(n+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(n+=".SSS"));let s=r.toFormat(n);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=dt.fromDurationLike(e),r={};for(const n of Rp)(I0(i.values,n)||I0(this.values,n))&&(r[n]=i.get(n)+this.get(n));return Kc(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=dt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=KZ(e(this.values[r],r));return Kc(this,{values:i},!0)}get(e){return this[dt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...U2(e,dt.normalizeUnit)};return Kc(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return Kc(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Vye(this.matrix,e),Kc(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=zye(this.normalize().shiftToAll().toObject());return Kc(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>dt.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of Rp)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;sm(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3;for(const c in n)Rp.indexOf(c)>Rp.indexOf(o)&&hY(this.matrix,n,c,i,o)}else sm(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return Kc(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Kc(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of Rp)if(!i(this.values[r],e.values[r]))return!1;return!0}}const ey="Invalid Interval";function Uye(t,e){return!t||!t.isValid?Ti.invalid("missing or invalid start"):!e||!e.isValid?Ti.invalid("missing or invalid end"):e<t?Ti.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ti{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Lo("need to specify a reason the Interval is invalid");const r=e instanceof Ua?e:new Ua(e,i);if(Qi.throwOnInvalid)throw new fme(r);return new Ti({invalid:r})}static fromDateTimes(e,i){const r=jv(e),n=jv(i),s=Uye(r,n);return s??new Ti({start:r,end:n})}static after(e,i){const r=dt.fromDurationLike(i),n=jv(e);return Ti.fromDateTimes(n,n.plus(r))}static before(e,i){const r=dt.fromDurationLike(i),n=jv(e);return Ti.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=$e.fromISO(r,i),o=s.isValid}catch{o=!1}let a,l;try{a=$e.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return Ti.fromDateTimes(s,a);if(o){const c=dt.fromISO(n,i);if(c.isValid)return Ti.after(s,c)}else if(l){const c=dt.fromISO(r,i);if(c.isValid)return Ti.before(a,c)}}return Ti.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ti.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(jv).filter(o=>this.contains(o)).sort(),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push(Ti.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const i=dt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(Ti.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Ti.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Ti.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(Ti.fromDateTimes(i,l.time)),i=null);return Ti.merge(n)}difference(...e){return Ti.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:ey}toLocaleString(e=j2,i={}){return this.isValid?gn.create(this.s.loc.clone(i),e).formatInterval(this):ey}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ey}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ey}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ey}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:ey}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):dt.invalid(this.invalidReason)}mapEndpoints(e){return Ti.fromDateTimes(e(this.s),e(this.e))}}class BS{static hasDST(e=Qi.defaultZone){const i=$e.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return al.isValidZone(e)}static normalizeZone(e){return hh(e,Qi.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||si.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||si.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||si.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||si.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return si.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return si.create(i,null,"gregory").eras(e)}static features(){return{relative:YZ()}}}function v6(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(dt.fromMillis(r).as("days"))}function Bye(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=v6(l,c);return(h-h%7)/7}],["days",v6]],n={},s=t;let o,a;for(const[l,c]of r)i.indexOf(l)>=0&&(o=l,n[l]=c(t,e),a=s.plus(n),a>e?(n[l]--,t=s.plus(n)):t=a);return[t,n,a,o]}function Gye(t,e,i,r){let[n,s,o,a]=Bye(t,e,i);const l=e-n,c=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);c.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=dt.fromObject(s,r);return c.length>0?dt.fromMillis(l,r).shiftTo(...c).plus(h):h}const wN={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},_6={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Hye=wN.hanidec.replace(/[\[|\]]/g,"").split("");function qye(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(wN.hanidec)!==-1)e+=Hye.indexOf(t[i]);else for(const n in _6){const[s,o]=_6[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}function ia({numberingSystem:t},e=""){return new RegExp(`${wN[t||"latn"]}${e}`)}const Wye="missing Intl.DateTimeFormat.formatToParts support";function _t(t,e=i=>i){return{regex:t,deser:([i])=>e(qye(i))}}const Zye=String.fromCharCode(160),pY=`[ ${Zye}]`,fY=new RegExp(pY,"g");function Yye(t){return t.replace(/\./g,"\\.?").replace(fY,pY)}function w6(t){return t.replace(/\./g,"").replace(fY," ").toLowerCase()}function ra(t,e){return t===null?null:{regex:RegExp(t.map(Yye).join("|")),deser:([i])=>t.findIndex(r=>w6(i)===w6(r))+e}}function b6(t,e){return{regex:t,deser:([,i,r])=>IT(i,r),groups:e}}function GS(t){return{regex:t,deser:([e])=>e}}function Jye(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Kye(t,e){const i=ia(e),r=ia(e,"{2}"),n=ia(e,"{3}"),s=ia(e,"{4}"),o=ia(e,"{6}"),a=ia(e,"{1,2}"),l=ia(e,"{1,3}"),c=ia(e,"{1,6}"),h=ia(e,"{1,9}"),p=ia(e,"{2,4}"),f=ia(e,"{4,6}"),y=_=>({regex:RegExp(Jye(_.val)),deser:([w])=>w,literal:!0}),v=(_=>{if(t.literal)return y(_);switch(_.val){case"G":return ra(e.eras("short",!1),0);case"GG":return ra(e.eras("long",!1),0);case"y":return _t(c);case"yy":return _t(p,nO);case"yyyy":return _t(s);case"yyyyy":return _t(f);case"yyyyyy":return _t(o);case"M":return _t(a);case"MM":return _t(r);case"MMM":return ra(e.months("short",!0,!1),1);case"MMMM":return ra(e.months("long",!0,!1),1);case"L":return _t(a);case"LL":return _t(r);case"LLL":return ra(e.months("short",!1,!1),1);case"LLLL":return ra(e.months("long",!1,!1),1);case"d":return _t(a);case"dd":return _t(r);case"o":return _t(l);case"ooo":return _t(n);case"HH":return _t(r);case"H":return _t(a);case"hh":return _t(r);case"h":return _t(a);case"mm":return _t(r);case"m":return _t(a);case"q":return _t(a);case"qq":return _t(r);case"s":return _t(a);case"ss":return _t(r);case"S":return _t(l);case"SSS":return _t(n);case"u":return GS(h);case"uu":return GS(a);case"uuu":return _t(i);case"a":return ra(e.meridiems(),0);case"kkkk":return _t(s);case"kk":return _t(p,nO);case"W":return _t(a);case"WW":return _t(r);case"E":case"c":return _t(i);case"EEE":return ra(e.weekdays("short",!1,!1),1);case"EEEE":return ra(e.weekdays("long",!1,!1),1);case"ccc":return ra(e.weekdays("short",!0,!1),1);case"cccc":return ra(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return b6(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return b6(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return GS(/[a-z_+-/]{1,256}?/i);case" ":return GS(/[^\S\n\r]/);default:return y(_)}})(t)||{invalidReason:Wye};return v.token=t,v}const Qye={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Xye(t,e){const{type:i,value:r}=t;if(i==="literal"){const o=/^\s+$/.test(r);return{literal:!o,val:o?" ":r}}const n=e[i];let s=Qye[i];if(typeof s=="object"&&(s=s[n]),s)return{literal:!1,val:s}}function ege(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function tge(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(I0(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function ige(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return ot(t.z)||(i=al.create(t.z)),ot(t.Z)||(i||(i=new qr(t.Z)),r=t.Z),ot(t.q)||(t.M=(t.q-1)*3+1),ot(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ot(t.u)||(t.S=fN(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,r]}let Pk=null;function rge(){return Pk||(Pk=$e.fromMillis(1555555555555)),Pk}function nge(t,e){if(t.literal)return t;const i=gn.macroTokenToFormatOpts(t.val),r=gY(i,e);return r==null||r.includes(void 0)?t:r}function mY(t,e){return Array.prototype.concat(...t.map(i=>nge(i,e)))}function yY(t,e,i){const r=mY(gn.parseFormat(i),t),n=r.map(o=>Kye(o,t)),s=n.find(o=>o.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{const[o,a]=ege(n),l=RegExp(o,"i"),[c,h]=tge(e,l,a),[p,f,y]=h?ige(h):[null,null,void 0];if(I0(h,"a")&&I0(h,"H"))throw new w_("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:l,rawMatches:c,matches:h,result:p,zone:f,specificOffset:y}}}function sge(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=yY(t,e,i);return[r,n,s,o]}function gY(t,e){return t?gn.create(e,t).formatDateTimeParts(rge()).map(n=>Xye(n,t)):null}const vY=[0,31,59,90,120,151,181,212,243,273,304,334],_Y=[0,31,60,91,121,152,182,213,244,274,305,335];function jo(t,e){return new Ua("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function wY(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function bY(t,e,i){return i+(L1(t)?_Y:vY)[e-1]}function SY(t,e){const i=L1(t)?_Y:vY,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function sO(t){const{year:e,month:i,day:r}=t,n=bY(e,i,r),s=wY(e,i,r);let o=Math.floor((n-s+10)/7),a;return o<1?(a=e-1,o=z2(a)):o>z2(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:s,...kT(t)}}function S6(t){const{weekYear:e,weekNumber:i,weekday:r}=t,n=wY(e,1,4),s=zw(e);let o=i*7+r-n-3,a;o<1?(a=e-1,o+=zw(a)):o>s?(a=e+1,o-=zw(e)):a=e;const{month:l,day:c}=SY(a,o);return{year:a,month:l,day:c,...kT(t)}}function Ak(t){const{year:e,month:i,day:r}=t,n=bY(e,i,r);return{year:e,ordinal:n,...kT(t)}}function x6(t){const{year:e,ordinal:i}=t,{month:r,day:n}=SY(e,i);return{year:e,month:r,day:n,...kT(t)}}function oge(t){const e=TT(t.weekYear),i=fc(t.weekNumber,1,z2(t.weekYear)),r=fc(t.weekday,1,7);return e?i?r?!1:jo("weekday",t.weekday):jo("week",t.week):jo("weekYear",t.weekYear)}function age(t){const e=TT(t.year),i=fc(t.ordinal,1,zw(t.year));return e?i?!1:jo("ordinal",t.ordinal):jo("year",t.year)}function xY(t){const e=TT(t.year),i=fc(t.month,1,12),r=fc(t.day,1,V2(t.year,t.month));return e?i?r?!1:jo("day",t.day):jo("month",t.month):jo("year",t.year)}function $Y(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=fc(e,0,23)||e===24&&i===0&&r===0&&n===0,o=fc(i,0,59),a=fc(r,0,59),l=fc(n,0,999);return s?o?a?l?!1:jo("millisecond",n):jo("second",r):jo("minute",i):jo("hour",e)}const Ok="Invalid DateTime",$6=864e13;function HS(t){return new Ua("unsupported zone",`the zone "${t.name}" is not supported`)}function Lk(t){return t.weekData===null&&(t.weekData=sO(t.c)),t.weekData}function Dv(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new $e({...i,...e,old:i})}function EY(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function E6(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function I$(t,e,i){return EY(yN(t),e,i)}function M6(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,V2(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=dt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=yN(s);let[l,c]=EY(a,i,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function Nv(t,e,i,r,n,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=$e.fromObject(t,{...i,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return $e.invalid(new Ua("unparsable",`the input "${n}" can't be parsed as ${r}`))}function qS(t,e,i=!0){return t.isValid?gn.create(si.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Rk(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=Xi(t.c.year,i?6:4),e?(r+="-",r+=Xi(t.c.month),r+="-",r+=Xi(t.c.day)):(r+=Xi(t.c.month),r+=Xi(t.c.day)),r}function T6(t,e,i,r,n,s){let o=Xi(t.c.hour);return e?(o+=":",o+=Xi(t.c.minute),(t.c.second!==0||!i)&&(o+=":")):o+=Xi(t.c.minute),(t.c.second!==0||!i)&&(o+=Xi(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Xi(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Xi(Math.trunc(-t.o/60)),o+=":",o+=Xi(Math.trunc(-t.o%60))):(o+="+",o+=Xi(Math.trunc(t.o/60)),o+=":",o+=Xi(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const MY={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},lge={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},uge={ordinal:1,hour:0,minute:0,second:0,millisecond:0},TY=["year","month","day","hour","minute","second","millisecond"],cge=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],dge=["year","ordinal","hour","minute","second","millisecond"];function I6(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new kZ(t);return e}function k6(t,e){const i=hh(e.zone,Qi.defaultZone),r=si.fromObject(e),n=Qi.now();let s,o;if(ot(t.year))s=n;else{for(const c of TY)ot(t[c])&&(t[c]=MY[c]);const a=xY(t)||$Y(t);if(a)return $e.invalid(a);const l=i.offset(n);[s,o]=I$(t,l,i)}return new $e({ts:s,zone:i,loc:r,o})}function C6(t,e,i){const r=ot(i.round)?!0:i.round,n=(o,a)=>(o=mN(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function P6(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class $e{constructor(e){const i=e.zone||Qi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ua("invalid input"):null)||(i.isValid?null:HS(i));this.ts=ot(e.ts)?Qi.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const a=i.offset(this.ts);n=E6(this.ts,a),r=Number.isNaN(n.year)?new Ua("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=e.loc||si.create(),this.invalid=r,this.weekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new $e({})}static local(){const[e,i]=P6(arguments),[r,n,s,o,a,l,c]=i;return k6({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,i]=P6(arguments),[r,n,s,o,a,l,c]=i;return e.zone=qr.utcInstance,k6({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=Fme(e)?e.valueOf():NaN;if(Number.isNaN(r))return $e.invalid("invalid input");const n=hh(i.zone,Qi.defaultZone);return n.isValid?new $e({ts:r,zone:n,loc:si.fromObject(i)}):$e.invalid(HS(n))}static fromMillis(e,i={}){if(sm(e))return e<-$6||e>$6?$e.invalid("Timestamp out of range"):new $e({ts:e,zone:hh(i.zone,Qi.defaultZone),loc:si.fromObject(i)});throw new Lo(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(sm(e))return new $e({ts:e*1e3,zone:hh(i.zone,Qi.defaultZone),loc:si.fromObject(i)});throw new Lo("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=hh(i.zone,Qi.defaultZone);if(!r.isValid)return $e.invalid(HS(r));const n=Qi.now(),s=ot(i.specificOffset)?r.offset(n):i.specificOffset,o=U2(e,I6),a=!ot(o.ordinal),l=!ot(o.year),c=!ot(o.month)||!ot(o.day),h=l||c,p=o.weekYear||o.weekNumber,f=si.fromObject(i);if((h||a)&&p)throw new w_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new w_("Can't mix ordinal dates with month/day");const y=p||o.weekday&&!h;let g,v,_=E6(n,s);y?(g=cge,v=lge,_=sO(_)):a?(g=dge,v=uge,_=Ak(_)):(g=TY,v=MY);let w=!1;for(const L of g){const z=o[L];ot(z)?w?o[L]=v[L]:o[L]=_[L]:w=!0}const S=y?oge(o):a?age(o):xY(o),b=S||$Y(o);if(b)return $e.invalid(b);const $=y?S6(o):a?x6(o):o,[T,I]=I$($,s,r),A=new $e({ts:T,zone:r,o:I,loc:f});return o.weekday&&h&&e.weekday!==A.weekday?$e.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${A.toISO()}`):A}static fromISO(e,i={}){const[r,n]=Eye(e);return Nv(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=Mye(e);return Nv(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=Tye(e);return Nv(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(ot(e)||ot(i))throw new Lo("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=si.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=sge(o,e,i);return h?$e.invalid(h):Nv(a,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return $e.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=Lye(e);return Nv(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Lo("need to specify a reason the DateTime is invalid");const r=e instanceof Ua?e:new Ua(e,i);if(Qi.throwOnInvalid)throw new pme(r);return new $e({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=gY(e,si.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return mY(gn.parseFormat(e),si.fromObject(i)).map(n=>n.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Lk(this).weekYear:NaN}get weekNumber(){return this.isValid?Lk(this).weekNumber:NaN}get weekday(){return this.isValid?Lk(this).weekday:NaN}get ordinal(){return this.isValid?Ak(this.c).ordinal:NaN}get monthShort(){return this.isValid?BS.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?BS.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?BS.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?BS.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return L1(this.year)}get daysInMonth(){return V2(this.year,this.month)}get daysInYear(){return this.isValid?zw(this.year):NaN}get weeksInWeekYear(){return this.isValid?z2(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=gn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(qr.instance(e),i)}toLocal(){return this.setZone(Qi.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=hh(e,Qi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=I$(o,s,e)}return Dv(this,{ts:n,zone:e})}else return $e.invalid(HS(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Dv(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=U2(e,I6),r=!ot(i.weekYear)||!ot(i.weekNumber)||!ot(i.weekday),n=!ot(i.ordinal),s=!ot(i.year),o=!ot(i.month)||!ot(i.day),a=s||o,l=i.weekYear||i.weekNumber;if((a||n)&&l)throw new w_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&n)throw new w_("Can't mix ordinal dates with month/day");let c;r?c=S6({...sO(this.c),...i}):ot(i.ordinal)?(c={...this.toObject(),...i},ot(i.day)&&(c.day=Math.min(V2(c.year,c.month),c.day))):c=x6({...Ak(this.c),...i});const[h,p]=I$(c,this.o,this.zone);return Dv(this,{ts:h,o:p})}plus(e){if(!this.isValid)return this;const i=dt.fromDurationLike(e);return Dv(this,M6(this,i))}minus(e){if(!this.isValid)return this;const i=dt.fromDurationLike(e).negate();return Dv(this,M6(this,i))}startOf(e){if(!this.isValid)return this;const i={},r=dt.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?gn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):Ok}toLocaleString(e=j2,i={}){return this.isValid?gn.create(this.loc.clone(i),e).formatDateTime(this):Ok}toLocaleParts(e={}){return this.isValid?gn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=Rk(this,o);return a+="T",a+=T6(this,o,i,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?Rk(this,e==="extended"):null}toISOWeekDate(){return qS(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+T6(this,o==="extended",i,e,r,s):null}toRFC2822(){return qS(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return qS(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Rk(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),qS(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Ok}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return dt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=Dme(i).map(dt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=Gye(a,l,s,n);return o?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff($e.now(),e,i)}until(e){return this.isValid?Ti.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const r=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(i)<=r&&r<=n.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||$e.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),C6(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?C6(e.base||$e.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every($e.isDateTime))throw new Lo("min requires all arguments be DateTimes");return m6(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every($e.isDateTime))throw new Lo("max requires all arguments be DateTimes");return m6(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=si.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return yY(o,e,i)}static fromStringExplain(e,i,r={}){return $e.fromFormatExplain(e,i,r)}static get DATE_SHORT(){return j2}static get DATE_MED(){return CZ}static get DATE_MED_WITH_WEEKDAY(){return yme}static get DATE_FULL(){return PZ}static get DATE_HUGE(){return AZ}static get TIME_SIMPLE(){return OZ}static get TIME_WITH_SECONDS(){return LZ}static get TIME_WITH_SHORT_OFFSET(){return RZ}static get TIME_WITH_LONG_OFFSET(){return FZ}static get TIME_24_SIMPLE(){return DZ}static get TIME_24_WITH_SECONDS(){return NZ}static get TIME_24_WITH_SHORT_OFFSET(){return jZ}static get TIME_24_WITH_LONG_OFFSET(){return VZ}static get DATETIME_SHORT(){return zZ}static get DATETIME_SHORT_WITH_SECONDS(){return UZ}static get DATETIME_MED(){return BZ}static get DATETIME_MED_WITH_SECONDS(){return GZ}static get DATETIME_MED_WITH_WEEKDAY(){return gme}static get DATETIME_FULL(){return HZ}static get DATETIME_FULL_WITH_SECONDS(){return qZ}static get DATETIME_HUGE(){return WZ}static get DATETIME_HUGE_WITH_SECONDS(){return ZZ}}function jv(t){if($e.isDateTime(t))return t;if(t&&t.valueOf&&sm(t.valueOf()))return $e.fromJSDate(t);if(t&&typeof t=="object")return $e.fromObject(t);throw new Lo(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const hge={year:void 0,month:void 0,day:void 0,weekday:void 0},pge={hour:void 0,minute:void 0,second:void 0},fge={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},bN={timeZone:"Etc/UTC"},_l={year:"numeric",month:"numeric",day:"numeric"},Vv={year:"numeric",month:"long",day:"numeric"},zv={year:"numeric",month:"short",day:"numeric"},Uv={year:"numeric",month:"long",weekday:"long",day:"numeric"},fo={hour:"numeric",minute:"numeric"},na={...fo,second:"numeric"},nv={"short-date":_l,"short-date-short-time":{..._l,...fo},"short-date-short-time-24":{..._l,...fo,hour12:!1},"short-date-long-time":{..._l,...na},"short-date-long-time-24":{..._l,...na,hour12:!1},"short-date-le":_l,"short-date-le-short-time":{..._l,...fo},"short-date-le-short-time-24":{..._l,...fo,hour12:!1},"short-date-le-long-time":{..._l,...na},"short-date-le-long-time-24":{..._l,...na,hour12:!1},"long-month-day-year":Vv,"long-month-day-year-short-time":{...Vv,...fo},"long-month-day-year-short-time-24":{...Vv,...fo,hour12:!1},"long-month-day-year-long-time":{...Vv,...na},"long-month-day-year-long-time-24":{...Vv,...na,hour12:!1},"day-short-month-year":zv,"day-short-month-year-short-time":{...zv,...fo},"day-short-month-year-short-time-24":{...zv,...fo,hour12:!1},"day-short-month-year-long-time":{...zv,...na},"day-short-month-year-long-time-24":{...zv,...na,hour12:!1},"long-date":Uv,"long-date-short-time":{...Uv,...fo},"long-date-short-time-24":{...Uv,...fo,hour12:!1},"long-date-long-time":{...Uv,...na},"long-date-long-time-24":{...Uv,...na,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":fo,"long-time":na},mge=$n()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),IY={ar:"ar-u-nu-latn-ca-gregory"};let oO=new WeakMap,kY=nv["short-date-short-time"];function yge(t){const e=t||kY;let i=oO.get(e);if(!i){const r=Yr(),n=IY[r]||r;i=new Intl.DateTimeFormat(n,e),oO.set(e,i)}return i}function $g(t){return nv[t]}function io(t,e){return yge(e).format(t)}function SN(t,e=nv["short-date"]){return io(new Date(t),{...e,...bN,...pge})}function xN(t,e=nv["short-time"]){return io(new Date(`1970-01-01T${t}Z`),{...e,...bN,...hge})}function $N(t,e=nv["short-date-short-time"]){const i=$e.fromISO(t,{setZone:!0}),r=Yr(),n=IY[r]??r;return i.toLocaleString({...fge,...e},{locale:n})}pN(()=>{oO=new WeakMap,kY=nv["short-date-short-time"]});const gge={ar:"ar-u-nu-latn"};let k$=new WeakMap,CY={};function vge(t){const e=t||CY;if(!k$.has(e)){const i=Yr(),r=gge[Yr()]||i;k$.set(e,new Intl.NumberFormat(r,t))}return k$.get(e)}function PY(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Yo(t,e){return Object.is(t,-0)&&(t=0),vge(e).format(t)}pN(()=>{k$=new WeakMap,CY={}});let gy=class extends Ft(G){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(e){return Yo(e,PY(this))}formatDate(e,i=!1){return this.dateFormat?io(e,{...$g(this.dateFormat),...i&&bN}):this.formatNumber(e)}formatDateOnly(e){const i=(this.dateFormat&&$g(this.dateFormat))??void 0;return SN(e,i)}formatTimeOnly(e){const i=(this.dateFormat&&$g(this.dateFormat))??void 0;return xN(e,i)}formatTimestamp(e){const i=(this.dateFormat&&$g(this.dateFormat))??void 0;return $N(e,i)}formatRasterPixelValue(e){return e.includes("-")?e:e.trim().includes(",")?this._formatDelimitedString(e,",",", "):e.trim().includes(";")?this._formatDelimitedString(e,";","; "):e.trim().includes(" ")?this._formatDelimitedString(e," "," "):this.formatNumber(Number(e))}_formatDelimitedString(e,i,r){return e&&i&&r?e.trim().split(i).map(n=>this.formatNumber(Number(n))).join(r):e}};u([ye(mge)],gy.prototype,"dateFormat",void 0),u([d({type:Boolean,json:{write:!0}})],gy.prototype,"digitSeparator",void 0),u([d({type:Mt,json:{write:!0}})],gy.prototype,"places",void 0),gy=u([E("esri.popup.support.FieldInfoFormat")],gy);const Eg=gy;var aO;let da=aO=class extends G{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new aO({fieldName:this.fieldName,format:this.format?F(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([d({type:String,json:{write:!0}})],da.prototype,"fieldName",void 0),u([d({type:Eg,json:{write:!0}})],da.prototype,"format",void 0),u([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],da.prototype,"isEditable",void 0),u([d({type:String,json:{write:!0}})],da.prototype,"label",void 0),u([ye(new Ge({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],da.prototype,"stringFieldOption",void 0),u([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],da.prototype,"statisticType",void 0),u([d({type:String,json:{write:!0}})],da.prototype,"tooltip",void 0),u([d({type:Boolean,json:{write:!0}})],da.prototype,"visible",void 0),da=aO=u([E("esri.popup.FieldInfo")],da);const D1=da;var lO;let Cu=lO=class extends cp{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new lO(F({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([d({type:Object,json:{write:!0}})],Cu.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],Cu.prototype,"description",void 0),u([d({type:[D1]})],Cu.prototype,"fieldInfos",void 0),u([ie("fieldInfos")],Cu.prototype,"writeFieldInfos",null),u([d({type:String,json:{write:!0}})],Cu.prototype,"title",void 0),u([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Cu.prototype,"type",void 0),Cu=lO=u([E("esri.popup.content.FieldsContent")],Cu);const k0=Cu;let Fp=class extends G{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};u([d({type:String,json:{write:!0}})],Fp.prototype,"altText",void 0),u([d({type:String,json:{write:!0}})],Fp.prototype,"caption",void 0),u([d({type:String,json:{write:!0}})],Fp.prototype,"title",void 0),u([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Fp.prototype,"type",void 0),Fp=u([E("esri.popup.content.mixins.MediaInfo")],Fp);const EN=Fp;var uO;let vy=uO=class extends X{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new uO({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([d()],vy.prototype,"fieldName",void 0),u([d()],vy.prototype,"tooltip",void 0),u([d()],vy.prototype,"value",void 0),vy=uO=u([E("esri.popup.content.support.ChartMediaInfoValueSeries")],vy);const AY=vy;var cO;let Dp=cO=class extends G{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new cO({fields:F(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};u([d({type:[String],json:{write:!0}})],Dp.prototype,"fields",void 0),u([d({type:String,json:{write:!0}})],Dp.prototype,"normalizeField",void 0),u([d({type:[AY],json:{read:!1}})],Dp.prototype,"series",void 0),u([d({type:String,json:{write:!0}})],Dp.prototype,"tooltipField",void 0),Dp=cO=u([E("esri.popup.content.support.ChartMediaInfoValue")],Dp);const _ge=Dp;let S_=class extends EN{constructor(e){super(e),this.type=null,this.value=null}};u([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],S_.prototype,"type",void 0),u([d({type:_ge,json:{write:!0}})],S_.prototype,"value",void 0),S_=u([E("esri.popup.content.mixins.ChartMediaInfo")],S_);const CT=S_,PT=$n()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var dO;let C$=dO=class extends CT{constructor(t){super(t),this.type="bar-chart"}clone(){return new dO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:PT.write}})],C$.prototype,"type",void 0),C$=dO=u([E("esri.popup.content.BarChartMediaInfo")],C$);const OY=C$;var hO;let P$=hO=class extends CT{constructor(t){super(t),this.type="column-chart"}clone(){return new hO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:PT.write}})],P$.prototype,"type",void 0),P$=hO=u([E("esri.popup.content.ColumnChartMediaInfo")],P$);const LY=P$;var pO;let x_=pO=class extends G{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new pO({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([d({type:String,json:{write:!0}})],x_.prototype,"linkURL",void 0),u([d({type:String,json:{write:!0}})],x_.prototype,"sourceURL",void 0),x_=pO=u([E("esri.popup.content.support.ImageMediaInfoValue")],x_);const wge=x_;var fO;let _y=fO=class extends EN{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new fO({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};u([d({type:Number,json:{write:!0}})],_y.prototype,"refreshInterval",void 0),u([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],_y.prototype,"type",void 0),u([d({type:wge,json:{write:!0}})],_y.prototype,"value",void 0),_y=fO=u([E("esri.popup.content.ImageMediaInfo")],_y);const RY=_y;var mO;let A$=mO=class extends CT{constructor(t){super(t),this.type="line-chart"}clone(){return new mO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:PT.write}})],A$.prototype,"type",void 0),A$=mO=u([E("esri.popup.content.LineChartMediaInfo")],A$);const FY=A$;var yO;let O$=yO=class extends CT{constructor(t){super(t),this.type="pie-chart"}clone(){return new yO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:PT.write}})],O$.prototype,"type",void 0),O$=yO=u([E("esri.popup.content.PieChartMediaInfo")],O$);const DY=O$,NY={base:EN,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":OY,"column-chart":LY,"line-chart":FY,"pie-chart":DY,image:RY}};var gO;let ha=gO=class extends cp{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?RY.fromJSON(e):e.type==="barchart"?OY.fromJSON(e):e.type==="columnchart"?LY.fromJSON(e):e.type==="linechart"?FY.fromJSON(e):e.type==="piechart"?DY.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new gO(F({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([d()],ha.prototype,"activeMediaInfoIndex",void 0),u([d({type:Object,json:{write:!0}})],ha.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],ha.prototype,"description",void 0),u([d({types:[NY]})],ha.prototype,"mediaInfos",void 0),u([Q("mediaInfos")],ha.prototype,"readMediaInfos",null),u([ie("mediaInfos")],ha.prototype,"writeMediaInfos",null),u([d({type:String,json:{write:!0}})],ha.prototype,"title",void 0),u([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],ha.prototype,"type",void 0),ha=gO=u([E("esri.popup.content.MediaContent")],ha);const Gb=ha;var vO;let $_=vO=class extends G{constructor(t){super(t),this.field=null,this.order=null}clone(){return new vO({field:this.field,order:this.order})}};u([d({type:String,json:{write:!0}})],$_.prototype,"field",void 0),u([d({type:["asc","desc"],json:{write:!0}})],$_.prototype,"order",void 0),$_=vO=u([E("esri.popup.support.RelatedRecordsInfoFieldOrder")],$_);const MN=$_;let Tl=class extends Ft(cp){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([d({type:String,json:{write:!0}})],Tl.prototype,"description",void 0),u([d({type:Number,json:{type:Mt,write:!0}})],Tl.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],Tl.prototype,"displayType",void 0),u([d({type:[MN],json:{write:!0}})],Tl.prototype,"orderByFields",void 0),u([d({type:Number,json:{type:Mt,write:!0}})],Tl.prototype,"relationshipId",void 0),u([d({type:String,json:{write:!0}})],Tl.prototype,"title",void 0),u([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Tl.prototype,"type",void 0),Tl=u([E("esri.popup.content.RelationshipContent")],Tl);const B2=Tl;var _O;let E_=_O=class extends cp{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new _O({text:this.text})}};u([d({type:String,json:{write:!0}})],E_.prototype,"text",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],E_.prototype,"type",void 0),E_=_O=u([E("esri.popup.content.TextContent")],E_);const C0=E_,bge={base:null,key:"type",typeMap:{attachment:Bb,media:Gb,text:C0,expression:hN,field:k0,relationship:B2}};var wO;let Np=wO=class extends G{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new wO({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],Np.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],Np.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Np.prototype,"expression",void 0),u([d({type:["string","number"],json:{write:!0}})],Np.prototype,"returnType",void 0),Np=wO=u([E("esri.popup.ExpressionInfo")],Np);const jY=Np;var bO;let M_=bO=class extends G{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new bO({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([d({type:Boolean,json:{write:!0}})],M_.prototype,"returnTopmostRaster",void 0),u([d({type:Boolean,json:{write:!0}})],M_.prototype,"showNoDataRecords",void 0),M_=bO=u([E("esri.popup.LayerOptions")],M_);const Sge=M_;var SO;let T_=SO=class extends G{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new SO({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?F(this.orderByFields):null})}};u([d({type:Boolean,json:{write:!0}})],T_.prototype,"showRelatedRecords",void 0),u([d({type:[MN],json:{write:!0}})],T_.prototype,"orderByFields",void 0),T_=SO=u([E("esri.popup.RelatedRecordsInfo")],T_);const xge=T_;let VY=0;const jc=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+VY++})}};return e=u([E("esri.core.Identifiable")],e),e},TN=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:VY++})}};return e=u([E("esri.core.NumericIdentifiable")],e),e};let A6=class extends jc(class{}){};A6=u([E("esri.core.Identifiable")],A6);var xO;let mo=xO=class extends jc(X){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new xO({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([d()],mo.prototype,"active",void 0),u([d()],mo.prototype,"className",void 0),u([d()],mo.prototype,"disabled",void 0),u([d()],mo.prototype,"icon",void 0),u([d()],mo.prototype,"id",void 0),u([d()],mo.prototype,"indicator",void 0),u([d()],mo.prototype,"title",void 0),u([d()],mo.prototype,"type",void 0),u([d()],mo.prototype,"visible",void 0),mo=xO=u([E("esri.support.actions.ActionBase")],mo);const sv=mo;var $O;let L$=$O=class extends sv{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new $O({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([d()],L$.prototype,"image",void 0),L$=$O=u([E("esri.support.Action.ActionButton")],L$);const ov=L$;var EO;let I_=EO=class extends sv{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new EO({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([d()],I_.prototype,"image",void 0),u([d()],I_.prototype,"value",void 0),I_=EO=u([E("esri.support.Action.ActionToggle")],I_);const AT=I_,$ge="esri.PopupTemplate",Ege=U.getLogger($ge),Bv="relationships/",O6="expression/",Mge=se.ofType({key:"type",defaultKeyValue:"button",base:sv,typeMap:{button:ov,toggle:AT}}),Tge={base:cp,key:"type",typeMap:{media:Gb,custom:cme,text:C0,attachments:Bb,fields:k0,expression:hN,relationship:B2}},Ige=["attachments","fields","media","text","expression","relationship"];let cr=class extends Ft(G){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>iu(Tge,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Nc(e)?e:(Ege.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(e,i,r,n){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>Ige.includes(s.type)).map(s=>s&&s.toJSON(n)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter(c=>c.type==="fields"):[],l=a.length&&a.every(c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length});i.fieldInfos=e.filter(Boolean).map(c=>{const h=c.toJSON(n);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),zb(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=F(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const s=i.fieldInfos.find(o=>o.fieldName.toLowerCase()===n.fieldName.toLowerCase());s?s.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const r=((s=e.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,e.relationshipId)))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=F(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),Gb.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),C0.fromJSON(s)):s.type==="attachments"?Bb.fromJSON(s):s.type==="fields"?k0.fromJSON(s):s.type==="expression"?hN.fromJSON(s):s.type==="relationship"?B2.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(Bv)))return null;const n=i.replace(Bv,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return typeof s=="number"&&o?B2.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${Bv}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new C0({text:e})):s.push(new k0),Array.isArray(i)&&i.length&&s.push(Gb.fromJSON({mediaInfos:i})),r&&s.push(Bb.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:h}=s,p=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&p.push(a),l&&p.push(l),p}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(n=>Gn(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(Bv)&&!i.startsWith(O6)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,r=e.match(i);if(!r)return[];const n=/\{(\w+):.+\}/,s=r.filter(o=>!(o.indexOf(`{${Bv}`)===0||o.indexOf(`{${O6}`)===0)).map(o=>o.replace(n,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};u([d({type:Mge})],cr.prototype,"actions",void 0),u([d()],cr.prototype,"content",void 0),u([Re("content")],cr.prototype,"castContent",null),u([Q("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],cr.prototype,"readContent",null),u([ie("content",{popupElements:{type:se.ofType(bge)},showAttachments:{type:Boolean},mediaInfos:{type:se.ofType(NY)},description:{type:String},relatedRecordsInfo:{type:xge}})],cr.prototype,"writeContent",null),u([d({type:[jY],json:{write:!0}})],cr.prototype,"expressionInfos",void 0),u([d({type:[D1]})],cr.prototype,"fieldInfos",void 0),u([ie("fieldInfos")],cr.prototype,"writeFieldInfos",null),u([d({type:Sge})],cr.prototype,"layerOptions",void 0),u([ie("layerOptions")],cr.prototype,"writeLayerOptions",null),u([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],cr.prototype,"lastEditInfoEnabled",void 0),u([d()],cr.prototype,"outFields",void 0),u([d()],cr.prototype,"overwriteActions",void 0),u([d()],cr.prototype,"returnGeometry",void 0),u([d({json:{type:String}})],cr.prototype,"title",void 0),u([ie("title")],cr.prototype,"writeTitle",null),cr=u([E("esri.PopupTemplate")],cr);const dp=cr,G2={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function zY(t){return!!G2[t]||!!G2[t.toLowerCase()]}function IN(t){return G2[t]??G2[t.toLowerCase()]}function kge(t){return[...IN(t)]}function Fk(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function UY(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*Fk(o,s,n+1/3)),Math.round(255*Fk(o,s,n)),Math.round(255*Fk(o,s,n-1/3)),r]}function Cge(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}function WS(t){return xs(LD(t),0,255)}function ZS(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let R$=class jr{static blendColors(e,i,r,n=new jr){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),s=r[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),jr.fromArray(a,i)}return jr.fromArray(n.map(a=>parseFloat(a)),i)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return jr.fromArray(UY(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(e,i=new jr){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const r=e.length===4?4:8,n=(1<<r)-1;let s=+("0x"+e.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&n;s>>=r,i[o]=r===4?17*a:a}),i.a=1,i)}static fromArray(e,i=new jr){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=zY(e)?IN(e):null;return r&&jr.fromArray(r,i)||jr.fromRgb(e,i)||jr.fromHex(e,i)}static fromJSON(e){return e&&new jr([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?jr.fromString(e,this):Array.isArray(e)?jr.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof jr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=jr.AlphaMode.ALWAYS){const i=WS(this.r),r=WS(this.g),n=WS(this.b);return e===jr.AlphaMode.ALWAYS||this.a!==1?[i,r,n,WS(255*this.a)]:[i,r,n]}clone(){return new jr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(ZS(this.r,0,255)),this.g=Math.round(ZS(this.g,0,255)),this.b=Math.round(ZS(this.b,0,255)),this.a=ZS(this.a,0,1),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};R$.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(R$||(R$={}));const ae=R$,L6=new Ge({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Pge=0,wy=class extends G{constructor(e){super(e),this.id="sym"+Pge++,this.type=null,this.color=new ae([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([d({type:L6.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:L6.write}}})],wy.prototype,"type",void 0),u([d({type:ae,json:{write:{allowNull:!0}}})],wy.prototype,"color",void 0),u([Q("color")],wy.prototype,"readColor",null),wy=u([E("esri.symbols.Symbol")],wy);const Es=wy;var MO;let fd=MO=class extends Es{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(s=>{const o=s.valueExpressionInfo;return Gn(t,e,o.expression)});await Promise.all(n)}}}clone(){return new MO({data:F(this.data)})}hash(){return OD(JSON.stringify(this.data)).toString()}};u([d({json:{write:!1}})],fd.prototype,"color",void 0),u([d({json:{write:!0}})],fd.prototype,"data",void 0),u([Q("data",["symbol"])],fd.prototype,"readData",null),u([ie("data",{})],fd.prototype,"writeData",null),u([ye({CIMSymbolReference:"cim"},{readOnly:!0})],fd.prototype,"type",void 0),fd=MO=u([E("esri.symbols.CIMSymbol")],fd);const N1=fd;let by=class extends G{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};u([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],by.prototype,"enabled",void 0),u([ie("enabled")],by.prototype,"writeEnabled",null),u([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],by.prototype,"type",void 0),by=u([E("esri.symbols.Symbol3DLayer")],by);const fu=by,Age=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Oge="screenUtils.toPt: input not recognized!",BY=96;function Wr(t){return t?t/72*BY:0}function Js(t){return t?72*t/BY:0}function it(t){if(typeof t=="string"){const e=t.match(Age);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",s=r==="px"?Js(i):i;return n?-s:s}return console.warn(Oge),null}return t}function _n(t=0,e=0){return{x:t,y:e}}function Lge(t=0,e=0){return[t,e]}function V8e(t=0,e=0,i=0){return[t,e,i]}function z8e(t){return t}function U8e(t){return t}function B8e(t){return t}function G8e(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function OT(t){const e=LD(100*(1-t));return Math.max(0,Math.min(e,100))}function Hb(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}function Rge(t,e){const i=e.transparency!=null?Hb(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new ae([r[0]||0,r[1]||0,r[2]||0,i]):null}function Fge(t,e){e.color=t.toJSON().slice(0,3);const i=OT(t.a);i!==0&&(e.transparency=i)}const hp={type:ae,json:{type:[Mt],default:null,read:{source:["color","transparency"],reader:Rge},write:{target:{color:{type:[Mt]},transparency:{type:Mt}},writer:Fge}}},ou={type:Number,cast:it,json:{write:!0}};let jp=class extends G{constructor(e){super(e),this.color=new ae([0,0,0,1]),this.extensionLength=0,this.size=Js(1)}clone(){}cloneProperties(){return{color:F(this.color),size:this.size,extensionLength:this.extensionLength}}};u([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],jp.prototype,"type",void 0),u([d(hp)],jp.prototype,"color",void 0),u([d({...ou,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],jp.prototype,"extensionLength",void 0),u([d(ou)],jp.prototype,"size",void 0),jp=u([E("esri.symbols.edges.Edges3D")],jp);const kN=jp;var TO;let F$=TO=class extends kN{constructor(t){super(t),this.type="sketch"}clone(){return new TO(this.cloneProperties())}};u([ye({sketch:"sketch"},{readOnly:!0})],F$.prototype,"type",void 0),F$=TO=u([E("esri.symbols.edges.SketchEdges3D")],F$);const Dge=F$;var IO;let D$=IO=class extends kN{constructor(t){super(t),this.type="solid"}clone(){return new IO(this.cloneProperties())}};u([ye({solid:"solid"},{readOnly:!0})],D$.prototype,"type",void 0),D$=IO=u([E("esri.symbols.support.SolidEdges3D")],D$);const Nge=D$,GY={types:{key:"type",base:kN,typeMap:{solid:Nge,sketch:Dge}},json:{write:!0}};var kO;let Ks=kO=class extends G{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new kO(t)}};u([d(hp)],Ks.prototype,"color",void 0),Ks=kO=u([E("esri.symbols.support.Symbol3DMaterial")],Ks);var CO;let md=CO=class extends fu{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new CO({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};u([ye({Extrude:"extrude"},{readOnly:!0})],md.prototype,"type",void 0),u([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],md.prototype,"size",void 0),u([d({type:Ks,json:{write:!0}})],md.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],md.prototype,"castShadows",void 0),u([d(GY)],md.prototype,"edges",void 0),md=CO=u([E("esri.symbols.ExtrudeSymbol3DLayer")],md);const HY=md;let k_=class extends Es{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([ye({esriSLS:"simple-line"},{readOnly:!0})],k_.prototype,"type",void 0),u([d({type:Number,cast:it,json:{write:!0}})],k_.prototype,"width",void 0),k_=u([E("esri.symbols.LineSymbol")],k_);const jge=k_,Vge=["begin","end","begin-end"],qY=["arrow","circle","square","diamond","cross","x"];var PO;let Il=PO=class extends G{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new PO({color:F(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};u([d({type:["begin","end","begin-end"],json:{write:!0}})],Il.prototype,"placement",void 0),u([ye({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Il.prototype,"type",void 0),u([d({type:qY})],Il.prototype,"style",void 0),u([ie("style")],Il.prototype,"writeStyle",null),u([d({type:ae,value:null,json:{write:{allowNull:!0}}})],Il.prototype,"color",null),u([Q("color")],Il.prototype,"readColor",null),u([ie("color")],Il.prototype,"writeColor",null),Il=PO=u([E("esri.symbols.LineSymbolMarker")],Il);const zge=Il;var AO;const Dk=new Ge({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Pu=AO=class extends jge{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=it(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=it(s)),o}clone(){var t;return new AO({color:F(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};u([ye({esriSLS:"simple-line"},{readOnly:!0})],Pu.prototype,"type",void 0),u([d({type:Dk.apiValues,json:{read:Dk.read,write:Dk.write}})],Pu.prototype,"style",void 0),u([d({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],Pu.prototype,"cap",void 0),u([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],Pu.prototype,"join",void 0),u([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":zge}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pu.prototype,"marker",void 0),u([d({type:Number,json:{read:!1,write:!1}})],Pu.prototype,"miterLimit",void 0),Pu=AO=u([E("esri.symbols.SimpleLineSymbol")],Pu);const En=Pu,Uge=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"}));let C_=class extends Es{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":En}},json:{default:null,write:!0}})],C_.prototype,"outline",void 0),u([d({type:["simple-fill","picture-fill"],readOnly:!0})],C_.prototype,"type",void 0),C_=u([E("esri.symbols.FillSymbol")],C_);const WY=C_;let N$=class extends G{constructor(e){super(e)}clone(){}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],N$.prototype,"type",void 0),N$=u([E("esri.symbols.patterns.LinePattern3D")],N$);const ZY=N$,Bge=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var OO;const Gge=$n()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let P_=OO=class extends ZY{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new OO(t)}};u([d({type:["style"]})],P_.prototype,"type",void 0),u([ye(Gge),d({type:Bge})],P_.prototype,"style",void 0),P_=OO=u([E("esri.symbols.patterns.LineStylePattern3D")],P_);const CN=P_;let j$=class extends G{constructor(e){super(e)}clone(){}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],j$.prototype,"type",void 0),j$=u([E("esri.symbols.patterns.Pattern3D")],j$);const YY=j$,Hge=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var LO;let A_=LO=class extends YY{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new LO(t)}};u([d({type:["style"]})],A_.prototype,"type",void 0),u([d({type:Hge,json:{read:!0,write:!0}})],A_.prototype,"style",void 0),A_=LO=u([E("esri.symbols.patterns.StylePattern3D")],A_);const JY=A_,qge={types:{key:"type",base:YY,typeMap:{style:JY}},json:{write:!0}},KY={types:{key:"type",base:ZY,typeMap:{style:CN}},json:{write:!0}},Bw=new ae("white");new ae("black");const Wge=new ae([255,255,255,0]);function Zge(t){return t.r===0&&t.g===0&&t.b===0}var RO;let Gw=RO=class extends Ks{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new RO(t)}};u([ye({multiply:"multiply",replace:"replace",tint:"tint"})],Gw.prototype,"colorMixMode",void 0),Gw=RO=u([E("esri.symbols.support.Symbol3DFillMaterial")],Gw);function PN(t=Xge){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function AN(t,e,i,r,n,s,o=PN()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function J8e(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new lt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function K8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Q8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function X8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function eUe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let h=0;h<r;h++)n=Math.min(n,e[i+3*h]),s=Math.min(s,e[i+3*h+1]),o=Math.min(o,e[i+3*h+2]),a=Math.max(a,e[i+3*h]),l=Math.max(l,e[i+3*h+1]),c=Math.max(c,e[i+3*h+2]);t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function Nk(t,e,i){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(i)for(let h=0;h<r;h++){const p=e[h];n=Math.min(n,p[0]),s=Math.min(s,p[1]),o=Math.min(o,p[2]),a=Math.max(a,p[0]),l=Math.max(l,p[1]),c=Math.max(c,p[2])}else for(let h=0;h<r;h++){const p=e[h];n=Math.min(n,p[0]),s=Math.min(s,p[1]),a=Math.max(a,p[0]),l=Math.max(l,p[1])}t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function tUe(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function j1(t){return t[0]>=t[3]?0:t[3]-t[0]}function V1(t){return t[1]>=t[4]?0:t[4]-t[1]}function z1(t){return t[2]>=t[5]?0:t[5]-t[2]}function iUe(t){const e=j1(t),i=z1(t),r=V1(t);return Math.sqrt(e*e+i*i+r*r)}function rUe(t,e=[0,0,0]){return e[0]=t[0]+j1(t)/2,e[1]=t[1]+V1(t)/2,e[2]=t[2]+z1(t)/2,e}function nUe(t,e=[0,0,0]){return e[0]=j1(t),e[1]=V1(t),e[2]=z1(t),e}function sUe(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function Yge(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function oUe(t,e){return e==null||Yge(t,e)}function aUe(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function lUe(t,e,i=t){const r=t[0]+j1(t)/2,n=t[1]+V1(t)/2,s=t[2]+z1(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function uUe(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function cUe(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function dUe(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Jge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Kge(t){return t?Jge(t,R6):PN(R6)}function hUe(t,e){return e||(e=sl()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function pUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function Qge(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function FO(t){return t.length===6}function fUe(t){return j1(t)===0&&V1(t)===0&&z1(t)===0}function mUe(t,e,i){if(t==null||e==null)return t===e;if(!FO(t)||!FO(e))return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const R6=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Xge=[0,0,0,0,0,0];PN();function yUe(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=_s(i,r,n);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const e0e=AN(-.5,-.5,-.5,.5,.5,.5),t0e=AN(-.5,-.5,0,.5,.5,1),i0e=AN(-.5,-.5,0,.5,.5,.5);function gUe(t){switch(t){case"sphere":case"cube":case"diamond":return e0e;case"cylinder":case"cone":case"inverted-cone":return t0e;case"tetrahedron":return i0e;default:return}}const ON=["butt","square","round"],r0e=[...ON,"none"],QY=["miter","bevel","round"];var DO;let Vp=DO=class extends G{constructor(t){super(t),this.color=new ae([0,0,0,1]),this.size=Js(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new DO(t)}};u([d(hp)],Vp.prototype,"color",void 0),u([d(ou)],Vp.prototype,"size",void 0),u([d(KY)],Vp.prototype,"pattern",void 0),u([d({type:ON,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Vp.prototype,"patternCap",void 0),Vp=DO=u([E("esri.symbols.support.Symbol3DOutline")],Vp);var V$;let Au=V$=class extends fu{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new V$(t)}static fromSimpleFillSymbol(t){var r,n,s;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new CN({style:t.outline.style}):null,i={size:((r=t.outline)==null?void 0:r.width)??0,color:(((n=t.outline)==null?void 0:n.color)??Bw).clone(),pattern:e};return e&&((s=t.outline)!=null&&s.cap)&&(i.patternCap=t.outline.cap),new V$({material:new Gw({color:(t.color??Wge).clone()}),pattern:t.style&&t.style!=="solid"?new JY({style:t.style}):null,outline:i})}};u([ye({Fill:"fill"},{readOnly:!0})],Au.prototype,"type",void 0),u([d({type:Gw,json:{write:!0}})],Au.prototype,"material",void 0),u([d(qge)],Au.prototype,"pattern",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Au.prototype,"castShadows",void 0),u([d({type:Vp,json:{write:!0}})],Au.prototype,"outline",void 0),u([d(GY)],Au.prototype,"edges",void 0),Au=V$=u([E("esri.symbols.FillSymbol3DLayer")],Au);const av=Au,n0e=["none","underline","line-through"],s0e=["normal","italic","oblique"],o0e=["normal","lighter","bold","bolder"],XY={type:Number,cast:t=>{const e=Oo(t);return e===0?1:xs(e,.1,4)},nonNullable:!0},a0e=["left","right","center"],l0e=["baseline","top","middle","bottom"],eJ={type:a0e,nonNullable:!0},tJ={type:l0e,nonNullable:!0},vUe=8;var NO;let Ou=NO=class extends G{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return it(t)}clone(){return new NO({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([d({type:n0e,json:{default:"none",write:!0}})],Ou.prototype,"decoration",void 0),u([d({type:String,json:{write:!0}})],Ou.prototype,"family",void 0),u([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],Ou.prototype,"size",void 0),u([Re("size")],Ou.prototype,"castSize",null),u([d({type:s0e,json:{default:"normal",write:!0}})],Ou.prototype,"style",void 0),u([d({type:o0e,json:{default:"normal",write:!0}})],Ou.prototype,"weight",void 0),Ou=NO=u([E("esri.symbols.Font")],Ou);const LT=Ou,u0e=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,c0e={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function jO(t){const e=t==null?void 0:t.match(u0e);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:h}=c0e;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function d0e(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function h0e(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}const p0e=U.getLogger("esri.core.urlUtils"),lv=Ye.request,F6="esri/config: esriConfig.request.proxyUrl is not set.",iJ=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,rJ=/^\s*http:/i,f0e=/^\s*https:/i,m0e=/^\s*file:/i,y0e=/:\d+$/,g0e=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,v0e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),_0e=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let Kg=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(v0e);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(_0e),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const YS={},w0e=new Kg(Ye.applicationUrl);let vn=w0e;const b0e=S0e();let LN=b0e;const RN=()=>vn,wUe=()=>LN;function S0e(){const t=vn.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${vn.scheme}://${vn.host}${vn.port!=null?`:${vn.port}`:""}`}${e}`}function _r(t){if(!t)return null;const e={path:null,query:null},i=new Kg(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,r),e.query=FN(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function FN(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function D6(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function qb(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e&&e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>D6(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):D6(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function x0e(t=!1){let e,i=lv.proxyUrl;if(typeof t=="string"){e=C0e(t);const r=RT(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw p0e.warn(F6),new C("urlutils:proxy-not-set",F6);return e&&VO()&&(i=zN(i)),_r(i)}function bUe(t){const e=RT(t);let i,r;if(e){const n=DN(e.proxyUrl);i=n.path,r=n.query?FN(n.query):null}if(i){const n=_r(t);t=i+"?"+n.path;const s=qb({...r,...n.query});s&&(t=`${t}?${s}`)}return t}const Gv={path:"",query:""};function DN(t){const e=t.indexOf("?");return e!==-1?(Gv.path=t.slice(0,e),Gv.query=t.slice(e+1)):(Gv.path=t,Gv.query=null),Gv}function nJ(t){return t=(t=q2(t=R0e(t=DN(t).path),!0)).toLowerCase()}function $0e(t){const e={proxyUrl:t.proxyUrl,urlPrefix:nJ(t.urlPrefix)},i=lv.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,e),n}function RT(t){const e=lv.proxyRules,i=nJ(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function E0e(t,e){if(!t||!e)return!1;t=H2(t),e=H2(e);const i=jO(t),r=jO(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&P0(t,e,!0)}function sJ(t,e){return t=H2(t),e=H2(e),q2(t)===q2(e)}function H2(t){const e=(t=Ja(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function oJ(t){const e=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r),i=lv.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r}return null}function P0(t,e,i=!1){if(!t||!e)return!1;const r=UO(t),n=UO(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function NN(t){if(typeof t=="string"){if(!Qs(t))return!0;t=UO(t)}if(P0(t,vn))return!0;const e=lv.trustedServers||[];for(let i=0;i<e.length;i++){const r=M0e(e[i]);for(let n=0;n<r.length;n++)if(P0(t,r[n]))return!0}return!1}function M0e(t){return YS[t]||(VN(t)||au(t)?YS[t]=[new Kg(Ro(t))]:YS[t]=[new Kg(`http://${t}`),new Kg(`https://${t}`)]),YS[t]}function Ro(t,e=LN,i){return au(t)?i&&i.preserveProtocolRelative?t:vn.scheme==="http"&&vn.authority===Ka(t).slice(2)?`http:${t}`:`https:${t}`:VN(t)?t:Pm(t[0]==="/"?L0e(e):e,t)}function jN(t,e=LN,i){if(t==null||!Qs(t))return t;const r=Ja(t),n=r.toLowerCase(),s=Ja(e).toLowerCase().replace(/\/+$/,""),o=i?Ja(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(p,f,y)=>(y=p.indexOf(f,y))===-1?p.length:y;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let p=0;p<h;p++)t=`../${t}`;else t=`./${t}`;return t}function Ja(t){return t=N0e(t=D0e(t=F0e(t=Ro(t=t.trim()))))}function Pm(...t){const e=t.filter(Pi);if(!e||!e.length)return;const i=[];if(Qs(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),A0e(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function Ka(t,e=!1){if(t==null||FT(t)||Gm(t))return null;let i=t.indexOf("://");if(i===-1&&au(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=q2(t,!0)),t}function Qs(t){return au(t)||VN(t)}function FT(t){return t!=null&&t.slice(0,5)==="blob:"}function Gm(t){return t!=null&&t.slice(0,5)==="data:"}function T0e(t){const e=Wb(t);return e&&e.isBase64?h0e(e.data):null}function SUe(t){return btoa(String.fromCharCode.apply(null,t)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const I0e=/^data:(.*?)(;base64)?,(.*)$/;function Wb(t){const e=t.match(I0e);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function aJ(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function xUe(t){const e=T0e(t);if(!e)return null;const i=Wb(t);return new Blob([e],{type:i.mediaType})}function $Ue(t,e){k0e(t,e)}function k0e(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(t);return i.download=e,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function au(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function VN(t){return t!=null&&iJ.test(t)}function C0e(t){return t!=null&&f0e.test(t)||vn.scheme==="https"&&au(t)}function P0e(t){return t!=null&&rJ.test(t)||vn.scheme==="http"&&au(t)}function A0e(t){return t!=null&&m0e.test(t)}function zN(t){return au(t)?`https:${t}`:t.replace(rJ,"https:")}function O0e(){return vn.scheme==="http"}function VO(){return vn.scheme==="https"}function q2(t,e=!1){return au(t)?t.slice(2):(t=t.replace(iJ,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function L0e(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function UN(t){let e=0;if(Qs(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function EUe(t,e){if(!t)return"";const i=_r(t).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(n,"")}function R0e(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function lJ(t){return t.replace(/\/+$/,"")}function F0e(t){if(/^https?:\/\//i.test(t)){const e=DN(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function D0e(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function N0e(t){const e=lv.httpsDomains;if(!P0e(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),y0e.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return O0e()&&r===vn.authority&&!g0e.test(t)||(VO()&&r===vn.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||VO()&&!RT(t))&&(t=zN(t)),t}function zO(t,e,i){if(!(e&&i&&t&&Qs(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function UO(t){return typeof t=="string"?new Kg(Ro(t)):(t.scheme||(t.scheme=vn.scheme),t)}function MUe(t){return j0e.test(t)}function uJ(t,e){const i=_r(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function cJ(t,e,i){const r=_r(t),n=r.query||{};return n[e]=String(i),`${r.path}?${qb(n)}`}function jk(t,e){const i=_r(t),r=i.query||{};for(const s in e)r[s]=e[s];const n=qb(r);return n?`${i.path}?${n}`:i.path}function TUe(t){if(t==null)return null;const e=t.match(dJ);return e?e[2]:null}function N6(t){if(t==null)return null;const e=t.match(dJ);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function IUe(t){return typeof t=="string"?Wb(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(Wb(r.result)),r.onerror=n=>i(n)})}const dJ=/([^.]*)\.([^\/]*)$/,j0e=/(^data:image\/svg|\.svg$)/i;function Yh(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=Ro(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=jN(t,e.portalItem.itemUrl);r!=null&&V0e.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return BO(t,e&&e.portal)}function U1(t,e,i=Zb.YES){if(t==null)return t;!Qs(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=Ro(t);if(e){const n=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(n){const s=BO(n,e.portal),o=BO(r,e.portal);r=jN(o,s,s),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=pJ(r,e==null?void 0:e.portal),Qs(r)&&(r=Ja(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Qs(r)&&!Gm(r)&&i===Zb.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function BN(t,e,i){return Yh(t,i)}function Am(t,e,i,r){const n=U1(t,r);n!==void 0&&(e[i]=n)}const hJ=/\/items\/([^\/]+)\/resources\/(.*)/,V0e=/^\.\/resources\//;function z0e(t){const e=(t==null?void 0:t.match(hJ))??null;return(e==null?void 0:e[1])??null}function U0e(t){const e=(t==null?void 0:t.match(hJ))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=N6(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=N6(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function pJ(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?zO(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function BO(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=RN();return P0(r,`${r.scheme}://${i}`)?zO(t,e.portalHostname,i):zO(t,i,e.portalHostname)}var Zb;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(Zb||(Zb={}));const kUe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Zb},ensureMainOnlineDomain:pJ,fromJSON:Yh,itemIdFromResourceUrl:z0e,prefixAndFilenameFromResourceUrl:U0e,read:BN,toJSON:U1,write:Am},Symbol.toStringTag,{value:"Module"}));var GO;const B0e=$n()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let zp=GO=class extends G{constructor(t){super(t)}readHref(t,e,i){return t?Yh(t,i):e.dataURI}writeHref(t,e,i,r){t&&(Gm(t)?e.dataURI=t:(e.href=U1(t,r),Qs(e.href)&&(e.href=Ja(e.href))))}clone(){return new GO({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],zp.prototype,"href",void 0),u([Q("href")],zp.prototype,"readHref",null),u([ie("href",{href:{type:String},dataURI:{type:String}})],zp.prototype,"writeHref",null),u([ye(B0e)],zp.prototype,"primitive",void 0),zp=GO=u([E("esri.symbols.support.IconSymbol3DLayerResource")],zp);const G0e="circle";var HO;let Mg=HO=class extends X{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new HO({x:this.x,y:this.y})}};u([d({type:Number})],Mg.prototype,"x",void 0),u([d({type:Number})],Mg.prototype,"y",void 0),Mg=HO=u([E("esri.symbols.support.Symbol3DAnchorPosition2D")],Mg);var qO;let O_=qO=class extends G{constructor(t){super(t),this.color=new ae([0,0,0,1]),this.size=Js(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new qO(t)}};u([d(hp)],O_.prototype,"color",void 0),u([d(ou)],O_.prototype,"size",void 0),O_=qO=u([E("esri.symbols.support.Symbol3DIconOutline")],O_);var Sy;const fJ="esri.symbols.IconSymbol3DLayer";let kl=Sy=class extends fu{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Sy({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||Bw,i=j6(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Bw).clone()}:null;return new Sy({size:t.size,resource:{primitive:q0e(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||Zge(t.color)?Bw:t.color,i=j6(t);return new Sy({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Sy({resource:{href:aJ({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function j6(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=V6(t.xoffset),n=V6(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function V6(t){return isFinite(t)?t:0}u([d({type:Ks,json:{write:!0}})],kl.prototype,"material",void 0),u([d({type:zp,json:{write:!0}})],kl.prototype,"resource",void 0),u([ye({Icon:"icon"},{readOnly:!0})],kl.prototype,"type",void 0),u([d(ou)],kl.prototype,"size",void 0),u([ye({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],kl.prototype,"anchor",void 0),u([d({type:Mg,json:{type:[Number],read:{reader:t=>new Mg({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],kl.prototype,"anchorPosition",void 0),u([d({type:O_,json:{write:!0}})],kl.prototype,"outline",void 0),kl=Sy=u([E(fJ)],kl);const H0e={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function q0e(t){return H0e[t]||(U.getLogger(fJ).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Gf=kl;function Om(t,e,i=se){return e||(e=new i),e===t||(e.removeAll(),W0e(t)?e.addMany(t):t&&e.add(t)),e}function mJ(t){return t}function W0e(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const yJ="20230626",gJ="b81703b48e0b92e492f4cc6b739af02a9af50038",Z0e="4.27";let GN=Z0e;GN="4.27.6";const Y0e={async request(t,e){var a,l;const{default:i}=await O(()=>Promise.resolve().then(()=>fve),void 0),r=t.options,n=r.responseType;r.signal=e==null?void 0:e.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((a=oJ(t.url))!=null&&a.after)?n:"array-buffer";const s=await i(t.url,r),o={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((l=s.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let Be;function CUe(t){Be=t}function PUe(t){const e=Be==null?void 0:Be.findCredential(t);return e!=null&&e.token?cJ(t,"token",e.token):t}V("host-webworker");const J0e=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function vJ(t){const e=Ka(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!J0e.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function K0e(t,e,i=!1,r){return new Promise((n,s)=>{if(to(r))return void s(z6());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=()=>{const h=t;c(),n(h)},l=()=>{if(!t)return;const h=t;c(),h.src="",s(z6())};const c=()=>{V("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r!=null&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",l),V("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function z6(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Q0e="Timeout exceeded";function X0e(){return new Error(Q0e)}function eve(t){Ye.request.crossOriginNoCorsDomains||(Ye.request.crossOriginNoCorsDomains={});const e=Ye.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Ka(i)??""]=0:(e[Ka("http://"+i)??""]=0,e[Ka("https://"+i)??""]=0)}function tve(t){const e=Ye.request.crossOriginNoCorsDomains;if(e){let i=Ka(t);if(i)return i=i.toLowerCase(),!P0(i,RN())&&e[i]<Date.now()-36e5}return!1}async function ive(t){var n;const e=Ye.request.crossOriginNoCorsDomains,i=Ka(t);e&&i&&(e[i.toLowerCase()]=Date.now());const r=_r(t);t=r.path,((n=r.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function tt(t,e){var c;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=FN(e.query.toString().replaceAll("+"," ")));const i=Gm(t),r=FT(t);r||i||(t=Ja(t));const n={url:t,requestOptions:{...e}};let s=oJ(t);if(s){const h=await cve(s,n);if(h!=null)return{data:h,getHeader:HN,httpStatus:200,requestOptions:n.requestOptions,url:n.url};s.after||s.error||(s=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(V("host-webworker")||V("host-node")))throw eu("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw eu("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw eu("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await ave(),W2)return W2.execute(t,e);const o=new AbortController;Ws(e,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:n,redoRequest:!1,useIdentity:La.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await hve(a);return(c=s==null?void 0:s.after)==null||c.call(s,l),l}let W2;const La=Ye.request,_J="FormData"in globalThis,rve=[499,498,403,401],nve=["COM_0056","COM_0057","SB_0008"],sve=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],HN=()=>null,Z2=Symbol();function ove(t){const e=Ka(t);e&&!tt._corsServers.includes(e)&&tt._corsServers.push(e)}function U6(t){const e=Ka(t);return!e||e.endsWith(".arcgis.com")||tt._corsServers.includes(e)||NN(e)}function eu(t,e,i,r){let n="Error";const s={url:i.url,requestOptions:i.requestOptions,getHeader:HN,ssl:!1};if(e instanceof C)return e.details?(e.details=F(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const o=r&&(c=>r.headers.get(c)),a=r==null?void 0:r.status,l=e.message;l&&(n=l),o&&(s.getHeader=o),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||a||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?s.messages=[e.details]:s.messages=e.details,s.raw=Z2 in e?e[Z2]:e}return xn(e)?Ut():new C(t,n,s)}async function ave(){V("host-webworker")?W2||(W2=await O(()=>import("./request-2e98763a.js"),[])):tt._abortableFetch||(tt._abortableFetch=globalThis.fetch.bind(globalThis))}async function WO(){Be||await O(()=>import("./IdentityManager-1c1b3944.js"),[])}async function lve(t){var a;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(_J&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in tt._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:La.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken&&Ye.apiKey&&vJ(e)&&(i.query||(i.query={}),i.query.token=Ye.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!wJ(e)&&!to(r)){let l;i.authMode==="immediate"?(await WO(),l=await Be.getCredential(e,{signal:r}),t.credential=l):i.authMode==="no-prompt"?(await WO(),l=await Be.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=l):Be&&(l=Be.findCredential(e)),l&&(t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function wJ(t){return sve.some(e=>e.test(t))}async function uve(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},n=FT(e)||Gm(e),s=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:La.timeout;let a=!1;if(!n){t.useSSL&&(e=zN(e)),i.cacheBust&&r.cache==="default"&&(e=cJ(e,"request.preventCache",Date.now()));let f={...i.query};t.credentialToken&&(f.token=t.credentialToken);let y=qb(f);V("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=e.length+1+y.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>La.maxUrlLength;const _=i.useProxy||!!RT(e);if(_){const w=x0e(e);v=w.path,!a&&v.length+1+g>La.maxUrlLength&&(a=!0),w.query&&(f={...w.query,...f})}if(r.method==="HEAD"&&(a||_)){if(a)throw g>La.maxUrlLength?eu("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):eu("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(_)throw eu("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=jk(e,f):(r.body=qb(f),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=jk(e,f),_&&(t.useProxy=!0,e=`${v}?${e}`),f.token&&_J&&r.body instanceof FormData&&!d0e(e)&&r.body.set("token",f.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!P0(e,RN())){if(NN(e))t.withCredentials=!0;else if(Be){const w=Be.findServerInfo(e);w!=null&&w.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",tve(e)&&await ive(a?jk(e,f):e))}let l,c,h=0,p=!1;o>0&&(h=setTimeout(()=>{p=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")c=r,c.url=e;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||dve(i.headers)||!n&&!t.useProxy&&La.proxyUrl&&!U6(e)){if(l=await tt._abortableFetch(e,r),t.useProxy||ove(e),i.responseType==="native")c=l;else if(r.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=B6(c,"application/xml");break;case"document":c=B6(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&c[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(c).json();y.error&&(c=y)}catch{}}s==="image"&&c instanceof Blob&&(c=await G6(URL.createObjectURL(c),t,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await G6(e,t)}catch(f){if(f.name==="AbortError")throw p?X0e():Ut("Request canceled");if(!(!l&&f instanceof TypeError&&La.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||U6(e))throw f;t.redoRequest=!0,$0e({proxyUrl:La.proxyUrl,urlPrefix:Ka(e)??""})}finally{h&&clearTimeout(h)}return[l,c]}async function cve(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=eu("request:interceptor",n,e)}if((r instanceof Error||r instanceof C)&&(i=eu("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function dve(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function B6(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function hve(t){var s,o;let e,i;await lve(t);try{do[e,i]=await uve(t);while(!await pve(t,e,i))}catch(a){const l=eu("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!NN(r)){const a=Ka(r,!0);a&&La.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&eve(i.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&Be){const a=Be.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Be.findCredential(l,n.userId);c&&Be._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:i,getHeader:e?a=>e==null?void 0:e.headers.get(a):HN,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function pve(t,e,i){var c;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[Z2]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[Z2]=i,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&rve.includes(s)&&!wJ(t.params.url)&&(s!==403||o&&!nve.includes(o)&&(a==null||a===2&&t.credentialToken))){await WO();try{const h=await Be.getCredential(t.params.url,{error:eu("request:server",n,t.params),prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function G6(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=La.priority,n.src=t,K0e(n,t,i,r)}tt._abortableFetch=null,tt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const fve=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"}));var eh;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(eh||(eh={}));let mve=class{constructor(){this._resolver=bs(),this._status=eh.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=eh.RESOLVED,this._cleanUp()},()=>{this._status=eh.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===eh.RESOLVED}isRejected(){return this._status===eh.REJECTED}isFulfilled(){return this._status!==eh.PENDING}abort(){this._resolver.reject(Ut())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=bs(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||xn(n)||this._resolver.reject(n)}),e.resolve()}};const B1=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new mve,this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=u([E("esri.core.Promise")],e),e};let Y2=class extends B1(X){};Y2=u([E("esri.core.Promise")],Y2);const yve="not-loaded",gve="loading",vve="failed",H6="loaded",bJ=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const c=jD(s,l);this.destroyed&&l(new C("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{c&&c.remove()})});if(this.loadStatus===yve){this._set("loadStatus",gve);const a=this._loadController=new AbortController;n({signal:a.signal}),Ws(a.signal,()=>{this._promiseProps.abort()})}return r(),o}})),this.when(()=>{this._set("loadStatus",H6),this._loadController=null},r=>{this._set("loadStatus",vve),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController=vs(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===H6}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new C("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return u([d({readOnly:!0})],e.prototype,"loaded",null),u([d({readOnly:!0})],e.prototype,"loadError",void 0),u([d({clonable:!1})],e.prototype,"loadStatus",void 0),u([d({type:[Zo],readOnly:!0})],e.prototype,"loadWarnings",null),e=u([E("esri.core.Loadable")],e),e};let L_=class extends bJ(Y2){};L_=u([E("esri.core.Loadable")],L_),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=bJ,t.isLoadable=e}(L_||(L_={}));const lu=L_;let JS;function _ve(t){return JS&&!JS.destroyed||(JS=t()),JS}var ZO;const wve=new Ge({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let yo=ZO=class extends X{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new ZO({categories:this.categories?F(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=A1(this.extent,_e.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>wve.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};u([d()],yo.prototype,"categories",void 0),u([d()],yo.prototype,"disableExtraQuery",void 0),u([d({type:lt})],yo.prototype,"extent",void 0),u([d()],yo.prototype,"filter",void 0),u([d()],yo.prototype,"num",void 0),u([d()],yo.prototype,"query",void 0),u([d()],yo.prototype,"sortField",void 0),u([d()],yo.prototype,"sortOrder",null),u([d()],yo.prototype,"start",void 0),yo=ZO=u([E("esri.portal.PortalQueryParams")],yo);const Jl=yo;let Up=class extends X{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([d()],Up.prototype,"nextQueryParams",void 0),u([d()],Up.prototype,"queryParams",void 0),u([d()],Up.prototype,"results",void 0),u([d()],Up.prototype,"total",void 0),Up=u([E("esri.portal.PortalQueryResult")],Up);const bve=Up;let Lu=class extends G{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new C("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([d({type:Date})],Lu.prototype,"created",void 0),u([d()],Lu.prototype,"id",void 0),u([d()],Lu.prototype,"portal",void 0),u([d()],Lu.prototype,"title",void 0),u([d({readOnly:!0})],Lu.prototype,"url",null),u([d()],Lu.prototype,"username",void 0),Lu=u([E("esri.portal.PortalFolder")],Lu);const Sve=Lu;let dr=class extends G{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return Hr(this.portal).request(this.url+"/categorySchema",e).then(i=>{const r=i.categorySchema||[];return r.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return Hr(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new C("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let r=Xt(Jl,e);const n=Hr(this.portal);return parseFloat(n.currentVersion)>5?(r=r||new Jl,n.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new Jl,r.query="group:"+this.id+(r.query?" "+r.query:""),n.queryItems(r,i))}_fetchCategorySchemaSet(e,i){const r=Hr(this.portal);return r.fetchSelf(r.authMode,!0,i).then(n=>{const s=n.contentCategorySetsGroupQuery;if(s){const o=new Jl;return o.disableExtraQuery=!0,o.num=1,o.query=s,r.queryGroups(o,i)}throw new C("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const s=n.results[0],o=new Jl;return o.num=1,o.query=`typekeywords:"${e}"`,s.queryItems(o,i)}throw new C("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",i).then(s=>{const o=s&&s.categorySchema;return o&&o.length?o:[]}):[])}};u([d()],dr.prototype,"access",void 0),u([d({type:Date})],dr.prototype,"created",void 0),u([d()],dr.prototype,"description",void 0),u([d()],dr.prototype,"id",void 0),u([d()],dr.prototype,"isInvitationOnly",void 0),u([d({type:Date})],dr.prototype,"modified",void 0),u([d()],dr.prototype,"owner",void 0),u([d()],dr.prototype,"portal",void 0),u([d()],dr.prototype,"snippet",void 0),u([d()],dr.prototype,"sortField",void 0),u([d()],dr.prototype,"sortOrder",void 0),u([d()],dr.prototype,"tags",void 0),u([d()],dr.prototype,"thumbnail",void 0),u([d({readOnly:!0})],dr.prototype,"thumbnailUrl",null),u([d()],dr.prototype,"title",void 0),u([d({readOnly:!0})],dr.prototype,"url",null),dr=u([E("esri.portal.PortalGroup")],dr);const YO=dr,xve=Object.freeze(Object.defineProperty({__proto__:null,default:YO},Symbol.toStringTag,{value:"Module"}));var JO;let Gt=JO=class extends G{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,r=t&&t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(e,r).then(()=>{t.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=Sve.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=YO.fromJSON(i);return r.portal=this.portal,r}):[],e})}fetchItems(t){const e=t??{};let i,r=this.userContentUrl??"";return e.folder&&(r+="/"+e.folder.id),O(()=>Promise.resolve().then(()=>eQ),void 0).then(({default:n})=>{i=n;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(r,{query:s})}).then(n=>{let s;return n&&n.items?(s=n.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),Promise.all(s.map(o=>o.load())).catch(o=>o).then(()=>({items:s,nextStart:n.nextStart,total:n.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new YO({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new C("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new C("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new JO;return e.sourceJSON=t,e.read(t),e}};u([d()],Gt.prototype,"access",void 0),u([d({type:Date})],Gt.prototype,"created",void 0),u([d()],Gt.prototype,"culture",void 0),u([d()],Gt.prototype,"description",void 0),u([d()],Gt.prototype,"email",void 0),u([d()],Gt.prototype,"favGroupId",void 0),u([d()],Gt.prototype,"fullName",void 0),u([d({type:Date})],Gt.prototype,"modified",void 0),u([d()],Gt.prototype,"orgId",void 0),u([d()],Gt.prototype,"portal",void 0),u([d()],Gt.prototype,"preferredView",void 0),u([d()],Gt.prototype,"privileges",void 0),u([d()],Gt.prototype,"region",void 0),u([d()],Gt.prototype,"role",void 0),u([d()],Gt.prototype,"roleId",void 0),u([d()],Gt.prototype,"sourceJSON",void 0),u([d()],Gt.prototype,"thumbnail",void 0),u([d({readOnly:!0})],Gt.prototype,"thumbnailUrl",null),u([d()],Gt.prototype,"units",void 0),u([d({readOnly:!0})],Gt.prototype,"userContentUrl",null),u([d({readOnly:!0})],Gt.prototype,"url",null),u([d()],Gt.prototype,"username",void 0),u([d()],Gt.prototype,"userType",void 0),Gt=JO=u([E("esri.portal.PortalUser")],Gt);const qN=Gt,$ve=Object.freeze(Object.defineProperty({__proto__:null,default:qN},Symbol.toStringTag,{value:"Module"}));var Ru;let KS;const q6={PortalGroup:()=>O(()=>Promise.resolve().then(()=>xve),void 0),PortalItem:()=>O(()=>Promise.resolve().then(()=>eQ),void 0),PortalUser:()=>O(()=>Promise.resolve().then(()=>$ve),void 0)};let ee=Ru=class extends K0(lu){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ye.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){W6.unregister(this),this.defaultBasemap=Ue(this.defaultBasemap),this.defaultDevBasemap=Ue(this.defaultDevBasemap),this.defaultVectorBasemap=Ue(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=zt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Ye.request.trustedServers.includes(e)||Ye.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=qN.fromJSON(t),e.portal=this),e}load(t){const e=O(()=>Promise.resolve().then(()=>rSe),void 0).then(({default:i})=>{Tt(t),KS=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var r;if(Be){const n=Be;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Ru.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",Eve(new WeakRef(this))),W6.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await O(()=>import("./ElevationLayer-3be8d546.js"),["assets/ElevationLayer-3be8d546.js","assets/ArcGISCachedService-785084c3.js","assets/TileInfoTilemapCache-20ba6d3e.js","assets/TilemapCache-8ddfd780.js","assets/WorkerHandle-8a59c149.js"])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(t,e);i.unshift(...r)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):to(t)?Promise.reject(Ut()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Jl;if(i.num=100,i.sortField="title",e&&e.length){const r=[];for(const n of e)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(n=>n.results)}return to(t)?Promise.reject(Ut()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Yr();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Yr();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return _ve(()=>new Ru)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",n={authMode:t,query:{culture:Yr().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),e&&(n.query.default=!0),this.request(r,n)}queryPortal(t,e,i,r){const n=Xt(Jl,e),s=o=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...r}).then(a=>{const l=n.clone();return l.start=a.nextStart,new bve({nextQueryParams:l,queryParams:n,total:a.total,results:Ru._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(Wl(l),a)));return i&&q6[i]?q6[i]().then(({default:o})=>(Tt(r),s(o))):s()}signIn(){if(this.authMode===Ru.AUTH_MODE_ANONYMOUS)return Promise.reject(new C("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Be?Be.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const n=Ru._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():r)).then(()=>n,()=>n)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===Ru.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=e,c={authMode:r,body:n,cacheBust:s,method:o,query:i,responseType:a,timeout:0,signal:l};return tt(this._normalizeSSL(t),c).then(h=>h.data)}toJSON(){throw new C("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Ru({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new C("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Jl;i.query=t||(Ye.apiKey&&vJ(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,e);if(!r.total)return[];const n=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(i,e);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new KS({portalItem:o})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new Jl({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,e);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,e);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new KS({portalItem:a})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=KS.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let n=[];if(i){const s=r!=null?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(n=n.map(o=>{const a=Object.assign(t?t.fromJSON(o):o,e);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};ee.AUTH_MODE_ANONYMOUS="anonymous",ee.AUTH_MODE_AUTO="auto",ee.AUTH_MODE_IMMEDIATE="immediate",u([d()],ee.prototype,"access",void 0),u([d()],ee.prototype,"allSSL",void 0),u([d()],ee.prototype,"authMode",void 0),u([d()],ee.prototype,"authorizedCrossOriginDomains",void 0),u([Q("authorizedCrossOriginDomains")],ee.prototype,"readAuthorizedCrossOriginDomains",null),u([d()],ee.prototype,"basemapGalleryGroupQuery",void 0),u([d({json:{name:"3DBasemapGalleryGroupQuery"}})],ee.prototype,"basemapGalleryGroupQuery3D",void 0),u([d()],ee.prototype,"bingKey",void 0),u([d()],ee.prototype,"canListApps",void 0),u([d()],ee.prototype,"canListData",void 0),u([d()],ee.prototype,"canListPreProvisionedItems",void 0),u([d()],ee.prototype,"canProvisionDirectPurchase",void 0),u([d()],ee.prototype,"canSearchPublic",void 0),u([d()],ee.prototype,"canShareBingPublic",void 0),u([d()],ee.prototype,"canSharePublic",void 0),u([d()],ee.prototype,"canSignInArcGIS",void 0),u([d()],ee.prototype,"canSignInIDP",void 0),u([d()],ee.prototype,"colorSetsGroupQuery",void 0),u([d()],ee.prototype,"commentsEnabled",void 0),u([d({type:Date})],ee.prototype,"created",void 0),u([d()],ee.prototype,"credential",void 0),u([d()],ee.prototype,"culture",void 0),u([d()],ee.prototype,"currentVersion",void 0),u([d()],ee.prototype,"customBaseUrl",void 0),u([d()],ee.prototype,"defaultBasemap",void 0),u([Q("defaultBasemap")],ee.prototype,"readDefaultBasemap",null),u([d()],ee.prototype,"defaultDevBasemap",void 0),u([Q("defaultDevBasemap")],ee.prototype,"readDefaultDevBasemap",null),u([d({type:lt})],ee.prototype,"defaultExtent",void 0),u([d()],ee.prototype,"defaultVectorBasemap",void 0),u([Q("defaultVectorBasemap")],ee.prototype,"readDefaultVectorBasemap",null),u([d()],ee.prototype,"description",void 0),u([d()],ee.prototype,"devBasemapGalleryGroupQuery",void 0),u([d()],ee.prototype,"eueiEnabled",void 0),u([d({readOnly:!0})],ee.prototype,"extraQuery",null),u([d()],ee.prototype,"featuredGroups",void 0),u([d()],ee.prototype,"featuredItemsGroupQuery",void 0),u([d()],ee.prototype,"galleryTemplatesGroupQuery",void 0),u([d()],ee.prototype,"livingAtlasGroupQuery",void 0),u([d()],ee.prototype,"hasCategorySchema",void 0),u([d()],ee.prototype,"helpBase",void 0),u([d()],ee.prototype,"helperServices",void 0),u([d()],ee.prototype,"helpMap",void 0),u([d()],ee.prototype,"homePageFeaturedContent",void 0),u([d()],ee.prototype,"homePageFeaturedContentCount",void 0),u([d()],ee.prototype,"httpPort",void 0),u([d()],ee.prototype,"httpsPort",void 0),u([d()],ee.prototype,"id",void 0),u([d()],ee.prototype,"ipCntryCode",void 0),u([d({readOnly:!0})],ee.prototype,"isOrganization",null),u([d()],ee.prototype,"isPortal",void 0),u([d()],ee.prototype,"isReadOnly",void 0),u([d({readOnly:!0})],ee.prototype,"itemPageUrl",null),u([d()],ee.prototype,"layerTemplatesGroupQuery",void 0),u([d()],ee.prototype,"maxTokenExpirationMinutes",void 0),u([d({type:Date})],ee.prototype,"modified",void 0),u([d()],ee.prototype,"name",void 0),u([d()],ee.prototype,"portalHostname",void 0),u([d()],ee.prototype,"portalMode",void 0),u([d()],ee.prototype,"portalProperties",void 0),u([d()],ee.prototype,"region",void 0),u([d({readOnly:!0})],ee.prototype,"restUrl",null),u([d()],ee.prototype,"rotatorPanels",void 0),u([d()],ee.prototype,"showHomePageDescription",void 0),u([d()],ee.prototype,"sourceJSON",void 0),u([d()],ee.prototype,"staticImagesUrl",void 0),u([d({json:{name:"2DStylesGroupQuery"}})],ee.prototype,"stylesGroupQuery2d",void 0),u([d({json:{name:"stylesGroupQuery"}})],ee.prototype,"stylesGroupQuery3d",void 0),u([d()],ee.prototype,"supportsHostedServices",void 0),u([d()],ee.prototype,"symbolSetsGroupQuery",void 0),u([d()],ee.prototype,"templatesGroupQuery",void 0),u([d()],ee.prototype,"thumbnail",void 0),u([d({readOnly:!0})],ee.prototype,"thumbnailUrl",null),u([d()],ee.prototype,"units",void 0),u([d()],ee.prototype,"url",void 0),u([d()],ee.prototype,"urlKey",void 0),u([Q("urlKey")],ee.prototype,"readUrlKey",null),u([d()],ee.prototype,"user",void 0),u([Q("user")],ee.prototype,"readUser",null),u([d()],ee.prototype,"use3dBasemaps",void 0),u([d()],ee.prototype,"useStandardizedQuery",void 0),u([d()],ee.prototype,"useVectorBasemaps",void 0),u([d()],ee.prototype,"vectorBasemapGalleryGroupQuery",void 0),ee=Ru=u([E("esri.portal.Portal")],ee);const lr=ee,W6=new FinalizationRegistry(t=>{t.remove()});function Eve(t){const e=Be;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Bp=class extends Ft(G){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Bp.prototype,"type",void 0),u([d({type:Vge,json:{default:"begin-end",write:!0}})],Bp.prototype,"placement",void 0),u([d({type:qY,json:{default:"arrow",write:!0}})],Bp.prototype,"style",void 0),u([d({type:ae,json:{type:[Mt],default:null,write:!0}})],Bp.prototype,"color",void 0),Bp=u([E("esri.symbols.LineStyleMarker3D")],Bp);const KO=Bp;var z$;let Cl=z$=class extends fu{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Js(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new z$(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Js(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new CN({style:t.style}):null,material:new Ks({color:(t.color||Bw).clone()}),marker:t.marker?new KO({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new z$(e)}};u([d({type:Ks,json:{write:!0}})],Cl.prototype,"material",void 0),u([ye({Line:"line"},{readOnly:!0})],Cl.prototype,"type",void 0),u([d({type:QY,json:{write:!0,default:"miter"}})],Cl.prototype,"join",void 0),u([d({type:ON,json:{write:!0,default:"butt"}})],Cl.prototype,"cap",void 0),u([d(ou)],Cl.prototype,"size",void 0),u([d(KY)],Cl.prototype,"pattern",void 0),u([d({types:{key:"type",base:KO,typeMap:{style:KO}},json:{write:!0}})],Cl.prototype,"marker",void 0),Cl=z$=u([E("esri.symbols.LineSymbol3DLayer")],Cl);const G1=Cl;var QO;const Mve=$n()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let R_=QO=class extends G{clone(){return new QO({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{read:BN,write:Am}})],R_.prototype,"href",void 0),u([ye(Mve)],R_.prototype,"primitive",void 0),R_=QO=u([E("esri.symbols.support.ObjectSymbol3DLayerResource")],R_);const Tve="sphere";var XO;let Tf=XO=class extends X{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new XO({x:this.x,y:this.y,z:this.z})}};u([d({type:Number})],Tf.prototype,"x",void 0),u([d({type:Number})],Tf.prototype,"y",void 0),u([d({type:Number})],Tf.prototype,"z",void 0),Tf=XO=u([E("esri.symbols.support.Symbol3DAnchorPosition3D")],Tf);var eL;let un=eL=class extends fu{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new eL({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};u([d({type:Ks,json:{write:!0}})],un.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],un.prototype,"castShadows",void 0),u([d({type:R_,json:{write:!0}})],un.prototype,"resource",void 0),u([ye({Object:"object"},{readOnly:!0})],un.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],un.prototype,"width",void 0),u([d({type:Number,json:{write:!0}})],un.prototype,"height",void 0),u([d({type:Number,json:{write:!0}})],un.prototype,"depth",void 0),u([ye({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],un.prototype,"anchor",void 0),u([d({type:Tf,json:{type:[Number],read:{reader:t=>new Tf({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],un.prototype,"anchorPosition",void 0),u([d({type:Number,json:{write:!0}})],un.prototype,"heading",void 0),u([d({type:Number,json:{write:!0}})],un.prototype,"tilt",void 0),u([d({type:Number,json:{write:!0}})],un.prototype,"roll",void 0),u([d({readOnly:!0})],un.prototype,"isPrimitive",null),un=eL=u([E("esri.symbols.ObjectSymbol3DLayer")],un);const WN=un;var tL;let Cn=tL=class extends fu{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new tL({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};u([d({type:Ks,json:{write:!0}})],Cn.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Cn.prototype,"castShadows",void 0),u([ye({Path:"path"},{readOnly:!0})],Cn.prototype,"type",void 0),u([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Cn.prototype,"profile",void 0),u([d({type:QY,json:{write:!0,default:"miter"}})],Cn.prototype,"join",void 0),u([d({type:r0e,json:{write:!0,default:"butt"}})],Cn.prototype,"cap",void 0),u([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Cn.prototype,"width",void 0),u([Q("width",["width","size","height"])],Cn.prototype,"readWidth",null),u([d({type:Number,json:{write:!0}})],Cn.prototype,"height",void 0),u([Q("height",["height","size","width"])],Cn.prototype,"readHeight",null),u([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Cn.prototype,"anchor",void 0),u([d({type:["heading","all"],json:{write:!0,default:"all"}})],Cn.prototype,"profileRotation",void 0),Cn=tL=u([E("esri.symbols.PathSymbol3DLayer")],Cn);const ZN=Cn;var iL;let Tg=iL=class extends G{constructor(){super(...arguments),this.color=new ae([0,0,0,1]),this.size=0}clone(){const t={color:F(this.color),size:this.size};return new iL(t)}};u([d(hp)],Tg.prototype,"color",void 0),u([d(ou)],Tg.prototype,"size",void 0),Tg=iL=u([E("esri.symbols.support.Symbol3DHalo")],Tg);let Hw=class extends Ft(G){constructor(e){super(e),this.color=null}};u([d(hp)],Hw.prototype,"color",void 0),Hw=u([E("esri.symbols.support.Symbol3DTextBackground")],Hw);var U$;let Kn=U$=class extends fu{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const n={...r,textSymbol3D:!0};e.font=t.write({},n),delete e.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new U$({enabled:this.enabled,font:this.font&&F(this.font),halo:this.halo&&F(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:F(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new U$({font:t.font!=null?t.font.clone():new LT,halo:Ive(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Ks({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Hw({color:t.backgroundColor.clone()}):null})}};function Ive(t,e){return t&&e!=null&&e>0?new Tg({color:F(t),size:e}):null}u([d({type:LT,json:{write:!0}})],Kn.prototype,"font",null),u([ie("font")],Kn.prototype,"writeFont",null),u([d({type:Tg,json:{write:!0}})],Kn.prototype,"halo",void 0),u([d({...eJ,json:{default:"center",write:!0}})],Kn.prototype,"horizontalAlignment",void 0),u([d({...XY,json:{default:1,write:!0}})],Kn.prototype,"lineHeight",void 0),u([d({type:Ks,json:{write:!0}})],Kn.prototype,"material",void 0),u([d({type:Hw,json:{write:!0}})],Kn.prototype,"background",void 0),u([d(ou)],Kn.prototype,"size",null),u([d({type:String,json:{write:!0}})],Kn.prototype,"text",void 0),u([ye({Text:"text"},{readOnly:!0})],Kn.prototype,"type",void 0),u([d({...tJ,json:{default:"baseline",write:!0}})],Kn.prototype,"verticalAlignment",void 0),Kn=U$=u([E("esri.symbols.TextSymbol3DLayer")],Kn);const uv=Kn;var rL;let yd=rL=class extends fu{constructor(t){super(t),this.color=nL.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new rL({color:F(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};u([d({type:ae,nonNullable:!0,json:{type:[Mt],write:(t,e,i)=>e[i]=t.toArray(ae.AlphaMode.UNLESS_OPAQUE),default:()=>nL.clone(),defaultEquals:t=>t.toCss(!0)===nL.toCss(!0)}})],yd.prototype,"color",void 0),u([ye({Water:"water"},{readOnly:!0})],yd.prototype,"type",void 0),u([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],yd.prototype,"waterbodySize",void 0),u([d({type:Number,json:{write:!0,default:null}})],yd.prototype,"waveDirection",void 0),u([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],yd.prototype,"waveStrength",void 0),yd=rL=u([E("esri.symbols.WaterSymbol3DLayer")],yd);const nL=new ae([0,119,190]),SJ=yd;var sL;let Gp=sL=class extends X{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new sL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([d({type:String})],Gp.prototype,"name",void 0),u([d({type:String})],Gp.prototype,"styleUrl",void 0),u([d({type:String})],Gp.prototype,"styleName",void 0),u([d({type:lr})],Gp.prototype,"portal",void 0),Gp=sL=u([E("esri.symbols.support.StyleOrigin")],Gp);const Yb=Gp;var oL;let om=oL=class extends X{constructor(){super(...arguments),this.url=""}clone(){return new oL({url:this.url})}};u([d({type:String})],om.prototype,"url",void 0),om=oL=u([E("esri.symbols.support.Thumbnail")],om);const xJ={icon:Gf,object:WN,line:G1,path:ZN,fill:av,extrude:HY,text:uv,water:SJ},kve=se.ofType({base:fu,key:"type",typeMap:xJ,errorContext:"symbol-layer"});let Pl=class extends Es{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||se;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&U.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Om(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Yh(e.styleUrl,r);return new Yb({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new Yb({portal:r&&r.portal||lr.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new Zo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=U1(e.styleUrl,n);Qs(s)&&(s=Ja(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&n&&n.portal&&!sJ(e.portal.restUrl,n.portal.restUrl)?n&&n.messages&&n.messages.push(new Zo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof fu||e&&xJ[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};u([d({json:{read:!1,write:!1}})],Pl.prototype,"color",null),u([d({type:kve,nonNullable:!0,json:{write:!0}}),Re(mJ)],Pl.prototype,"symbolLayers",null),u([d({type:Yb})],Pl.prototype,"styleOrigin",void 0),u([Q("styleOrigin")],Pl.prototype,"readStyleOrigin",null),u([ie("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Pl.prototype,"writeStyleOrigin",null),u([d({type:om,json:{read:!1}})],Pl.prototype,"thumbnail",void 0),u([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Pl.prototype,"type",void 0),Pl=u([E("esri.symbols.Symbol3D")],Pl);const cv=Pl;let F_=class extends G{constructor(e){super(e),this.visible=!0}clone(){}};u([d({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],F_.prototype,"type",void 0),u([d({readOnly:!0})],F_.prototype,"visible",void 0),F_=u([E("esri.symbols.callouts.Callout3D")],F_);const $J=F_;var aL;let B$=aL=class extends G{constructor(){super(...arguments),this.color=new ae("white")}clone(){return new aL({color:F(this.color)})}};u([d(hp)],B$.prototype,"color",void 0),B$=aL=u([E("esri.symbols.callouts.LineCallout3DBorder")],B$);const EJ=B$;Object.freeze(Object.defineProperty({__proto__:null,default:EJ},Symbol.toStringTag,{value:"Module"}));var lL;let gd=lL=class extends $J{constructor(t){super(t),this.type="line",this.color=new ae([0,0,0,1]),this.size=Js(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new lL({color:F(this.color),size:this.size,border:F(this.border)})}};u([ye({line:"line"},{readOnly:!0})],gd.prototype,"type",void 0),u([d(hp)],gd.prototype,"color",void 0),u([d(ou)],gd.prototype,"size",void 0),u([d({type:EJ,json:{write:!0}})],gd.prototype,"border",void 0),u([d({readOnly:!0})],gd.prototype,"visible",null),gd=lL=u([E("esri.symbols.callouts.LineCallout3D")],gd);const Cve=gd;function YN(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function MJ(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!YN(t)}function UUe(t){return t.type==="point-3d"||t.type==="label-3d"}function BUe(t){return t.horizontalAlignment==="center"}const TJ={types:{key:"type",base:$J,typeMap:{line:Cve}},json:{write:!0}};var uL;let xy=uL=class extends G{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new uL({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([d(ou)],xy.prototype,"screenLength",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],xy.prototype,"minWorldLength",void 0),u([d({type:Number,json:{write:!0}})],xy.prototype,"maxWorldLength",void 0),xy=uL=u([E("esri.symbols.support.Symbol3DVerticalOffset")],xy);const IJ=xy;var G$;const kJ=se.ofType({base:null,key:"type",typeMap:{text:uv}});let vd=G$=class extends cv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new kJ,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return MJ(this)}hasVisibleVerticalOffset(){return YN(this)}clone(){return new G$({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail),callout:F(this.callout),verticalOffset:F(this.verticalOffset)})}static fromTextSymbol(t){return new G$({symbolLayers:[uv.fromTextSymbol(t)]})}};u([d({type:IJ,json:{write:!0}})],vd.prototype,"verticalOffset",void 0),u([d(TJ)],vd.prototype,"callout",void 0),u([d({json:{read:!1,write:!1}})],vd.prototype,"styleOrigin",void 0),u([d({type:kJ})],vd.prototype,"symbolLayers",void 0),u([ye({LabelSymbol3D:"label-3d"},{readOnly:!0})],vd.prototype,"type",void 0),vd=G$=u([E("esri.symbols.LabelSymbol3D")],vd);const DT=vd;var H$;const CJ=se.ofType({base:null,key:"type",typeMap:{line:G1,path:ZN}}),Pve=se.ofType({base:null,key:"type",typeMap:{line:G1,path:ZN}});let D_=H$=class extends cv{constructor(t){super(t),this.symbolLayers=new CJ,this.type="line-3d"}clone(){return new H$({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleLineSymbol(t){return new H$({symbolLayers:[G1.fromSimpleLineSymbol(t)]})}};u([d({type:CJ,json:{type:Pve}})],D_.prototype,"symbolLayers",void 0),u([ye({LineSymbol3D:"line-3d"},{readOnly:!0})],D_.prototype,"type",void 0),D_=H$=u([E("esri.symbols.LineSymbol3D")],D_);const NT=D_;let _d=class extends Es{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],_d.prototype,"angle",void 0),u([d({type:["simple-marker","picture-marker"],readOnly:!0})],_d.prototype,"type",void 0),u([d({type:Number,cast:it,json:{write:!0}})],_d.prototype,"xoffset",void 0),u([d({type:Number,cast:it,json:{write:!0}})],_d.prototype,"yoffset",void 0),u([d({type:Number,cast:t=>t==="auto"?t:it(t),json:{write:!0}})],_d.prototype,"size",void 0),_d=u([E("esri.symbols.MarkerSymbol")],_d);const PJ=_d;var q$;const AJ=se.ofType({base:null,key:"type",typeMap:{fill:av}});let N_=q$=class extends cv{constructor(t){super(t),this.symbolLayers=new AJ,this.type="mesh-3d"}clone(){return new q$({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleFillSymbol(t){return new q$({symbolLayers:[av.fromSimpleFillSymbol(t)]})}};u([d({type:AJ})],N_.prototype,"symbolLayers",void 0),u([ye({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],N_.prototype,"type",void 0),N_=q$=u([E("esri.symbols.MeshSymbol3D")],N_);const H1=N_;function Ave(t,e,i){return e.imageData?aJ({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):OJ(e.url,i)}function OJ(t,e){var i;return Lve(e)&&!Qs(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?Pm(e.layer.parsedUrl.path,"images",t):Yh(t,e)}function Ove(t,e,i,r){if(Gm(t)){const n=Wb(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&Am(i.url,e,"url",r)}else Am(t,e,"url",r)}const LJ={json:{read:{source:["imageData","url"],reader:Ave},write:{writer(t,e,i,r){Ove(t,e,this.source,r)}}}},RJ={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=OJ(e.url,i)),r}}}};function Lve(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var cL;let go=cL=class extends WY{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=it(i)),r!=null&&(n.height=it(r)),n}clone(){const t=new cL({color:F(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",F(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([ye({esriPFS:"picture-fill"},{readOnly:!0})],go.prototype,"type",void 0),u([d(LJ)],go.prototype,"url",void 0),u([d({type:Number,json:{write:!0}})],go.prototype,"xscale",void 0),u([d({type:Number,json:{write:!0}})],go.prototype,"yscale",void 0),u([d({type:Number,cast:it,json:{write:!0}})],go.prototype,"width",void 0),u([d({type:Number,cast:it,json:{write:!0}})],go.prototype,"height",void 0),u([d({type:Number,cast:it,json:{write:!0}})],go.prototype,"xoffset",void 0),u([d({type:Number,cast:it,json:{write:!0}})],go.prototype,"yoffset",void 0),u([d(RJ)],go.prototype,"source",void 0),go=cL=u([E("esri.symbols.PictureFillSymbol")],go);const FJ=go;var dL;let pa=dL=class extends PJ{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=it(e)),i!=null&&(r.height=it(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new dL({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",F(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([d({json:{write:!1}})],pa.prototype,"color",void 0),u([ye({esriPMS:"picture-marker"},{readOnly:!0})],pa.prototype,"type",void 0),u([d(LJ)],pa.prototype,"url",void 0),u([d(RJ)],pa.prototype,"source",void 0),u([d({type:Number,cast:it,json:{write:!0}})],pa.prototype,"height",void 0),u([Q("height",["height","size"])],pa.prototype,"readHeight",null),u([d({type:Number,cast:it,json:{write:!0}})],pa.prototype,"width",void 0),u([d({json:{write:!1}})],pa.prototype,"size",void 0),pa=dL=u([E("esri.symbols.PictureMarkerSymbol")],pa);const Jh=pa;var Hp;const DJ=se.ofType({base:null,key:"type",typeMap:{icon:Gf,object:WN,text:uv}});let qp=Hp=class extends cv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new DJ,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return MJ(this)}hasVisibleVerticalOffset(){return YN(this)}clone(){return new Hp({verticalOffset:F(this.verticalOffset),callout:F(this.callout),styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Hp({symbolLayers:[Gf.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new Hp({symbolLayers:[Gf.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Hp(i!=null&&i.callout?{symbolLayers:[Gf.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Gf.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new Hp({symbolLayers:[uv.fromTextSymbol(t)]})}};u([d({type:IJ,json:{write:!0}})],qp.prototype,"verticalOffset",void 0),u([d(TJ)],qp.prototype,"callout",void 0),u([d({type:DJ,json:{origins:{"web-scene":{write:!0}}}})],qp.prototype,"symbolLayers",void 0),u([ye({PointSymbol3D:"point-3d"},{readOnly:!0})],qp.prototype,"type",void 0),qp=Hp=u([E("esri.symbols.PointSymbol3D")],qp);const Hf=qp;var j_;const NJ=se.ofType({base:null,key:"type",typeMap:{extrude:HY,fill:av,icon:Gf,line:G1,object:WN,text:uv,water:SJ}});let V_=j_=class extends cv{constructor(t){super(t),this.symbolLayers=new NJ,this.type="polygon-3d"}clone(){return new j_({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromJSON(t){const e=new j_;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new j_({symbolLayers:[av.fromSimpleFillSymbol(t)]})}};u([d({type:NJ,json:{write:!0}})],V_.prototype,"symbolLayers",void 0),u([ye({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],V_.prototype,"type",void 0),V_=j_=u([E("esri.symbols.PolygonSymbol3D")],V_);const q1=V_;var hL;const Vk=new Ge({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Wp=hL=class extends WY{constructor(...t){super(...t),this.color=new ae([0,0,0,.25]),this.outline=new En,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new hL({color:F(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([d()],Wp.prototype,"color",void 0),u([d()],Wp.prototype,"outline",void 0),u([ye({esriSFS:"simple-fill"},{readOnly:!0})],Wp.prototype,"type",void 0),u([d({type:Vk.apiValues,json:{read:Vk.read,write:Vk.write}})],Wp.prototype,"style",void 0),Wp=hL=u([E("esri.symbols.SimpleFillSymbol")],Wp);const Qo=Wp,Rve=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"}));var pL;const zk=new Ge({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Al=pL=class extends PJ{constructor(...t){super(...t),this.color=new ae([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new En}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=it(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new pL({angle:this.angle,color:F(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};u([d()],Al.prototype,"color",void 0),u([ie("color")],Al.prototype,"writeColor",null),u([ye({esriSMS:"simple-marker"},{readOnly:!0})],Al.prototype,"type",void 0),u([d()],Al.prototype,"size",void 0),u([d({type:zk.apiValues,json:{read:zk.read,write:zk.write}})],Al.prototype,"style",void 0),u([d({type:String,json:{write:!0}})],Al.prototype,"path",null),u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":En}},json:{default:null,write:!0}})],Al.prototype,"outline",void 0),Al=pL=u([E("esri.symbols.SimpleMarkerSymbol")],Al);const ll=Al,Fve=Object.freeze(Object.defineProperty({__proto__:null,default:ll},Symbol.toStringTag,{value:"Module"}));var fL;let ri=fL=class extends Es{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new LT,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return it(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new fL({angle:this.angle,backgroundColor:F(this.backgroundColor),borderLineColor:F(this.borderLineColor),borderLineSize:this.borderLineSize,color:F(this.color),font:this.font&&this.font.clone(),haloColor:F(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([d({type:ae,json:{write:!0}})],ri.prototype,"backgroundColor",void 0),u([d({type:ae,json:{write:!0}})],ri.prototype,"borderLineColor",void 0),u([d({type:Number,json:{write:!0},cast:it})],ri.prototype,"borderLineSize",void 0),u([d({type:LT,json:{write:!0}})],ri.prototype,"font",void 0),u([d({...eJ,json:{write:!0}})],ri.prototype,"horizontalAlignment",void 0),u([d({type:Boolean,json:{write:!0}})],ri.prototype,"kerning",void 0),u([d({type:ae,json:{write:!0}})],ri.prototype,"haloColor",void 0),u([d({type:Number,cast:it,json:{write:!0}})],ri.prototype,"haloSize",void 0),u([d({type:Boolean,json:{write:!0}})],ri.prototype,"rightToLeft",void 0),u([d({type:Boolean,json:{write:!0}})],ri.prototype,"rotated",void 0),u([d({type:String,json:{write:!0}})],ri.prototype,"text",void 0),u([ye({esriTS:"text"},{readOnly:!0})],ri.prototype,"type",void 0),u([d({...tJ,json:{write:!0}})],ri.prototype,"verticalAlignment",void 0),u([d({type:Number,cast:it,json:{write:!0}})],ri.prototype,"xoffset",void 0),u([d({type:Number,cast:it,json:{write:!0}})],ri.prototype,"yoffset",void 0),u([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],ri.prototype,"angle",void 0),u([d({type:Number,json:{write:!0}})],ri.prototype,"width",void 0),u([d({type:Number})],ri.prototype,"lineWidth",void 0),u([ie("lineWidth")],ri.prototype,"writeLineWidth",null),u([Re("lineWidth")],ri.prototype,"castLineWidth",null),u([d(XY)],ri.prototype,"lineHeight",void 0),u([ie("lineHeight")],ri.prototype,"writeLineHeight",null),ri=fL=u([E("esri.symbols.TextSymbol")],ri);const Hm=ri;var mL;let fa=mL=class extends Es{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:lr.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new mL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const a=r&&i.get(r);if(a)return a.clone()}const{resolveWebStyleSymbol:n}=await O(()=>Promise.resolve().then(()=>RRe),void 0);Tt(e);const s=n(this,{portal:this.portal},t,e);s.catch(a=>{U.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(i!=null&&i.set(r,o.clone()),o):null}};u([d({json:{write:!1}})],fa.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],fa.prototype,"styleName",void 0),u([d({type:lr,json:{write:!1}})],fa.prototype,"portal",void 0),u([d({type:String,json:{read:BN,write:Am}})],fa.prototype,"styleUrl",void 0),u([d({type:om,json:{read:!1}})],fa.prototype,"thumbnail",void 0),u([d({type:String,json:{write:!0}})],fa.prototype,"name",void 0),u([ye({styleSymbolReference:"web-style"},{readOnly:!0})],fa.prototype,"type",void 0),u([d()],fa.prototype,"_fetchCacheKey",null),fa=mL=u([E("esri.symbols.WebStyleSymbol")],fa);const qm=fa;function jT(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Kh(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ba={base:Es,key:"type",typeMap:{"simple-fill":Qo,"picture-fill":FJ,"picture-marker":Jh,"simple-line":En,"simple-marker":ll,text:Hm,"label-3d":DT,"line-3d":NT,"mesh-3d":H1,"point-3d":Hf,"polygon-3d":q1,"web-style":qm,cim:N1},errorContext:"symbol"},Dve={base:Es,key:"type",typeMap:{"picture-marker":Jh,"simple-marker":ll,text:Hm,"web-style":qm,cim:N1},errorContext:"symbol"},Nve=Z0({types:Ba}),jJ={base:Es,key:"type",typeMap:{"simple-fill":Qo,"picture-fill":FJ,"picture-marker":Jh,"simple-line":En,"simple-marker":ll,text:Hm,"line-3d":NT,"mesh-3d":H1,"point-3d":Hf,"polygon-3d":q1,"web-style":qm,cim:N1},errorContext:"symbol"},jve={base:Es,key:"type",typeMap:{text:Hm,"label-3d":DT},errorContext:"symbol"},Z6={base:Es,key:"type",typeMap:{"line-3d":NT,"mesh-3d":H1,"point-3d":Hf,"polygon-3d":q1,"web-style":qm,cim:N1},errorContext:"symbol"},Vve={base:Es,key:"type",typeMap:{"label-3d":DT},errorContext:"symbol"},VJ=iu(Ba);var yL;function zve(t){if(!t)return null;const e={};for(const i in t){const r=Wh(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function Uve(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let Qn=yL=class extends Ft(G){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Wg(),configurable:!0})}normalizeCtorArgs(t,e,i,r){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:r}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new yL({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Uve(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(n.action=r),t==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}};u([d({value:null,json:{read:zve}})],Qn.prototype,"aggregateGeometries",null),u([d({value:null})],Qn.prototype,"attributes",null),u([d({value:null,types:Um,json:{read:Wh}})],Qn.prototype,"geometry",null),u([d({type:Boolean})],Qn.prototype,"isAggregate",void 0),u([d({clonable:"reference"})],Qn.prototype,"layer",void 0),u([d({type:dp})],Qn.prototype,"popupTemplate",void 0),u([d({clonable:"reference"})],Qn.prototype,"sourceLayer",void 0),u([d({value:null,types:Ba})],Qn.prototype,"symbol",null),u([d({type:Boolean,value:!0})],Qn.prototype,"visible",null),Qn=yL=u([E("esri.Graphic")],Qn),function(t){t.generateUID=Wg}(Qn||(Qn={}));const fi=Qn;let JN=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,r,n=0,s=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>i&&(r-=this.ndiff(r-i)),s&&r===i&&(r=e),r+n}normalize(e,i=0,r=!1){return this._normalize(this.min,this.max,e,i,r)}clamp(e,i=0){return xs(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+this.ndiff(e-i,r)}minimalMonotonic(e,i,r){return this._normalize(e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function KN(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}KN(new JN(0,2*Math.PI));const qUe=KN(new JN(-Math.PI,Math.PI)),zJ=KN(new JN(0,360));let Fu=class extends Ft(G){constructor(...e){super(...e),this.position=new ce([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=Oo(e.x||0),s.y=Oo(e.y||0),s.z=e.hasZ?Oo(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new ce;return r.read(e,i),r.x=Oo(r.x||0),r.y=Oo(r.y||0),r.z=r.hasZ?Oo(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};u([d({type:ce,json:{write:{isRequired:!0}}})],Fu.prototype,"position",void 0),u([ie("position")],Fu.prototype,"writePosition",null),u([Q("position")],Fu.prototype,"readPosition",null),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Re(t=>zJ.normalize(Oo(t)))],Fu.prototype,"heading",void 0),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Re(t=>xs(Oo(t),-180,180))],Fu.prototype,"tilt",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Fu.prototype,"fov",void 0),Fu=u([E("esri.Camera")],Fu);const Bve=Fu;var gL;let wd=gL=class extends G{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new gL({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function Uk(){return{enabled:!this.camera}}u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Uk}}}}})],wd.prototype,"rotation",void 0),u([Re("rotation")],wd.prototype,"castRotation",null),u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Uk}}}}})],wd.prototype,"scale",void 0),u([d({types:Um,json:{read:Wh,write:!0,origins:{"web-scene":{read:Wh,write:{overridePolicy:Uk}}}}})],wd.prototype,"targetGeometry",void 0),u([d({type:Bve,json:{write:!0}})],wd.prototype,"camera",void 0),wd=gL=u([E("esri.Viewpoint")],wd);const Qa=wd;let $y=class extends se{constructor(e){super(e),this.getCollections=null}initialize(){this.own(Zq(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new se(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};u([d()],$y.prototype,"getCollections",void 0),u([d()],$y.prototype,"getChildrenFunction",void 0),u([d()],$y.prototype,"itemFilterFunction",void 0),$y=u([E("esri.core.CollectionFlattener")],$y);const Jb=$y;function D(t,e,i={}){return QN(t,e,i,UJ)}function Ai(t,e,i={}){return QN(t,e,i,BJ)}function QN(t,e,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(zt(n),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(n=Sde(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function _i(t,e,i,r={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=r.onListenerRemove)==null||h.call(r,n),n=null,s=null)}function l(h){r.once&&r.once&&zt(o),i(h)}const c=D(t,(h,p)=>{var f;a(),fT(h)&&(n=h,s=mT(h,e,l),(f=r.onListenerAdd)==null||f.call(r,h))},{sync:r.sync,initial:!0});return o=Et(()=>{c.remove(),a()}),o}function Ci(t,e){return Gve(t,BJ,e)}function Gve(t,e,i){if(to(i))return Promise.reject(Ut());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=zt(n)}return new Promise((o,a)=>{n=eo([Ws(i,()=>{s(),a(Ut())}),QN(t,l=>{s(),o(l)},{sync:!1,once:!0},e??UJ)])})}function UJ(t){return!0}function BJ(t){return!!t}function Hve(t,e,i={}){let r=!1;const n=D(t,(s,o)=>{r||e(s,o)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const ul={sync:!0},me={initial:!0},yn={sync:!0,initial:!0};let Kb=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new xT,this._items=new Set}get length(){return Ce(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ce(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ce(this._observable),yield*this._items}};const qve={statsWorker:()=>O(()=>import("./statsWorker-06b5a60a.js"),["assets/statsWorker-06b5a60a.js","assets/quantizationUtils-1cbccb3f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js"]),geometryEngineWorker:()=>O(()=>import("./geometryEngineWorker-d41756cd.js"),["assets/geometryEngineWorker-d41756cd.js","assets/geometryEngineJSON-bcbfbb0e.js","assets/geometryEngineBase-9014f2fe.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>O(()=>import("./CSVSourceWorker-65acdc3e.js"),["assets/CSVSourceWorker-65acdc3e.js","assets/json-48e3ea08.js","assets/FeatureStore-da45cb34.js","assets/BoundsStore-89a62371.js","assets/PooledRBush-edcf14b8.js","assets/optimizedFeatureQueryEngineAdapter-c6b9424d.js","assets/centroid-8e8cfa47.js","assets/timeSupport-04d3e38f.js","assets/projectionSupport-a16ccfe8.js","assets/QueryEngine-004e63e1.js","assets/WhereClause-8e39ce65.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-1cbccb3f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js","assets/SnappingCandidate-970faec6.js","assets/clientSideDefaults-e3faf25f.js"]),EdgeProcessingWorker:()=>O(()=>import("./EdgeProcessingWorker-49c7e2d7.js"),["assets/EdgeProcessingWorker-49c7e2d7.js","assets/workerHelper-3deb0a64.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/edgeProcessing-3074b4d7.js","assets/deduplicate-559f0110.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/glUtil-0b7ee6ea.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>O(()=>import("./ElevationSamplerWorker-9e2412bf.js"),["assets/ElevationSamplerWorker-9e2412bf.js","assets/PooledRBush-edcf14b8.js","assets/georeference-40097bb3.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/DoubleArray-13ca8a2c.js","assets/MeshGeoreferencedRelativeVertexSpace-df99e052.js","assets/MeshLocalVertexSpace-16218eb8.js","assets/MeshTransform-32eaeb12.js","assets/quat-95b41819.js","assets/quatf64-3363c48e.js","assets/vec32-cc735301.js","assets/projection-ad8c99c5.js","assets/BufferView-bba8d347.js"]),FeatureServiceSnappingSourceWorker:()=>O(()=>import("./FeatureServiceSnappingSourceWorker-d87c839b.js"),["assets/FeatureServiceSnappingSourceWorker-d87c839b.js","assets/FeatureStore-da45cb34.js","assets/BoundsStore-89a62371.js","assets/PooledRBush-edcf14b8.js","assets/optimizedFeatureQueryEngineAdapter-c6b9424d.js","assets/centroid-8e8cfa47.js","assets/timeSupport-04d3e38f.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/QueryEngine-004e63e1.js","assets/WhereClause-8e39ce65.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-1cbccb3f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js","assets/SnappingCandidate-970faec6.js","assets/symbologySnappingCandidates-0f2961c3.js","assets/byteSizeEstimations-7cf1c05d.js"]),GeoJSONSourceWorker:()=>O(()=>import("./GeoJSONSourceWorker-431c9d28.js"),["assets/GeoJSONSourceWorker-431c9d28.js","assets/FeatureStore-da45cb34.js","assets/BoundsStore-89a62371.js","assets/PooledRBush-edcf14b8.js","assets/optimizedFeatureQueryEngineAdapter-c6b9424d.js","assets/centroid-8e8cfa47.js","assets/timeSupport-04d3e38f.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/QueryEngine-004e63e1.js","assets/WhereClause-8e39ce65.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-1cbccb3f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js","assets/SnappingCandidate-970faec6.js","assets/geojson-9d4c8f14.js","assets/clientSideDefaults-e3faf25f.js","assets/sourceUtils-75e291d5.js"]),LercWorker:()=>O(()=>import("./LercWorker-dbaf2985.js"),[]),MemorySourceWorker:()=>O(()=>import("./MemorySourceWorker-9973907e.js"),["assets/MemorySourceWorker-9973907e.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-da45cb34.js","assets/BoundsStore-89a62371.js","assets/PooledRBush-edcf14b8.js","assets/optimizedFeatureQueryEngineAdapter-c6b9424d.js","assets/centroid-8e8cfa47.js","assets/timeSupport-04d3e38f.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/QueryEngine-004e63e1.js","assets/WhereClause-8e39ce65.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-1cbccb3f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js","assets/SnappingCandidate-970faec6.js","assets/clientSideDefaults-e3faf25f.js","assets/sourceUtils-75e291d5.js"]),PBFDecoderWorker:()=>O(()=>import("./PBFDecoderWorker-0dce5f6a.js"),[]),Pipeline:()=>O(()=>import("./Pipeline-88bcb33c.js"),["assets/Pipeline-88bcb33c.js","assets/QueryEngine-004e63e1.js","assets/WhereClause-8e39ce65.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-1cbccb3f.js","assets/timeSupport-04d3e38f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js","assets/SnappingCandidate-970faec6.js","assets/FeatureStore2D-2011a565.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/definitions-b77f917a.js","assets/visualVariablesUtils-c057ebbd.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-44227052.js","assets/geojson-9d4c8f14.js","assets/clientSideDefaults-e3faf25f.js","assets/createConnection-266d9bf5.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>O(()=>import("./PointCloudWorker-3e7c6eda.js"),["assets/PointCloudWorker-3e7c6eda.js","assets/quat-95b41819.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-277e5a8d.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-c3f739aa.js"]),RasterWorker:()=>O(()=>import("./RasterWorker-16ab2d84.js"),["assets/RasterWorker-16ab2d84.js","assets/dataUtils-168e1533.js","assets/pixelRangeUtils-cc28ceb4.js","assets/RasterSymbolizer-e4361253.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-de11cea5.js","assets/rasterProjectionHelper-959c6b0f.js"]),SceneLayerSnappingSourceWorker:()=>O(()=>import("./SceneLayerSnappingSourceWorker-b8ae415c.js"),["assets/SceneLayerSnappingSourceWorker-b8ae415c.js","assets/lineSegment-360e478e.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/Octree-c2a48348.js","assets/plane-99ecee15.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/edgeProcessing-3074b4d7.js","assets/deduplicate-559f0110.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/glUtil-0b7ee6ea.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>O(()=>import("./SceneLayerWorker-dc1e57ea.js"),["assets/SceneLayerWorker-dc1e57ea.js","assets/DoubleArray-13ca8a2c.js","assets/MeshGeoreferencedRelativeVertexSpace-df99e052.js","assets/MeshLocalVertexSpace-16218eb8.js","assets/vec32-cc735301.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>O(()=>import("./WFSSourceWorker-821a2510.js"),["assets/WFSSourceWorker-821a2510.js","assets/FeatureStore-da45cb34.js","assets/BoundsStore-89a62371.js","assets/PooledRBush-edcf14b8.js","assets/optimizedFeatureQueryEngineAdapter-c6b9424d.js","assets/centroid-8e8cfa47.js","assets/timeSupport-04d3e38f.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/QueryEngine-004e63e1.js","assets/WhereClause-8e39ce65.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-1cbccb3f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js","assets/SnappingCandidate-970faec6.js","assets/geojson-9d4c8f14.js","assets/sourceUtils-75e291d5.js","assets/wfsUtils-01441cdd.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>O(()=>import("./WorkerTileHandler-7557bdcb.js"),["assets/WorkerTileHandler-7557bdcb.js","assets/enums-fb086c25.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/TurboLine-afee9a44.js","assets/definitions-b77f917a.js","assets/StyleRepository-f1e7ebed.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/earcut-6c3a7c54.js","assets/BidiEngine-9a40f2f4.js"])};var Ar;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Ar||(Ar={}));let Wve=0;function GJ(){return Wve++}function Zve(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function Qb(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function XN(t,e,i,r){if(e.type===Ar.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Ar.INVOKE&&e.type!==Ar.RESPONSE)return void t.postMessage(e);let n;if(Zve(i)?(n=Y6(i.transferList),e.data=i.result):(n=Y6(r),e.data=i),n){if(V("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Ar.INVOKE:throw o;case Ar.RESPONSE:return void XN(t,{type:Ar.RESPONSE,jobId:e.jobId,error:Qb(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function Xb(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Y6(t){if(!t||!t.length)return null;if(V("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!Yve(i));return e.length?e:null}function Yve(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:J6,ABORT:K6,INVOKE:Q6,RESPONSE:Hv,OPEN_PORT:X6,ON:Jve}=Ar,Kve=2;let Qve=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Ar.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Qh=class Ey{static connect(e){const i=new MessageChannel;let r;r=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Ey(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),Ey.clients.set(n,r),i.port2}static loadWorker(e){const i=qve[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Qve(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:J6}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new C("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=GJ();return new Promise((a,l)=>{if(to(n))return this._processWork(),void l(Ut());const c=Ws(n,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),zt(p.abortHandle),this._post({type:K6,jobId:o}),l(Ut()))}),h={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,h),this._post({type:Q6,jobId:o,methodName:e,abortable:n!=null},i,s)})}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:Ar.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:Ar.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:X6,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=Kve)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.invoke(i,r,n).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{zt(e.abortHandle),e.reject(Ut(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=Xb(e);if(i)switch(i.type){case Hv:this._onResponseMessage(i);break;case Q6:this._invokeQueue.push(i);break;case K6:this._onAbortMessage(i);break;case J6:this._onCloseMessage();break;case X6:this._onOpenPortMessage(i);break;case Jve:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Ey.clients.get(this)===e&&e.destroy(),Ey.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const p=i.split(".");for(let f=0;f<p.length-1;f++)c=c[p[f]],h=c[p[f+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);l=h.call(c,n,{client:this,signal:o?o.signal:null})}catch(p){return void this._post({type:Hv,jobId:r,error:Qb(p)})}Nc(l)?(a.set(r,{controller:o,promise:l}),l.then(p=>{a.has(r)&&(a.delete(r),this._post({type:Hv,jobId:r},p))},p=>{a.has(r)&&(a.delete(r),xn(p)||this._post({type:Hv,jobId:r,error:Qb(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:Hv,jobId:r},l)}_onOpenPortMessage(e){new Ey(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=mT(e.port,"message",s=>{const o=Xb(s);(o==null?void 0:o.type)===Ar.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),zt(o.abortHandle),r?o.reject(C.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return XN(this._port,e,i,r)}};Qh.kernelInfo={buildDate:yJ,fullVersion:GN,revision:gJ},Qh.clients=new Map;let Xve=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Kb}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((r,n)=>{let s=!0;const o=a=>{Tt(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];Nc(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new Qh(c,i,()=>this._ongoingJobsQueue.pop()??null),o(r),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Qh(l,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Ut(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,i,r){let n;Array.isArray(r)?(U.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const s=bs();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:n,resolver:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l==null?void 0:l.jobAdded())}return s.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>eo(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const e_e=U.getLogger("esri.assets");function qe(t){if(!Ye.assetsPath)throw e_e.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new C("assets:path-not-set","config.assetsPath is not set");return Pm(Ye.assetsPath,t)}const HJ=U.getLogger("esri.intl.substitute");function er(t,e,i={}){const{format:r={}}=i;return Wo(t,n=>t_e(n,e,r))}function t_e(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=E1(r,e);if(o==null)return"";const a=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return a?i_e(o,a):n?r_e(o,n):ej(o)}function i_e(t,e){switch(e.type){case"date":return io(t,e.intlOptions);case"number":return Yo(t,e.intlOptions);default:return HJ.warn("missing format descriptor for key {key}"),ej(t)}}function r_e(t,e){switch(e.toLowerCase()){case"dateformat":return io(t);case"numberformat":return Yo(t);default:return HJ.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?io(t):/^numberformat/i.test(e)?Yo(t):ej(t)}}function ej(t){switch(typeof t){case"string":return t;case"number":return Yo(t);case"boolean":return""+t;default:return t instanceof Date?io(t):""}}const ez=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,n_e={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function tz(t){return t in n_e}const z_=[],Qg=new Map;function iz(t){for(const e of Qg.keys())qJ(t.pattern,e)&&Qg.delete(e)}function s_e(t){return z_.includes(t)||(iz(t),z_.unshift(t)),{remove(){const e=z_.indexOf(t);e>-1&&(z_.splice(e,1),iz(t))}}}async function VT(t){const e=Yr();Qg.has(t)||Qg.set(t,a_e(t,e));const i=Qg.get(t);return i&&await l_e.add(i),i}function o_e(t){if(!ez.test(t))return null;const e=ez.exec(t);if(e===null)return null;const[,i,r]=e,n=i+(r?"-"+r.toUpperCase():"");return tz(n)?n:tz(i)?i:null}async function a_e(t,e){const i=[];for(const r of z_)if(qJ(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new C("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new C("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function qJ(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}pN(()=>{Qg.clear()});const l_e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=bs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function u_e(t,e,i,r){const n=e.exec(i);if(!n)throw new C("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=o_e(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let h;try{h=await rz(t(c))}catch(p){if(c===l)throw new C("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{h=await rz(t(l))}catch(f){throw new C("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f})}}return h}async function rz(t){if(nz.fetchBundleAsset!=null)return nz.fetchBundleAsset(t);const e=await tt(t,{responseType:"text"});return JSON.parse(e.data)}let c_e=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return u_e(this.getAssetUrl,this.matcher,e,i)}};function d_e(t){return new c_e(t)}const nz={};s_e(d_e({pattern:"esri/",location:qe}));const h_e={};function p_e(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=h_e.baseUrl),e}let f_e=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},W$=class{constructor(){this._dispatcher=new f_e,this._workerPostMessage({type:Ar.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){T2(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){T2(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=Xb(e);if(i&&i.type===Ar.OPEN){const{modulePath:r,jobId:n}=i;let s=await Qh.loadWorker(r);s||(s=await O(()=>import(r),[]));const o=Qh.connect(s);this._workerPostMessage({type:Ar.OPENED,jobId:n,data:o})}}};const vL=U.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:m_e}=Ar,y_e='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let QS,XS;const sz="Failed to create Worker. Fallback to execute module in main thread";async function g_e(){if(!V("esri-workers")||(V("mozilla"),0))return oz(new W$);if(!QS&&!XS)try{const e=y_e.split('"{CONFIGURATION}"').join(`'${v_e()}'`);QS=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){XS=e||{}}let t;if(QS)try{t=new Worker(QS,{name:"esri-worker-"+__e++})}catch{vL.warn(sz,XS),t=new W$}else vL.warn(sz,XS),t=new W$;return oz(t)}async function oz(t){return new Promise(e=>{function i(n){const s=Xb(n);s&&s.type===m_e&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),vL.warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new W$).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function v_e(){let t;if(Ye.default!=null){const n={...Ye};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Ye));t.assetsPath=Ro(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Ro(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Yr(),t.has={"esri-csp-restrictions":V("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":V("esri-2d-update-debug"),"esri-2d-log-updating":V("esri-2d-log-updating"),"featurelayer-pbf":V("featurelayer-pbf"),"featurelayer-simplify-thresholds":V("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":V("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":V("featurelayer-simplify-mobile-factor"),"esri-atomics":V("esri-atomics"),"esri-shared-array-buffer":V("esri-shared-array-buffer"),"esri-tiles-debug":V("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":V("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":V("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":V("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=Ro(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Ro(t.workers.workerPath):t.workers.workerPath=Ro(qe("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Ye.workers.loaderConfig,i=p_e({baseUrl:e==null?void 0:e.baseUrl,locale:Yr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:yJ,fullVersion:GN,revision:gJ}})}let __e=0;const{ABORT:az,INVOKE:w_e,OPEN:b_e,OPENED:S_e,RESPONSE:qv}=Ar;let x_e=class WJ{static async create(e){const i=await g_e();return new WJ(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),U.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=GJ();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:jD(r,()=>{this._outJobs.delete(n),this._post({type:az,jobId:n})})};this._outJobs.set(n,a),this._post({type:b_e,jobId:n,modulePath:e})})}_onMessage(e){const i=Xb(e);if(i)switch(i.type){case S_e:this._onOpenedMessage(i);break;case qv:this._onResponseMessage(i);break;case az:this._onAbortMessage(i);break;case w_e:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=Y0e[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:qv,jobId:r,error:Qb(h)})}Nc(c)?(a.set(r,{controller:o,promise:c}),c.then(h=>{a.has(r)&&(a.delete(r),this._post({type:qv,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),xn(h)||this._post({type:qv,jobId:r,error:Qb(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:qv,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),zt(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),zt(s.abortHandle),r?s.reject(C.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return XN(this.worker,e,i,r)}};const lz=V("host-browser")?Math.min(navigator.hardwareConcurrency-1,V("workers-pool-size")):0;let qf=V("esri-mobile")?Math.min(lz,3):lz;qf||(qf=V("safari")&&V("mac")?7:2);let uz=0;const Z$=[];function $_e(){ZJ()}async function ex(t,e){const i=new Xve;return await i.open(t,e),i}async function E_e(t,e={}){if(typeof t!="string")throw new C("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(V("host-webworker")&&!V("esri-workers")&&(i="local"),i==="local"){let r=await Qh.loadWorker(t);r||(r=await O(()=>import(t),[])),Tt(e.signal);const n=e.client||r;return ex([Qh.connect(r)],{...e,client:n})}if(await ZJ(),Tt(e.signal),i==="dedicated"){const r=uz++%qf;return ex([await Z$[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,qf);if(r<qf){const n=new Array(r);for(let s=0;s<r;++s){const o=uz++%qf;n[s]=Z$[o].open(t,e)}return ex(n,e)}}return ex(Z$.map(r=>r.open(t,e)),e)}let tx=null;async function ZJ(){if(tx)return tx;new AbortController;const t=[];for(let e=0;e<qf;e++){const i=x_e.create(e).then(r=>(Z$[e]=r,r));t.push(i)}return tx=Promise.all(t),tx}function M_e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function pp(t,e,i,r,n,s,o,a,l,c,h,p,f,y,g,v,_){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=h,t[10]=p,t[11]=f,t[12]=y,t[13]=g,t[14]=v,t[15]=_,t}function W1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vc(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function T_e(t,e){return YJ(t,e)||W1(t),t}function YJ(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],y=e[11],g=e[12],v=e[13],_=e[14],w=e[15],S=i*a-r*o,b=i*l-n*o,$=i*c-s*o,T=r*l-n*a,I=r*c-s*a,A=n*c-s*l,L=h*v-p*g,z=h*_-f*g,j=h*w-y*g,H=p*_-f*v,J=p*w-y*v,ue=f*w-y*_;let re=S*ue-b*J+$*H+T*j-I*z+A*L;return re?(re=1/re,t[0]=(a*ue-l*J+c*H)*re,t[1]=(n*J-r*ue-s*H)*re,t[2]=(v*A-_*I+w*T)*re,t[3]=(f*I-p*A-y*T)*re,t[4]=(l*j-o*ue-c*z)*re,t[5]=(i*ue-n*j+s*z)*re,t[6]=(_*$-g*A-w*b)*re,t[7]=(h*A-f*$+y*b)*re,t[8]=(o*J-a*j+c*L)*re,t[9]=(r*j-i*J-s*L)*re,t[10]=(g*I-v*$+w*S)*re,t[11]=(p*$-h*I-y*S)*re,t[12]=(a*z-o*H-l*L)*re,t[13]=(i*H-r*z+n*L)*re,t[14]=(v*b-g*T-_*S)*re,t[15]=(h*T-p*b+f*S)*re,t):null}function I_e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],y=e[11],g=e[12],v=e[13],_=e[14],w=e[15];return t[0]=a*(f*w-y*_)-p*(l*w-c*_)+v*(l*y-c*f),t[1]=-(r*(f*w-y*_)-p*(n*w-s*_)+v*(n*y-s*f)),t[2]=r*(l*w-c*_)-a*(n*w-s*_)+v*(n*c-s*l),t[3]=-(r*(l*y-c*f)-a*(n*y-s*f)+p*(n*c-s*l)),t[4]=-(o*(f*w-y*_)-h*(l*w-c*_)+g*(l*y-c*f)),t[5]=i*(f*w-y*_)-h*(n*w-s*_)+g*(n*y-s*f),t[6]=-(i*(l*w-c*_)-o*(n*w-s*_)+g*(n*c-s*l)),t[7]=i*(l*y-c*f)-o*(n*y-s*f)+h*(n*c-s*l),t[8]=o*(p*w-y*v)-h*(a*w-c*v)+g*(a*y-c*p),t[9]=-(i*(p*w-y*v)-h*(r*w-s*v)+g*(r*y-s*p)),t[10]=i*(a*w-c*v)-o*(r*w-s*v)+g*(r*c-s*a),t[11]=-(i*(a*y-c*p)-o*(r*y-s*p)+h*(r*c-s*a)),t[12]=-(o*(p*_-f*v)-h*(a*_-l*v)+g*(a*f-l*p)),t[13]=i*(p*_-f*v)-h*(r*_-n*v)+g*(r*f-n*p),t[14]=-(i*(a*_-l*v)-o*(r*_-n*v)+g*(r*l-n*a)),t[15]=i*(a*f-l*p)-o*(r*f-n*p)+h*(r*l-n*a),t}function k_e(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],p=t[10],f=t[11],y=t[12],g=t[13],v=t[14],_=t[15];return(e*o-i*s)*(p*_-f*v)-(e*a-r*s)*(h*_-f*g)+(e*l-n*s)*(h*v-p*g)+(i*a-r*o)*(c*_-f*y)-(i*l-n*o)*(c*v-p*y)+(r*l-n*a)*(c*g-h*y)}function JJ(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],p=e[8],f=e[9],y=e[10],g=e[11],v=e[12],_=e[13],w=e[14],S=e[15];let b=i[0],$=i[1],T=i[2],I=i[3];return t[0]=b*r+$*a+T*p+I*v,t[1]=b*n+$*l+T*f+I*_,t[2]=b*s+$*c+T*y+I*w,t[3]=b*o+$*h+T*g+I*S,b=i[4],$=i[5],T=i[6],I=i[7],t[4]=b*r+$*a+T*p+I*v,t[5]=b*n+$*l+T*f+I*_,t[6]=b*s+$*c+T*y+I*w,t[7]=b*o+$*h+T*g+I*S,b=i[8],$=i[9],T=i[10],I=i[11],t[8]=b*r+$*a+T*p+I*v,t[9]=b*n+$*l+T*f+I*_,t[10]=b*s+$*c+T*y+I*w,t[11]=b*o+$*h+T*g+I*S,b=i[12],$=i[13],T=i[14],I=i[15],t[12]=b*r+$*a+T*p+I*v,t[13]=b*n+$*l+T*f+I*_,t[14]=b*s+$*c+T*y+I*w,t[15]=b*o+$*h+T*g+I*S,t}function C_e(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],h=e[4],p=e[5],f=e[6],y=e[7],g=e[8],v=e[9],_=e[10],w=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=h,t[5]=p,t[6]=f,t[7]=y,t[8]=g,t[9]=v,t[10]=_,t[11]=w,t[12]=o*r+h*n+g*s+e[12],t[13]=a*r+p*n+v*s+e[13],t[14]=l*r+f*n+_*s+e[14],t[15]=c*r+y*n+w*s+e[15]}return t}function P_e(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function A_e(t,e,i,r){let n,s,o,a,l,c,h,p,f,y,g,v,_,w,S,b,$,T,I,A,L,z,j,H,J=r[0],ue=r[1],re=r[2],pe=Math.sqrt(J*J+ue*ue+re*re);return pe<so()?null:(pe=1/pe,J*=pe,ue*=pe,re*=pe,n=Math.sin(i),s=Math.cos(i),o=1-s,a=e[0],l=e[1],c=e[2],h=e[3],p=e[4],f=e[5],y=e[6],g=e[7],v=e[8],_=e[9],w=e[10],S=e[11],b=J*J*o+s,$=ue*J*o+re*n,T=re*J*o-ue*n,I=J*ue*o-re*n,A=ue*ue*o+s,L=re*ue*o+J*n,z=J*re*o+ue*n,j=ue*re*o-J*n,H=re*re*o+s,t[0]=a*b+p*$+v*T,t[1]=l*b+f*$+_*T,t[2]=c*b+y*$+w*T,t[3]=h*b+g*$+S*T,t[4]=a*I+p*A+v*L,t[5]=l*I+f*A+_*L,t[6]=c*I+y*A+w*L,t[7]=h*I+g*A+S*L,t[8]=a*z+p*j+v*H,t[9]=l*z+f*j+_*H,t[10]=c*z+y*j+w*H,t[11]=h*z+g*j+S*H,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function O_e(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],p=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*r,t[5]=o*n+h*r,t[6]=a*n+p*r,t[7]=l*n+f*r,t[8]=c*n-s*r,t[9]=h*n-o*r,t[10]=p*n-a*r,t[11]=f*n-l*r,t}function L_e(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],h=e[9],p=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*r,t[1]=o*n-h*r,t[2]=a*n-p*r,t[3]=l*n-f*r,t[8]=s*r+c*n,t[9]=o*r+h*n,t[10]=a*r+p*n,t[11]=l*r+f*n,t}function R_e(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],h=e[5],p=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*r,t[1]=o*n+h*r,t[2]=a*n+p*r,t[3]=l*n+f*r,t[4]=c*n-s*r,t[5]=h*n-o*r,t[6]=p*n-a*r,t[7]=f*n-l*r,t}function KJ(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function F_e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D_e(t,e,i){if(e===0)return W1(t);let r,n,s,o=i[0],a=i[1],l=i[2],c=Math.sqrt(o*o+a*a+l*l);return c<so()?null:(c=1/c,o*=c,a*=c,l*=c,r=Math.sin(e),n=Math.cos(e),s=1-n,t[0]=o*o*s+n,t[1]=a*o*s+l*r,t[2]=l*o*s-a*r,t[3]=0,t[4]=o*a*s-l*r,t[5]=a*a*s+n,t[6]=l*a*s+o*r,t[7]=0,t[8]=o*l*s+a*r,t[9]=a*l*s-o*r,t[10]=l*l*s+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function N_e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j_e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function V_e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QJ(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,c=s+s,h=r*a,p=r*l,f=r*c,y=n*l,g=n*c,v=s*c,_=o*a,w=o*l,S=o*c;return t[0]=1-(y+v),t[1]=p+S,t[2]=f-w,t[3]=0,t[4]=p-S,t[5]=1-(h+v),t[6]=g+_,t[7]=0,t[8]=f+w,t[9]=g-_,t[10]=1-(h+y),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function z_e(t,e){const i=U_e,r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],p=r*r+n*n+s*s+o*o;return p>0?(i[0]=2*(a*o+h*r+l*s-c*n)/p,i[1]=2*(l*o+h*n+c*r-a*s)/p,i[2]=2*(c*o+h*s+a*n-l*r)/p):(i[0]=2*(a*o+h*r+l*s-c*n),i[1]=2*(l*o+h*n+c*r-a*s),i[2]=2*(c*o+h*s+a*n-l*r)),QJ(t,e,i),t}const U_e=Je();function B_e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function G_e(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+h*h),t}function H_e(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function q_e(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3],l=n+n,c=s+s,h=o+o,p=n*l,f=n*c,y=n*h,g=s*c,v=s*h,_=o*h,w=a*l,S=a*c,b=a*h,$=r[0],T=r[1],I=r[2];return t[0]=(1-(g+_))*$,t[1]=(f+b)*$,t[2]=(y-S)*$,t[3]=0,t[4]=(f-b)*T,t[5]=(1-(p+_))*T,t[6]=(v+w)*T,t[7]=0,t[8]=(y+S)*I,t[9]=(v-w)*I,t[10]=(1-(p+g))*I,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function W_e(t,e,i,r,n){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,h=o+o,p=a+a,f=s*c,y=s*h,g=s*p,v=o*h,_=o*p,w=a*p,S=l*c,b=l*h,$=l*p,T=r[0],I=r[1],A=r[2],L=n[0],z=n[1],j=n[2],H=(1-(v+w))*T,J=(y+$)*T,ue=(g-b)*T,re=(y-$)*I,pe=(1-(f+w))*I,Dt=(_+S)*I,we=(g+b)*A,q=(_-S)*A,le=(1-(f+v))*A;return t[0]=H,t[1]=J,t[2]=ue,t[3]=0,t[4]=re,t[5]=pe,t[6]=Dt,t[7]=0,t[8]=we,t[9]=q,t[10]=le,t[11]=0,t[12]=i[0]+L-(H*L+re*z+we*j),t[13]=i[1]+z-(J*L+pe*z+q*j),t[14]=i[2]+j-(ue*L+Dt*z+le*j),t[15]=1,t}function Z_e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,h=r*o,p=r*a,f=n*o,y=n*a,g=n*l,v=s*o,_=s*a,w=s*l;return t[0]=1-p-g,t[1]=h+w,t[2]=f-_,t[3]=0,t[4]=h-w,t[5]=1-c-g,t[6]=y+v,t[7]=0,t[8]=f+_,t[9]=y-v,t[10]=1-c-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y_e(t,e,i,r,n,s,o){const a=1/(i-e),l=1/(n-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function J_e(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function K_e(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(n-s)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function Q_e(t,e,i,r,n,s,o){const a=1/(e-i),l=1/(r-n),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(o+s)*c,t[15]=1,t}function X_e(t,e,i,r){const n=e[0],s=e[1],o=e[2];let a=n-i[0],l=s-i[1],c=o-i[2];const h=so();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void W1(t);let p=1/Math.sqrt(a*a+l*l+c*c);a*=p,l*=p,c*=p;const f=r[0],y=r[1],g=r[2];let v=y*c-g*l,_=g*a-f*c,w=f*l-y*a;p=Math.sqrt(v*v+_*_+w*w),p?(p=1/p,v*=p,_*=p,w*=p):(v=0,_=0,w=0);let S=l*w-c*_,b=c*v-a*w,$=a*_-l*v;p=Math.sqrt(S*S+b*b+$*$),p?(p=1/p,S*=p,b*=p,$*=p):(S=0,b=0,$=0),t[0]=v,t[1]=S,t[2]=a,t[3]=0,t[4]=_,t[5]=b,t[6]=l,t[7]=0,t[8]=w,t[9]=$,t[10]=c,t[11]=0,t[12]=-(v*n+_*s+w*o),t[13]=-(S*n+b*s+$*o),t[14]=-(a*n+l*s+c*o),t[15]=1}function ewe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let h=n-i[0],p=s-i[1],f=o-i[2],y=h*h+p*p+f*f;y>0&&(y=1/Math.sqrt(y),h*=y,p*=y,f*=y);let g=l*f-c*p,v=c*h-a*f,_=a*p-l*h;return y=g*g+v*v+_*_,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,_*=y),t[0]=g,t[1]=v,t[2]=_,t[3]=0,t[4]=p*_-f*v,t[5]=f*g-h*_,t[6]=h*v-p*g,t[7]=0,t[8]=h,t[9]=p,t[10]=f,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function twe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function iwe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function rwe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function XJ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function nwe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function swe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function owe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function awe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],y=t[11],g=t[12],v=t[13],_=t[14],w=t[15],S=e[0],b=e[1],$=e[2],T=e[3],I=e[4],A=e[5],L=e[6],z=e[7],j=e[8],H=e[9],J=e[10],ue=e[11],re=e[12],pe=e[13],Dt=e[14],we=e[15],q=so();return Math.abs(i-S)<=q*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(r-b)<=q*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-$)<=q*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(s-T)<=q*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-I)<=q*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-A)<=q*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-L)<=q*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(c-z)<=q*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(h-j)<=q*Math.max(1,Math.abs(h),Math.abs(j))&&Math.abs(p-H)<=q*Math.max(1,Math.abs(p),Math.abs(H))&&Math.abs(f-J)<=q*Math.max(1,Math.abs(f),Math.abs(J))&&Math.abs(y-ue)<=q*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(g-re)<=q*Math.max(1,Math.abs(g),Math.abs(re))&&Math.abs(v-pe)<=q*Math.max(1,Math.abs(v),Math.abs(pe))&&Math.abs(_-Dt)<=q*Math.max(1,Math.abs(_),Math.abs(Dt))&&Math.abs(w-we)<=q*Math.max(1,Math.abs(w),Math.abs(we))}function lwe(t){const e=so(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+h*h))<=e}function uwe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const cwe=JJ,dwe=XJ;Object.freeze(Object.defineProperty({__proto__:null,add:rwe,adjoint:I_e,copy:M_e,determinant:k_e,equals:awe,exactEquals:owe,frob:iwe,fromQuat:Z_e,fromQuat2:z_e,fromRotation:D_e,fromRotationTranslation:QJ,fromRotationTranslationScale:q_e,fromRotationTranslationScaleOrigin:W_e,fromScaling:F_e,fromTranslation:KJ,fromXRotation:N_e,fromYRotation:j_e,fromZRotation:V_e,frustum:Y_e,getRotation:H_e,getScaling:G_e,getTranslation:B_e,hasIdentityRotation:uwe,identity:W1,invert:YJ,invertOrIdentity:T_e,isOrthoNormal:lwe,lookAt:X_e,mul:cwe,multiply:JJ,multiplyScalar:nwe,multiplyScalarAndAdd:swe,ortho:Q_e,perspective:J_e,perspectiveFromFieldOfView:K_e,rotate:A_e,rotateX:O_e,rotateY:L_e,rotateZ:R_e,scale:P_e,set:pp,str:twe,sub:dwe,subtract:XJ,targetTo:ewe,translate:C_e,transpose:Vc},Symbol.toStringTag,{value:"Module"}));let Bk,R=null;function tj(){return!!R}function hwe(){return!!V("esri-wasm")}function eK(){return Bk||(Bk=O(()=>import("./pe-wasm-0b2b3150.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>qe(`esri/geometry/support/${e}`)})).then(t=>{iK(t)}),Bk)}var _L,Yt,e1;(function(t){function e(s,o,a){R.ensureCache.prepare();const l=If(a),c=a===l,h=R.ensureFloat64(l),p=R._pe_geog_to_proj(R.getPointer(s),o,h);return p&&ph(a,o,h,c),p}function i(s,o,a,l){switch(l){case Yt.PE_TRANSFORM_P_TO_G:return r(s,o,a);case Yt.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){R.ensureCache.prepare();const c=If(a),h=a===c,p=R.ensureFloat64(c),f=R._pe_proj_to_geog_center(R.getPointer(s),o,p,l);return f&&ph(a,o,p,h),f}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(_L||(_L={})),function(t){function e(){t.PE_BUFFER_MAX=R.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=R.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=R.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=R.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=R.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=R.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=R.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=R.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=R.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=R.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=R.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=R.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=R.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=R.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=R.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=R.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=R.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=R.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=R.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=R.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=R.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=R.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=R.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=R.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=R.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=R.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=R.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=R.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=R.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=R.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(Yt||(Yt={})),function(t){const e={},i={},r=y=>{if(y){const g=y.getType();switch(g){case Yt.PE_TYPE_GEOGCS:y=R.castObject(y,R.PeGeogcs);break;case Yt.PE_TYPE_PROJCS:y=R.castObject(y,R.PeProjcs);break;case Yt.PE_TYPE_GEOGTRAN:y=R.castObject(y,R.PeGeogtran);break;default:g&Yt.PE_TYPE_UNIT&&(y=R.castObject(y,R.PeUnit))}}return y};function n(){R.PeFactory.prototype.initialize(null)}function s(y){return o(Yt.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,_=e[y];if(_||(_={},e[y]=_),_.hasOwnProperty(String(g)))v=_[g];else{const w=R.PeFactory.prototype.factoryByType(y,g);R.compare(w,R.NULL)||(v=w,_[g]=v)}return v=r(v),v}function a(y,g){let v=null,_=i[y];if(_||(_={},i[y]=_),_.hasOwnProperty(g))v=_[g];else{const w=R.PeFactory.prototype.fromString(y,g);R.compare(w,R.NULL)||(v=w,_[g]=v)}return v=r(v),v}function l(y){return o(Yt.PE_TYPE_GEOGCS,y)}function c(y){return o(Yt.PE_TYPE_GEOGTRAN,y)}function h(y){return R.PeFactory.prototype.getCode(y)}function p(y){return o(Yt.PE_TYPE_PROJCS,y)}function f(y){return o(Yt.PE_TYPE_UNIT,y)}t.initialize=n,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=c,t.getCode=h,t.projcs=p,t.unit=f}(e1||(e1={}));let tK=null;var J2,wL,bL,am,cs,t1,Rc,K2,SL;function iK(t){function e(s,o,a){s[o]=a(s[o])}R=t,Yt.init(),J2.init(),cs.init(),Rc.init(),K2.init(),tK=class extends R.PeGCSExtent{destroy(){R.destroy(this)}};const i=[R.PeDatum,R.PeGeogcs,R.PeGeogtran,R.PeObject,R.PeParameter,R.PePrimem,R.PeProjcs,R.PeSpheroid,R.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(Yt.PE_NAME_MAX))});for(const s of[R.PeGeogtran,R.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(Yt.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=R.getValue(l,"*");a[c]=h?R.wrapPointer(h,R.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(R.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return ph(a,o,s.call(this)),a}),e(R.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=R._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!R.compare(l,R.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=R.getPointer(l);for(let p=1;p<c;p++)a.push(R.wrapPointer(h+o*p,R.PeGTlistExtendedGTs))}}return a}});const r=R._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!R.compare(l,R.NULL)){a=[l];const c=l.getNump();if(c>1){const h=R.getPointer(l);for(let p=1;p<c;p++)a.push(R.wrapPointer(h+r*p,R.PeHorizon))}}return o.set(s,a),a};e(R.PeProjcs.prototype,"horizonGcsGenerate",n),e(R.PeProjcs.prototype,"horizonPcsGenerate",n),R.PeObject.prototype.toString=function(s=Yt.PE_STR_OPTS_NONE){R.ensureCache.prepare();const o=R.getPointer(this),a=R.ensureInt8(new Array(Yt.PE_BUFFER_MAX));return R.UTF8ToString(R._pe_object_to_string_ext(o,s,a))}}function vu(t){if(!t)return;const e=R.getClass(t);if(!e)return;const i=R.getCache(e);if(!i)return;const r=R.getPointer(t);r&&delete i[r]}function ix(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(R.ensureInt8(r));return i}function If(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function ph(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=R.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=R.getValue(i,"double"),t[s][1]=R.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=R.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=R._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,l,c){let h=null;const p=new R.PeInteger(c);try{const f=R.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,p);if((c=p.val)&&(h=[f],c>1)){const y=R.getPointer(f);for(let g=1;g<c;g++)h.push(R.wrapPointer(y+e*g,R.PeGTlistExtendedEntry))}}finally{R.destroy(p)}return h}t.init=i,t.getGTlist=r})(J2||(J2={})),function(t){function e(i){if(i&&i.length){for(const r of i)vu(r),r.getEntries().forEach(n=>{vu(n);const s=n.getGeogtran();vu(s),s.getParameters().forEach(vu),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{vu(o);const a=o.getDatum();vu(a),vu(a.getSpheroid()),vu(o.getPrimem()),vu(o.getUnit())})});R.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(wL||(wL={})),function(t){function e(i,r,n,s,o){R.ensureCache.prepare();const a=If(n),l=n===a,c=R.ensureFloat64(a);let h=0;s&&(h=R.ensureFloat64(s));const p=R._pe_geog_to_geog(R.getPointer(i),r,c,h,o);return p&&ph(n,r,c,l),p}t.geogToGeog=e}(bL||(bL={})),function(t){const e=(c,h,p,f,y,g)=>{let v,_;switch(R.ensureCache.prepare(),c){case"dd":v=R._pe_geog_to_dd,_=Yt.PE_DD_MAX;break;case"ddm":v=R._pe_geog_to_ddm,_=Yt.PE_DDM_MAX;break;case"dms":v=R._pe_geog_to_dms,_=Yt.PE_DMS_MAX}let w=0;h&&(w=R.getPointer(h));const S=If(f),b=R.ensureFloat64(S),$=ix(p,_),T=v(w,p,b,y,R.ensureInt32($));if(T)for(let I=0;I<p;I++)g[I]=R.UTF8ToString($[I]);return T},i=(c,h,p,f,y)=>{let g;switch(R.ensureCache.prepare(),c){case"dd":g=R._pe_dd_to_geog;break;case"ddm":g=R._pe_ddm_to_geog;break;case"dms":g=R._pe_dms_to_geog}let v=0;h&&(v=R.getPointer(h));const _=f.map($=>R.ensureString($)),w=R.ensureInt32(_),S=R.ensureFloat64(new Array(2*p)),b=g(v,p,w,S);return b&&ph(y,p,S),b};function r(c,h,p,f,y){return e("dms",c,h,p,f,y)}function n(c,h,p,f){return i("dms",c,h,p,f)}function s(c,h,p,f,y){return e("ddm",c,h,p,f,y)}function o(c,h,p,f){return i("ddm",c,h,p,f)}function a(c,h,p,f,y){return e("dd",c,h,p,f,y)}function l(c,h,p,f){return i("dd",c,h,p,f)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(am||(am={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=R.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=R.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,l,c,h){R.ensureCache.prepare();let p=0;n&&(p=R.getPointer(n));const f=If(o),y=R.ensureFloat64(f),g=ix(s,Yt.PE_MGRS_MAX),v=R.ensureInt32(g),_=R._pe_geog_to_mgrs_extended(p,s,y,a,l,c,v);if(_)for(let w=0;w<s;w++)h[w]=R.UTF8ToString(g[w]);return _}function r(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=o.map(g=>R.ensureString(g)),p=R.ensureInt32(h),f=R.ensureFloat64(new Array(2*s)),y=R._pe_mgrs_to_geog_extended(c,s,p,a,f);return y&&ph(l,s,f),y}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(cs||(cs={})),function(t){function e(r,n,s,o,a,l,c){R.ensureCache.prepare();let h=0;r&&(h=R.getPointer(r));const p=If(s),f=R.ensureFloat64(p),y=ix(n,Yt.PE_MGRS_MAX),g=R.ensureInt32(y),v=R._pe_geog_to_usng(h,n,f,o,a,l,g);if(v)for(let _=0;_<n;_++)c[_]=R.UTF8ToString(y[_]);return v}function i(r,n,s,o){R.ensureCache.prepare();let a=0;r&&(a=R.getPointer(r));const l=s.map(f=>R.ensureString(f)),c=R.ensureInt32(l),h=R.ensureFloat64(new Array(2*n)),p=R._pe_usng_to_geog(a,n,c,h);return p&&ph(o,n,h),p}t.geogToUsng=e,t.usngToGeog=i}(t1||(t1={})),function(t){function e(){t.PE_UTM_OPTS_NONE=R.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=R.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=R.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=If(o),p=R.ensureFloat64(h),f=ix(s,Yt.PE_UTM_MAX),y=R.ensureInt32(f),g=R._pe_geog_to_utm(c,s,p,a,y);if(g)for(let v=0;v<s;v++)l[v]=R.UTF8ToString(f[v]);return g}function r(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=o.map(g=>R.ensureString(g)),p=R.ensureInt32(h),f=R.ensureFloat64(new Array(2*s)),y=R._pe_utm_to_geog(c,s,p,a,f);return y&&ph(l,s,f),y}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(Rc||(Rc={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=R.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=R.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=R.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=R.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(n)&&(a=e.get(n),a[s]&&(o=a[s])),o||(o=R.PePCSInfo.prototype.generate(n,s),a||(a=[],e.set(n,a)),a[s]=o),o}t.init=i,t.generate=r}(K2||(K2={})),function(t){function e(){return R.PeVersion.prototype.version_string()}t.versionString=e}(SL||(SL={}));const pwe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return _L},get PeDefs(){return Yt},get PeFactory(){return e1},get PeGCSExtent(){return tK},get PeGTTransformations(){return bL},get PeGTlistExtended(){return J2},get PeGTlistExtendedEntry(){return wL},get PeNotationDms(){return am},get PeNotationMgrs(){return cs},get PeNotationUsng(){return t1},get PeNotationUtm(){return Rc},get PePCSInfo(){return K2},get PeVersion(){return SL},_init:iK,get _pe(){return R},isLoaded:tj,isSupported:hwe,load:eK},Symbol.toStringTag,{value:"Module"})),ds=Math.PI/180,fwe=/SPHEROID\[([^\]]+)]/i,Qc=It.radius,sa=It.eccentricitySquared,mwe={a1:Qc*sa,a2:Qc*sa*Qc*sa,a3:Qc*sa*sa/2,a4:Qc*sa*Qc*sa*2.5,a5:Qc*sa+Qc*sa*sa/2,a6:1-sa},ywe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:It.radius,f:It.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:qh.radius,f:qh.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:_c.radius,f:_c.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:_c.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let rx=0,Gk=class xL{static fromGE(e){const i=new xL;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=rx++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=rx++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=rx++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=rx++}getInverse(){const e=new xL;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},Q2=class U_{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new U_;let r="";for(const n of e.steps){const s=Gk.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof Gk?this.steps.push(i):this.steps.push(new Gk({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new U_;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[U_.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[U_.cacheKey(e,i)];return n===void 0?null:n}};function rK(t,e,i){if(e==null||i==null||i.vcsWkid||Si(e,i))return null;const r=S0(e)/S0(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>gwe(n,r);case"polyline":case"esriGeometryPolyline":return n=>_we(n,r);case"polygon":case"esriGeometryPolygon":return n=>vwe(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>wwe(n,r);case"extent":case"esriGeometryEnvelope":return n=>bwe(n,r);default:return null}}function gwe(t,e){t&&t.z!=null&&(t.z*=e)}function vwe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function _we(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function wwe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function bwe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Xa=null,Xh=null,qw=null,Y$={};const nK=new xT;function zc(){return!!Xa&&tj()}function uu(t){return qw==null&&(qw=Promise.all([eK(),O(()=>import("./geometryEngineBase-9014f2fe.js"),[]).then(e=>e.g),O(()=>import("./hydrated-4d21b56a.js"),[])])),qw.then(([,e,{hydratedAdapter:i}])=>{Tt(t),Xh=i,Xa=e.default,Xa._enableProjection(pwe),nK.notify()})}function Jo(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:$L(Xh,t,t[0].spatialReference,e,i,r):$L(Xh,[t],t.spatialReference,e,i,r)[0]}function $L(t,e,i,r,n=null,s=null){if(i==null||r==null)return e;if(cu(i,r,n))return e.map(o=>lK(o,i,r));if(n==null){const o=Q2.cacheKey(i,r);Y$[o]!==void 0?n=Y$[o]:((n=oK(i,r,void 0))==null&&(n=new Q2),Y$[o]=n)}if(Xa==null||t==null)throw new zT;return s!=null?Xa._project(t,e,i,r,n,s):Xa._project(t,e,i,r,n)}function Swe(t,e){const i=sK([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function sK(t,e){if(!zc()){for(const i of t)if(i!=null&&!Si(i.spatialReference,e)&&Or(i.spatialReference)&&Or(e)&&!cu(i.spatialReference,e))return Ce(nK),{pending:uu(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Si(i.spatialReference,e)?i:Or(i.spatialReference)&&Or(e)?aK(i,e):null)}}function oK(t,e,i=null){if(t==null||e==null)return null;if(Xa==null||Xh==null)throw new zT;const r=Xa._getTransformation(Xh,t,e,i,i==null?void 0:i.spatialReference);return r!==null?Q2.fromGE(r):null}function xwe(t,e,i=null){if(Xa==null||Xh==null)throw new zT;const r=Xa._getTransformationBySuitability(Xh,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const s of r)n.push(Q2.fromGE(s));return n}return[]}class zT extends C{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var P;function $we(){Xa=null,Xh=null,qw=null,Y$={}}(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(P||(P={}));const Ewe={get loadPromise(){return qw}};function aK(t,e){try{const i=Jo(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=rK(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof zT))throw i;return null}}function cu(t,e,i){return!i&&(!!Si(t,e)||Or(t)&&Or(e)&&!!sj(t,e,aj))}async function ij(t,e,i,r){if(zc())return j4(r);if(Array.isArray(t)){for(const{source:n,dest:s,geographicTransformation:o}of t)if(!cu(n,s,o))return uu(r)}else if(!cu(t,e,i))return uu(r);return j4(r)}function Mwe(t,e){switch(sj(t,e,aj)){case wt:return"copy3";case $h:return"wgs84ToSphericalECEF";case Lm:return"wgs84ToWebMercator";case xh:return"wgs84ToPlateCarree";case Mh:return"wgs84ToWGS84ECEF";case lm:return"webMercatorToWGS84";case gK:return"webMercatorToSphericalECEF";case vK:return"webMercatorToWGS84ECEF";case wK:return"webMercatorToPlateCarree";case Th:return"wgs84ECEFToWGS84";case xK:return"wgs84ECEFToSphericalECEF";case $K:return"wgs84ECEFToWebMercator";case Eh:return"sphericalECEFToWGS84";case bK:return"sphericalECEFToWebMercator";case CL:return"sphericalMarsPCPFToMars2000";case kL:return"sphericalMoonPCPFToMoon2000";case SK:return"sphericalECEFToWGS84ECEF";case IL:return"mars2000ToSphericalPCPF";case TL:return"moon2000ToSphericalPCPF";default:return null}}function lK(t,e,i){return t?"x"in t?uK(t,e,new ce,i,0):"xmin"in t?pK(t,e,new lt,i,0):"rings"in t?hK(t,e,new Un,i,0):"paths"in t?dK(t,e,new No,i,0):"points"in t?cK(t,e,new _T,i,0):null:null}function Twe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&uK(t,t.spatialReference,e,i,r)!=null}function uK(t,e,i,r,n){We[0]=t.x,We[1]=t.y;const s=t.z;return We[2]=s!==void 0?s:n,cl(We,e,0,We,r,0,1)?(i.x=We[0],i.y=We[1],i.spatialReference=r,s===void 0?(i.z=void 0,i.hasZ=!1):(i.z=We[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function Iwe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&cK(t,t.spatialReference,e,i,r)!=null}function cK(t,e,i,r,n){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,h=[];for(const p of s)h.push(p[0],p[1],o?p[2]:n);if(!cl(h,e,0,h,r,0,c))return null;for(let p=0;p<c;++p){const f=3*p,y=h[f],g=h[f+1];o&&a?l.push([y,g,h[f+2],s[p][3]]):o?l.push([y,g,h[f+2]]):a?l.push([y,g,s[p][2]]):l.push([y,g])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function kwe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&dK(t,t.spatialReference,e,i,r)!=null}function dK(t,e,i,r,n){const{paths:s,hasZ:o,hasM:a}=t,l=[];return mK(s,o??!1,a??!1,e,l,r,n)?(i.paths=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function Cwe({hasZ:t,spatialReference:e,paths:i},r,n=0){const s=du(e,dv),o=Vo[s][P.WGS84_COMPARABLE_LON_LAT];if(o==null)return!1;const a=t?l=>l:l=>nu(We,l[0],l[1],n);for(const l of i){const c=[];for(const h of l){const p=[0,0,n];o(a(h),0,p,0),c.push(p)}r.push(c)}return!0}function Pwe({hasZ:t,spatialReference:e,rings:i},r,n=0){const s=du(e,dv),o=Vo[s][P.WGS84_COMPARABLE_LON_LAT];if(o==null)return!1;const a=t?l=>l:l=>nu(We,l[0],l[1],n);for(const l of i){const c=[];for(const h of l){const p=[0,0,n];o(a(h),0,p,0),c.push(p)}r.push(c)}return!0}function Awe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&hK(t,t.spatialReference,e,i,r)!=null}function hK(t,e,i,r,n){const{rings:s,hasZ:o,hasM:a}=t,l=[];return mK(s,o??!1,a??!1,e,l,r,n)?(i.rings=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function Owe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&pK(t,t.spatialReference,e,i,r)!=null}function pK(t,e,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=t;return EL(s,o,c?t.zmin:n,e,We,r)?(i.xmin=We[0],i.ymin=We[1],c&&(i.zmin=We[2]),EL(a,l,c?t.zmax:n,e,We,r)?(i.xmax=We[0],i.ymax=We[1],c&&(i.zmax=We[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null):null}function Lwe(t,e,i){if(e==null||i==null)return null;const r=new ce({spatialReference:i});return cl(t,e,0,We,i,0,1)?(r.x=We[0],r.y=We[1],r.z=We[2],r):null}function Rwe(t,e,i){return cl(t,e,0,We,i.spatialReference,0,1)?(i.x=We[0],i.y=We[1],i.z=We[2],i):null}function Fwe(t,e,i,r=0){We[0]=t.x,We[1]=t.y;const n=t.z;return We[2]=n!==void 0?n:r,cl(We,t.spatialReference,0,e,i,0,1)}function EL(t,e,i,r,n,s){return Vt[0]=t,Vt[1]=e,Vt[2]=i,cl(Vt,r,0,n,s,0,1)}function ML(t,e,i,r){return!(e==null||r==null||t.length<2)&&(t.length===2&&(Vt[0]=t[0],Vt[1]=t[1],Vt[2]=0,t=Vt),cl(t,e,0,i,r,0,1))}function Dwe(t,e){We[0]=t.x,We[1]=t.y;const i=t.z;return We[2]=i!==void 0?i:0,fK(We,t.spatialReference,e)}function fK(t,e,i){return Nwe(t,e,i)}function Nwe(t,e,i){if(e==null)return!1;const r=du(e,dv),n=Vo[r][P.WGS84_COMPARABLE_LON_LAT];return n!=null&&(n(t,0,Vt,0),i!==Vt&&(i[0]=Vt[0],i[1]=Vt[1],i.length>2&&(i[2]=Vt[2])),!0)}function cl(t,e,i,r,n,s,o=1){const a=sj(e,n,aj);if(a==null)return!1;if(a===wt){if(t===r&&i===s)return!0;const c=i+3*o;for(let h=i,p=s;h<c;h++,p++)r[p]=t[h];return!0}const l=i+3*o;for(let c=i,h=s;c<l;c+=3,h+=3)a(t,c,r,h);return!0}function jwe(t,e,i,r,n){E0(We,t),JD(nx,t,e),ML(We,i,We,n),ML(nx,i,nx,n),O1(r,nx,We),R2(r,r)}function mK(t,e,i,r,n,s,o=0){const a=new Array;for(const c of t)for(const h of c)a.push(h[0],h[1],e?h[2]:o);if(!cl(a,r,0,a,s,0,a.length/3))return!1;let l=0;n.length=0;for(const c of t){const h=new Array;for(const p of c)e&&i?h.push([a[l++],a[l++],a[l++],p[3]]):e?h.push([a[l++],a[l++],a[l++]]):i?(h.push([a[l++],a[l++],p[2]]),l++):(h.push([a[l++],a[l++]]),l++);n.push(h)}return!0}function Vwe(t,e,i,r){if(e==null||r==null)return!1;const n=EK(e,r,Qwe);if(n.projector===wt)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],!0;if(n.projector==null)return!1;const{source:s,dest:o}=n;if(o.spatialReferenceId===P.WEB_MERCATOR){const a=Vo[s.spatialReferenceId][P.WGS84];return a!=null&&(a(t,0,Pa,0),Lm(Pa,0,i,0),i[3]=cz(Pa[1],t[2],t[3],It.radius),!0)}if(s.spatialReferenceId!==P.WGS84&&s.spatialReferenceId!==P.CGCS2000||o.spatialReferenceId!==P.PLATE_CARREE){n.projector(t,0,i,0);const a=s.metersPerUnit??1,l=o.metersPerUnit??1;i[3]=t[3]*a/l}else{const a=Vo[s.spatialReferenceId][P.SPHERICAL_ECEF],l=Vo[P.SPHERICAL_ECEF][P.PLATE_CARREE];let c=t[3];a!=null&&l!=null&&(c=cz(t[1],t[2],t[3],It.radius)),n.projector(t,0,i,0),i[3]=c}return!0}function cz(t,e,i,r){const n=r+e;if(n<r/2||i>n)return Number.MAX_VALUE;const s=Math.abs(Ga*t)+Math.asin(i/n);return s>=Math.PI/2?Number.MAX_VALUE:i/Math.cos(s)}function zwe(t,e,i,r){return t!=null&&(Si(e,r)?(QD(i,t),!0):(Vt[0]=t[0],Vt[1]=t[1],Vt[2]=0,!!cl(Vt,e,0,Vt,r,0,1)&&(i[0]=Vt[0],i[1]=Vt[1],Vt[0]=t[2],Vt[1]=t[3],Vt[2]=0,!!cl(Vt,e,0,Vt,r,0,1)&&(i[2]=Vt[0],i[3]=Vt[1],!0))))}function Uwe(t,e,i,r){if(e==null||r==null)return!1;const n=du(e,dv),s=du(r,MK);if(n===s&&n!==P.UNKNOWN||Si(e,r))return i[0]=1,i[1]=1,i[2]=1,!0;if(n===P.SPHERICAL_ECEF){const o=ST(t),a=o/Math.sqrt(t[0]*t[0]+t[1]*t[1]),l=o/It.radius;if(s===P.WEB_MERCATOR)return i[0]=a*l,i[1]=a*l,i[2]=1,!0;if(s===P.WGS84||s===P.CGCS2000){const c=Ww;return i[0]=c*a*l,i[1]=c*l,i[2]=1,!0}}else if(n===P.PLATE_CARREE){if(s===P.WGS84||s===P.CGCS2000)return i[0]=Ww,i[1]=Ww,i[2]=1,!0;if(s===P.WEB_MERCATOR){const o=t[1]/It.radius;return i[0]=1,i[1]=1/Math.cos(o),i[2]=1,!0}}return!1}function Bwe(t,e,i,r){if(t==null||r==null)return!1;const n=du(t,dv),s=du(r,MK);if(n===s&&!dz(s)&&(n!==P.UNKNOWN||Si(t,r)))return KJ(i,e),!0;if(dz(s)){const o=Vo[n][P.LON_LAT],a=Vo[P.LON_LAT][s];return o!=null&&a!=null&&(o(e,0,Pa,0),a(Pa,0,Xc,0),rj(Ga*Pa[0],Ga*Pa[1],i),i[12]=Xc[0],i[13]=Xc[1],i[14]=Xc[2],!0)}if((s===P.WEB_MERCATOR||s===P.PLATE_CARREE)&&(n===P.WGS84||n===P.CGCS2000&&s===P.PLATE_CARREE||n===P.SPHERICAL_ECEF||n===P.WEB_MERCATOR)){const o=Vo[n][P.LON_LAT],a=Vo[P.LON_LAT][s];return o!=null&&a!=null&&(o(e,0,Pa,0),a(Pa,0,Xc,0),n===P.SPHERICAL_ECEF?yK(Ga*Pa[0],Ga*Pa[1],i):W1(i),i[12]=Xc[0],i[13]=Xc[1],i[14]=Xc[2],!0)}return!1}function dz(t){return t===P.SPHERICAL_ECEF||t===P.SPHERICAL_MARS_PCPF||t===P.SPHERICAL_MOON_PCPF}function rj(t,e,i){const r=Math.sin(t),n=Math.cos(t),s=Math.sin(e),o=Math.cos(e),a=i;return a[0]=-r,a[4]=-s*n,a[8]=o*n,a[12]=0,a[1]=n,a[5]=-s*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function yK(t,e,i){return rj(t,e,i),Vc(i,i),i}function du(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Ss(t,1)),t.wkt===Bde.wkt?e.spatialReferenceId=P.SPHERICAL_ECEF:Db(t)?e.spatialReferenceId=P.WGS84:Mm(t)?e.spatialReferenceId=P.WEB_MERCATOR:Nde(t)?e.spatialReferenceId=P.PLATE_CARREE:t.wkt===Gde.wkt?e.spatialReferenceId=P.WGS84_ECEF:t.wkid===Em.CGCS2000?e.spatialReferenceId=P.CGCS2000:t.wkt===aW.wkt?e.spatialReferenceId=P.SPHERICAL_MARS_PCPF:t.wkt===lW.wkt?e.spatialReferenceId=P.SPHERICAL_MOON_PCPF:BD(t)?e.spatialReferenceId=P.GCSMARS2000:HD(t)?e.spatialReferenceId=P.GCSMOON2000:e.spatialReferenceId=P.UNKNOWN):P.UNKNOWN}function wt(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function lm(t,e,i,r){i[r++]=A0*(t[e++]/It.radius),i[r++]=A0*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/It.radius))),i[r]=t[e]}function gK(t,e,i,r){lm(t,e,i,r),$h(i,r,i,r)}function vK(t,e,i,r){lm(t,e,i,r),Mh(i,r,i,r)}function _K(t,e,i,r,n){const s=.4999999*Math.PI,o=xs(Ga*t[e+1],-s,s),a=Math.sin(o);i[r++]=Ga*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function Lm(t,e,i,r){_K(t,e,i,r,It)}const hz=It.radius*Math.PI/180,Ww=180/(It.radius*Math.PI);function xh(t,e,i,r){i[r]=t[e]*hz,i[r+1]=t[e+1]*hz,i[r+2]=t[e+2]}function Wf(t,e,i,r){i[r]=t[e]*Ww,i[r+1]=t[e+1]*Ww,i[r+2]=t[e+2]}function wK(t,e,i,r){lm(t,e,i,r),xh(i,r,i,r)}function Gwe(t,e,i,r){Th(t,e,i,r),xh(i,r,i,r)}function Hwe(t,e,i,r){Eh(t,e,i,r),xh(i,r,i,r)}function qwe(t,e,i,r){Wf(t,e,i,r),$h(i,r,i,r)}function Wwe(t,e,i,r){Wf(t,e,i,r),Lm(i,r,i,r)}function Zwe(t,e,i,r){Wf(t,e,i,r),Mh(i,r,i,r)}function Ywe(t){if(t==null)return!1;const e=du(t,dv);return!!Vo[e][P.WGS84_COMPARABLE_LON_LAT]}function Jwe(t,e,i,r){const n=Math.cos(i);t[0]=Math.cos(e)*n*r,t[1]=Math.sin(e)*n*r,t[2]=Math.sin(i)*r}function nj(t,e,i,r,n){const s=n+t[e+2],o=Ga*t[e+1],a=Ga*t[e],l=Math.cos(o);i[r++]=Math.cos(a)*l*s,i[r++]=Math.sin(a)*l*s,i[r]=Math.sin(o)*s}function TL(t,e,i,r){nj(t,e,i,r,qh.radius)}function IL(t,e,i,r){nj(t,e,i,r,_c.radius)}function $h(t,e,i,r){nj(t,e,i,r,It.radius)}function UT(t,e,i,r,n){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=QW(a/(l===0?1:l)),h=Math.atan2(o,s);i[r++]=A0*h,i[r++]=A0*c,i[r]=l-n}function kL(t,e,i,r){UT(t,e,i,r,qh.radius)}function CL(t,e,i,r){UT(t,e,i,r,_c.radius)}function Eh(t,e,i,r){UT(t,e,i,r,It.radius)}function bK(t,e,i,r){Eh(t,e,i,r),Lm(i,r,i,r)}function SK(t,e,i,r){Eh(t,e,i,r),Mh(i,r,i,r)}function Kwe(t,e,i,r,n){const s=Ga*t[e],o=Ga*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(h+a)*c*Math.cos(s),i[r++]=(h+a)*c*Math.sin(s),i[r++]=(h*(1-n.eccentricitySquared)+a)*l}function Mh(t,e,i,r){Kwe(t,e,i,r,It)}function Th(t,e,i,r){const n=mwe,s=t[e],o=t[e+1],a=t[e+2];let l,c,h,p,f,y,g,v,_,w,S,b,$,T,I,A,L,z,j,H,J;l=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),p=c+a*a,f=Math.sqrt(p),H=Math.atan2(o,s),y=a*a/p,g=c/p,T=n.a2/f,I=n.a3-n.a4/f,g>.3?(v=l/f*(1+g*(n.a1+T+y*I)/f),j=Math.asin(v),w=v*v,_=Math.sqrt(1-w)):(_=h/f*(1-y*(n.a5-T-g*I)/f),j=Math.acos(_),w=1-_*_,v=Math.sqrt(w)),S=1-It.eccentricitySquared*w,b=It.radius/Math.sqrt(S),$=n.a6*b,T=h-b*_,I=l-$*v,L=_*T+v*I,A=_*I-v*T,z=A/($/S+L),j+=z,J=L+A*z/2,a<0&&(j=-j),i[r++]=A0*H,i[r++]=A0*j,i[r]=J}function xK(t,e,i,r){Th(t,e,i,r),$h(i,r,i,r)}function $K(t,e,i,r){Th(t,e,i,r),Lm(i,r,i,r)}const Vo={[P.WGS84]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:wt,[P.WGS84_COMPARABLE_LON_LAT]:wt,[P.SPHERICAL_ECEF]:$h,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Lm,[P.PLATE_CARREE]:xh,[P.WGS84]:wt,[P.WGS84_ECEF]:Mh},[P.CGCS2000]:{[P.CGCS2000]:wt,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:wt,[P.WGS84_COMPARABLE_LON_LAT]:wt,[P.SPHERICAL_ECEF]:$h,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:xh,[P.WGS84]:null,[P.WGS84_ECEF]:Mh},[P.GCSMARS2000]:{[P.CGCS2000]:null,[P.GCSMARS2000]:wt,[P.GCSMOON2000]:null,[P.LON_LAT]:wt,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:IL,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.GCSMOON2000]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:wt,[P.LON_LAT]:wt,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:TL,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.WEB_MERCATOR]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:lm,[P.WGS84_COMPARABLE_LON_LAT]:lm,[P.SPHERICAL_ECEF]:gK,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:wt,[P.PLATE_CARREE]:wK,[P.WGS84]:lm,[P.WGS84_ECEF]:vK},[P.WGS84_ECEF]:{[P.CGCS2000]:Th,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Th,[P.WGS84_COMPARABLE_LON_LAT]:Th,[P.SPHERICAL_ECEF]:xK,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:$K,[P.PLATE_CARREE]:Gwe,[P.WGS84]:Th,[P.WGS84_ECEF]:wt},[P.SPHERICAL_ECEF]:{[P.CGCS2000]:Eh,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Eh,[P.WGS84_COMPARABLE_LON_LAT]:Eh,[P.SPHERICAL_ECEF]:wt,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:bK,[P.PLATE_CARREE]:Hwe,[P.WGS84]:Eh,[P.WGS84_ECEF]:SK},[P.SPHERICAL_MARS_PCPF]:{[P.CGCS2000]:null,[P.GCSMARS2000]:CL,[P.GCSMOON2000]:null,[P.LON_LAT]:CL,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:wt,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.SPHERICAL_MOON_PCPF]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:kL,[P.LON_LAT]:kL,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:wt,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.UNKNOWN]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:null,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:wt,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.LON_LAT]:{[P.CGCS2000]:wt,[P.GCSMARS2000]:wt,[P.GCSMOON2000]:wt,[P.LON_LAT]:wt,[P.WGS84_COMPARABLE_LON_LAT]:wt,[P.SPHERICAL_ECEF]:$h,[P.SPHERICAL_MARS_PCPF]:IL,[P.SPHERICAL_MOON_PCPF]:TL,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Lm,[P.PLATE_CARREE]:xh,[P.WGS84]:wt,[P.WGS84_ECEF]:Mh},[P.WGS84_COMPARABLE_LON_LAT]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:wt,[P.WGS84_COMPARABLE_LON_LAT]:wt,[P.SPHERICAL_ECEF]:$h,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:xh,[P.WGS84]:wt,[P.WGS84_ECEF]:Mh},[P.PLATE_CARREE]:{[P.CGCS2000]:Wf,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Wf,[P.WGS84_COMPARABLE_LON_LAT]:Wf,[P.SPHERICAL_ECEF]:qwe,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Wwe,[P.PLATE_CARREE]:wt,[P.WGS84]:Wf,[P.WGS84_ECEF]:Zwe}};function sj(t,e,i=oj()){return t==null||e==null?null:EK(t,e,i).projector}function EK(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const r=du(t,i.source),n=du(e,i.dest);return r===P.UNKNOWN&&n===P.UNKNOWN?Si(t,e)?i.projector=wt:i.projector=null:i.projector=Vo[r][n],i}function oj(){return{source:{spatialReference:null,spatialReferenceId:P.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:P.UNKNOWN,metersPerUnit:1},projector:wt}}const dv={spatialReference:null,spatialReferenceId:P.UNKNOWN},MK={spatialReference:null,spatialReferenceId:P.UNKNOWN},aj=oj(),Qwe=oj(),Ga=ife(1),A0=KW(1),Vt=Je(),Pa=Je(),Xc=Je(),We=Je(),nx=Je(),tBe=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:Ywe,canProjectWithoutEngine:cu,computeENUToSphericalPCPFLocalRotation:rj,computeSphericalPCPFToENULocalRotation:yK,computeTranslationToOriginAndRotation:Bwe,getProjectorName:Mwe,getTransformation:oK,getTransformations:xwe,initializeProjection:ij,isLoaded:zc,load:uu,localLinearScaleFactors:Uwe,lonLatToSphericalPCPF:Jwe,lonLatToWebMercatorComparable:_K,project:Jo,projectBoundingRect:zwe,projectBoundingSphere:Vwe,projectBuffer:cl,projectDirection:jwe,projectExtent:Owe,projectMany:$L,projectMultipoint:Iwe,projectOrLoad:Swe,projectOrLoadMany:sK,projectPoint:Twe,projectPointToVector:Fwe,projectPointToWGS84ComparableLonLat:Dwe,projectPolygon:Awe,projectPolygonToWGS84ComparableLonLat:Pwe,projectPolyline:kwe,projectPolylineToWGS84ComparableLonLat:Cwe,projectVectorToDehydratedPoint:Rwe,projectVectorToPoint:Lwe,projectVectorToVector:ML,projectVectorToWGS84ComparableLonLat:fK,projectWithoutEngine:lK,projectXYZToVector:EL,sphericalPCPFtoLonLatElevation:UT,test:Ewe,tryProjectWithZConversion:aK,unload:$we},Symbol.toStringTag,{value:"Module"}));var PL;let Ol=PL=class extends G{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new PL({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ol.prototype,"cols",void 0),u([d({type:Mt,json:{write:!0}})],Ol.prototype,"level",void 0),u([d({type:String,json:{write:!0}})],Ol.prototype,"levelValue",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ol.prototype,"origin",void 0),u([d({type:Number,json:{write:!0}})],Ol.prototype,"resolution",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ol.prototype,"rows",void 0),u([d({type:Number,json:{write:!0}})],Ol.prototype,"scale",void 0),Ol=PL=u([E("esri.layers.support.LOD")],Ol);const th=Ol;let Xwe=class{constructor(e,i,r,n,s=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=s}};var bd;const pz=new Ge({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Vr=bd=class extends G{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:n=_e.WebMercator,numLODs:s=24}=t;if(!Or(n)){const p=[];if(i)for(let f=0;f<i.length;f++){const y=i[f];p.push(new th({level:f,scale:y,resolution:y}))}else{let f=5e-4;for(let y=s-1;y>=0;y--)p.unshift(new th({level:y,scale:f,resolution:f})),f*=2}return new bd({dpi:96,lods:p,origin:new ce(0,0,n),size:[r,r],spatialReference:n})}const o=Go(n),a=t.origin?new ce({x:t.origin.x,y:t.origin.y,spatialReference:n}):new ce(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,c=1/(Ss(n)*39.37*l),h=[];if(i)for(let p=0;p<i.length;p++){const f=i[p],y=f*c;h.push(new th({level:p,scale:f,resolution:y}))}else{let p=zD(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const f=Math.ceil(s/e);h.push(new th({level:0,scale:p,resolution:p*c}));for(let y=1;y<f;y++){const g=p/2**e,v=g*c;h.push(new th({level:y,scale:g,resolution:v})),p=g}}return new bd({dpi:l,lods:h,origin:a,size:[r,r],spatialReference:n})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=Go(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return ce.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],n=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(s=>{r.push(s.scale),e=s.scale>e?s.scale:e,i=s.scale<i?s.scale:i,n[s.level]=s})),this._set("scales",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const n=e[r],s=e[r+1];if(n<=t)return r;if(s===t)return r+1;if(n>t&&s<t)return r+Math.log(n/t)/Math.log(n/s)}return r}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,r){const n=this.lodAt(t);if(!n)return null;let s,o;if(typeof e=="number")s=e,o=i;else if(Si(e.spatialReference,this.spatialReference))s=e.x,o=e.y,r=i;else{const c=A1(e,this.spatialReference);if(c==null)return null;s=c.x,o=c.y,r=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r=new Xwe(null,0,0,0,sl())),r.level=t,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=bd.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===bd.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<t.level&&(i=o)}if(!i)return;const r=t.level-i.level,n=i.resolution*this.size[0]/2**r,s=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=sl()),t.extent[0]=this.origin.x+t.col*n,t.extent[1]=this.origin.y-(t.row+1)*s,t.extent[2]=t.extent[0]+n,t.extent[3]=t.extent[1]+s}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],s=r*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*s,t[2]=t[0]+n,t[3]=t[1]+s,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return bd.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const s=this.lods[n],o=s.resolution*e;i.push(new th({level:s.level,scale:s.scale,resolution:o}))}return new bd({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};u([d({type:Number,json:{write:!0}})],Vr.prototype,"compressionQuality",void 0),u([d({type:Number,json:{write:!0}})],Vr.prototype,"dpi",void 0),u([d({type:String,json:{read:pz.read,write:pz.write,origins:{"web-scene":{read:!1,write:!1}}}})],Vr.prototype,"format",void 0),u([d({readOnly:!0})],Vr.prototype,"isWrappable",null),u([d({type:ce,json:{write:!0}})],Vr.prototype,"origin",void 0),u([Q("origin")],Vr.prototype,"readOrigin",null),u([d({type:[th],value:null,json:{write:!0}})],Vr.prototype,"lods",null),u([d({readOnly:!0})],Vr.prototype,"scales",void 0),u([d({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Vr.prototype,"size",void 0),u([Q("size",["rows","cols"])],Vr.prototype,"readSize",null),u([ie("size",{cols:{type:Mt},rows:{type:Mt}})],Vr.prototype,"writeSize",null),u([d({type:_e,json:{write:!0}})],Vr.prototype,"spatialReference",void 0),Vr=bd=u([E("esri.layers.support.TileInfo")],Vr),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Vr||(Vr={}));const ebe=Vr,J$={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Hk={xsmall:544,small:768,medium:992,large:1200};function tbe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function qk(t,e){return e?J$[t].valueToClassName[e].split(" "):[]}const ibe=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Kr,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Hk}initialize(){this._breakpointsHandles.add(D(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),me))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Ue(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=tbe(i);if(!r){const n=JSON.stringify(Hk,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:Hk,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=jn.acquire(),r=jn.acquire();let n,s=!1;for(n in J$){const o=this[n],a=J$[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,qk(n,o).forEach(l=>r.push(l)),qk(n,a).forEach(l=>i.push(l)))}s&&(this._applyClassNameChanges(i,r),jn.release(i),jn.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(s=>n.classList.remove(s)),i.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in J$)qk(r,this[r]).forEach(n=>i.classList.remove(n))}};return u([d()],e.prototype,"breakpoints",null),u([d()],e.prototype,"orientation",void 0),u([d()],e.prototype,"widthBreakpoint",void 0),u([d()],e.prototype,"heightBreakpoint",void 0),e=u([E("esri.views.BreakpointsOwner")],e),e};function lj(t){return typeof t=="string"?document.getElementById(t):t??null}function TK(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function fz(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function mz(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let um=class extends X{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Kr,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,r={}){return this._installWatch(e,i,r,D)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Ai)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this._handles.add([_i(e,"after-changes",this._createSyncUpdatingCallback(),ul),_i(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),Et(()=>this._handles.remove(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(sx)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this._handles.remove(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this._handles.add(o,s),Et(()=>this._handles.remove(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=D(e,r,{sync:!0,equals:()=>!1});return this._handles.add(n,i),n}_createSyncUpdatingCallback(){return()=>{this._handles.remove(sx),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(J0(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(sx))}),sx)}}};u([d({readOnly:!0})],um.prototype,"updating",void 0),um=u([E("esri.core.support.WatchUpdatingTracking")],um);const sx=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var rbe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},kf={exports:{}},xi={},i1={exports:{}},Wm={};function IK(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function nbe(t,e,i){}function sbe(t,e,i){}var obe=/javascript\s*\:/img;function abe(t,e){return obe.test(e)?"":e}Wm.whiteList=IK();Wm.getDefaultWhiteList=IK;Wm.onAttr=nbe;Wm.onIgnoreAttr=sbe;Wm.safeAttrValue=abe;var lbe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},Wv=lbe;function ube(t,e){t=Wv.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function a(){if(!r){var h=Wv.trim(t.slice(n,s)),p=h.indexOf(":");if(p!==-1){var f=Wv.trim(h.slice(0,p)),y=Wv.trim(h.slice(p+1));if(f){var g=e(n,o.length,f,y,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return Wv.trim(o)}var cbe=ube,ox=Wm,dbe=cbe;function yz(t){return t==null}function hbe(t){var e={};for(var i in t)e[i]=t[i];return e}function kK(t){t=hbe(t||{}),t.whiteList=t.whiteList||ox.whiteList,t.onAttr=t.onAttr||ox.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||ox.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||ox.safeAttrValue,this.options=t}kK.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=dbe(t,function(l,c,h,p,f){var y=r[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(p):y instanceof RegExp&&(g=y.test(p)),g!==!0&&(g=!1),p=o(h,p),!!p){var v={position:c,sourcePosition:l,source:f,isWhite:g};if(g){var _=n(h,p,v);return yz(_)?h+":"+p:_}else{var _=s(h,p,v);if(!yz(_))return _}}});return a};var pbe=kK;(function(t,e){var i=Wm,r=pbe;function n(o,a){var l=new r(a);return l.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(i1,i1.exports);var uj={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},fbe=i1.exports.FilterCSS,mbe=i1.exports.getDefaultWhiteList,X2=uj;function CK(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var PK=new fbe;function ybe(t,e,i){}function gbe(t,e,i){}function vbe(t,e,i){}function _be(t,e,i){}function AK(t){return t.replace(bbe,"&lt;").replace(Sbe,"&gt;")}function wbe(t,e,i,r){if(i=NK(i),e==="href"||e==="src"){if(i=X2.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(ax.lastIndex=0,ax.test(i))return""}else if(e==="style"){if(gz.lastIndex=0,gz.test(i)||(vz.lastIndex=0,vz.test(i)&&(ax.lastIndex=0,ax.test(i))))return"";r!==!1&&(r=r||PK,i=r.process(i))}return i=jK(i),i}var bbe=/</g,Sbe=/>/g,xbe=/"/g,$be=/&quot;/g,Ebe=/&#([a-zA-Z0-9]*);?/gim,Mbe=/&colon;?/gim,Tbe=/&newline;?/gim,ax=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,gz=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,vz=/u\s*r\s*l\s*\(.*/gi;function OK(t){return t.replace(xbe,"&quot;")}function LK(t){return t.replace($be,'"')}function RK(t){return t.replace(Ebe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function FK(t){return t.replace(Mbe,":").replace(Tbe," ")}function DK(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return X2.trim(e)}function NK(t){return t=LK(t),t=RK(t),t=FK(t),t=DK(t),t}function jK(t){return t=OK(t),t=AK(t),t}function Ibe(){return""}function kbe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:X2.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return X2.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function Cbe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function Pbe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}xi.whiteList=CK();xi.getDefaultWhiteList=CK;xi.onTag=ybe;xi.onIgnoreTag=gbe;xi.onTagAttr=vbe;xi.onIgnoreTagAttr=_be;xi.safeAttrValue=wbe;xi.escapeHtml=AK;xi.escapeQuote=OK;xi.unescapeQuote=LK;xi.escapeHtmlEntities=RK;xi.escapeDangerHtml5Entities=FK;xi.clearNonPrintableCharacter=DK;xi.friendlyAttrValue=NK;xi.escapeAttrValue=jK;xi.onIgnoreTagStripAll=Ibe;xi.StripTagBody=kbe;xi.stripCommentTag=Cbe;xi.stripBlankChar=Pbe;xi.cssFilter=PK;xi.getDefaultCSSWhiteList=mbe;var BT={},ih=uj;function Abe(t){var e=ih.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=ih.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Obe(t){return t.slice(0,2)==="</"}function Lbe(t,e,i){var r="",n=0,s=!1,o=!1,a=0,l=t.length,c="",h="";e:for(a=0;a<l;a++){var p=t.charAt(a);if(s===!1){if(p==="<"){s=a;continue}}else if(o===!1){if(p==="<"){r+=i(t.slice(n,a)),s=a,n=a;continue}if(p===">"){r+=i(t.slice(n,s)),h=t.slice(s,a+1),c=Abe(h),r+=e(s,r.length,c,h,Obe(h)),n=a+1,s=!1;continue}if(p==='"'||p==="'")for(var f=1,y=t.charAt(a-f);y.trim()===""||y==="=";){if(y==="="){o=p;continue e}y=t.charAt(a-++f)}}else if(p===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var Rbe=/[^a-zA-Z0-9\\_:.-]/gim;function Fbe(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function a(f,y){if(f=ih.trim(f),f=f.replace(Rbe,"").toLowerCase(),!(f.length<1)){var g=e(f,y||"");g&&n.push(g)}}for(var l=0;l<o;l++){var c=t.charAt(l),h,p;if(s===!1&&c==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:Nbe(t,l+1);continue}if(s!==!1&&l===r){if(p=t.indexOf(c,l+1),p===-1)break;h=ih.trim(t.slice(r+1,p)),a(s,h),s=!1,l=p,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(p=Dbe(t,l),p===-1){h=ih.trim(t.slice(i,l)),a(h),s=!1,i=l+1;continue}else{l=p-1;continue}else if(p=jbe(t,l-1),p===-1){h=ih.trim(t.slice(i,l)),h=_z(h),a(s,h),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,_z(ih.trim(t.slice(i))))),ih.trim(n.join(" "))}function Dbe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Nbe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function jbe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Vbe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function _z(t){return Vbe(t)?t.substr(1,t.length-2):t}BT.parseTag=Lbe;BT.parseAttr=Fbe;var zbe=i1.exports.FilterCSS,Aa=xi,VK=BT,Ube=VK.parseTag,Bbe=VK.parseAttr,K$=uj;function lx(t){return t==null}function Gbe(t){var e=K$.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=K$.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=K$.trim(t.slice(0,-1))),{html:t,closing:i}}function Hbe(t){var e={};for(var i in t)e[i]=t[i];return e}function qbe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function zK(t){t=Hbe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Aa.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=qbe(t.whiteList||t.allowList):t.whiteList=Aa.whiteList,t.onTag=t.onTag||Aa.onTag,t.onTagAttr=t.onTagAttr||Aa.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Aa.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Aa.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Aa.safeAttrValue,t.escapeHtml=t.escapeHtml||Aa.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new zbe(t.css))}zK.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=Aa.stripBlankChar(t)),i.allowCommentTag||(t=Aa.stripCommentTag(t));var p=!1;i.stripIgnoreTagBody&&(p=Aa.StripTagBody(i.stripIgnoreTagBody,s),s=p.onIgnoreTag);var f=Ube(t,function(y,g,v,_,w){var S={sourcePosition:y,position:g,isClosing:w,isWhite:Object.prototype.hasOwnProperty.call(r,v)},b=n(v,_,S);if(!lx(b))return b;if(S.isWhite){if(S.isClosing)return"</"+v+">";var $=Gbe(_),T=r[v],I=Bbe($.html,function(A,L){var z=K$.indexOf(T,A)!==-1,j=o(v,A,L,z);return lx(j)?z?(L=l(v,A,L,h),L?A+'="'+L+'"':A):(j=a(v,A,L,z),lx(j)?void 0:j):j});return _="<"+v,I&&(_+=" "+I),$.closing&&(_+=" /"),_+=">",_}else return b=s(v,_,S),lx(b)?c(_):b},c);return p&&(f=p.remove(f)),f};var Wbe=zK;(function(t,e){var i=xi,r=BT,n=Wbe;function s(a,l){var c=new n(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(kf,kf.exports);var Zbe=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):kf.exports.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(s){s==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new kf.exports.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?kf.exports.escapeAttrValue(e):!s&&!n?kf.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):kf.exports.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,i);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(rbe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],h=r.validate(c,i);return h.isValid?a[l]=c:(n=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const GT=new Map;function UK(){GT.clear()}function Ybe(t){return GT.get(t)}function Jbe(t,e){GT.set(t,e)}function Wk(t){GT.delete(t)}var Rm,O0,Kbe=function(t){if("WebkitTransition"in t.style)Rm="webkitTransitionEnd",O0="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");Rm="transitionend",O0="animationend"}},BK=function(t){Rm||Kbe(t)},Qbe=function(t,e){return e===void 0&&(e=t+"-active"),function(i){BK(i);var r=!1,n=function(s){r||(r=!0,i.removeEventListener(Rm,n),i.removeEventListener(O0,n),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(Rm,n),i.addEventListener(O0,n),requestAnimationFrame(function(){i.classList.add(e)})}},Xbe=function(t,e){return e===void 0&&(e=t+"-active"),function(i,r){BK(i);var n=!1,s=function(o){n||(n=!0,i.removeEventListener(Rm,s),i.removeEventListener(O0,s),r())};i.classList.add(t),i.addEventListener(Rm,s),i.addEventListener(O0,s),requestAnimationFrame(function(){i.classList.add(e)})}};const e1e=U.getLogger("esri.widgets.support.widgetUtils");function cj(t){const e=jn.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return jn.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;UK();for(const s of r)(n=t.get(s.target))==null||n(s)}),i=(r,n,s)=>(t.has(r)&&e1e.error("Already observing element",r),t.set(r,n),e.observe(r,s),Et(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let o=null;return D(()=>typeof r=="function"?r():r,a=>{o==null||o.remove(),a&&(o=i(a,n,s))},yn)}})();function Fc(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function wz(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function mc(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function t1e(t,e){return(t==="enter"?Qbe:Xbe)(e)}const i1e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],r1e=i1e.reduce((t,e)=>(t[e]=[],t),{}),n1e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],GK=new Zbe({whiteList:r1e,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(n1e.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function s1e(t,e){const i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i.top+i.height,s=r.top+r.height,o=i.top,a=r.top;(n>s||o<a)&&t.scrollIntoView({block:"end"})}function HK(t){return t==="Enter"||t===" "}const qK="http://www.w3.org/",HT=`${qK}2000/svg`,WK=`${qK}1999/xlink`;let bz=[],dj=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},hj=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),ZK=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},o1e=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(hj(t[r],e))return r}return-1},Zk=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(hj(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},a1e=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},AL=[],OL=!1,YK=t=>{(t.children||[]).forEach(YK),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},Sz=()=>{OL=!1,AL.forEach(YK),AL.length=0},xz=t=>{AL.push(t),OL||(OL=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Sz,{timeout:16}):setTimeout(Sz,16))},$z=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),xz(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),xz(t))},l1e=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")LL(t,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let p=0;p<h;p++){let f=c[p];l[f]&&t.classList.add(f)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let p=0;p<h;p++){let f=c[p],y=l[f];y&&(ZK(y),i.styleApplyer(t,f,y))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&function(){let h=l;l=function(p){h.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),t[a]=l):i.namespace===HT?a==="href"?t.setAttributeNS(WK,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=GK.sanitize(l):JK(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function JK(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let eM,u1e=(t,e,i)=>{if(e)for(let r of e)Ig(r,t,void 0,i)},KK=(t,e,i)=>{u1e(t,e.children,i),e.text&&(t.textContent=e.text),l1e(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Ig=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(s-1),p=o.slice(s,l);h==="."?n.classList.add(p):h==="#"?n.id=p:(p==="svg"&&(r=dj(r,{namespace:HT})),r.namespace!==void 0?n=t.domNode=a.createElementNS(r.namespace,p):(n=t.domNode=t.domNode||a.createElement(p),p==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}KK(n,t,r)}},LL=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},c1e=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=i[l],h=e[l];if(l==="class")h!==c&&(LL(t,h,!1),LL(t,c,!0));else if(l==="classes"){let p=t.classList,f=Object.keys(c),y=f.length;for(let g=0;g<y;g++){let v=f[g],_=!!c[v];_!==!!h[v]&&(n=!0,_?p.add(v):p.remove(v))}}else if(l==="styles"){let p=Object.keys(c),f=p.length;for(let y=0;y<f;y++){let g=p[y],v=c[g];v!==h[g]&&(n=!0,v?(ZK(v),r.styleApplyer(t,g,v)):r.styleApplyer(t,g,""))}}else if(c||typeof h!="string"||(c=""),l==="value"){let p=t[l];p!==c&&(t["oninput-value"]?p===t["oninput-value"]:c!==h)&&(t[l]=c,t["oninput-value"]=void 0),c!==h&&(n=!0)}else if(c!==h){let p=typeof c;p==="function"&&r.eventHandlerInterceptor||(r.namespace===HT?l==="href"?t.setAttributeNS(WK,l,c):t.setAttribute(l,c):p==="string"?l==="innerHTML"?t[l]=GK.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):JK(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),n=!0)}}return n},d1e=(t,e,i,r,n)=>{if(i===r)return!1;r=r||bz;let s,o=(i=i||bz).length,a=r.length,l=0,c=0,h=!1;for(;c<a;){let p=l<o?i[l]:void 0,f=r[c];if(p!==void 0&&hj(p,f))h=eM(p,f,n)||h,l++;else{let y=o1e(i,f,l+1);if(y>=0){for(s=l;s<y;s++)$z(i[s]),Zk(i,s,t,"removed");h=eM(i[y],f,n)||h,l=y+1}else Ig(f,e,l<o?i[l].domNode:void 0,n),a1e(f),Zk(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)$z(i[s]),Zk(i,s,t,"removed");return h};eM=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=dj(i,{namespace:HT})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=d1e(e,r,t.children,e.children,i)||s,s=c1e(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let Zv=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,eM(r,i,e)},domNode:t.domNode});const h1e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let My=t=>dj(h1e,t),Ih={create:(t,e)=>(e=My(e),Ig(t,document.createElement("div"),void 0,e),Zv(t,e)),append:(t,e,i)=>(i=My(i),Ig(e,t,void 0,i),Zv(e,i)),insertBefore:(t,e,i)=>(i=My(i),Ig(e,t.parentNode,t,i),Zv(e,i)),merge:(t,e,i)=>(i=My(i),e.domNode=t,KK(t,e,i),Zv(e,i)),replace:(t,e,i)=>(i=My(i),Ig(e,t.parentNode,t,i),t.parentNode.removeChild(t),Zv(e,i))},QK,p1e=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};QK=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let f1e=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?QK(i.children,n=>n.domNode===r):void 0}),i},m1e=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=p1e(n.currentTarget,s.domNode);o.reverse();let a,l=f1e(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},RL=t=>{let e,i,r=My(t),n=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(p,f,y)=>{let g,v=()=>g;r.eventHandlerInterceptor=m1e(e,v,n),g=p(f,y(),r),a.push(g),l.push(y)},h=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let p=0;p<a.length;p++){let f=l[p]();n("rendered",void 0),a[p].update(f),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(p,f)=>{c(Ih.append,p,f)},insertBefore:(p,f)=>{c(Ih.insertBefore,p,f)},merge:(p,f)=>{c(Ih.merge,p,f)},replace:(p,f)=>{c(Ih.replace,p,f)},detach:p=>{for(let f=0;f<l.length;f++)if(l[f]===p)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},Sd=class extends X{constructor(){super(...arguments),this.items=new se,this._watchUpdatingTracking=new um,this._callbacks=new Map,this._projector=RL(),this._hiddenProjector=RL()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([d({readOnly:!0})],Sd.prototype,"surface",void 0),u([d({readOnly:!0})],Sd.prototype,"items",void 0),u([d({readOnly:!0})],Sd.prototype,"needsRender",null),u([d({readOnly:!0})],Sd.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],Sd.prototype,"updating",null),Sd=u([E("esri.views.overlay.ViewOverlay")],Sd);const Ez=Sd,Yk=[0,0];function y1e(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return Yk[0]=i.left+((e==null?void 0:e.pageXOffset)??0),Yk[1]=i.top+((e==null?void 0:e.pageYOffset)??0),Yk}function Mz(t){t&&(TK(t),t.parentNode&&t.parentNode.removeChild(t))}function g1e(t){const e=document.createElement("div");return t.appendChild(e),e}const Yv=16,ux=750,v1e=512,_1e=2,w1e=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:Yv,time:ux},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([D(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),D(()=>this.navigating,r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([D(()=>this.ui,(i,r)=>this._handleUIChange(i,r),me),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Ue(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=lj(i);if(n||typeof i!="string"||U.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Mz(this.root),this._set("root",null)),this.userContent&&(mz(this.userContent,r),Mz(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",mz(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new Ez;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(D(()=>l.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=b0({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=zt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const s=this.position;return i-=s?s[0]:0,r-=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const s=this.position;return i+=s?s[0]:0,r+=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(D(()=>this.root,n=>{i.container=n?g1e(n):null},me),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Yv,i.time=ux,this.addHandles([(()=>{const r=()=>{i.freq=Yv,i.time=ux};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),b0({prepare:r=>{const n=this._measure(),s=this._freqInfo;if(s.time+=r.deltaTime,n&&(s.freq=Yv,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?Yv:Math.min(ux,s.freq*_1e),!n&&s.freq>=v1e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&y1e(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([d()],e.prototype,"container",null),u([d({readOnly:!0})],e.prototype,"focused",null),u([d({readOnly:!0})],e.prototype,"height",void 0),u([d({type:Ez})],e.prototype,"overlay",void 0),u([d({readOnly:!0})],e.prototype,"position",void 0),u([d({readOnly:!0})],e.prototype,"resizing",void 0),u([d({readOnly:!0})],e.prototype,"root",void 0),u([d({value:null,readOnly:!0})],e.prototype,"size",null),u([d({readOnly:!0})],e.prototype,"surface",void 0),u([d({readOnly:!0})],e.prototype,"suspended",void 0),u([d()],e.prototype,"ui",void 0),u([d({readOnly:!0})],e.prototype,"userContent",void 0),u([d({readOnly:!0})],e.prototype,"width",void 0),u([d()],e.prototype,"widthBreakpoint",void 0),e=u([E("esri.views.DOMContainer")],e),e};function b1e(t,e,i){return Di(t.map((r,n)=>e.apply(i,[r,n])))}async function S1e(t,e,i){return(await Di(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function pj(t){return{ok:!0,value:t}}function fj(t){return{ok:!1,error:t}}function x1e(t){return t!=null&&t.ok===!0?t.value:null}function $1e(t){return t!=null&&t.ok===!1?t.error:null}async function qT(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return pj(await t)}catch(e){return fj(e)}}async function sBe(t){try{return pj(await t)}catch(e){return Wl(e),fj(e)}}function Z1(t,e){return new xd(t,e)}let xd=class extends X{get value(){return x1e(this._result)}get error(){return $1e(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=vs(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=pj(n),this._cleanup()},n=>{this._result=fj(n),this._cleanup()}),this._abortHandle=Ws(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=zt(this._abortHandle),this._abortController=null}};u([d()],xd.prototype,"value",null),u([d()],xd.prototype,"error",null),u([d()],xd.prototype,"finished",null),u([d()],xd.prototype,"promise",void 0),u([d()],xd.prototype,"_result",void 0),xd=u([E("esri.core.asyncUtils.ReactiveTask")],xd);const Tz=new Set;function E1e(t,e,i=!1){i&&Tz.has(e)||(i&&Tz.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function Ha(t,e,i={}){if(V("esri-deprecation-warnings")){const{moduleName:r}=i;ep(t,`Property: ${(r?r+"::":"")+e}`,i)}}function ep(t,e,i={}){if(V("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=e;r&&(a+=`
	🛠️ Replacement: ${r}`),n&&(a+=`
	⚙️ Version: ${n}`),s&&(a+=`
	🔗 See ${s} for more details.`),E1e(t,a,o)}}let M1e=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new Vq(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=yde(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)z4(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)z4(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}};const T1e=V("mac")?"Meta":"Ctrl",WT={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)WT[t]=String.fromCharCode(t);for(let t=1;t<25;t++)WT[111+t]=`F${t}`;for(let t=65;t<91;t++)WT[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function I1e(t){if(t.key!==void 0)return Va(t);const e=WT[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function k1e(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let C1e=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const Iz=U.getLogger("esri.views.input.InputHandler");let br=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?Iz.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new C1e(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const p=this._incoming[h.match.eventType];if(p){const f=p.indexOf(h);p.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new P1e(s,r,{onPause:a,onRemove:a,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new A1e(e,{onEmit:(r,n,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,n,s,o)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):Iz.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},P1e=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},A1e=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},O1e=class extends br{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},L1e=class{constructor(e,i){this._observable=new xT,this._value=e,this._equalityFunction=i}get value(){return Ce(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function tM(t,e=lq){return new L1e(t,e)}let R1e=class extends br{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=tM(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},vo=class extends X{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=T1e,this._latestPointerType="mouse",this._propertiesPool=new M1e({latestPointerLocation:N1e},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Rt.INTERNAL){if(this._nameToGroup[e])return void U.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void U.getLogger(this).error("Can't register a group of zero handlers");const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,h,p)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,p,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):U.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)k1e(a)||i.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{if(!r){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,r=!0}},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!(!o||!o.altKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new O1e((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new R1e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Rt.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Rt.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,c={event:new F1e(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new Kb,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:s}=e.events.pop(),o=n.data&&n.data.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(e.currentHandler=this._handlersPriority[s];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((r=(i=e.currentHandler).eventCallback)==null||r.call(i,n)),n.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new Kb;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>{this._onEventReceived(i,r)})},disablePointerCapture:e}}};u([d({readOnly:!0})],vo.prototype,"hasPendingInputs",null),u([d({constructOnly:!0})],vo.prototype,"eventSource",void 0),u([d({constructOnly:!0})],vo.prototype,"recognizers",void 0),u([d()],vo.prototype,"_latestPointerType",void 0),u([d()],vo.prototype,"latestPointerType",null),u([d()],vo.prototype,"multiTouchActive",null),u([d({readOnly:!0})],vo.prototype,"latestPointerLocation",void 0),u([d()],vo.prototype,"_paused",void 0),u([d({readOnly:!0})],vo.prototype,"updating",null),vo=u([E("esri.views.input.InputManager")],vo);let F1e=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=rh.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=rh.STOPPED}shouldStopPropagation(){return(this._propagationState&rh.STOPPED)!=0}async(e){this._propagationState|=rh.PAUSED;const i=(r,n)=>{this._propagationState&=~rh.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&rh.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var rh;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(rh||(rh={}));const Rt={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let D1e=class{};const N1e=D1e;function wl(t){return t!=null&&"open"in t&&"declaredClass"in t}function kz(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const j1e=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([D(()=>[this.ui,this.popup],([i,r],n)=>{const s="popup",o="manual";if(n){const[a,l]=n;a&&wl(l)&&(l.view=null,kz(l)&&a.remove(l,s))}i&&wl(r)&&(r.view=this,kz(r)&&i.add(r,{key:s,position:o,internal:!0}))},me),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!wl(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(wl(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),wl(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},Rt.WIDGET)]),Ci(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{O(()=>Promise.resolve().then(()=>x9),void 0)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){wl(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void U.getLogger(this).error(new C("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),wl(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),l=Promise.resolve(a),c=this._queryLayerPopupFeatures(s,o,r),h=c.map(p=>p.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:Uq([l,...h]).then(p=>Array.from(new Set(p.flat()))),promisesPerLayerView:c}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!wl(this.popup))return this._popupSetupTask=Z1(async r=>{const{default:n}=await O(()=>Promise.resolve().then(()=>x9),void 0);if(Tt(r),!this.popup||wl(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:n!=null?n.event:void 0,signal:n!=null?n.signal:void 0,defaultPopupTemplateEnabled:n!=null&&!!n.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(i,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:s,location:o}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:c}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:c,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(i,r){const n=await this.popupHitTest(i),s=n.results,o=n.mapPoint,a=s.filter(c=>c.type==="graphic"&&this._isValidPopupGraphic(c.graphic,r)),l=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(c=>c.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],s=new Map,o=r.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of i){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return u([d({cast(i){return!i||wl(i)||typeof i=="object"&&(i.open=r=>(ep(U.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),i.close=()=>(ep(U.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),u([d()],e.prototype,"popupEnabled",void 0),e=u([E("esri.views.PopupView")],e),e};async function XK(t,e){return await t.load(),V1e(t,e)}async function V1e(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):se.isCollection(o)?o.forEach(a=>r(a)):lu.isLoadable(o)&&i.push(o))};e(r);let n=null;if(await S1e(i,async s=>{const o=await qT(z1e(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function z1e(t){return"loadAll"in t&&typeof t.loadAll=="function"}let Du=class extends X{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&Qs(e)?U.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new C("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:r}=await O(()=>import("./resourceUtils-a03d410c.js"),[]);return r(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&Qs(e)&&(e=jN(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};u([d()],Du.prototype,"portalItem",void 0),u([d({type:String,value:null})],Du.prototype,"path",null),u([Re("path")],Du.prototype,"_castPath",null),u([d({type:String,readOnly:!0})],Du.prototype,"url",null),u([d({type:String,readOnly:!0})],Du.prototype,"cdnUrl",null),u([d({type:String,readOnly:!0})],Du.prototype,"itemRelativeUrl",null),Du=u([E("esri.portal.PortalItemResource")],Du);const U1e=Du;let B_=class extends X{constructor(e){super(e),this.created=null,this.rating=null}};u([d()],B_.prototype,"created",void 0),u([d()],B_.prototype,"rating",void 0),B_=u([E("esri.portal.PortalRating")],B_);const Jk=B_;var Zp;const B1e=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),G1e=new Set(["KML","GeoJson","CSV"]);let Pe=Zp=class extends K0(lu){static from(t){return dT(Zp,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new lt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,l=!1,c=!1,h=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":s?"featureshosted":h?"utilitynetwork":"features"):n=t==="map service"||t==="wms"||t==="wmts"?s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):n=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="360 vr experience"?"360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":t==="data pipeline"?"datapipelines":"maps",n?qe(i+n+r+".png"):null}get isLayer(){return this.type!=null&&B1e.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&Be&&!Be.findCredential(t)&&(t=Be._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=lr.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof Jk&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Jk({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:F(this.applicationProxies),avgRating:this.avgRating,categories:F(this.categories),created:F(this.created),culture:this.culture,description:this.description,extent:F(this.extent),groupCategories:F(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:F(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:F(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:F(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:F(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Zp({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const r of["tags","typeKeywords","categories"])t[r]=(i=t[r])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await Hr(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return Hr(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await Hr(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Jk(e)):null}fetchRelatedItems(t,e){return Hr(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Zp)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return Hr(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>Hr(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new C("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new C("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await Hr(e).signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new Zp({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")Gm(e)?r.query={data:e}:r.query={url:Ro(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new C("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await O(()=>import("./resourceUtils-a03d410c.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:r}=await O(()=>import("./resourceUtils-a03d410c.js"),[]);return t.portalItem=this,r(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await O(()=>import("./resourceUtils-a03d410c.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new C("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await O(()=>import("./resourceUtils-a03d410c.js"),[]);return e(this,t)}resourceFromPath(t){return new U1e({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:F(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:F(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:F(this.typeKeywords),url:this.url};return nq(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Zp({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};u([d({type:["private","shared","org","public"]})],Pe.prototype,"access",void 0),u([d()],Pe.prototype,"accessInformation",void 0),u([d({type:String})],Pe.prototype,"apiKey",void 0),u([d({json:{read:{source:"appProxies"}}})],Pe.prototype,"applicationProxies",void 0),u([d()],Pe.prototype,"avgRating",void 0),u([d()],Pe.prototype,"categories",void 0),u([d({type:Date})],Pe.prototype,"created",void 0),u([d()],Pe.prototype,"culture",void 0),u([d()],Pe.prototype,"description",void 0),u([d({readOnly:!0})],Pe.prototype,"displayName",null),u([d({type:lt})],Pe.prototype,"extent",void 0),u([Q("extent")],Pe.prototype,"readExtent",null),u([d()],Pe.prototype,"groupCategories",void 0),u([d({readOnly:!0})],Pe.prototype,"iconUrl",null),u([d()],Pe.prototype,"id",void 0),u([d({readOnly:!0})],Pe.prototype,"isLayer",null),u([d({type:Boolean,readOnly:!0})],Pe.prototype,"isOrgItem",void 0),u([d()],Pe.prototype,"itemControl",void 0),u([d({readOnly:!0})],Pe.prototype,"itemPageUrl",null),u([d({readOnly:!0})],Pe.prototype,"itemUrl",null),u([d()],Pe.prototype,"licenseInfo",void 0),u([d({type:Date})],Pe.prototype,"modified",void 0),u([d()],Pe.prototype,"name",void 0),u([d()],Pe.prototype,"numComments",void 0),u([d()],Pe.prototype,"numRatings",void 0),u([d()],Pe.prototype,"numViews",void 0),u([d()],Pe.prototype,"owner",void 0),u([d()],Pe.prototype,"ownerFolder",void 0),u([d({type:lr})],Pe.prototype,"portal",void 0),u([d()],Pe.prototype,"screenshots",void 0),u([d()],Pe.prototype,"size",void 0),u([d()],Pe.prototype,"snippet",void 0),u([d()],Pe.prototype,"sourceJSON",void 0),u([d({type:String})],Pe.prototype,"sourceUrl",void 0),u([d({type:String})],Pe.prototype,"spatialReference",void 0),u([d()],Pe.prototype,"tags",void 0),u([d()],Pe.prototype,"thumbnail",void 0),u([d({readOnly:!0})],Pe.prototype,"thumbnailUrl",null),u([d()],Pe.prototype,"title",void 0),u([d()],Pe.prototype,"type",void 0),u([d()],Pe.prototype,"typeKeywords",void 0),u([d({type:String,json:{read(t,e){var i;if(G1e.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],Pe.prototype,"url",void 0),u([d({readOnly:!0})],Pe.prototype,"userItemUrl",null),Pe=Zp=u([E("esri.portal.PortalItem")],Pe);const Zw=Pe,eQ=Object.freeze(Object.defineProperty({__proto__:null,default:Zw},Symbol.toStringTag,{value:"Module"}));async function H1e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await VT("esri/t9n/basemaps");return i[t]||i[e]}const FL={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return qe("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return qe("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return qe("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return qe("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return qe("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return qe("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return qe("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return qe("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return qe("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return qe("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return qe("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return qe("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return qe("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return qe("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return qe("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return qe("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function tQ(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}const wBe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function iQ(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function mj(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function bBe(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}async function yj(t,e){const i=Be==null?void 0:Be.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.substring(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await tt(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function q1e(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function L0(t){return t!=null&&typeof t=="object"&&"isTable"in t&&!!t.isTable}function hu(t){return q1e(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function W1e(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function ZT(t){return!!W1e(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const Z1e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Y1e=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function J1e(t){return t.layerContainerType==="basemap"?Z1e:t.layerContainerType==="operational-layers"?Y1e:null}function K1e(t,e){if(e.restrictedWebMapWriting){const i=J1e(e);return i==null||i.has(t.type)&&!mj(t)}return!0}function Q1e(t,e){if(e)if(mj(t)){const i=E1("featureCollection.layers",e),r=i&&i[0]&&i[0].layerDefinition;r&&Cz(t,r)}else t.type!=="group"&&Cz(t,e)}function Cz(t,e){"maxScale"in t&&(e.maxScale=$2(t.maxScale)??void 0),"minScale"in t&&(e.minScale=$2(t.minScale)??void 0)}function X1e(t,e){if(Q1e(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=$2(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(mj(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function Pz(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new C("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(K1e(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&X1e(t,e=F(e)),e}var Q$;let eSe=0;const rQ="esri.Basemap";let _o=Q$=class extends K0(lu){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+eSe++,this.baseLayers=new se,this.referenceLayers=new se;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&U.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{U.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const r of t)r.destroy();const e=this.referenceLayers.removeAll();for(const r of e)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Om(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=Pz(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&r.push(s)}),this.referenceLayers.forEach(n=>{const s=Pz(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&(n.type!=="scene"&&(s.isReference=!0),r.push(s))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",Om(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return XK(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>y2(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>y2(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new Q$({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=F(i);return r.url&&au(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&au(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;Tt(t);const r=[];if(e){const n=e.context?e.context.url:null;if(r.push(this._loadLayersFromJSON(e.data,n,t)),e.data.id&&!e.data.title){const s=e.data.id;r.push(H1e(s).then(o=>{o&&this.read({title:o},e.context)}))}}else i&&r.push(this._loadFromItem(i,t));await Promise.all(r)}async _loadLayersFromJSON(t,e,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,s=iSe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await O(()=>import("./layersCreator-1879518f.js"),["assets/layersCreator-1879518f.js","assets/lazyLayerLoader-6f51112c.js","assets/portalLayers-d7490272.js","assets/layersLoader-1720f8b7.js","assets/fetchService-2f2a79db.js","assets/jsonContext-53ff6760.js"]),a=[];if(Tt(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const l={context:{origin:s,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},c=f=>s==="web-scene"&&f.layerType==="ArcGISSceneServiceLayer"||f.isReference,h=o(this.baseLayers,t.baseMapLayers.filter(f=>!c(f)),l);a.push(h);const p=o(this.referenceLayers,t.baseMapLayers.filter(c),l);a.push(p)}await Di(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=_r(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:tSe[t.type||""]??"web-map",portal:t.portal||lr.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||lr.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}static fromId(t){const e=FL[t];if(!e)return null;if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),ep(U.getLogger(rQ),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Q$.fromJSON(e)}};u([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:se}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],_o.prototype,"baseLayers",null),u([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],_o.prototype,"id",void 0),u([d({type:Zw})],_o.prototype,"portalItem",void 0),u([d()],_o.prototype,"referenceLayers",null),u([d({readOnly:!0})],_o.prototype,"resourceInfo",void 0),u([d({type:_e})],_o.prototype,"spatialReference",void 0),u([d()],_o.prototype,"thumbnailUrl",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],_o.prototype,"title",void 0),u([ie("title")],_o.prototype,"writeTitle",null),_o=Q$=u([E(rQ)],_o);const tSe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},iSe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},iM=_o,rSe=Object.freeze(Object.defineProperty({__proto__:null,default:iM},Symbol.toStringTag,{value:"Module"}));function SBe(t){}function nSe(t){return()=>t}var DL;let X$=DL=class extends G{constructor(t){super(t),this.type="none"}clone(){return new DL({type:this.type})}};u([ye({none:"none",stayAbove:"stay-above"})],X$.prototype,"type",void 0),X$=DL=u([E("esri.ground.NavigationConstraint")],X$);var NL;let Nu=NL=class extends K0(lu){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new se;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&U.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{xn(t)||U.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",Om(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};nSe(s)().write(o,r)&&n.push(o)}else r&&r.messages&&r.messages.push(new C("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return XK(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await O(()=>import("./ElevationQuery-efae2e12.js"),[]);Tt(e);const r=new i,n=this.layers.filter(Az).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await O(()=>import("./ElevationQuery-efae2e12.js"),[]);Tt(e);const r=new i,n=this.layers.filter(Az).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:F(this.surfaceColor),navigationConstraint:F(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new NL({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const r=e&&e.origin||"web-scene",n=e&&e.portal||null,s=e&&e.url||null;return O(()=>import("./layersCreator-1879518f.js"),["assets/layersCreator-1879518f.js","assets/lazyLayerLoader-6f51112c.js","assets/portalLayers-d7490272.js","assets/layersLoader-1720f8b7.js","assets/fetchService-2f2a79db.js","assets/jsonContext-53ff6760.js"]).then(({populateOperationalLayers:o})=>{Tt(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}return Di(a)}).then(()=>{})}};function sSe(t){return t&&"createElevationSampler"in t}function Az(t){return t.type==="elevation"||sSe(t)}u([d({json:{read:!1}})],Nu.prototype,"layers",null),u([ie("layers")],Nu.prototype,"writeLayers",null),u([d({readOnly:!0})],Nu.prototype,"resourceInfo",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Mt,read:{reader:Hb,source:"transparency"},write:{writer:(t,e)=>{e.transparency=OT(t)},target:"transparency"}}})],Nu.prototype,"opacity",void 0),u([d({type:ae,json:{type:[Mt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Nu.prototype,"surfaceColor",void 0),u([d({type:X$,json:{write:!0}})],Nu.prototype,"navigationConstraint",void 0),Nu=NL=u([E("esri.Ground")],Nu);const rM=Nu,oSe=[["binary","application/octet-stream","bin",""]];function xBe(t){return Y1((t==null?void 0:t.supportedFormats)??[]).flatMap(_j).map(e=>`.${e}`)}function $Be(t){const e={};for(const i of Y1((t==null?void 0:t.supportedFormats)??[])){const r=vj(i),n=_j(i).map(s=>`.${s}`);e[r]??(e[r]=[]),e[r].push(...n)}return[{description:"3D Models",accept:e}]}function aSe(t,e){return gj(cSe(t,e))}function lSe(t,e){return gj(dSe(t,e))}function EBe(t,e){return vj(uSe(t,e))}function Y1(t){return[...oSe,...t]}function uSe(t,e){return Y1(e).find(i=>gj(i)===t)}function cSe(t,e){return Y1(e).find(i=>vj(i)===t)}function dSe(t,e){const i=t.toLowerCase();return Y1(e).find(r=>_j(r).some(n=>i.endsWith(n)))}function gj(t){return t==null?void 0:t[0]}function vj(t){return t==null?void 0:t[1]}function _j(t){return(t==null?void 0:t[2].split(","))??[]}function MBe(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function YT(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=hu(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!ZT(t)||t.type==="scene"&&!hSe(t))}function hSe(t){const e=t.infoFor3D;if(!e)return!0;const{supportedFormats:i,queryFormats:r}=e,n=aSe("model/gltf-binary",i)??lSe("glb",i);return n!=null&&r.includes(n)}const Oz=U.getLogger("esri.support.basemapUtils");function pSe(){return{}}function fSe(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function mSe(t,e){let i;if(typeof t=="string"){if(!(t in FL)){const r=Object.entries(FL).filter(([n,s])=>Ye.apiKey&&!s.classic||!Ye.apiKey&&s.classic&&!s.deprecated).map(([n])=>`"${n}"`).join(", ");return Oz.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${r}`),null}e&&(i=e[t]),i||(i=iM.fromId(t),e&&(e[t]=i))}else i=Xt(iM,t);return i!=null&&i.destroyed&&(Oz.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function TBe(t,e){var i,r,n,s;return((r=(i=t.basemap)==null?void 0:i.referenceLayers)==null?void 0:r.some(o=>o.uid===e))||((s=(n=t.basemap)==null?void 0:n.baseLayers)==null?void 0:s.some(o=>o.uid===e))}function ySe(t){return new Jb({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function Kk(t){for(const e of t.values())e==null||e.destroy();t.clear()}const Lz={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function gSe(t){let e=null;if(typeof t=="string")if(t in Lz){const i=Lz[t];e=new rM({resourceInfo:{data:{layers:[i]}}})}else U.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Xt(rM,t);return e}async function vSe(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await O(()=>import("./portalLayers-d7490272.js"),["assets/portalLayers-d7490272.js","assets/lazyLayerLoader-6f51112c.js","assets/layersLoader-1720f8b7.js","assets/fetchService-2f2a79db.js","assets/jsonContext-53ff6760.js"]);try{return await i(e)}catch(r){const n=e&&e.portalItem,s=n&&n.id||"unset",o=n&&n.portal&&n.portal.url||Ye.portalUrl;throw U.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}let _Se=0,hr=class extends Vi.EventedMixin(jc(lu)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new lt(-180,-90,180,90,_e.WGS84),this.id=Date.now().toString(16)+"-layer-"+_Se++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=_e.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await O(()=>import("./arcgisLayers-10010aad.js"),["assets/arcgisLayers-10010aad.js","assets/fetchService-2f2a79db.js","assets/lazyLayerLoader-6f51112c.js"])).fromUrl(i)}static fromPortalItem(e){return vSe(e)}initialize(){this.when().catch(e=>{xn(e)||U.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return _r(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await tt(e,{query:{f:"json"},responseType:"json"})).data;throw new C("layer:no-attribution-data","Layer does not have attribution data")}};u([d({type:String})],hr.prototype,"attributionDataUrl",void 0),u([d({type:lt})],hr.prototype,"fullExtent",void 0),u([d({readOnly:!0})],hr.prototype,"hasAttributionData",null),u([d({type:String,clonable:!1})],hr.prototype,"id",void 0),u([d({type:Boolean,nonNullable:!0})],hr.prototype,"legendEnabled",void 0),u([d({type:["show","hide","hide-children"]})],hr.prototype,"listMode",void 0),u([d({type:Number,range:{min:0,max:1},nonNullable:!0})],hr.prototype,"opacity",void 0),u([d({clonable:!1})],hr.prototype,"parent",void 0),u([d({readOnly:!0})],hr.prototype,"parsedUrl",null),u([d({type:Boolean})],hr.prototype,"popupEnabled",void 0),u([d({type:Boolean})],hr.prototype,"attributionVisible",void 0),u([d({type:_e})],hr.prototype,"spatialReference",void 0),u([d({type:String})],hr.prototype,"title",void 0),u([d({readOnly:!0,json:{read:!1}})],hr.prototype,"type",void 0),u([d()],hr.prototype,"url",void 0),u([d({type:Boolean,nonNullable:!0})],hr.prototype,"visible",void 0),hr=u([E("esri.layers.Layer")],hr);const r1=hr;function jL(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=jL(r.layers,e,i),n))return n}}const wSe=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new se;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||U.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>r(o.item)),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Om(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof r1){const s=i;s.parent===this?this.reorder(s,r):n.add(s,r)}else Nc(i)?i.then(s=>{this.destroyed||this.add(s,r)}):U.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let s=n.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(i){return jL(this.layers,"id",i)}findLayerByUid(i){return jL(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return u([d()],e.prototype,"layers",null),e=u([E("esri.support.LayersMixin")],e),e};function VL(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=VL(s.tables,e,i);if(o)return o}}}const bSe=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new se,this.addHandles([this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&U.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Om(i,this._get("tables")))}findTableById(i){return VL(this.tables,"id",i)}findTableByUid(i){return VL(this.tables,"uid",i)}};return u([d()],e.prototype,"tables",null),e=u([E("esri.support.TablesMixin")],e),e};let Ll=class extends bSe(wSe(Vi.EventedMixin(X))){constructor(e){super(e),this.allLayers=new Jb({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=ySe(this),this.basemap=null,this.editableLayers=new Jb({getCollections:()=>[this.allLayers],itemFilterFunction:YT}),this.ground=new rM,this._basemapCache=pSe()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),fSe(this._basemapCache),this._basemapCache=null}castBasemap(e){return mSe(e,this._basemapCache)}castGround(e){return gSe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};u([d({readOnly:!0,dependsOn:[]})],Ll.prototype,"allLayers",void 0),u([d({readOnly:!0})],Ll.prototype,"allTables",void 0),u([d({type:iM})],Ll.prototype,"basemap",void 0),u([Re("basemap")],Ll.prototype,"castBasemap",null),u([d({readOnly:!0})],Ll.prototype,"editableLayers",void 0),u([d({type:rM,nonNullable:!0})],Ll.prototype,"ground",void 0),u([Re("ground")],Ll.prototype,"castGround",null),Ll=u([E("esri.Map")],Ll);const nQ=Ll,Rz={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},SSe={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function xSe(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function cm(t,e,i){const r=new Date(t.getTime());if(e&&i){const n=SSe[i],{getter:s,setter:o,multiplier:a}=n;if(i==="months"){const l=xSe(r.getFullYear(),r.getMonth()+e);r.getDate()>l&&r.setDate(l)}r[o](r[s]()+e*a)}return r}function Fz(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function $Se(t,e,i){return t===0?0:t*Rz[e]/Rz[i]}var ma;let Fs=ma=class extends G{static get allTime(){return Dz}static get empty(){return ESe}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(ma.allTime)}get isEmpty(){return this.equals(ma.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new ma({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,r=t.start!=null?t.start.getTime():t.start,n=t.end!=null?t.end.getTime():t.end;return e===r&&i===n}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=pc(this.start,r=>Fz(r,t)),i=pc(this.end,r=>{const n=Fz(r,t);return r.getTime()===n.getTime()?n:cm(n,1,t)});return new ma({start:e,end:i})}intersection(t){var a,l,c,h;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return ma.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((a=this.start)==null?void 0:a.getTime())??-1/0,i=((l=this.end)==null?void 0:l.getTime())??1/0,r=((c=t.start)==null?void 0:c.getTime())??-1/0,n=((h=t.end)==null?void 0:h.getTime())??1/0;let s,o;if(r>=e&&r<=i?s=r:e>=r&&e<=n&&(s=e),i>=r&&i<=n?o=i:n>=e&&n<=i&&(o=n),s!=null&&o!=null&&!isNaN(s)&&!isNaN(o)){const p=new ma;return p.start=s===-1/0?null:new Date(s),p.end=o===1/0?null:new Date(o),p}return ma.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new ma,{start:r,end:n}=this;return r!=null&&(i.start=cm(r,t,e)),n!=null&&(i.end=cm(n,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return Dz.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new ma({start:e,end:i})}};u([d({type:Date,json:{write:{allowNull:!0}}})],Fs.prototype,"end",void 0),u([Q("end")],Fs.prototype,"readEnd",null),u([ie("end")],Fs.prototype,"writeEnd",null),u([d({readOnly:!0,json:{read:!1}})],Fs.prototype,"isAllTime",null),u([d({readOnly:!0,json:{read:!1}})],Fs.prototype,"isEmpty",null),u([d({type:Date,json:{write:{allowNull:!0}}})],Fs.prototype,"start",void 0),u([Q("start")],Fs.prototype,"readStart",null),u([ie("start")],Fs.prototype,"writeStart",null),Fs=ma=u([E("esri.TimeExtent")],Fs);const Dz=new Fs,ESe=new Fs({start:void 0,end:void 0}),mu=Fs,Xr=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new Kr,this._updatingHandles=new um}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return u([d({readOnly:!0})],e.prototype,"handles",null),u([d({readOnly:!0})],e.prototype,"updatingHandles",null),e=u([E("esri.core.HandleOwner")],e),e};let R0=class extends Xr(X){};R0=u([E("esri.core.HandleOwner")],R0);let Yw=class extends Xr(se){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(se.ofType(this.itemType.Type))(e):new se(e)}};function zL(t,e){return{type:t,cast:mJ,set(i){const r=Om(i,this._get(e),t);r.owner=this,this._set(e,r)}}}u([d()],Yw.prototype,"owner",null),Yw=u([E("esri.core.support.OwningCollection")],Yw);var G_;const nM=$n()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),sQ=nM.jsonValues.slice();Nue(sQ,"orthometric");const Jw=$n()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ya=G_=class extends G{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return nM.write(t,e,i)}readHeightModel(t,e,i){return nM.read(t)||(i&&i.messages&&i.messages.push(MSe(t,{context:i})),null)}readHeightUnit(t,e,i){return Jw.read(t)||(i&&i.messages&&i.messages.push(Nz(t,{context:i})),null)}readHeightUnitService(t,e,i){return vW(t)||Jw.read(t)||(i&&i.messages&&i.messages.push(Nz(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new G_({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=_W(e);return new G_({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new G_;return e.read(t,{origin:"web-scene"}),e}};function Nz(t,e){return new Zo("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function MSe(t,e){return new Zo("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}u([d({type:nM.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:sQ,default:"ellipsoidal"}}}})],ya.prototype,"heightModel",void 0),u([ie("web-scene","heightModel")],ya.prototype,"writeHeightModel",null),u([Q(["web-scene","service"],"heightModel")],ya.prototype,"readHeightModel",null),u([d({type:Jw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Jw.jsonValues,write:Jw.write}}}})],ya.prototype,"heightUnit",void 0),u([Q("web-scene","heightUnit")],ya.prototype,"readHeightUnit",null),u([Q("service","heightUnit")],ya.prototype,"readHeightUnitService",null),u([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ya.prototype,"vertCRS",void 0),u([Q("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ya.prototype,"readVertCRS",null),ya=G_=u([E("esri.geometry.HeightModelInfo")],ya);const J1=ya;let sM=class extends Yw{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(U.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};sM=u([E("esri.support.AnalysesCollection")],sM);let dm=class extends Yw{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};u([sN({Type:fi,ensureType:Xt(fi)})],dm.prototype,"itemType",void 0),dm=u([E("esri.support.GraphicsCollection")],dm);const jz=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function TSe(t,e="system"){if(!t||!jz.has(t.timeZone))return e;const i=jz.get(t.timeZone);return kSe(t.timeZone)||t.respectsDaylightSaving?i:ISe(i)}function ISe(t){const e=$e.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${qr.instance(-i).formatOffset(0,"narrow")}`}function kSe(t){return t.startsWith("UTC")}let $d=class extends Ft(G){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:r,respectsDaylightSaving:n}=i;return{timeZone:r,respectsDaylightSaving:n}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:TSe(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return e!=null&&this.timeZone!=null&&e.timeZone!=null&&this.timeZone===e.timeZone}};u([d()],$d.prototype,"legacy",void 0),u([Q("legacy",["timeZone"])],$d.prototype,"readLegacy",null),u([d({type:String,nonNullable:!0})],$d.prototype,"timeZone",void 0),u([Q("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],$d.prototype,"readTimeZone",null),u([ie("timeZone")],$d.prototype,"writeTimeZone",null),$d=u([E("esri.time.TimeReference")],$d);const F0=$d;let Ed=class extends X{constructor(e){super(e),this.view=null,this.baseLayerViews=new se,this.referenceLayerViews=new se,this._loadingHandle=D(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},me)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r;if(this.view&&this.view.suspended)return!1;const e=(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};u([d({constructOnly:!0})],Ed.prototype,"view",void 0),u([d({readOnly:!0})],Ed.prototype,"baseLayerViews",void 0),u([d({readOnly:!0})],Ed.prototype,"referenceLayerViews",void 0),u([d({readOnly:!0})],Ed.prototype,"suspended",null),u([d({type:Boolean,readOnly:!0})],Ed.prototype,"updating",null),Ed=u([E("esri.views.BasemapView")],Ed);function CSe(t){return"tryRecycleWith"in t}let PSe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=bs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ws(this._controller.signal,()=>{const n=new C("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!CSe(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<e.length;n++){const s=e[n];if(s.type!==i)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(n,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Tt(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((c,h)=>Ws(this._controller.signal,()=>h(Ut())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s,o;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let a,l;if(await i.load({signal:e}),"prefetchResources"in i&&await((n=i.prefetchResources)==null?void 0:n.call(i,{signal:e})),OSe(i))a=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new C("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(i);Tt(e),a="default"in p?new p.default({layer:i,view:r}):new p({layer:i,view:r})}const c=()=>{l=zt(l),a.destroyed||a.destroy(),a.layer=null,a.parent=null,a.view=null,this.done=!0};l=Ws(e,c),Tt(e);try{await a.when()}catch(p){throw c(),p}if(!((o=(s=this._map)==null?void 0:s.allLayers)==null?void 0:o.includes(i)))return c(),void this._deferred.reject(new C("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=a,i.emit("layerview-create",{view:r,layerView:a}),r.emit("layerview-create",{layer:i,layerView:a}),this.done=!0,this._deferred.resolve(a)}catch(a){i.emit("layerview-create-error",{view:r,error:a}),r.emit("layerview-create-error",{layer:i,error:a}),this.done=!0,this._deferred.reject(new C("layerview:create-error","layerview creation failed",{layer:i,error:a}))}}},wo=class extends X{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new um,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=bs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(J0(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,c,h;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=p=>{if(p!=null){for(const f of p)if(f){r.add(f);const y=this._layerLayerViewInfoMap.get(f);y&&s?y.start():y||this._recyclingInfoMap.has(f)||n.push(f),"layers"in f&&f.layers&&o(f.layers)}}};for(const p of this._rootCollectionNames)o(this.get(p));for(const[p,f]of this._layerLayerViewInfoMap)if(!r.has(p)){this._layerLayerViewInfoMap.delete(f.layer);const y=f.tryRecycle(n);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(f.layer,f),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(f.layer),this._layerLayerViewInfoMap.set(f.layer,f),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(f.layer),f.destroy(),this._reschedule()})):f.destroy()}for(const[p,f]of this._recyclingInfoMap)r.has(p)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(f.layer),f.destroy());for(const p of n)this._createLayerView(p);this._refreshCollections();const a=[(l=i==null?void 0:i.ground)==null?void 0:l.layers,(c=i==null?void 0:i.basemap)==null?void 0:c.baseLayers,(h=i==null?void 0:i.basemap)==null?void 0:h.referenceLayers,i==null?void 0:i.layers].filter(p=>!!p);r.forEach(p=>"layers"in p&&a.push(p.layers)),this.addHandles(a.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([_i(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),D(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),yn)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Kk(this._recyclingInfoMap),Kk(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ut()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||M1(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(Kk(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new C("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o||!o.layerView)continue;const a=o.layerView;a.layer=s,a.parent=r,i.at(n)!==a&&i.splice(n,0,a),s.layers&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new PSe(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(xn(r)||r.name==="cancelled:layerview-create")||U.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([d()],wo.prototype,"_workPromise",void 0),u([d({readOnly:!0})],wo.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],wo.prototype,"_layersToLayerViews",null),u([d({readOnly:!0})],wo.prototype,"_rootCollectionNames",null),u([d()],wo.prototype,"layerViewImporter",void 0),u([d()],wo.prototype,"supportsGround",void 0),u([d({readOnly:!0})],wo.prototype,"updating",null),u([d({readOnly:!0})],wo.prototype,"updatingRemaining",null),u([d({constructOnly:!0})],wo.prototype,"view",void 0),wo=u([E("esri.views.LayerViewManager")],wo);const ASe=wo;function OSe(t){return"createLayerView"in t&&t.createLayerView!=null}let ks=class extends X{constructor(e){super(e),this.factor=1.5,this.offset=_n(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([d({type:Number})],ks.prototype,"factor",void 0),u([d({nonNullable:!0})],ks.prototype,"offset",void 0),u([d()],ks.prototype,"position",void 0),u([d({type:Number,range:{min:0}})],ks.prototype,"size",void 0),u([d()],ks.prototype,"maskUrl",void 0),u([d()],ks.prototype,"maskEnabled",void 0),u([d()],ks.prototype,"overlayUrl",void 0),u([d()],ks.prototype,"overlayEnabled",void 0),u([d({readOnly:!0})],ks.prototype,"version",null),u([d({type:Boolean})],ks.prototype,"visible",void 0),ks=u([E("esri.views.Magnifier")],ks);const oQ=ks;let LSe=class{constructor(){this._tasks=new Array,this._running=tM(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._running.value=!0,new Promise((n,s)=>this._tasks.push(new Vz(n,s,e,i,r)))}unshift(e,i,r){return this._running.value=!0,new Promise((n,s)=>this._tasks.unshift(new Vz(n,s,e,i,r)))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=to(i.signal);if(n&&!i.abortCallback)i.reject(Ut());else{const s=n?(r=i.abortCallback)==null?void 0:r.call(i,Ut()):i.callback(e);Nc(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(n){i.reject(n)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=Ut();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},Vz=class{constructor(e,i,r,n=void 0,s=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}},H_=class extends X{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([d()],H_.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([d()],H_.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),H_=u([E("esri.views.support.DebugFlags")],H_);const RSe=new H_;var Rs;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(Rs||(Rs={}));var UL,je;(function(t){t[t.YIELD=1]="YIELD"})(UL||(UL={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(je||(je={}));const ql=0,zz=new Map([[je.RESOURCE_CONTROLLER_IMMEDIATE,ql],[je.RESOURCE_CONTROLLER,4],[je.SLIDE,ql],[je.STREAM_DATA_LOADER,ql],[je.ELEVATION_QUERY,ql],[je.TERRAIN_SURFACE,1],[je.SURFACE_GEOMETRY_UPDATES,1],[je.LOD_RENDERER,2],[je.GRAPHICS_CORE,2],[je.I3S_CONTROLLER,2],[je.POINT_CLOUD_LAYER,2],[je.FEATURE_TILE_FETCHER,2],[je.OVERLAY,4],[je.STAGE,4],[je.GRAPHICS_DECONFLICTOR,4],[je.FILTER_VISIBILITY,4],[je.SCALE_VISIBILITY,4],[je.FRUSTUM_VISIBILITY,4],[je.CLOUDS_GENERATOR,4],[je.POINT_OF_INTEREST_FREQUENT,6],[je.POINT_OF_INTEREST_INFREQUENT,30],[je.LABELER,8],[je.FEATURE_QUERY_ENGINE,8],[je.FEATURE_TILE_TREE,16],[je.FEATURE_TILE_TREE_ACTIVE,ql],[je.ELEVATION_ALIGNMENT,12],[je.TEXT_TEXTURE_ATLAS,12],[je.TEXTURE_UNLOAD,12],[je.LINE_OF_SIGHT_TOOL,16],[je.LINE_OF_SIGHT_TOOL_INTERACTIVE,ql],[je.SNAPPING,ql],[je.SHADOW_ACCUMULATOR,30]]);function Uz(t){return zz.has(t)?zz.get(t):typeof t=="number"?t:1}const Bz=6.5,Gz=1,FSe=30,Hz=1e3/30,qz=100,Wz=.9;var BL,_p;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=tM(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Fw("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Rs.INTERACTING,this._tasks=new em,this._runQueue=new em,this._load=0,this._idleStateCallbacks=new em,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=D(()=>RSe.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,me);for(const o of Object.keys(je))this.performanceInfo.tasks.set(je[o],new Fw(je[o]));const s=this;this._test={FRAME_SAFETY_BUDGET:Bz,INTERACTING_BUDGET:Hz,IDLE_BUDGET:qz,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),zt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=Uz(s),l=new i(this,s,o,a);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new Fw(s)),l}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===Rs.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===Rs.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Rs.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test.usedBudget=0,++this._frameNumber;let o=Bz,a=s.frameDuration,l=Gz;switch(this.state){case Rs.IDLE:o=0,a=Math.max(qz,s.frameDuration),l=FSe;break;case Rs.INTERACTING:a=Math.max(Hz,s.frameDuration);case Rs.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==Rs.IDLE&&a<Gz&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Rs.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Rs.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return _p.SCHEDULED;let o=_p.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=_p.READY:o!==_p.READY&&(o=_p.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*Wz+s*(1-Wz)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===ql&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==ql&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===UL.YIELD&&(a.blockFrame=this._frameNumber)}catch(c){U.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,c)}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,je.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._debug&&l>2*this._budget.budget&&console.log("Task",a.name,"used",l,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(je))this._frameTaskTimes.set(je[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a,l){this._scheduler=s,this.name=o,this._basePriority=l,this.blockFrame=0,this.runtime=0,this._queue=new LSe,this._handles=new Kr,this.schedulePriority=this._basePriority,this._task=tM(a??this._queue),this._handles.add(Ai(()=>this.task.running,c=>s.taskRunningChanged(c)))}remove(){this.processQueue(aQ),this._scheduler.removeTask(this),this.schedule=GL.schedule,this.reschedule=GL.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const o=Uz(s);this._basePriority!==ql&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){this._queue.runTask(s)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Rs.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(BL||(BL={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(_p||(_p={}));const aQ=(()=>{const t=new BL.Budget;return t.enabled=!1,t})();let DSe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(to(i)){const n=Ut();return r?Promise.resolve(r(n)):Promise.reject(n)}return FA(e(aQ))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const GL=new DSe;let q_=class extends X{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(je.TEXTURE_UNLOAD))??GL}normalizeCtorArgs(){return{}}destroy(){var e,i,r;super.destroy(),(e=this._frameTask)==null||e.remove(),(i=this._textureRequests)==null||i.forEach(n=>this._releaseTextureRequest(n)),(r=this._textureRequests)==null||r.clear()}get updating(){return this._frameTask.updating}fromData(e,i,r){var o,a;const n=this.makeUid(e);let s=this._textureRequests.get(n);if(!s){const l=new NSe(r);l.texture=i(),(o=this._stage)==null||o.add(l.texture),(a=this._stage)==null||a.loadImmediate(l.texture),this._textureRequests.set(n,l),s=l}return s.referenceCount++,{uid:n,texture:s.texture,release:()=>this._release(n)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return i!=null?`${e}.${i}px`:e}};u([d()],q_.prototype,"_frameTask",void 0),u([d()],q_.prototype,"updating",null),q_=u([E("esri.views.3d.support.TextureCollection")],q_);let NSe=class{constructor(e){this.onRemove=e,this.referenceCount=0}};var Zz;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(Zz||(Zz={}));const lQ=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],uQ={};function cQ(t){return!!uQ[t]}function jSe(t){for(const e of t)if(!cQ(e))return!1;return!0}lQ.forEach(t=>{uQ[t]=!0});let VSe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!jSe(s))return s.some(cQ)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??Rt.DEFAULT;const l=this._createUniqueGroupName(),c=new zSe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:n});for(const h of s){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),{remove:()=>this._removeHandler(l,s)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},zSe=class extends br{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",r,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:_n(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(_n(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:p}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:f,pointerType:o,button:a,buttons:c,radius:i.radius,angle:KW(i.angle),native:l,timestamp:p,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:r,native:n}=e.data,{cancelable:s,timestamp:o}=e;return{type:"key-down",key:i,repeat:r,native:n,timestamp:o,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:r}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-up",key:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:r,y:n,button:s,buttons:o,native:a,eventId:l}=e.data,c=a.pointerId,h=a.pointerType,{cancelable:p,timestamp:f}=e;return{type:i,x:r,y:n,pointerId:c,pointerType:h,button:s,buttons:o,native:a,timestamp:f,eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:r,buttons:n,native:s,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,l=e.data.startEvent.native.pointerId,c=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:y}=e;return{type:"pointer-drag",x:i,y:r,pointerId:l,pointerType:c,button:a,buttons:n,action:h,origin:p,native:s,timestamp:y,eventId:o,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:r,timestamp:n}=e,{x:s,y:o,deltaY:a,native:l}=r;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:r,device:n}=e.data,{cancelable:s,timestamp:o}=e,{buttons:a,axes:l}=r;return{type:"gamepad",device:n,timestamp:o,action:i,buttons:a,axes:l,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}};var n1,Yz,Jz;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(n1||(n1={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Yz||(Yz={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Jz||(Jz={}));function USe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return U.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function HL(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(n1.USER)&&t.getEditableFlag(n1.MANAGER)}function Io(t){return _n(t.x,t.y)}function dQ(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?_n(e.clientX-i.left,e.clientY-i.top):_n(0,0)}function Kz(t,e){return e instanceof Event?dQ(t,e):Io(e)}function Qz(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let BSe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":Xz(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!e8(e))break;const n=Io(e),s=this._intersect(n,e.pointerType,i.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!e8(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=pc(n,({manipulator:h})=>h),o=pc(n,({tool:h})=>h);if(s==null||o==null)break;const a=Io(e);a.x=xs(a.x,0,i.view.width),a.y=xs(a.y,0,i.view.height);const l=n.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=Io(e),s=this._intersect(n,e.pointerType,i.forEachTool);if(GSe(e)||i.forEachTool(c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r});break}case"click":{const n=Io(e),s=this._intersect(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Io(e),s=this._intersect(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r});break}case"immediate-double-click":{const n=Io(e),s=this._intersect(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Io(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(e,i){const r=pc(this._grabbedManipulators.get(e.pointerId),({manipulator:n})=>n);r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Io(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return M1(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),e(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=Dce(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(e,i,r){let n=null;return r(s=>{if(s.manipulators==null||!HL(s))return!1;const o=s.manipulators.intersect(e,i);return o!=null&&(n={tool:s,manipulator:o},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(_n(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!Xz(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Io(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){let s=this._intersect(e,r,n);const o=pc(this._hoveredManipulators.get(i),({manipulator:a})=>a);s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function Xz(t){return t==="mouse"}function e8(t){return t.pointerType!=="mouse"||t.button===0}function GSe(t){return!!t.native.shiftKey}const t8="attached",Qk="tools",HSe=1e3;let ga=class extends R0{constructor(e){super(e),this._clock=Y0,this._manipulatorState=new BSe,this.tools=new se,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(lQ,e=>{this._handleInputEvent(e)},Rt.TOOL),...USe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void U.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=HL(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=zt(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,HSe)}attach(){var e;this.view.type==="3d"?(this._set("textures",new q_(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([D(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i))),Et(()=>this._set("textures",Ue(this.textures)))],t8)):this.handles.add(D(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(t8),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(Qk),this._forEachTool(e=>{if(e instanceof X){const i=D(()=>[e.cursor,e.visible,e.editable],()=>{HL(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,Qk)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Qk)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,n1.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){return{setClock:e=>this._clock=e}}};u([d({constructOnly:!0,nonNullable:!0})],ga.prototype,"view",void 0),u([d({readOnly:!0,nonNullable:!0})],ga.prototype,"textures",void 0),u([d({value:null})],ga.prototype,"activeTool",null),u([d({readOnly:!0,type:se})],ga.prototype,"tools",void 0),u([d({readOnly:!0})],ga.prototype,"cursor",void 0),u([d({readOnly:!0})],ga.prototype,"updating",null),u([d()],ga.prototype,"_interacting",void 0),u([d({readOnly:!0})],ga.prototype,"interacting",null),ga=u([E("esri.views.ToolViewManager")],ga);let Ty=class extends X{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":qSe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return WSe[this.deviceType]}};u([d({nonNullable:!0,readOnly:!0})],Ty.prototype,"nativeIndex",void 0),u([d({type:String,readOnly:!0})],Ty.prototype,"deviceType",null),u([d({type:Number,readOnly:!0})],Ty.prototype,"axisThreshold",null),Ty=u([E("esri.views.input.gamepad.GamepadInputDevice")],Ty);const qSe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),WSe={standard:.15,spacemouse:.025,unknown:0},wj=Ty;let W_=class extends X{constructor(...e){super(...e),this.devices=new se,this.enabledFocusMode="document"}};u([d({type:se.ofType(wj),readOnly:!0})],W_.prototype,"devices",void 0),u([d({type:["document","view","none"]})],W_.prototype,"enabledFocusMode",void 0),W_=u([E("esri.views.input.gamepad.GamepadSettings")],W_);const ZSe=W_;let eE=class extends X{constructor(){super(...arguments),this.gamepad=new ZSe}};u([d({readOnly:!0})],eE.prototype,"gamepad",void 0),eE=u([E("esri.views.input.Input")],eE);const YSe=eE;let Md=class extends X{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([d({type:Boolean,nonNullable:!0})],Md.prototype,"enabled",void 0),u([d({type:wj})],Md.prototype,"device",void 0),u([d({type:["pan","zoom"],nonNullable:!0})],Md.prototype,"mode",void 0),u([d({type:["forward-down","forward-up"],nonNullable:!0})],Md.prototype,"tiltDirection",void 0),u([d({type:Number,nonNullable:!0})],Md.prototype,"velocityFactor",void 0),Md=u([E("esri.views.navigation.gamepad.GamepadSettings")],Md);const hQ=Md;let Yp=class extends X{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new hQ,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};u([d({type:Boolean})],Yp.prototype,"browserTouchPanEnabled",void 0),u([d({type:hQ,nonNullable:!0})],Yp.prototype,"gamepad",void 0),u([d({type:Boolean})],Yp.prototype,"momentumEnabled",void 0),u([d({type:Boolean})],Yp.prototype,"mouseWheelZoomEnabled",void 0),Yp=u([E("esri.views.navigation.Navigation")],Yp);const pQ=Yp,fQ={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},mQ=Object.values(fQ),yQ=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${mQ.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),JSe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${mQ.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),KSe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function eGe(t){return!!yQ.test(t)}function wc(t){if(t==null)return null;const e=_r(t),i=e.path.match(yQ)||e.path.match(JSe);if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:bj(a!==-1?n.slice(a+1):n),serverType:fQ[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function QSe(t){const e=_r(t).path.match(KSe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function bj(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function XSe(t,e){const i=[];if(t){const r=wc(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=bj(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function gQ(t){if(!t)return!1;const e=".arcgis.com/",i="//services",r="//tiles",n="//features",s=(t=t.toLowerCase()).includes(e),o=t.includes(i)||t.includes(r)||t.includes(n);return s&&o}function exe(t,e){return t&&lJ(uJ(t,e))}function txe(t){let{url:e}=t;if(!e)return{url:e};e=uJ(e,t.logger);const i=_r(e),r=wc(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=QSe(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:lJ(e),layerId:n}}function ixe(t,e,i,r,n){Am(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Pm(r.url,i,t.layerId.toString()))}function tGe(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function iGe(t,e,i){const r=vQ(t),n=e,s=rxe(r,n,i);if(r){const o=J1.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new C("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new C("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!nxe(t)||s===us.Unsupported)return new C("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case us.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(n==null?void 0:n.heightUnit)||"unknown",l=new C("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new C("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case us.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(n==null?void 0:n.heightModel)||"unknown",l=new C("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new C("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case us.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(n==null?void 0:n.vertCRS)||"unknown",l=new C("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new C("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}}return null}function rxe(t,e,i){if(!i8(t)||!i8(e))return us.Unsupported;if(t==null||e==null)return us.Ok;if(!i&&t.heightUnit!==e.heightUnit)return us.Units;if(t.heightModel!==e.heightModel)return us.HeightModel;switch(t.heightModel){case"gravity-related-height":return us.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?us.Ok:us.CRS;default:return us.Unsupported}}var us;function i8(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function nxe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!bQ(t)}function vQ(t){var r;const e=t.url?wc(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&_Q(t)&&t.heightModelInfo?t.heightModelInfo:bQ(t)?J1.deriveUnitFromSR(oxe,t.spatialReference):null}function _Q(t){return"heightModelInfo"in t}function wQ(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function bQ(t){return wQ(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):SQ(t)}function sxe(t){return t.layers!=null||SQ(t)||wQ(t)||_Q(t)}function SQ(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(us||(us={}));const oxe=new J1({heightModel:"gravity-related-height"});var oM;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(oM||(oM={}));let qL,Xk=null;async function axe(t){Xk||(Xk=O(()=>import("./geometryServiceUtils-409cbe63.js"),[]).then(e=>qL=e)),await Xk,Tt(t)}async function xQ(t,e,i,r){if(!t)return null;const n=t.spatialReference;return zc()||cu(n,e)?Jo(t,e):qL?qL.projectGeometry(t,e,i,r):(await Promise.race([axe(r),uu(r)]),xQ(t,e,i,r))}let Ct=class extends X{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=vs(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let r=null;for(const s of e){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(r,o);a!=null&&(r=a)}if(r!=null&&r.length===1)break}if(i&&(r==null||r.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(r);return{spatialReference:n!=null?n.spatialReference:null,viewingMode:n!=null?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,n,s,o,a,l,c;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(n=(r=this.map)==null?void 0:r.call(this))==null?void 0:n.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(c=(l=this.map)==null?void 0:l.call(this))==null?void 0:c.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var r,n,s;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const o of e)if(sxe(o)){const a=vQ(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,r=[];for(const n of e.layers){const s="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const l of s)r.push({extent:l,layer:n})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=vs(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:Z1(async s=>{try{const o=await xQ(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(to(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=[],n=(s,o)=>s!=null?o!=null?s===o&&s:s:o;for(const s of e)for(const o of i){if(!s.spatialReference.equals(o.spatialReference))continue;const a=n(s.viewingMode,o.viewingMode);if(a!==!1){r.push({spatialReference:s.spatialReference,viewingMode:a});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==oM.Local)&&(e=e.filter(({viewingMode:r})=>r!==oM.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(s!=null){const o=s.constraints!=null?s.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const i=new lxe;for(const n of e)if(this._collectCollection(n,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{xn(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};u([d()],Ct.prototype,"required",void 0),u([d({constructOnly:!0})],Ct.prototype,"map",void 0),u([d({constructOnly:!0})],Ct.prototype,"getSpatialReferenceSupport",void 0),u([d()],Ct.prototype,"defaultSpatialReference",void 0),u([d()],Ct.prototype,"userSpatialReference",void 0),u([d()],Ct.prototype,"sourcePreloadCount",void 0),u([d()],Ct.prototype,"priorityCollection",void 0),u([d()],Ct.prototype,"requiresExtentInSpatialReference",void 0),u([d()],Ct.prototype,"suspended",void 0),u([d({readOnly:!0})],Ct.prototype,"ready",null),u([d({readOnly:!0})],Ct.prototype,"heightModelInfoReady",null),u([d({readOnly:!0})],Ct.prototype,"spatialReference",null),u([d({readOnly:!0})],Ct.prototype,"extent",null),u([d({readOnly:!0})],Ct.prototype,"heightModelInfo",null),u([d({readOnly:!0})],Ct.prototype,"vcsWkid",null),u([d({readOnly:!0})],Ct.prototype,"latestVcsWkid",null),u([d({readOnly:!0})],Ct.prototype,"viewingMode",null),u([d({readOnly:!0})],Ct.prototype,"tileInfo",null),u([d({readOnly:!0})],Ct.prototype,"mapCollections",null),u([d({readOnly:!0})],Ct.prototype,"_allLayers",null),u([d({readOnly:!0})],Ct.prototype,"_spatialReferenceTask",null),u([d({readOnly:!0})],Ct.prototype,"_tileInfoTask",null),u([d({readOnly:!0})],Ct.prototype,"_heightModelInfoTask",null),u([d({readOnly:!0})],Ct.prototype,"_extentCandidatesTask",null),u([d()],Ct.prototype,"_extentTask",null),u([d()],Ct.prototype,"_projectExtentTask",void 0),Ct=u([E("esri.views.support.DefaultsFromMap")],Ct);let lxe=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var Z_;let Se=Z_=class extends Xr(Vi.EventedMixin(B1(X))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Jb({getCollections:()=>{var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:cxe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new dm,this.analyses=new sM,this.typeSpecificPreconditionsReady=!0,this.layerViews=new se,this.magnifier=new oQ,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new F0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new YSe,this.navigation=new pQ,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new VSe(this),this.persistableViewModels=new se,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(D(()=>this.preconditionsReady,e=>{var i,r;e?(this._currentSpatialReference=this.spatialReference,Z_.views.add(this)):(this._currentSpatialReference=null,Z_.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},ul))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,Ci(()=>this.ready)))),this.basemapView=new Ed({view:this}),this.layerViewManager=new ASe({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new ga({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([D(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),D(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),D(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([D(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const n=Et(()=>t=vs(t));t=Z1(async s=>{try{await C1(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{t=null}U.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(Z_.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ue(this.graphics),this.analyses=Ue(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ue(this.analysisViewManager),this.toolViewManager=Ue(this.toolViewManager),this.layerViewManager=Ue(this.layerViewManager),this.basemapView=Ue(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Ue(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return U.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ct({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||lu.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(U.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),lu.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!Si(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return t??(this._cursor||"default")}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new C("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&U.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Ai(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Se.views=new se,u([d()],Se.prototype,"_userSpatialReference",void 0),u([d()],Se.prototype,"activeTool",null),u([d({readOnly:!0})],Se.prototype,"allLayerViews",void 0),u([d()],Se.prototype,"groundView",void 0),u([d()],Se.prototype,"animation",null),u([d()],Se.prototype,"basemapView",void 0),u([d()],Se.prototype,"center",null),u([d({readOnly:!0})],Se.prototype,"_defaultsFromMapSettings",null),u([d()],Se.prototype,"defaultsFromMap",null),u([d()],Se.prototype,"fatalError",void 0),u([d({type:lt})],Se.prototype,"extent",null),u([d(zL(dm,"graphics"))],Se.prototype,"graphics",void 0),u([d(zL(sM,"analyses"))],Se.prototype,"analyses",void 0),u([d({readOnly:!0,type:J1})],Se.prototype,"heightModelInfo",null),u([d({readOnly:!0})],Se.prototype,"interacting",null),u([d({readOnly:!0})],Se.prototype,"navigating",null),u([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Se.prototype,"preconditionsReady",null),u([d({readOnly:!0})],Se.prototype,"typeSpecificPreconditionsReady",void 0),u([d({type:se,readOnly:!0})],Se.prototype,"layerViews",void 0),u([d()],Se.prototype,"resolution",null),u([d({type:oQ})],Se.prototype,"magnifier",void 0),u([d({value:null,type:nQ})],Se.prototype,"map",null),u([d()],Se.prototype,"padding",void 0),u([d({readOnly:!0})],Se.prototype,"ready",void 0),u([d({type:_e})],Se.prototype,"spatialReference",null),u([d()],Se.prototype,"spatialReferenceWarningDelay",void 0),u([d()],Se.prototype,"stationary",null),u([d({readOnly:!0})],Se.prototype,"supportsGround",void 0),u([d({type:mu})],Se.prototype,"timeExtent",void 0),u([d({type:F0,nonNullable:!0})],Se.prototype,"timeReference",void 0),u([d()],Se.prototype,"tools",null),u([d()],Se.prototype,"toolViewManager",void 0),u([d({readOnly:!0})],Se.prototype,"type",void 0),u([d({type:Number})],Se.prototype,"scale",void 0),u([d({readOnly:!0})],Se.prototype,"updating",void 0),u([d({readOnly:!0})],Se.prototype,"initialExtentRequired",void 0),u([d({readOnly:!0})],Se.prototype,"initialExtent",null),u([d()],Se.prototype,"cursor",null),u([d({readOnly:!0})],Se.prototype,"input",void 0),u([d({type:pQ,nonNullable:!0})],Se.prototype,"navigation",void 0),u([d()],Se.prototype,"layerViewManager",void 0),u([d()],Se.prototype,"analysisViewManager",void 0),u([d()],Se.prototype,"width",void 0),u([d()],Se.prototype,"height",void 0),u([d({readOnly:!0})],Se.prototype,"resizing",void 0),u([d({value:null,readOnly:!0})],Se.prototype,"size",null),u([d({readOnly:!0})],Se.prototype,"suspended",void 0),u([d({readOnly:!0})],Se.prototype,"viewEvents",void 0),u([d({readOnly:!0})],Se.prototype,"persistableViewModels",void 0),u([d()],Se.prototype,"_isValid",void 0),u([d()],Se.prototype,"_readyCycleForced",void 0),u([d()],Se.prototype,"_currentSpatialReference",void 0),Se=Z_=u([E("esri.views.View")],Se);const uxe=Se;function cxe(t){return t.layerViews}let Td=class extends Y2{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=bs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new C("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Nc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};u([d({readOnly:!0})],Td.prototype,"done",null),u([d({readOnly:!0,type:String})],Td.prototype,"state",void 0),u([d()],Td.prototype,"target",void 0),Td=u([E("esri.views.ViewAnimation")],Td),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Td||(Td={}));const WL=Td;function Cf(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function h(g){return((o*g+s)*g+n)*g}function p(g){return((c*g+l)*g+a)*g}function f(g){return(3*o*g+2*s)*g+n}function y(g,v){let _,w,S,b,$,T;for(S=g,T=0;T<8;T++){if(b=h(S)-g,Math.abs(b)<v)return S;if($=f(S),Math.abs($)<1e-6)break;S-=b/$}if(_=0,w=1,S=g,S<_)return _;if(S>w)return w;for(;_<w;){if(b=h(S),Math.abs(b-g)<v)return S;g>b?_=S:w=S,S=.5*(w-_)+_}return S}return function(g,v=1e-6){return p(y(g,v))}}const dxe=/^cubic-bezier\((.*)\)/,Co={};function hxe(t){let e=Co[t]||null;if(!e){const i=dxe.exec(t);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(e=Cf.apply(Cf,r))}}return e}Co.ease=Cf(.25,.1,.25,1),Co.linear=Cf(0,0,1,1),Co.easeIn=Co["ease-in"]=Cf(.42,0,1,1),Co.easeOut=Co["ease-out"]=Cf(0,0,.58,1),Co.easeInOut=Co["ease-in-out"]=Cf(.42,0,.58,1);function pxe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function JT(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function fxe(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function Sj(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*o)*l,t[5]=(r*o-i*a)*l,t):null}function mxe(t){return t[0]*t[3]-t[1]*t[2]}function Pf(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1],p=i[2],f=i[3],y=i[4],g=i[5];return t[0]=r*c+s*h,t[1]=n*c+o*h,t[2]=r*p+s*f,t[3]=n*p+o*f,t[4]=r*y+s*g+a,t[5]=n*y+o*g+l,t}function K1(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*c,t[1]=n*h+o*c,t[2]=r*-c+s*h,t[3]=n*-c+o*h,t[4]=a,t[5]=l,t}function KT(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r*c,t[1]=n*c,t[2]=s*h,t[3]=o*h,t[4]=a,t[5]=l,t}function D0(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*c+s*h+a,t[5]=n*c+o*h+l,t}function $Q(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function EQ(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function xj(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function yxe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function gxe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function vxe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function MQ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function _xe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function wxe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function bxe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Sxe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],h=e[2],p=e[3],f=e[4],y=e[5],g=so();return Math.abs(i-l)<=g*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=g*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=g*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-p)<=g*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-f)<=g*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const xxe=Pf,$xe=MQ;Object.freeze(Object.defineProperty({__proto__:null,add:vxe,copy:pxe,determinant:mxe,equals:Sxe,exactEquals:bxe,frob:gxe,fromRotation:$Q,fromScaling:EQ,fromTranslation:xj,identity:JT,invert:Sj,mul:xxe,multiply:Pf,multiplyScalar:_xe,multiplyScalarAndAdd:wxe,rotate:K1,scale:KT,set:fxe,str:yxe,sub:$xe,subtract:MQ,translate:D0},Symbol.toStringTag,{value:"Module"}));function Vh(){return[1,0,0,1,0,0]}function Exe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Mxe(t,e,i,r,n,s){return[t,e,i,r,n,s]}function Txe(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:Exe,create:Vh,createView:Txe,fromValues:Mxe},Symbol.toStringTag,{value:"Module"}));function s1(t,e){return t[0]=e[0],t[1]=e[1],t}function Cr(t,e,i){return t[0]=e,t[1]=i,t}function $j(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function or(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function TQ(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function IQ(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Ixe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function kxe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Cxe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Pxe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Axe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function hv(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function bc(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function Zm(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function dl(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function N0(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function tp(t){const e=t[0],i=t[1];return e*e+i*i}function kQ(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Oxe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function ZL(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function fp(t,e){return t[0]*e[0]+t[1]*e[1]}function CQ(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function PQ(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function Lxe(t,e){e=e||1;const i=2*bT()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Rxe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function Zl(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function Fxe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Dxe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function Nxe(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function jxe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Vxe(t){return"vec2("+t[0]+", "+t[1]+")"}function zxe(t,e){return t[0]===e[0]&&t[1]===e[1]}function Uxe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=so();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function Bxe(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const Gxe=N0,QT=or,Hxe=TQ,qxe=IQ,Wxe=Zm,Zxe=dl,Yxe=tp;Object.freeze(Object.defineProperty({__proto__:null,add:$j,angle:jxe,ceil:Ixe,copy:s1,cross:CQ,dist:Wxe,distance:Zm,div:qxe,divide:IQ,dot:fp,equals:Uxe,exactEquals:zxe,floor:kxe,inverse:Oxe,len:Gxe,length:N0,lerp:PQ,max:Pxe,min:Cxe,mul:Hxe,multiply:TQ,negate:kQ,normalize:ZL,projectAndScale:Bxe,random:Lxe,rotate:Nxe,round:Axe,scale:hv,scaleAndAdd:bc,set:Cr,sqrDist:Zxe,sqrLen:Yxe,squaredDistance:dl,squaredLength:tp,str:Vxe,sub:QT,subtract:or,transformMat2:Rxe,transformMat2d:Zl,transformMat3:Fxe,transformMat4:Dxe},Symbol.toStringTag,{value:"Module"}));function at(){return[0,0]}function AQ(t){return[t[0],t[1]]}function Q1(t,e){return[t,e]}function Jxe(t){const e=at(),i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Kxe(t,e){return new Float64Array(t,e,2)}function OQ(){return at()}function LQ(){return Q1(1,1)}function RQ(){return Q1(1,0)}function FQ(){return Q1(0,1)}const Qxe=OQ(),Xxe=LQ(),e$e=RQ(),t$e=FQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:Xxe,UNIT_X:e$e,UNIT_Y:t$e,ZEROS:Qxe,clone:AQ,create:at,createView:Kxe,fromArray:Jxe,fromValues:Q1,ones:LQ,unitX:RQ,unitY:FQ,zeros:OQ},Symbol.toStringTag,{value:"Module"}));const DQ=96,NQ=39.37,i$e=180/Math.PI;function jQ(t){return t.wkid?t:t.spatialReference||_e.WGS84}function Ej(t,e){return e.type?Cr(t,e.x,e.y):s1(t,e)}function VQ(t){return Ss(t)}function Xg(t,e){const i=Math.max(1,e[0]),r=Math.max(1,e[1]);return Math.max(t.width/i,t.height/r)*d$e(t.spatialReference)}async function Y_(t,e,i,r){var a,l;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(se.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const c=t.every(f=>"attributes"in f),h=t.some(f=>!f.geometry);let p=t;if(c&&h&&e&&e.allLayerViews){const f=new Map;for(const _ of t){const w=_.layer,S=f.get(w)||[],b=_.attributes[w.objectIdField];b!=null&&S.push(b),f.set(w,S)}const y=[];f.forEach((_,w)=>{const S=e.allLayerViews.find(b=>b.layer.id===w.id);if(S&&"queryFeatures"in S){const b=w.createQuery();b.objectIds=_,b.returnGeometry=!0,y.push(S.queryFeatures(b))}});const g=await Promise.all(y),v=[];for(const _ of g)if(_&&_.features&&_.features.length)for(const w of _.features)w.geometry!=null&&v.push(w.geometry);p=v}for(const f of p)r=await Y_(f,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new ce(t);else if(t instanceof up)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const c=t.layer,h=e.allLayerViews.find(p=>p.layer.id===c.id);if(h&&"queryFeatures"in h){const p=c.createQuery();p.objectIds=[t.attributes[c.objectIdField]],p.returnGeometry=!0;const f=await h.queryFeatures(p);n=(l=(a=f==null?void 0:f.features)==null?void 0:a[0])==null?void 0:l.geometry}}}if(n==null||(s=n.type==="point"?new lt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!s))return null;zc()||cu(s.spatialReference,i)||await uu();const o=Jo(s,i);return o?r=r?r.union(o):o:null}function r$e(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const n=r.layer;n&&n.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,i=n.maxScale>i?n.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function eC(t,e){return Si(jQ(t),e)?t:Jo(t,e)}async function n$e(t,e){if(!t||!e)return new Qa({targetGeometry:new ce,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;t instanceof Qa?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l&&l.targetGeometry?c=l.targetGeometry:t instanceof lt?c=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(c=await Y_(t.center,e,i)||await Y_(t.extent,e,i)||await Y_(t.target,e,i)||await Y_(t,e,i)),!c&&s&&s.targetGeometry?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=jQ(e.spatialReference||e.extent||c)),zc()||Si(c.spatialReference,i)||cu(c,i)||await uu();const h=eC(c.center??c,i);let p=0;if(l&&l.targetGeometry!=null&&l.targetGeometry.type==="point")p=l.scale;else if("scale"in t&&t.scale)p=t.scale;else if("zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs)p=r.zoomToScale(t.zoom);else if(Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0){const v=eC(e.extent,i);p=v!=null?Xg(v,a):e.extent?Xg(e.extent,a):s.scale}else p=Xg(eC(c.extent,i),a);const f=r$e(t);f&&(f.min&&f.min>p?p=f.min:f.max&&f.max<p&&(p=f.max));let y=0;l?y=l.rotation:t.hasOwnProperty("rotation")?y=t.rotation:s&&(y=s.rotation);let g=new Qa({targetGeometry:h,scale:p,rotation:y});return r&&(g=r.fit(g),r.constrainByGeometry(g),r.rotationEnabled||(g.rotation=y)),g}function fl(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function s$e(t,e,i){return i?Cr(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):hv(t,e,.5)}const o$e=function(){const t=at();return function(e,i,r){const n=i.targetGeometry;Ej(t,n);const s=.5*pv(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}}();function a$e(t,e,i,r,n){var s;return YL(t,e,i.center),t.scale=Xg(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function l$e(t,e,i,r){return Ij(t,e,i,r),Sj(t,t)}const zQ=function(){const t=at();return function(e,i,r){return QT(e,h$e(e,i),s$e(t,i,r))}}(),u$e=function(){const t=Vh(),e=at();return function(i,r,n,s){const o=pv(r),a=Mj(r);return Cr(e,o,o),EQ(t,e),K1(t,t,a),D0(t,t,zQ(e,n,s)),D0(t,t,[0,s.top-s.bottom]),Cr(i,t[4],t[5])}}();function pv(t){return t.scale*c$e(t.targetGeometry)}function c$e(t){return t!=null&&Or(t.spatialReference)?1/(VQ(t.spatialReference)*NQ*DQ):1}function Mj(t){return YD(t.rotation)||0}function d$e(t){return Or(t)?VQ(t)*NQ*DQ:1}function h$e(t,e){return hv(t,e,.5)}const Tj=function(){const t=at(),e=at(),i=at();return function(r,n,s,o,a,l){return kQ(t,n),hv(e,s,.5*l),Cr(i,1/o*l,-1/o*l),xj(r,e),a&&K1(r,r,a),KT(r,r,i),D0(r,r,t),r}}(),Ij=function(){const t=at();return function(e,i,r,n){const s=pv(i),o=Mj(i);return Ej(t,i.targetGeometry),Tj(e,t,r,s,o,n)}}(),p$e=function(){const t=at();return function(e,i,r,n){const s=pv(i);return Ej(t,i.targetGeometry),Tj(e,t,r,s,0,n)}}();function f$e(t){const e=Go(t);return e?e.valid[1]-e.valid[0]:0}function m$e(t,e){return Math.round(f$e(t)/e)}const y$e=function(){const t=at(),e=at(),i=[0,0,0];return function(r,n,s){or(t,r,n),ZL(t,t),or(e,r,s),ZL(e,e),CQ(i,t,e);let o=Math.acos(fp(t,e)/(N0(t)*N0(e)))*i$e;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),g$e=function(){const t=at();return function(e,i,r,n){const s=e.targetGeometry;return fl(e,i),u$e(t,i,r,n),s.x+=t[0],s.y+=t[1],e}}(),YL=function(t,e,i){fl(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},v$e=function(){const t=at();return function(e,i,r,n,s){s||(s="center"),QT(t,r,n),hv(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":Cr(t,0,0);break;case"left":Cr(t,-o,0);break;case"top":Cr(t,0,a);break;case"right":Cr(t,o,0);break;case"bottom":Cr(t,0,-a);break;case"top-left":Cr(t,-o,a);break;case"bottom-left":Cr(t,-o,-a);break;case"top-right":Cr(t,o,a);break;case"bottom-right":Cr(t,o,-a)}return XT(e,i,t),e}}();function oGe(t,e,i){return fl(t,e),t.rotation+=i,t}function _$e(t,e,i){return fl(t,e),t.rotation=i,t}const w$e=function(){const t=at();return function(e,i,r,n,s){return fl(e,i),isNaN(r)||r===0||(BQ(t,n,i,s),e.scale=i.scale*r,GQ(t,t,e,s),XT(e,e,Cr(t,t[0]-n[0],n[1]-t[1]))),e}}();function r8(t,e,i){return fl(t,e),t.scale=i,t}const UQ=function(){const t=at();return function(e,i,r,n,s,o){return fl(e,i),isNaN(r)||r===0||(BQ(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,GQ(t,t,e,o),XT(e,e,Cr(t,t[0]-s[0],s[1]-t[1]))),e}}(),aGe=function(){const t=at(),e=at();return function(i,r,n,s,o,a,l){return zQ(e,a,l),$j(t,o,e),s?UQ(i,r,n,s,t,a):w$e(i,r,n,t,a)}}(),BQ=function(){const t=Vh();return function(e,i,r,n){return Zl(e,i,l$e(t,r,n,1))}}(),GQ=function(){const t=Vh();return function(e,i,r,n){return Zl(e,i,Ij(t,r,n,1))}}(),XT=function(){const t=at(),e=Vh();return function(i,r,n){fl(i,r);const s=pv(r),o=i.targetGeometry;return $Q(e,Mj(r)),KT(e,e,Q1(s,s)),Zl(t,n,e),o.x+=t[0],o.y+=t[1],i}}();let b$e=class{constructor(e,i,r,n){const s=e.targetGeometry,o=i.targetGeometry;n?typeof n=="string"&&(n=hxe(n)||Co.ease):n=Co.ease,this.easing=n,this.duration=r,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const r=this.easing(i);let n,s,o,a;i>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+r*this.dCenterX,s=this.sCenterY+r*this.dCenterY,o=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=s,e.scale=a,e.rotation=o}},ju=class extends X{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Co.ease,this.view=null,this.viewpoint=new Qa({targetGeometry:new ce,scale:0,rotation:0}),this._updateTask=b0({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=zt(this._updateTask)}animate(e,i,r){this.stop();const n=this.viewpoint;fl(n,i),this.transition=new b$e(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const s=()=>{var o,a;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new WL({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==WL.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const s=this.transition,o=(performance.now()-this._startTime)/s.duration,a=o>=1;s.applyRatio(this.viewpoint,o),a&&((r=this.animation)==null||r.finish())}(n=this.view)!=null&&n.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};u([d()],ju.prototype,"animation",void 0),u([d()],ju.prototype,"duration",void 0),u([d()],ju.prototype,"transition",void 0),u([d()],ju.prototype,"easing",void 0),u([d()],ju.prototype,"view",void 0),u([d()],ju.prototype,"viewpoint",void 0),ju=u([E("esri.views.2d.AnimationManager")],ju);const S$e=ju;let x$e=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var o,a;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:i,graphicsView:r,labelManager:n,state:{id:s}}=this.view;i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=D(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=b0(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}};function gi(){return Promise.all([O(()=>import("./webglDeps-161237df.js"),["assets/webglDeps-161237df.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/ProgramTemplate-acf57c6e.js","assets/programUtils-01610f2d.js","assets/NestedMap-1b5db22e.js"]),O(()=>import("./mapViewDeps-56fa84d9.js"),["assets/mapViewDeps-56fa84d9.js","assets/CIMResourceManager-287fc232.js","assets/fontUtils-bfde2177.js","assets/Rasterizer-197411b5.js","assets/cimAnalyzer-513e6c62.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/enums-f1a6a48a.js","assets/alignmentUtils-ae955d28.js","assets/definitions-b77f917a.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/rasterizingUtils-8b0cb200.js","assets/imageutils-a2ed857b.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/BufferPool-71d7a14e.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/enums-fb086c25.js","assets/programUtils-01610f2d.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-c3038988.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-3160b76b.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/RenderingContext-6a4d886d.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/basicInterfaces-bb952591.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/GraphicContainer-7ec52f09.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-9d04786e.js"])])}const Jv=()=>gi().then(()=>O(()=>import("./TileLayerView2D-d626667e.js"),["assets/TileLayerView2D-d626667e.js","assets/Rasterizer-197411b5.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/enums-f1a6a48a.js","assets/alignmentUtils-ae955d28.js","assets/definitions-b77f917a.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/rasterizingUtils-8b0cb200.js","assets/EffectView-88fc1232.js","assets/Container-c5aca323.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/BufferPool-71d7a14e.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-c3038988.js","assets/imageutils-a2ed857b.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-3160b76b.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/basicInterfaces-bb952591.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-652b01e6.js","assets/BitmapTileContainer-37c27a0a.js","assets/Bitmap-2f80cf44.js","assets/TileContainer-58dd9f78.js","assets/LayerView2D-b1809504.js","assets/HighlightGraphicContainer-69e0c925.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js","assets/MapServiceLayerViewHelper-3ba29b94.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-6504af6e.js","assets/popupUtils-7d573183.js"])),ty=()=>gi().then(()=>O(()=>import("./FeatureLayerView2D-faad0ecb.js"),["assets/FeatureLayerView2D-faad0ecb.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/BitmapTileContainer-37c27a0a.js","assets/Bitmap-2f80cf44.js","assets/TileContainer-58dd9f78.js","assets/CircularArray-ef508845.js","assets/BufferPool-71d7a14e.js","assets/FeatureContainer-8ffad194.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-7d573183.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),n8={"base-dynamic":()=>gi().then(()=>O(()=>import("./BaseDynamicLayerView2D-0e2f17dc.js"),["assets/BaseDynamicLayerView2D-0e2f17dc.js","assets/BitmapContainer-ca155f75.js","assets/WGLContainer-777ff42e.js","assets/definitions-b77f917a.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/ExportStrategy-84c06466.js","assets/Bitmap-2f80cf44.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),"base-tile":Jv,"bing-maps":Jv,csv:ty,"geo-rss":()=>gi().then(()=>O(()=>import("./GeoRSSLayerView2D-e8eadd4a.js"),["assets/GeoRSSLayerView2D-e8eadd4a.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/GraphicContainer-7ec52f09.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/LayerView-2d6bbbeb.js"])),feature:ty,geojson:ty,graphics:()=>gi().then(()=>O(()=>import("./GraphicsLayerView2D-65a75364.js"),["assets/GraphicsLayerView2D-65a75364.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/GraphicContainer-7ec52f09.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/LayerView-2d6bbbeb.js"])),group:()=>gi().then(()=>O(()=>import("./GroupLayerView2D-2b9dc632.js"),["assets/GroupLayerView2D-2b9dc632.js","assets/GroupContainer-26f986ce.js","assets/WGLContainer-777ff42e.js","assets/definitions-b77f917a.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/LayerView-2d6bbbeb.js"])),imagery:()=>gi().then(()=>O(()=>import("./ImageryLayerView2D-caf7fed0.js"),["assets/ImageryLayerView2D-caf7fed0.js","assets/RasterVFDisplayObject-303f20cd.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-168e1533.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-777ff42e.js","assets/definitions-b77f917a.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/GraphicsView2D-895344a3.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/visualVariablesUtils-c057ebbd.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/HighlightGraphicContainer-69e0c925.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-ca155f75.js","assets/Bitmap-2f80cf44.js","assets/ExportStrategy-84c06466.js","assets/rasterProjectionHelper-959c6b0f.js","assets/popupUtils-7d573183.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),"imagery-tile":()=>gi().then(()=>O(()=>import("./ImageryTileLayerView2D-19535111.js"),["assets/ImageryTileLayerView2D-19535111.js","assets/multidimensionalUtils-cd80850f.js","assets/RasterVFDisplayObject-303f20cd.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-168e1533.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-777ff42e.js","assets/definitions-b77f917a.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/rasterUtils-090abec4.js","assets/TiledDisplayObject-bf2313fd.js","assets/TileContainer-58dd9f78.js","assets/RawBlockCache-57f157db.js","assets/rasterProjectionHelper-959c6b0f.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-1d45df17.js","assets/popupUtils-7d573183.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),kml:()=>gi().then(()=>O(()=>import("./KMLLayerView2D-c55348c0.js"),["assets/KMLLayerView2D-c55348c0.js","assets/kmlUtils-cf632f8a.js","assets/Bitmap-2f80cf44.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/BitmapContainer-ca155f75.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/GraphicContainer-7ec52f09.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/LayerView-2d6bbbeb.js","assets/rasterProjectionHelper-959c6b0f.js","assets/RenderingContext-6a4d886d.js","assets/programUtils-01610f2d.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/basicInterfaces-bb952591.js","assets/testSVGPremultipliedAlpha-3160b76b.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-090abec4.js"])),"knowledge-graph":()=>gi().then(()=>O(()=>import("./KnowledgeGraphLayerView2D-96932a4b.js"),["assets/KnowledgeGraphLayerView2D-96932a4b.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/LayerView-2d6bbbeb.js"])),"link-chart":()=>gi().then(()=>O(()=>import("./KnowledgeGraphLayerView2D-96932a4b.js"),["assets/KnowledgeGraphLayerView2D-96932a4b.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/LayerView-2d6bbbeb.js"])),"knowledge-graph-sublayer":ty,"map-image":()=>gi().then(()=>O(()=>import("./MapImageLayerView2D-a30465d7.js"),["assets/MapImageLayerView2D-a30465d7.js","assets/BitmapContainer-ca155f75.js","assets/WGLContainer-777ff42e.js","assets/definitions-b77f917a.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/GraphicsView2D-895344a3.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/visualVariablesUtils-c057ebbd.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/HighlightGraphicContainer-69e0c925.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-84c06466.js","assets/Bitmap-2f80cf44.js","assets/LayerView-2d6bbbeb.js","assets/ExportImageParameters-a24b65b0.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-6504af6e.js","assets/RefreshableLayerView-0f81c99a.js","assets/MapServiceLayerViewHelper-3ba29b94.js","assets/popupUtils-7d573183.js"])),"map-notes":()=>gi().then(()=>O(()=>import("./MapNotesLayerView2D-b3230d5e.js"),["assets/MapNotesLayerView2D-b3230d5e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/GroupContainer-26f986ce.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/GraphicContainer-7ec52f09.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/LayerView-2d6bbbeb.js"])),media:()=>gi().then(()=>O(()=>import("./MediaLayerView2D-3b3dae3a.js"),["assets/MediaLayerView2D-3b3dae3a.js","assets/perspectiveUtils-809554b0.js","assets/normalizeUtilsSync-58d43129.js","assets/mat3f64-221ce671.js","assets/Rasterizer-197411b5.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/enums-f1a6a48a.js","assets/alignmentUtils-ae955d28.js","assets/definitions-b77f917a.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/rasterizingUtils-8b0cb200.js","assets/EffectView-88fc1232.js","assets/Container-c5aca323.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/BufferPool-71d7a14e.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-c3038988.js","assets/imageutils-a2ed857b.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-3160b76b.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/basicInterfaces-bb952591.js","assets/GraphicsView2D-895344a3.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/vec3f32-ad1dc57f.js","assets/LayerView2D-b1809504.js","assets/LayerView-2d6bbbeb.js"])),"ogc-feature":()=>gi().then(()=>O(()=>import("./OGCFeatureLayerView2D-dfea94ae.js"),["assets/OGCFeatureLayerView2D-dfea94ae.js","assets/FeatureLayerView2D-faad0ecb.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/BitmapTileContainer-37c27a0a.js","assets/Bitmap-2f80cf44.js","assets/TileContainer-58dd9f78.js","assets/CircularArray-ef508845.js","assets/BufferPool-71d7a14e.js","assets/FeatureContainer-8ffad194.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-7d573183.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),"open-street-map":Jv,"oriented-imagery":ty,route:()=>gi().then(()=>O(()=>import("./RouteLayerView2D-46ad4d0e.js"),["assets/RouteLayerView2D-46ad4d0e.js","assets/Stop-dcfaf131.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/GraphicContainer-7ec52f09.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/LayerView-2d6bbbeb.js"])),stream:()=>gi().then(()=>O(()=>import("./StreamLayerView2D-c9a5a434.js"),["assets/StreamLayerView2D-c9a5a434.js","assets/FeatureLayerView2D-faad0ecb.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/BitmapTileContainer-37c27a0a.js","assets/Bitmap-2f80cf44.js","assets/TileContainer-58dd9f78.js","assets/CircularArray-ef508845.js","assets/BufferPool-71d7a14e.js","assets/FeatureContainer-8ffad194.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-7d573183.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),"subtype-group":()=>gi().then(()=>O(()=>import("./SubtypeGroupLayerView2D-828e20c3.js"),["assets/SubtypeGroupLayerView2D-828e20c3.js","assets/FeatureLayerView2D-faad0ecb.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/BitmapTileContainer-37c27a0a.js","assets/Bitmap-2f80cf44.js","assets/TileContainer-58dd9f78.js","assets/CircularArray-ef508845.js","assets/BufferPool-71d7a14e.js","assets/FeatureContainer-8ffad194.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-7d573183.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),tile:Jv,"vector-tile":()=>gi().then(()=>O(()=>import("./VectorTileLayerView2D-6deda8cc.js"),["assets/VectorTileLayerView2D-6deda8cc.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/rasterizingUtils-8b0cb200.js","assets/floatRGBA-4b494040.js","assets/VertexArrayObject-e943c837.js","assets/config-1337d16e.js","assets/TiledDisplayObject-bf2313fd.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/color-40238c06.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/TileContainer-58dd9f78.js","assets/WGLContainer-777ff42e.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/earcut-6c3a7c54.js","assets/StyleRepository-f1e7ebed.js","assets/GeometryUtils-984e8446.js","assets/LayerView2D-b1809504.js","assets/LayerView-2d6bbbeb.js"])),video:()=>gi().then(()=>O(()=>import("./VideoLayerView2D-f7ff7510.js"),["assets/VideoLayerView2D-f7ff7510.js","assets/LayerView2D-b1809504.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/LayerView-2d6bbbeb.js"])),wcs:()=>gi().then(()=>O(()=>import("./ImageryTileLayerView2D-19535111.js"),["assets/ImageryTileLayerView2D-19535111.js","assets/multidimensionalUtils-cd80850f.js","assets/RasterVFDisplayObject-303f20cd.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-168e1533.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-777ff42e.js","assets/definitions-b77f917a.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/rasterUtils-090abec4.js","assets/TiledDisplayObject-bf2313fd.js","assets/TileContainer-58dd9f78.js","assets/RawBlockCache-57f157db.js","assets/rasterProjectionHelper-959c6b0f.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-1d45df17.js","assets/popupUtils-7d573183.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),"web-tile":Jv,wfs:ty,wms:()=>gi().then(()=>O(()=>import("./WMSLayerView2D-79649c22.js"),["assets/WMSLayerView2D-79649c22.js","assets/BitmapContainer-ca155f75.js","assets/WGLContainer-777ff42e.js","assets/definitions-b77f917a.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/earcut-6c3a7c54.js","assets/LayerView2D-b1809504.js","assets/ExportStrategy-84c06466.js","assets/Bitmap-2f80cf44.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js","assets/ExportWMSImageParameters-543963d6.js"])),wmts:()=>gi().then(()=>O(()=>import("./WMTSLayerView2D-9e9a031e.js"),["assets/WMTSLayerView2D-9e9a031e.js","assets/imageUtils-652b01e6.js","assets/BitmapTileContainer-37c27a0a.js","assets/Bitmap-2f80cf44.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/definitions-b77f917a.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/TiledDisplayObject-bf2313fd.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-40238c06.js","assets/enums-f1a6a48a.js","assets/number-e491b09e.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/TileContainer-58dd9f78.js","assets/LayerView2D-b1809504.js","assets/LayerView-2d6bbbeb.js","assets/RefreshableLayerView-0f81c99a.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function $$e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new C(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const s8={hasLayerViewModule:t=>n8[t.type]!=null,importLayerView:t=>{const e=n8[t.type];if(e==null)throw $$e(t);return e(t)}};function E$e(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const c of l)for(let h=0;h<c.length-1;h++){Phe(a,r,c,h);const p=Zm(r,a);p<n&&(n=p,s=a[0],o=a[1])}return{coordinate:new ce({x:s,y:o,spatialReference:i}),distance:n}}var JL;let Af=JL=class extends TN(X){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Jo(this.geometry,this.spatialReference)}catch(t){return U.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?vT(this.normalizedGeometry,i):xW(this.normalizedGeometry,i))return t;const{coordinate:r}=E$e(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new JL({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};u([d({constructOnly:!0})],Af.prototype,"geometry",void 0),u([d({readOnly:!0})],Af.prototype,"normalizedGeometry",null),u([d({constructOnly:!0})],Af.prototype,"spatialReference",void 0),Af=JL=u([E("esri.views.2d.constraints.GeometryConstraint")],Af);var KL;let J_=KL=class extends TN(X){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new KL({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([d()],J_.prototype,"enabled",void 0),u([d()],J_.prototype,"rotationEnabled",void 0),J_=KL=u([E("esri.views.2d.constraints.RotationConstraint")],J_);const HQ=J_;var QL;let Xn=QL=class extends TN(X){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(h=>h.clone()),e.sort((h,p)=>p.scale-h.scale),e.forEach((h,p)=>h.level=p);for(const h of e)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!c&&r>0&&r>=h.scale&&(a=t?t.level:-1,c=!0),t=h;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1,e.length),e.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),r=Math.round(t);return e[r]+(r-t)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new QL({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};u([d({readOnly:!0})],Xn.prototype,"effectiveLODs",void 0),u([d({readOnly:!0})],Xn.prototype,"effectiveMinZoom",void 0),u([d({readOnly:!0})],Xn.prototype,"effectiveMaxZoom",void 0),u([d({readOnly:!0})],Xn.prototype,"effectiveMinScale",void 0),u([d({readOnly:!0})],Xn.prototype,"effectiveMaxScale",void 0),u([d()],Xn.prototype,"lods",void 0),u([d()],Xn.prototype,"minZoom",void 0),u([d()],Xn.prototype,"maxZoom",void 0),u([d()],Xn.prototype,"minScale",void 0),u([d()],Xn.prototype,"maxScale",void 0),u([d()],Xn.prototype,"snapToZoom",void 0),Xn=QL=u([E("esri.views.2d.constraints.ZoomConstraint")],Xn);const qQ=Xn,M$e={base:null,key:"type",typeMap:{extent:lt,polygon:Un}};let $i=class extends X{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new se}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Af({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new HQ({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new qQ({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};u([d({readOnly:!0})],$i.prototype,"effectiveLODs",null),u([d({readOnly:!0})],$i.prototype,"effectiveMinScale",null),u([d({readOnly:!0})],$i.prototype,"effectiveMaxScale",null),u([d({readOnly:!0})],$i.prototype,"effectiveMinZoom",null),u([d({readOnly:!0})],$i.prototype,"effectiveMaxZoom",null),u([d({types:M$e,value:null})],$i.prototype,"geometry",null),u([d({type:[th]})],$i.prototype,"lods",void 0),u([d()],$i.prototype,"minScale",void 0),u([d()],$i.prototype,"maxScale",void 0),u([d()],$i.prototype,"minZoom",void 0),u([d()],$i.prototype,"maxZoom",void 0),u([d()],$i.prototype,"rotationEnabled",void 0),u([d()],$i.prototype,"snapToZoom",void 0),u([d({type:se})],$i.prototype,"customConstraints",void 0),u([d()],$i.prototype,"view",void 0),u([d({readOnly:!0})],$i.prototype,"version",null),u([d({type:Af,readOnly:!0})],$i.prototype,"_geometry",null),u([d({type:HQ})],$i.prototype,"_rotation",null),u([d({readOnly:!0,type:qQ})],$i.prototype,"_zoom",null),$i=u([E("esri.views.2d.MapViewConstraints")],$i);const WQ=$i;let T$e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},ZQ=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Kb(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=zt(this._schedule),this._task=zt(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=Ws(i,()=>n.abort()));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),a(),c.reject(Ut())},a=()=>{l.remove(),s!=null&&s.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},l=jD(n.signal,o),c=bs();return this._deferreds.set(e,c),this._controllers.set(e,n),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=J0(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new T$e(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}Nc(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){return{update:e=>this.runTask(e)}}};function I$e(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const tC=new Set,cx=[],iy=new Map,o8=[0,0];let ed=class extends X{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new ZQ({concurrency:e,process:(r,n)=>{const s=this._keyToItem.get(r);return i(s,{signal:n})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=Ue(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const r=e.key.id+"-"+i;if(this.has(r))return this.get(r);const n=this._queue.push(r),s=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),n.then(s,s),this.notifyChange("updating"),n}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach(h=>{const p=this._keyToItem.get(h),f=this.tileInfoView.getTileScale(p.key);iy.has(f)||(iy.set(f,[]),r=Math.max(f,r),n=Math.min(f,n)),iy.get(f).push(p.key),tC.add(f)});let s=this.state.scale;iy.has(s)||(I$e(cx,tC),cx.sort((h,p)=>h-p),s=cx.reduce((h,p)=>Math.abs(p-s)<Math.abs(h-s)?p:h,cx[0])),s=Math.min(s,r),s=Math.max(s,n);const o=iy.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),c=a.getRowForY(this.state.center[1]);return o.sort((h,p)=>{const f=a.denormalizeCol(h.col,h.world),y=a.denormalizeCol(p.col,p.world);return Math.sqrt((l-f)*(l-f)+(c-h.row)*(c-h.row))-Math.sqrt((l-y)*(l-y)+(c-p.row)*(c-p.row))}),tC.clear(),iy.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(o8,a.key);const l=Zm(o8,r);l<s&&(s=l,n=a.key)}),n.id}};u([d({constructOnly:!0})],ed.prototype,"concurrency",void 0),u([d({constructOnly:!0})],ed.prototype,"process",void 0),u([d()],ed.prototype,"state",void 0),u([d({constructOnly:!0})],ed.prototype,"strategy",void 0),u([d({constructOnly:!0})],ed.prototype,"tileInfoView",void 0),u([d({readOnly:!0})],ed.prototype,"updating",null),ed=u([E("esri.views.2d.tiling.PagedTileQueue")],ed);let Fm=class Jp{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new Jp(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Jp(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new Jp(e,i,r,n),new Jp(e,i,r+1,n),new Jp(e,i+1,r,n),new Jp(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};Fm.pool=new ru(Fm,null,null,25,50);function td(t,e){return[t,e]}function wp(t,e,i){return t[0]=e,t[1]=i,t}function k$e(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const oa=new Fm("0/0/0/0");let C$e=class YQ{static create(e,i,r=null){const n=Go(e.spatialReference),s=i.origin||td(e.origin.x,e.origin.y),o=td(e.size[0]*i.resolution,e.size[1]*i.resolution),a=td(-1/0,-1/0),l=td(1/0,1/0),c=td(1/0,1/0);r!=null&&(wp(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),wp(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),wp(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:p}=i;let f,y,g,v;return!r&&h&&p&&(wp(a,h[0],p[0]),wp(l,h[1],p[1]),wp(c,h[1]-h[0]+1,p[1]-p[0]+1)),e.isWrappable?(f=td(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),c[1]),y=td(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=td(f[0]+y[0]-1,l[1]),v=!0):(y=a,g=l,f=c,v=!1),new YQ(i.level,i.resolution,i.scale,s,a,l,c,o,y,g,f,v)}constructor(e,i,r,n,s,o,a,l,c,h,p,f){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=c,this.worldEnd=h,this.worldSize=p,this.wrap=f}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){oa.set(i);const n=r?oa.col:this.denormalizeCol(oa.col,oa.world),s=oa.row;return k$e(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){oa.set(i);const n=r?oa.col:this.denormalizeCol(oa.col,oa.world);return Array.isArray(e)?wp(e,this.getXForColumn(n),this.getYForRow(oa.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(oa.row)),e}},o1=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(i,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}};o1.pool=new ru(o1);let iC=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const ei=new Fm("0/0/0/0");let P$e=class JQ{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,a=s-r,l=o-n,c=l!==0?a/l:0,h=(Math.ceil(n)-n)*c,p=(Math.floor(n)-n)*c;return new JQ(r,Math.floor(n),Math.ceil(o),c,a<0?h:p,a<0?p:h,a<0?s:r,a<0?r:s)}constructor(e,i,r,n,s,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Ms=[[0,0],[0,0],[0,0],[0,0]],A$e=1e-6;let O$e=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>C$e.create(e,a,i));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){ei.set(i);const n=this._infoByLevel[ei.level];return n?n.getTileBounds(e,ei,r):e}getTileCoords(e,i,r=!1){ei.set(i);const n=this._infoByLevel[ei.level];return n?n.getTileCoords(e,ei,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=o1.pool.acquire(s),a=this._wrap;let l,c,h,p=1/0,f=-1/0;const y=o.spans;Ms[0][0]=Ms[0][1]=Ms[1][1]=Ms[3][0]=-i,Ms[1][0]=Ms[2][0]=e.size[0]+i,Ms[2][1]=Ms[3][1]=e.size[1]+i;for(const w of Ms)e.toMap(w,w),w[0]=s.getColumnForX(w[0]),w[1]=s.getRowForY(w[1]);const g=[];let v=3;for(let w=0;w<4;w++){if(Ms[w][1]===Ms[v][1]){v=w;continue}const S=P$e.create(Ms[w],Ms[v]);p=Math.min(S.ymin,p),f=Math.max(S.ymax,f),g[S.ymin]===void 0&&(g[S.ymin]=[]),g[S.ymin].push(S),v=w}if(p==null||f==null||f-p>100)return null;let _=[];for(l=p;l<f;){g[l]!=null&&(_=_.concat(g[l])),c=1/0,h=-1/0;for(let w=_.length-1;w>=0;w--){const S=_[w];c=Math.min(c,S.getLeftCol()),h=Math.max(h,S.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const w=Math.floor(h/s.worldSize[0]);for(let S=Math.floor(c/s.worldSize[0]);S<=w;S++)y.push(new iC(l,Math.max(s.getFirstColumnForWorld(S),c),Math.min(s.getLastColumnForWorld(S),h)))}else y.push(new iC(l,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),y.push(new iC(l,c,h)));l+=1;for(let w=_.length-1;w>=0;w--){const S=_[w];S.ymax>=l?S.incrRow():_.splice(w,1)}}return o}getTileParentId(e){ei.set(e);const i=this._infoByLevel[ei.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ei,this._lodInfos[r],ei),ei.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){ei.set(i);const r=this._infoByLevel[ei.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(ei,n,ei);const o=n.denormalizeCol(ei.col,ei.world);for(const a of e.spans)if(a.row===ei.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce((v,_)=>(v[0]=Math.min(v[0],_.row),v[1]=Math.max(v[1],_.row),v[2]=Math.min(v[2],_.colFrom),v[3]=Math.max(v[3],_.colTo),v),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(ei.col,ei.world),p=n.getColumnForX(r.getXForColumn(h)),f=n.getRowForY(r.getYForRow(ei.row)),y=n.getColumnForX(r.getXForColumn(h+1))-1,g=n.getRowForY(r.getYForRow(ei.row+1))-1;return!(p>c||y<l||f>a||g<o)}const s=n.denormalizeCol(ei.col,ei.world);return e.spans.some(o=>o.row===ei.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=Go(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+A$e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}};function L$e(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const rC=new Set,dx=[],ry=new Map,a8=[0,0];let Vu=class extends X{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:r}=this;this._queue=new ZQ({concurrency:e,process:(n,s)=>{const o=this._keyToItem.get(n);return i(o,{signal:s})},peeker:r==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=Ue(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach(h=>{const p=this._keyToItem.get(h),f=this.tileInfoView.getTileScale(p.key);ry.has(f)||(ry.set(f,[]),r=Math.max(f,r),n=Math.min(f,n)),ry.get(f).push(p.key),rC.add(f)});let s=this.state.scale;ry.has(s)||(L$e(dx,rC),dx.sort((h,p)=>h-p),s=dx.reduce((h,p)=>Math.abs(p-s)<Math.abs(h-s)?p:h,dx[0])),s=Math.min(s,r),s=Math.max(s,n);const o=ry.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),c=a.getRowForY(this.state.center[1]);return o.sort((h,p)=>{const f=a.denormalizeCol(h.col,h.world),y=a.denormalizeCol(p.col,p.world);return Math.sqrt((l-f)*(l-f)+(c-h.row)*(c-h.row))-Math.sqrt((l-y)*(l-y)+(c-p.row)*(c-p.row))}),rC.clear(),ry.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(a8,a.key);const l=Zm(a8,r);l<s&&(s=l,n=a.key)}),n.id}};u([d({constructOnly:!0})],Vu.prototype,"concurrency",void 0),u([d({constructOnly:!0})],Vu.prototype,"process",void 0),u([d()],Vu.prototype,"state",void 0),u([d({constructOnly:!0})],Vu.prototype,"strategy",void 0),u([d({constructOnly:!0})],Vu.prototype,"tileInfoView",void 0),u([d({readOnly:!0})],Vu.prototype,"updating",null),Vu=u([E("esri.views.2d.tiling.TileQueue")],Vu);const _Ge=Vu;let R$e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];l8(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],h=[0,0],p=[0,0];for(s.sort((f,y)=>(h[0]=a.x+l*(f.col+.5),h[1]=a.y-c*(f.row+.5),p[0]=a.x+l*(y.col+.5),p[1]=a.y-c*(y.row+.5),dl(h,i)-dl(p,i)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),l8(this._tilePerId,e)}};function l8(t,e){t.delete(e)}const bp=new Fm(0,0,0,0),_u=new Map,Sp=[],nC=[];let bGe=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new R$e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var w,S;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:p,lodInfo:f}=h,{level:y}=f;this.tiles.length=0,r.forEach(b=>b.visible=!0);let g=0,v=0;if(p.length>0)for(const{row:b,colFrom:$,colTo:T}of p)for(let I=$;I<=T;I++){g++;const A=bp.set(y,b,f.normalizeCol(I),f.getWorldForColumn(I)).id;let L=r.get(A);if(L)L.isReady?(_u.set(A,L),v++):c||this._addParentTile(A,_u);else{if((w=this._tileCache)!=null&&w.has(A)){if(L=this._tileCache.pop(A),this.tileIndex.set(A,L),L.isReady){_u.set(A,L),v++;continue}}else L=this.acquireTile(bp),this.tileIndex.set(A,L);c||this._addParentTile(A,_u)}}const _=v===g;for(const[b,$]of r){if(_u.has(b))continue;bp.set(b);const T=this.tileInfoView.intersects(h,bp),I=this.cachePolicy==="purge"?bp.level!==y:bp.level>y;!T||!c&&_?!I&&T||Sp.push($):$.isReady?I&&this.cachePolicy==="purge"&&this._hasReadyAncestor(bp,y)?Sp.push($):nC.push($):I&&Sp.push($)}for(const b of nC)b.isReady&&_u.set(b.key.id,b);for(const b of Sp)this._tileCache?this._tileCache.add(b):this.releaseTile(b),r.delete(b.key.id);for(const b of _u.values())this.tiles.push(b);for(const b of r.values())_u.has(b.key.id)||(b.visible=!1);(S=this._tileCache)==null||S.prune(y,s,o),o1.pool.release(h),nC.length=0,Sp.length=0,_u.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())this.tiles.includes(r)?e(r):Sp.push(r);for(const r of Sp)this.releaseTile(r),this.tileIndex.delete(r.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=sl();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=sl();if(this.tileInfoView.getTileBounds(s,n.key,!0),ufe(s,r))return!0}return!1}};function aM(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function F$e(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function D$e(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function N$e(t,e){return new Float32Array(t,e,6)}function KQ(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function j$e(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let a=r;a<o;a++)KQ(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:F$e,create:aM,createView:N$e,fromValues:D$e,transform:KQ,transformMany:j$e},Symbol.toStringTag,{value:"Module"}));function V$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function z$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function QQ(t,e,i,r,n,s,o,a,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function XQ(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function U$e(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function B$e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],p=h*o-a*c,f=-h*s+a*l,y=c*s-o*l;let g=i*p+r*f+n*y;return g?(g=1/g,t[0]=p*g,t[1]=(-h*r+n*c)*g,t[2]=(a*r-n*o)*g,t[3]=f*g,t[4]=(h*i-n*l)*g,t[5]=(-a*i+n*s)*g,t[6]=y*g,t[7]=(-c*i+r*l)*g,t[8]=(o*i-r*s)*g,t):null}function G$e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t[0]=o*h-a*c,t[1]=n*c-r*h,t[2]=r*a-n*o,t[3]=a*l-s*h,t[4]=i*h-n*l,t[5]=n*s-i*a,t[6]=s*c-o*l,t[7]=r*l-i*c,t[8]=i*o-r*s,t}function H$e(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+i*(-c*n+o*a)+r*(l*n-s*a)}function kj(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],p=e[8],f=i[0],y=i[1],g=i[2],v=i[3],_=i[4],w=i[5],S=i[6],b=i[7],$=i[8];return t[0]=f*r+y*o+g*c,t[1]=f*n+y*a+g*h,t[2]=f*s+y*l+g*p,t[3]=v*r+_*o+w*c,t[4]=v*n+_*a+w*h,t[5]=v*s+_*l+w*p,t[6]=S*r+b*o+$*c,t[7]=S*n+b*a+$*h,t[8]=S*s+b*l+$*p,t}function XL(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],p=e[8],f=i[0],y=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*r+y*o+c,t[7]=f*n+y*a+h,t[8]=f*s+y*l+p,t}function eX(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],p=e[8],f=Math.sin(i),y=Math.cos(i);return t[0]=y*r+f*o,t[1]=y*n+f*a,t[2]=y*s+f*l,t[3]=y*o-f*r,t[4]=y*a-f*n,t[5]=y*l-f*s,t[6]=c,t[7]=h,t[8]=p,t}function q$e(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function W$e(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function Z$e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Y$e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function J$e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function K$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Q$e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,h=r*o,p=r*a,f=n*o,y=n*a,g=n*l,v=s*o,_=s*a,w=s*l;return t[0]=1-p-g,t[3]=h-w,t[6]=f+_,t[1]=h+w,t[4]=1-c-g,t[7]=y-v,t[2]=f-_,t[5]=y+v,t[8]=1-c-p,t}function X$e(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10],p=h*o-a*c,f=-h*s+a*l,y=c*s-o*l,g=i*p+r*f+n*y;if(!g)return null;const v=1/g;return t[0]=p*v,t[1]=(-h*r+n*c)*v,t[2]=(a*r-n*o)*v,t[3]=f*v,t[4]=(h*i-n*l)*v,t[5]=(-a*i+n*s)*v,t[6]=y*v,t[7]=(-c*i+r*l)*v,t[8]=(o*i-r*s)*v,t}function eEe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],y=e[11],g=e[12],v=e[13],_=e[14],w=e[15],S=i*a-r*o,b=i*l-n*o,$=i*c-s*o,T=r*l-n*a,I=r*c-s*a,A=n*c-s*l,L=h*v-p*g,z=h*_-f*g,j=h*w-y*g,H=p*_-f*v,J=p*w-y*v,ue=f*w-y*_;let re=S*ue-b*J+$*H+T*j-I*z+A*L;return re?(re=1/re,t[0]=(a*ue-l*J+c*H)*re,t[1]=(l*j-o*ue-c*z)*re,t[2]=(o*J-a*j+c*L)*re,t[3]=(n*J-r*ue-s*H)*re,t[4]=(i*ue-n*j+s*z)*re,t[5]=(r*j-i*J-s*L)*re,t[6]=(v*A-_*I+w*T)*re,t[7]=(_*$-g*A-w*b)*re,t[8]=(g*I-v*$+w*S)*re,t):null}function tEe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function iEe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function rEe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function nEe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function tX(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function sEe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function oEe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function aEe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function lEe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],p=e[0],f=e[1],y=e[2],g=e[3],v=e[4],_=e[5],w=e[6],S=e[7],b=e[8],$=so();return Math.abs(i-p)<=$*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(r-f)<=$*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-y)<=$*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-g)<=$*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=$*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-_)<=$*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(l-w)<=$*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-S)<=$*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-b)<=$*Math.max(1,Math.abs(h),Math.abs(b))}function uEe(t){const e=so(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+h*h))<=e}const cEe=kj,dEe=tX;Object.freeze(Object.defineProperty({__proto__:null,add:nEe,adjoint:G$e,copy:z$e,determinant:H$e,equals:lEe,exactEquals:aEe,frob:rEe,fromMat2d:K$e,fromMat4:V$e,fromQuat:Q$e,fromRotation:Y$e,fromScaling:J$e,fromTranslation:Z$e,identity:XQ,invert:B$e,isOrthoNormal:uEe,mul:cEe,multiply:kj,multiplyScalar:sEe,multiplyScalarAndAdd:oEe,normalFromMat4:eEe,normalFromMat4Legacy:X$e,projection:tEe,rotate:eX,scale:q$e,scaleByVec2:W$e,set:QQ,str:iEe,sub:dEe,subtract:tX,translate:XL,transpose:U$e},Symbol.toStringTag,{value:"Module"}));function tE(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function hEe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function pEe(t,e,i,r,n,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function fEe(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:hEe,create:tE,createView:fEe,fromValues:pEe},Symbol.toStringTag,{value:"Module"}));function iX(){return new Float32Array(2)}function mEe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function j0(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function yEe(t,e){return new Float32Array(t,e,2)}function rX(){return iX()}function nX(){return j0(1,1)}function sX(){return j0(1,0)}function oX(){return j0(0,1)}const gEe=rX(),vEe=nX(),_Ee=sX(),wEe=oX();Object.freeze(Object.defineProperty({__proto__:null,ONES:vEe,UNIT_X:_Ee,UNIT_Y:wEe,ZEROS:gEe,clone:mEe,create:iX,createView:yEe,fromValues:j0,ones:nX,unitX:sX,unitY:oX,zeros:rX},Symbol.toStringTag,{value:"Module"}));function bEe(t){return t instanceof Float32Array&&t.length>=2}function SEe(t){return Array.isArray(t)&&t.length>=2}function sC(t){return bEe(t)||SEe(t)}var eR;const wu=[0,0];let Id=eR=class extends G{constructor(t){super(t),this._viewpoint2D={center:at(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new lt,this.id=0,this.inverseTransform=Vh(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Vh(),this.transformNoRotation=Vh(),this.displayMat3=tE(),this.displayViewMat3=tE(),this.viewMat3=tE(),this.viewMat2d=aM(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=fl(i,t.viewpoint),this._set("size",s1(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new eR({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return sC(e)?Zl(t,e,this.inverseTransform):(wu[0]=e,wu[1]=i,Zl(t,wu,this.inverseTransform))}toScreen(t,e,i){return sC(e)?Zl(t,e,this.transform):(wu[0]=e,wu[1]=i,Zl(t,wu,this.transform))}toScreenNoRotation(t,e,i){return sC(e)?Zl(t,e,this.transformNoRotation):(wu[0]=e,wu[1]=i,Zl(t,wu,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return Tj(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new Qa({targetGeometry:new ce(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=pv(o),this.rotation=r,this.scale=i,this.spatialReference=e,s1(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;QQ(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=XQ(this.viewMat3),h=j0(s[0]/2,s[1]/2),p=j0(-s[0]/2,-s[1]/2),f=YD(r);XL(c,c,h),eX(c,c,f),XL(c,c,p),kj(this.displayViewMat3,this.displayMat3,c);const y=xj(this.viewMat2d,h);return K1(y,y,f),D0(y,y,p),o$e(this.extent,o,s),Ij(this.transform,o,s,n),Sj(this.inverseTransform,this.transform),p$e(this.transformNoRotation,o,s,n),this.worldScreenWidth=m$e(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};u([d({readOnly:!0})],Id.prototype,"id",void 0),u([d({value:1,json:{write:!0}})],Id.prototype,"pixelRatio",null),u([d({json:{write:!0}})],Id.prototype,"size",null),u([d()],Id.prototype,"spatialReference",void 0),u([d({type:Qa,json:{write:!0}})],Id.prototype,"viewpoint",null),Id=eR=u([E("esri.views.2d.ViewState")],Id);const u8=Id;var tR,iR;let lc=tR=class extends X{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new tR({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([d()],lc.prototype,"left",void 0),u([d()],lc.prototype,"top",void 0),u([d()],lc.prototype,"right",void 0),u([d()],lc.prototype,"bottom",void 0),lc=tR=u([E("esri.views.2d.PaddedViewState.Padding")],lc);let Iy=iR=class extends u8{constructor(...t){super(...t),this.paddedViewState=new u8,this._updateContent=(()=>{const e=at();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Cr(e,r.left+r.right,r.top+r.bottom),or(e,i,e),s1(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(D(()=>[this.size,this.padding],()=>this._updateContent(),ul)),this.padding=new lc,this.size=[0,0]}set padding(t){this._set("padding",t||new lc)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,g$e(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=e.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new iR({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([d()],Iy.prototype,"paddedViewState",void 0),u([d({type:lc})],Iy.prototype,"padding",null),u([d()],Iy.prototype,"viewpoint",null),Iy=iR=u([E("esri.views.2d.PaddedViewState")],Iy);const xEe=Iy;let Pn=class extends X{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([D(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},ul)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new ce({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void U.getLogger(this).error(new C("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;YL(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void U.getLogger(this).error(new C("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void U.getLogger(this).error(new C("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;a$e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;_$e(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;r8(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new C("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new C("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new C("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void U.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Qa({targetGeometry:new ce,scale:0,rotation:0});fl(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;r8(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let p,f,y;const g=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?p=v:(v==null?void 0:v.type)==="point"&&(f=v,y=l==null?void 0:l.scale);const _=s??p;return{center:n??f??(_==null?void 0:_.center),rotation:a??g,scale:(o??h??y??(_&&Xg(_,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var o;const s=e.targetGeometry;try{this._project(e,r)}catch(a){U.getLogger(this).warn(new Zo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new ce({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new xEe({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new ce({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const c=i.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=c}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new ce({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(c){tj()||U.getLogger(this).warn(new Zo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:c}))}o||(o=new ce({x:0,y:0,spatialReference:e}));const a=YL(new Qa({targetGeometry:new ce,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const h=[i.size[0]/2,i.size[1]/2],p=[h[0]+20,h[1]],f=i.toMap([0,0],p),{x:y,y:g}=this._project(new ce({x:f[0],y:f[1],spatialReference:i.spatialReference}),e);f[0]=y,f[1]=g,r.toScreen(f,f);const v=y$e(h,f,p),_=Math.hypot(f[0]-h[0],f[1]-h[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(a.rotation=0,a.targetGeometry=new ce({x:0,y:0,spatialReference:e})):(a.scale*=_,a.scale>V("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();r.size=[e,i],v$e(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new ce({x:r,y:n,spatialReference:s})}toScreen(e){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),r=[i.x,i.y];return this.state.toScreen(r,r),_n(r[0],r[1])}_project(e,i){var s;const r=e&&e.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||Si(i,r.spatialReference))return e;const n=Jo(r,i);if(!n)throw new C("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return $Ee(e)?(e.targetGeometry=n,e):n}};function $Ee(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}u([d({type:ce})],Pn.prototype,"center",null),u([d()],Pn.prototype,"constraints",void 0),u([d({type:lt})],Pn.prototype,"extent",null),u([d({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Pn.prototype,"padding",null),u([d()],Pn.prototype,"ready",void 0),u([d()],Pn.prototype,"resizeAlign",void 0),u([d({readOnly:!0})],Pn.prototype,"resolution",null),u([d({type:Number})],Pn.prototype,"rotation",null),u([d({type:Number})],Pn.prototype,"scale",null),u([d({readOnly:!0})],Pn.prototype,"state",void 0),u([d({type:Qa})],Pn.prototype,"viewpoint",null),u([d()],Pn.prototype,"zoom",null),Pn=u([E("esri.views.2d.ViewStateManager")],Pn);function Cj(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let c8=class extends br{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){Cj(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},EEe=class extends br{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const p=l.snapScale(this._currentScale),f=(s.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f);break}}}},eI=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},MEe=class extends br{constructor(e,i,r){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new eI({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&Cj(r.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},TEe=class extends br{constructor(e,i,r){super(!0),this._view=e,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new eI({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&Cj(o.data,this.pointerAction)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function aa(t){let e=t*t;return t<0&&(e*=-1),e}function IEe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function kEe(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=aa(n.axes[0]),r.translation[1]=aa(n.axes[1]),r.translation[2]=aa(n.buttons[7])-aa(n.buttons[6]),r.heading=aa(n.axes[2]),r.tilt=aa(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*aa(n.axes[0]),r.translation[1]=1.2*aa(n.axes[1]),r.translation[2]=2*-aa(n.axes[2]),r.heading=1.2*aa(n.axes[5]),r.tilt=1.2*aa(n.axes[3])),r.tilt*=o,VW(r.translation,r.translation,a),r}function CEe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let PEe=class extends br{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Kr,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([D(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=b0({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},me)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,IEe(this._transformation)):(this._currentDevice=e.data.device,kEe(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(CEe(i))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=OEe*n*e;XT(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*LEe*e,a=this._view.constraints.rotationEnabled?-i.heading*AEe*e:0,l=this._view.size,c=[l[0]/2,l[1]];UQ(r,r,o,a,c,l);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const AEe=.06,OEe=.7,LEe=6e-4;let REe=class extends br{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=this._keyMap[e.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},FEe=class extends br{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var kg;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(kg||(kg={}));let DEe=class extends br{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=kg.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=kg.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case kg.IN:o=s.zoomIn();break;case kg.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const NEe=.6;let jEe=class extends br{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/NEe**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},VEe=class extends br{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new eI({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function d8(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>BEe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function zEe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function UEe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function BEe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let GEe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,d8(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new wj(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=b0({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=d8(s),l=r||UEe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||zEe(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&e(n)}}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const h8=V("edge"),HEe=V("chrome"),qEe=V("ff"),WEe=V("safari"),p8="esri-view-surface",ny={touchNone:`${p8}--touch-none`,touchPan:`${p8}--touch-pan`};let aX=class lX{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new GEe(e,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Ue(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(oC[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&oC[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(oC[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?ny.touchNone:ny.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?ny.touchPan:ny.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(ny.touchNone),this._element.classList.remove(ny.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=dQ(this._element,e);return lX.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const r=I1e(i);r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_handleMouseWheel(e,i){let r=i.deltaY;switch(i.deltaMode){case 0:h8&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}h8?r*=.7:HEe||WEe?r*=.6:qEe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};aX.test={disableSubpixelCoordinates:!1};const oC={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let ZEe=class extends br{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function Pj(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function YEe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function JEe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:_n()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[b,$]=t,[T,I]=[$.x-b.x,$.y-b.y];return e.radius=Math.sqrt(T*T+I*I)/2,e.center.x=(b.x+$.x)/2,e.center.y=(b.y+$.y)/2,e}let i=0,r=0;for(let b=0;b<t.length;b++)i+=t[b].x,r+=t[b].y;i/=t.length,r/=t.length;const n=t.map(b=>b.x-i),s=t.map(b=>b.y-r);let o=0,a=0,l=0,c=0,h=0,p=0,f=0;for(let b=0;b<n.length;b++){const $=n[b],T=s[b],I=$*$,A=T*T;o+=I,a+=A,l+=$*T,c+=I*$,h+=A*T,p+=$*A,f+=T*I}const y=.5*(c+p),g=.5*(h+f),v=o*a-l*l,_=(y*a-g*l)/v,w=(o*g-l*y)/v,S=_n(_+i,w+r);return{radius:Math.sqrt(_*_+w*w+(o+a)/t.length),center:S}}function hm(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}const zo={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let KEe=class extends br{constructor(e=zo.maximumDoubleClickDelay,i=zo.maximumDoubleClickDistance,r=zo.maximumDoubleTouchDelay,n=zo.maximumDoubleTouchDistance,s=Y0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=zt(e.doubleClickTimer))}get hasPendingInputs(){return M1(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=zt(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:r,button:n}=e.native;return r==="mouse"?`${i}:${n}`:`${r}`}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=this._getPointerId(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Pj(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=hm(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=hm(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s),a=1;this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}},QEe=class extends br{constructor(e=zo.maximumDoubleClickDelay,i=zo.maximumDoubleClickDistance,r=zo.maximumDoubleTouchDelay,n=zo.maximumDoubleTouchDistance,s=Y0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=_n(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new eI({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=zt(e.doubleTapTimeout)})}get hasPendingInputs(){return M1(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=zt(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,r){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:c}=r;return{action:e,delta:i,button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:c}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",_n(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=_n(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,i);this._doubleTapDrag.emit(o,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=_n(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=hm(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),Pj(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=hm(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},XEe=class extends br{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:e2e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=hx(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=iE(n,uX(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=hx(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=hx(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=iE(r,i)-e,r.lastAngle=iE(r,i)-e})}_emitEvent(e,i,r){const n=hx(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function uX(t){const e=[];return t.forEach(i=>{e.push(_n(i.event.x,i.event.y))}),JEe(e)}function hx(t){const e=uX(t);let i=0;return t.forEach(r=>{let n=iE(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function e2e(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function iE(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var f8;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(f8||(f8={}));let t2e=class extends br{constructor(e=zo.maximumDoubleClickDelay,i=zo.maximumDoubleClickDistance,r=zo.maximumDoubleTouchDelay,n=zo.maximumDoubleTouchDistance,s=Y0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=hm(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=hm(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick;if(s){s.timeoutHandle.remove();const o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Pj(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=hm(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const Kv={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let i2e=class extends br{constructor(e=Kv.maximumClickDelay,i=Kv.movementUntilMouseDrag,r=Kv.movementUntilPenDrag,n=Kv.movementUntilTouchDrag,s=Kv.holdDelay,o=Y0){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=zt(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,r){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):YEe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const px={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Kp=class extends X{constructor(){super(...arguments),this._handles=new Kr}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Ai(()=>!e(),()=>this._disconnect()),Ai(e,()=>this._connect())])}destroy(){this._handles=Ue(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Ue(this._inputManager)}_connect(){const e=this.view.surface,i=new aX(e,this.view.input),r=[new t2e,new i2e,new KEe,new XEe(this.view.navigation),new QEe],n=new vo({eventSource:i,recognizers:r});n.installHandlers("prevent-context-menu",[new ZEe],Rt.INTERNAL),n.installHandlers("navigation",[new VEe(this.view),new PEe(this.view),new jEe(this.view),new c8(this.view),new c8(this.view,[px.counter]),new MEe(this.view,"primary"),new REe(this.view,px.pan),new DEe(this.view,px.zoom),new FEe(this.view,px.rotate),new TEe(this.view,"secondary"),new EEe(this.view,"touch")],Rt.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,D(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},me)}get test(){return{inputManager:this._inputManager}}};u([d()],Kp.prototype,"view",void 0),u([d()],Kp.prototype,"latestPointerType",null),u([d()],Kp.prototype,"latestPointerLocation",null),u([d()],Kp.prototype,"multiTouchActive",null),Kp=u([E("esri.views.2d.input.MapViewInputManager")],Kp);const r2e=Kp;var BGe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n2e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var m8,y8,g8,rR={exports:{}};rR.exports,m8=rR,y8=function(){function t(n,s,o,a,l){e(n,s,o||0,a||n.length-1,l||r)}function e(n,s,o,a,l){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,p=Math.log(c),f=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*f*(c-f)/c)*(h-c/2<0?-1:1);e(n,s,Math.max(o,Math.floor(s-h*f/c+y)),Math.min(a,Math.floor(s+(c-h)*f/c+y)),l)}var g=n[s],v=o,_=a;for(i(n,o,s),l(n[a],g)>0&&i(n,o,a);v<_;){for(i(n,v,_),v++,_--;l(n[v],g)<0;)v++;for(;l(n[_],g)>0;)_--}l(n[o],g)===0?i(n,o,_):i(n,++_,a),_<=s&&(o=_+1),s<=_&&(a=_-1)}}function i(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function r(n,s){return n<s?-1:n>s?1:0}return t},(g8=y8())!==void 0&&(m8.exports=g8);const s2e=n2e(rR.exports);function lM(t,e){if(!(this instanceof lM))return new lM(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function o2e(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function sy(t,e){K_(t,0,t.children.length,e,t)}function K_(t,e,i,r,n){n||(n=ky(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],Q_(n,t.leaf?r(s):s);return n}function Q_(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function v8(t,e){return t.minX-e.minX}function _8(t,e){return t.minY-e.minY}function aC(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function fx(t){return t.maxX-t.minX+(t.maxY-t.minY)}function a2e(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function l2e(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function lC(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function mx(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ky(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w8(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,s2e(t,s,e,i,n),o.push(e,s,s,i))}lM.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!mx(t,e))return i;for(var n,s,o,a,l=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],mx(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):lC(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!mx(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],mx(t,o=e.leaf?i(s):s)){if(e.leaf||lC(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ky([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=c.pop(),s=!0),o.leaf&&(n=o2e(t,o.children,e))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!lC(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:v8,compareMinY:_8,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return sy(n=ky(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=ky([])).leaf=!1,n.height=r;var a,l,c,h,p=Math.ceil(s/o),f=p*Math.ceil(Math.sqrt(o));for(w8(t,e,i,f,this.compareMinX),a=e;a<=i;a+=f)for(w8(t,a,c=Math.min(a+f-1,i),p,this.compareMinY),l=a;l<=c;l+=p)h=Math.min(l+p-1,c),n.children.push(this._build(t,l,h,r-1));return sy(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,l,c,h,p;r.push(e),!e.leaf&&r.length-1!==i;){for(h=p=1/0,n=0,s=e.children.length;n<s;n++)l=aC(o=e.children[n]),(c=a2e(t,o)-l)<p?(p=c,h=l<h?l:h,a=o):c===p&&l<h&&(h=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),Q_(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=ky(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,sy(i,this.toBBox),sy(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=ky([t,e]),this.data.height=t.height+1,this.data.leaf=!1,sy(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,a,l,c,h;for(l=c=1/0,r=e;r<=i-e;r++)o=l2e(n=K_(t,0,r,this.toBBox),s=K_(t,r,i,this.toBBox)),a=aC(n)+aC(s),o<l?(l=o,h=r,c=a<c?a:c):o===l&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:v8,n=t.leaf?this.compareMinY:_8;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,a=K_(t,0,e,o),l=K_(t,i-e,i,o),c=fx(a)+fx(l);for(n=e;n<i-e;n++)s=t.children[n],Q_(a,t.leaf?o(s):s),c+=fx(a);for(n=i-e-1;n>=e;n--)s=t.children[n],Q_(l,t.leaf?o(s):s),c+=fx(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)Q_(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():sy(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var nR;const b8=new Ge({upperLeft:"upper-left",lowerLeft:"lower-left"});let Qp=nR=class extends G{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new nR(F({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([d({type:lt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Qp.prototype,"extent",void 0),u([d({type:["view","edit"],json:{write:!0}})],Qp.prototype,"mode",void 0),u([d({type:String,json:{read:b8.read,write:b8.write}})],Qp.prototype,"originPosition",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Qp.prototype,"tolerance",void 0),Qp=nR=u([E("esri.rest.support.QuantizationParameters")],Qp);const cX=Qp;let S8=class dX{constructor(e,i){this.key=new Fm(0,0,0,0),this.bounds=sl(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return lt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=jn.acquire();for(let r=0;r<e.length;r++)i[r]=new dX(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return cX.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const xp={added:[],removed:[]},uC=new Set,u2e=new Fm(0,0,0,0);let c2e=class extends Vi{constructor(e){super(),this._tiles=new Map,this._index=lM(9,V("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new S8(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const h=u2e.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(uC.add(h),!this.has(h)){const p=new S8(this.tileScheme,h);this._tiles.set(h,p),this._index.insert(p),this.tiles.push(p),xp.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];uC.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),xp.removed.push(a))}(xp.added.length||xp.removed.length)&&this.emit("update",xp),o1.pool.release(i),uC.clear(),xp.added.length=0,xp.removed.length=0}},Xp=class extends X{constructor(){super(...arguments),this.color=new ae([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};u([d({type:ae})],Xp.prototype,"color",void 0),u([d({type:ae})],Xp.prototype,"haloColor",void 0),u([d()],Xp.prototype,"haloOpacity",void 0),u([d()],Xp.prototype,"fillOpacity",void 0),Xp=u([E("esri.views.2d.support.HighlightOptions")],Xp);const hX=Xp,d2e=t=>t.includes("Brush");let pX=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),d2e(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function h2e(t,e,i,r,n,s,o,a){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let l=null;t.width!=null&&t.height!=null?l=[t.width,t.height]:t.width==null&&t.height!=null?l=[t.height,t.height]:t.width!=null&&t.height==null?l=[t.width,t.width]:t.width==null&&t.height==null&&(l=null);const c=i[0]-(r.left+r.right),h=i[1]-(r.top+r.bottom);let p,f,y=t.area||{x:0,y:0,width:c,height:h};if(l){const g=c/h,v=l[0]/l[1];if(v>g){const _=y.width/v;y={x:y.x,y:Math.round(y.y+(y.height-_)/2),width:y.width,height:Math.round(_)}}else{const _=y.height*v;y={x:Math.round(y.x+(y.width-_)/2),y:y.y,width:Math.round(_),height:y.height}}}else l=[y.width,y.height];return l[0]>y.width?(p=Math.min(l[0]/y.width,e),f=l[0]/y.width/p):(p=1,f=l[0]/y.width),{resolutionScale:p,cropArea:{x:Math.round((y.x+r.left)*p),y:Math.round((y.y+r.top)*p),width:Math.round(y.width*p),height:Math.round(y.height*p)},outputScale:f,format:n,quality:s,children:o,rotation:a}}function p2e(t,e,i){const{ctx:r,canvas:n}=fX(t,i),s=r.getImageData(0,0,t.width,t.height),o=y2e(n,e);return mX(n),{dataUrl:o,data:s}}function f2e(t,e){const{ctx:i,canvas:r}=fX(t,e),n=i.getImageData(0,0,t.width,t.height);return mX(r),n}function fX(t,e){const i=m2e();e.premultipliedAlpha&&b2e(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&w2e(r),{ctx:r,canvas:i}}function mX(t){t.width=0,t.height=0}function m2e(){return cC==null&&(cC=document.createElement("canvas")),cC}let cC=null;function y2e(t,e){const i=S2e[e.format],r=e.quality/100;return t.toDataURL(i,r)}function g2e(t,e){const i=_2e(t),r=$2e[i];return{format:i,quality:xs(e??r,0,100)}}function v2e(t,e){return e/Math.max(t[0],t[1])}function WGe(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,a=!1){const{data:l}=t,{width:c,height:h,data:p}=e,f=s/c,y=o/h,g=Math.ceil(f/2),v=Math.ceil(y/2),_=t.width;for(let w=0;w<h;w++)for(let S=0;S<c;S++){const b=4*(S+(a?h-w-1:w)*c);let $=0,T=0,I=0,A=0,L=0,z=0;const j=(w+.5)*y;for(let H=Math.floor(w*y);H<(w+1)*y;H++){const J=Math.abs(j-(H+.5))/v,ue=(S+.5)*f,re=J*J;for(let pe=Math.floor(S*f);pe<(S+1)*f;pe++){const Dt=Math.abs(ue-(pe+.5))/g,we=Math.sqrt(re+Dt*Dt);if(we>=1)continue;let q=2*we*we*we-3*we*we+1;const le=4*(r+pe+(n+H)*_);z+=q*l[le+3],T+=q,!i&&l[le+3]<255&&(q=q*l[le+3]/255),I+=q*l[le],A+=q*l[le+1],L+=q*l[le+2],$+=q}}p[b]=I/$,p[b+1]=A/$,p[b+2]=L/$,p[b+3]=z/T}return e}function _2e(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return x2e}}function w2e(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function b2e(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const S2e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},x8=98,x2e="png",$2e={png:100,jpg:x8,jpeg:x8};var rr;function sR(t,e,i={}){const r=e===rr.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const n of r){const s=t.getContext(n,i);if(s)return s}return null}function ZGe(t,e,i={}){const r=yX(t);for(const n of r){const s=sR(e,n,i);if(s)return s}return null}function yX(t){if(t==="3d")return[rr.WEBGL2];const e=V("esri-force-webgl");return e===rr.WEBGL1||e===rr.WEBGL2?[e]:V("mac")&&V("chrome")?[rr.WEBGL1,rr.WEBGL2]:[rr.WEBGL2,rr.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(rr||(rr={}));let dC,hC;function E2e(t){const e=yX(t);for(;e.length>1;){const i=$8(e.shift());if(i.available)return i}return $8(e.shift())}function $8(t){switch(t){case rr.WEBGL1:return M2e();case rr.WEBGL2:return T2e()}}function M2e(){return dC||(dC=C2e()),dC}function T2e(){return hC||(hC=P2e()),hC}let gX=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},I2e=class extends gX{constructor(){super(...arguments),this.type=rr.WEBGL1}},k2e=class extends gX{constructor(){super(...arguments),this.type=rr.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function vX(t,e){if(t===rr.WEBGL1&&typeof WebGLRenderingContext>"u"||t===rr.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=sR(i,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=sR(i,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===rr.WEBGL1){const s=r.getParameter(r.VERSION),o=s==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);e.available=a>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(e.supportsHighPrecisionFragment=n.precision>0),r}function C2e(){const t=new I2e,e=vX(rr.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function P2e(){const t=new k2e,e=vX(rr.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function A2e(t){const e=E2e(t);if(!e.available)return new C("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new C("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new C("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new C("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===rr.WEBGL1){if(!e.supportsElementIndexUint)return new C("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new C("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new C("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function O2e(t){return t&&"nodeType"in t}function L2e(t){return t&&typeof t.render=="function"}const E8={component:"esri-component"};let ef=class extends X{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(E8.component),i&&i.classList.remove(E8.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||O2e(e)?(this._set("widget",null),lj(e)):(L2e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};u([d({dependsOn:[]})],ef.prototype,"id",null),u([d()],ef.prototype,"node",null),u([Re("node")],ef.prototype,"castNode",null),u([d({readOnly:!0})],ef.prototype,"widget",void 0),ef=u([E("esri.views.ui.Component")],ef);const rE=ef,_X="calcite-mode-";function R2e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function uM(){return R2e().startsWith("dark")}function F2e(){return`${_X}${uM()?"dark":"light"}`}function D2e(t){N2e(t),t.classList.add(F2e())}function N2e(t){Array.from(t.classList).forEach(e=>{e.startsWith(_X)&&t.classList.remove(e)})}const j2e={left:0,top:0,bottom:0,right:0},wX={bottom:30,top:15,right:15,left:15},bu="esri-ui",Zn={ui:bu,corner:`${bu}-corner`,innerContainer:`${bu}-inner-container`,manualContainer:`${bu}-manual-container`,cornerContainer:`${bu}-corner-container`,topLeft:`${bu}-top-left`,topRight:`${bu}-top-right`,bottomLeft:`${bu}-bottom-left`,bottomRight:`${bu}-bottom-right`};function V2e(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function yx(t){return t===0?"0":`${t}px`}function pC(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function fC(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let Rl=class extends Vi.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Yr(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&fC(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&fC(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([D(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,me),D(()=>this.padding,this._applyUIPadding,me),D(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},me),ET(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Zn.ui),D2e(e),this._attachContainers(e)),i&&(i.classList.remove(Zn.ui),fC(i,{top:"",bottom:"",left:"",right:""}),TK(i)),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...wX,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=pC(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,n,s)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){if(this._componentMap.has(e)&&((n=this._componentMap.get(e))==null?void 0:n.key)!==i)return;const s=this._components.indexOf(r),o=r.node.parentNode;return o==null||o.removeChild(r.node),this._componentMap.delete(e),this._components.splice(s,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal});for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const n=pC(e)||pC(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.map(r=>this._getComponentsAtPosition(r,i)).flat():this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof rE||(e=new rE({node:e})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,internal:s})}_find(e){return e?e instanceof rE?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??j2e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Zn.innerContainer,Zn.cornerContainer);const i=document.createElement("div");i.classList.add(Zn.innerContainer,Zn.manualContainer);const r=document.createElement("div");r.classList.add(Zn.topLeft,Zn.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Zn.topRight,Zn.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Zn.bottomLeft,Zn.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(Zn.bottomRight,Zn.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=Fc();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(V2e(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(n===0)return void(s.firstChild?fz(r.node,s.firstChild):s.appendChild(r.node));n>=a.length?s.appendChild(r.node):fz(r.node,a[n])}_toPixelPosition(e){return{top:yx(e.top),left:yx(e.left),right:yx(e.right),bottom:yx(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(Pi).filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};u([d()],Rl.prototype,"_locale",void 0),u([d()],Rl.prototype,"container",null),u([d()],Rl.prototype,"height",null),u([d({value:wX})],Rl.prototype,"padding",null),u([Re("padding")],Rl.prototype,"castPadding",null),u([d()],Rl.prototype,"view",void 0),u([d()],Rl.prototype,"width",null),Rl=u([E("esri.views.ui.UI")],Rl);const z2e=Rl,U2e="randomUUID"in crypto;function bX(){if(U2e)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function M8(){return`{${bX()}}`}const B2e={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},G2e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},H2e=t=>({...G2e,...t}),q2e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},W2e=(t,e)=>t.find(e),T8=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const o=r!=null&&r.children?W2e(r.children,a=>a.domNode===n):void 0;i&&!o&&s!==e.length-1||(r=o)}),r},Z2e=t=>{let e;const i={...B2e,...t},r=H2e(i),n=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],h=(f,y,g)=>{var w;let v;r.eventHandlerInterceptor=(S,b,$,T)=>function(I){let A;n("domEvent",I);const L=q2e(I.currentTarget,v.domNode),z=L.some(H=>{var J;return customElements.get((J=H==null?void 0:H.tagName)==null?void 0:J.toLowerCase())});if(I.eventPhase===Event.CAPTURING_PHASE||!z)L.reverse(),A=T8(v.getLastRender(),L);else{const H=I.composedPath(),J=H.slice(H.indexOf(I.currentTarget),H.indexOf(v.domNode)).filter(ue=>ue.getRootNode()===ue.ownerDocument).reverse();A=T8(v.getLastRender(),J,!0)}let j;return A&&(j=i.handleInterceptedEvent(e,A,this,I)),n("domEventProcessed",I),j},(w=i.postProcessProjectionOptions)==null||w.call(i,r);const _=g();v=f(y,_,r),l.push(v),c.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,_)};let p=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let f=0;f<l.length;f++){const y=c[f]();n("rendered",void 0),l[f].update(y),n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,l,c)),e={renderNow:p,scheduleRender:()=>{s||a||(s=requestAnimationFrame(p))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,y)=>{h(Ih.append,f,y)},insertBefore:(f,y)=>{h(Ih.insertBefore,f,y)},merge:(f,y)=>{h(Ih.merge,f,y)},replace:(f,y)=>{h(Ih.replace,f,y)},detach:f=>{for(let y=0;y<c.length;y++)if(c[y]===f)return c.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},e},Cy={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Py,SX,tI,xX=!1,cM=!1,Aj=!1,js=!1,I8=null,oR=!1;const Y2e=t=>{const e=new URL(t,Fr.$resourcesUrl$);return e.origin!==tS.location.origin?e.href:e.pathname},J2e=t=>Fr.$resourcesUrl$=t,Dm=(t,e="")=>()=>{},k8="http://www.w3.org/1999/xlink",C8={},K2e="http://www.w3.org/2000/svg",Q2e="http://www.w3.org/1999/xhtml",X2e=t=>t!=null,Oj=t=>(t=typeof t,t==="object"||t==="function");function eMe(t){var e,i,r;return(r=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&r!==void 0?r:void 0}const $X=(t,e,...i)=>{let r=null,n=null,s=null,o=!1,a=!1;const l=[],c=p=>{for(let f=0;f<p.length;f++)r=p[f],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((o=typeof t!="function"&&!Oj(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?dM(null,r):r),a=o)};if(c(i),e){e.key&&(n=e.key),e.name&&(s=e.name);{const p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter(f=>p[f]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,rMe);const h=dM(t,null);return h.$attrs$=e,l.length>0&&(h.$children$=l),h.$key$=n,h.$name$=s,h},dM=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},tMe={},iMe=t=>t&&t.$tag$===tMe,rMe={forEach:(t,e)=>t.map(P8).forEach(e),map:(t,e)=>t.map(P8).map(e).map(nMe)},P8=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),nMe=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),$X(t.vtag,i,...t.vchildren||[])}const e=dM(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},sMe=t=>AMe.map(e=>e(t)).find(e=>!!e),oMe=(t,e)=>t!=null&&!Oj(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,aMe=t=>t,e9e=(t,e,i)=>{const r=aMe(t);return{emit:n=>lMe(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},lMe=(t,e,i)=>{const r=Fr.ce(e,i);return t.dispatchEvent(r),r},A8=new WeakMap,uMe=(t,e,i)=>{let r=pM.get(t);RMe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,pM.set(t,r)},cMe=(t,e,i,r)=>{var n;let s=EX(e,i);const o=pM.get(s);if(t=t.nodeType===11?t:el,o)if(typeof o=="string"){t=t.head||t;let a=A8.get(t),l;if(a||A8.set(t,a=new Set),!a.has(s)){{l=el.createElement("style"),l.innerHTML=o;const c=(n=Fr.$nonce$)!==null&&n!==void 0?n:eMe(el);c!=null&&l.setAttribute("nonce",c),t.insertBefore(l,t.querySelector("link"))}a&&a.add(s)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return s},dMe=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,n=Dm("attachStyles",e.$tagName$),s=cMe(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),r&2&&i.classList.add(s+"-s")),n()},EX=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),O8=(t,e,i,r,n,s)=>{if(i!==r){let o=D8(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,c=L8(i),h=L8(r);l.remove(...c.filter(p=>p&&!h.includes(p))),l.add(...h.filter(p=>p&&!c.includes(p)))}else if(e==="style"){for(const l in i)(!r||r[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in r)(!i||r[l]!==i[l])&&(l.includes("-")?t.style.setProperty(l,r[l]):t.style[l]=r[l])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):D8(tS,a)?e=a.slice(2):e=a[2]+e.slice(3),i&&Fr.rel(t,e,i,!1),r&&Fr.ael(t,e,r,!1);else{const l=Oj(r);if((o||l&&r!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=r;else{const h=r??"";e==="list"?o=!1:(i==null||t[e]!=h)&&(t[e]=h)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,c=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(c?t.removeAttributeNS(k8,e):t.removeAttribute(e)):(!o||s&4||n)&&!l&&(r=r===!0?"":r,c?t.setAttributeNS(k8,e,r):t.setAttribute(e,r))}}},hMe=/\s/,L8=t=>t?t.split(hMe):[],MX=(t,e,i,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||C8,o=e.$attrs$||C8;for(r in s)r in o||O8(n,r,s[r],void 0,i,e.$flags$);for(r in o)O8(n,r,s[r],o[r],i,e.$flags$)},hM=(t,e,i,r)=>{const n=e.$children$[i];let s=0,o,a,l;if(xX||(Aj=!0,n.$tag$==="slot"&&(Py&&r.classList.add(Py+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=el.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=el.createTextNode("");else{if(js||(js=n.$tag$==="svg"),o=n.$elm$=el.createElementNS(js?K2e:Q2e,n.$flags$&2?"slot-fb":n.$tag$),js&&n.$tag$==="foreignObject"&&(js=!1),MX(null,n,js),X2e(Py)&&o["s-si"]!==Py&&o.classList.add(o["s-si"]=Py),n.$children$)for(s=0;s<n.$children$.length;++s)a=hM(t,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?js=!1:o.tagName==="foreignObject"&&(js=!0)}return o["s-hn"]=tI,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=SX,o["s-sn"]=n.$name$||"",l=t&&t.$children$&&t.$children$[i],l&&l.$tag$===n.$tag$&&t.$elm$&&a1(t.$elm$,!1)),o},a1=(t,e)=>{Fr.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==tI&&n["s-ol"]&&(kX(n).insertBefore(n,Lj(n)),n["s-ol"].remove(),n["s-ol"]=void 0,Aj=!0),e&&a1(n,e)}Fr.$flags$&=-2},TX=(t,e,i,r,n,s)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===tI&&(o=o.shadowRoot);n<=s;++n)r[n]&&(a=hM(null,i,n,t),a&&(r[n].$elm$=a,o.insertBefore(a,Lj(e))))},IX=(t,e,i,r,n)=>{for(;e<=i;++e)(r=t[e])&&(n=r.$elm$,AX(r),cM=!0,n["s-ol"]?n["s-ol"].remove():a1(n,!0),n.remove())},pMe=(t,e,i,r)=>{let n=0,s=0,o=0,a=0,l=e.length-1,c=e[0],h=e[l],p=r.length-1,f=r[0],y=r[p],g,v;for(;n<=l&&s<=p;)if(c==null)c=e[++n];else if(h==null)h=e[--l];else if(f==null)f=r[++s];else if(y==null)y=r[--p];else if(gx(c,f))Ay(c,f),c=e[++n],f=r[++s];else if(gx(h,y))Ay(h,y),h=e[--l],y=r[--p];else if(gx(c,y))(c.$tag$==="slot"||y.$tag$==="slot")&&a1(c.$elm$.parentNode,!1),Ay(c,y),t.insertBefore(c.$elm$,h.$elm$.nextSibling),c=e[++n],y=r[--p];else if(gx(h,f))(c.$tag$==="slot"||y.$tag$==="slot")&&a1(h.$elm$.parentNode,!1),Ay(h,f),t.insertBefore(h.$elm$,c.$elm$),h=e[--l],f=r[++s];else{for(o=-1,a=n;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===f.$key$){o=a;break}o>=0?(v=e[o],v.$tag$!==f.$tag$?g=hM(e&&e[s],i,o,t):(Ay(v,f),e[o]=void 0,g=v.$elm$),f=r[++s]):(g=hM(e&&e[s],i,s,t),f=r[++s]),g&&kX(c.$elm$).insertBefore(g,Lj(c.$elm$))}n>l?TX(t,r[p+1]==null?null:r[p+1].$elm$,i,r,s,p):s>p&&IX(e,n,l)},gx=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,Lj=t=>t&&t["s-ol"]||t,kX=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Ay=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,n=e.$children$,s=e.$tag$,o=e.$text$;let a;o===null?(js=s==="svg"?!0:s==="foreignObject"?!1:js,s==="slot"||MX(t,e,js),r!==null&&n!==null?pMe(i,r,e,n):n!==null?(t.$text$!==null&&(i.textContent=""),TX(i,null,e,n,0,n.length-1)):r!==null&&IX(r,0,r.length-1),js&&s==="svg"&&(js=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},CX=t=>{const e=t.childNodes;let i,r,n,s,o,a;for(r=0,n=e.length;r<n;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,s=0;s<n;s++)if(a=e[s].nodeType,e[s]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===e[s].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&e[s].textContent.trim()!==""){i.hidden=!0;break}}CX(i)}},ja=[],PX=t=>{let e,i,r,n,s,o,a=0;const l=t.childNodes,c=l.length;for(;a<c;a++){if(e=l[a],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=e["s-sn"],o=r.length-1;o>=0;o--)i=r[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(R8(i,n)?(s=ja.find(h=>h.$nodeToRelocate$===i),cM=!0,i["s-sn"]=i["s-sn"]||n,s?s.$slotRefNode$=e:ja.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&ja.map(h=>{R8(h.$nodeToRelocate$,i["s-sn"])&&(s=ja.find(p=>p.$nodeToRelocate$===i),s&&!h.$slotRefNode$&&(h.$slotRefNode$=s.$slotRefNode$))})):ja.some(h=>h.$nodeToRelocate$===i)||ja.push({$nodeToRelocate$:i}));e.nodeType===1&&PX(e)}},R8=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",AX=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(AX)},fMe=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,n=t.$vnode$||dM(null,null),s=iMe(e)?e:$X(null,null,e);tI=i.tagName,r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=i[o])),s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=n.$elm$=i.shadowRoot||i,Py=i["s-sc"],SX=i["s-cr"],xX=(r.$flags$&1)!==0,cM=!1,Ay(n,s);{if(Fr.$flags$|=1,Aj){PX(s.$elm$);let o,a,l,c,h,p,f=0;for(;f<ja.length;f++)o=ja[f],a=o.$nodeToRelocate$,a["s-ol"]||(l=el.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(f=0;f<ja.length;f++)if(o=ja[f],a=o.$nodeToRelocate$,o.$slotRefNode$){for(c=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(p=l["s-nr"],p&&p["s-sn"]===a["s-sn"]&&c===p.parentNode&&(p=p.nextSibling,!p||!p["s-nr"])){h=p;break}(!h&&c!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),c.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}cM&&CX(s.$elm$),Fr.$flags$&=-2,ja.length=0}},mMe=(t,e)=>{},Rj=(t,e)=>(t.$flags$|=16,mMe(t,t.$ancestorComponent$),DMe(()=>yMe(t,e))),yMe=(t,e)=>{const i=t.$hostElement$,r=Dm("scheduleUpdate",t.$cmpMeta$.$tagName$),n=i;let s;return e?s=e0(n,"componentWillLoad"):s=e0(n,"componentWillUpdate"),s=F8(s,()=>e0(n,"componentWillRender")),r(),F8(s,()=>gMe(t,n,e))},gMe=async(t,e,i)=>{const r=t.$hostElement$,n=Dm("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&dMe(t);const s=Dm("render",t.$cmpMeta$.$tagName$);vMe(t,e,r),s(),n(),_Me(t)},vMe=(t,e,i)=>{try{I8=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Cy.hasRenderFn||Cy.reflect)&&(Cy.vdomRender||Cy.reflect)&&(Cy.hydrateServerSide||fMe(t,e))}catch(a){eS(a,t.$hostElement$)}return I8=null,null},_Me=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=Dm("postUpdate",e),n=i;t.$ancestorComponent$,e0(n,"componentDidRender"),t.$flags$&64?(e0(n,"componentDidUpdate"),r()):(t.$flags$|=64,e0(n,"componentDidLoad"),r())},t9e=t=>{{const e=X1(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&Rj(e,!1),i}},e0=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){eS(r)}},F8=(t,e)=>t&&t.then?t.then(e):e(),wMe=(t,e)=>X1(t).$instanceValues$.get(e),bMe=(t,e,i,r)=>{const n=X1(t),s=t,o=n.$instanceValues$.get(e),a=n.$flags$,l=s;i=oMe(i,r.$members$[e][0]);const c=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!c){n.$instanceValues$.set(e,i);{if(r.$watchers$&&a&128){const p=r.$watchers$[e];p&&p.map(f=>{try{l[f](i,o,e)}catch(y){eS(y,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,e)===!1)return;Rj(n,!1)}}}},SMe=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),n=t.prototype;r.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return wMe(this,s)},set(a){bMe(this,s,a,e)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,l){Fr.jmp(()=>{const c=s.get(o);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(n.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},t.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&e.$attrsToReflect$.push([o,l]),l})}}return t},xMe=async(t,e,i,r,n)=>{if(!(e.$flags$&32)&&(n=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[e.$modeName$=sMe(t)]);const a=EX(i,e.$modeName$);if(!pM.has(a)){const l=Dm("registerStyles",i.$tagName$);uMe(a,o,!!(i.$flags$&1)),l()}}e.$ancestorComponent$,(()=>Rj(e,!0))()},$Me=t=>{},EMe=t=>{if(!(Fr.$flags$&1)){const e=X1(t),i=e.$cmpMeta$,r=Dm("connectedCallback",i.$tagName$);e.$flags$&1?(OX(t,e,i.$listeners$),$Me(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&MMe(t),i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&t.hasOwnProperty(n)){const o=t[n];delete t[n],t[n]=o}}),xMe(t,e,i)),r()}},MMe=t=>{const e=t["s-cr"]=el.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},TMe=t=>{if(!(Fr.$flags$&1)){const e=X1(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},i9e=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){PMe(this,i)},connectedCallback(){EMe(this),r&&r.call(this)},disconnectedCallback(){TMe(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,SMe(t,i)},r9e=(t,e)=>e,OX=(t,e,i,r)=>{i&&i.map(([n,s,o])=>{const a=kMe(t,n),l=IMe(e,o),c=CMe(n);Fr.ael(a,s,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Fr.rel(a,s,l,c))})},IMe=(t,e)=>i=>{try{Cy.lazyLoad||t.$hostElement$[e](i)}catch(r){eS(r)}},kMe=(t,e)=>e&4?el:e&8?tS:e&16?el.body:t,CMe=t=>OMe?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,LX=new WeakMap,X1=t=>LX.get(t),PMe=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return OX(t,i,e.$listeners$),LX.set(t,i)},D8=(t,e)=>e in t,eS=(t,e)=>(0,console.error)(t,e),pM=new Map,AMe=[],tS=typeof window<"u"?window:{},el=tS.document||{head:{}},n9e=tS.HTMLElement||class{},Fr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},OMe=(()=>{let t=!1;try{el.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),LMe=t=>Promise.resolve(t),RMe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),aR=[],RX=[],FX=(t,e)=>i=>{t.push(i),oR||(oR=!0,e&&Fr.$flags$&4?FMe(lR):Fr.raf(lR))},N8=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){eS(i)}t.length=0},lR=()=>{N8(aR),N8(RX),(oR=aR.length>0)&&Fr.raf(lR)},FMe=t=>LMe().then(t),s9e=FX(aR,!1),DMe=FX(RX,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */const DX="calcite-mode-auto",NX="calcite-mode-dark",NMe="calcite-mode-light",o9e={autoMode:DX,darkMode:NX,lightMode:NMe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jX=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],fM=jX.join(","),VX=typeof Element>"u",Nm=VX?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,mM=!VX&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},yM=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},jMe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},zX=function(e,i,r){if(yM(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(fM));return i&&Nm.call(e,fM)&&n.unshift(e),n=n.filter(r),n},UX=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!yM(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:o,candidates:c})}else{var h=Nm.call(o,fM);h&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var p=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),f=!yM(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(p&&f){var y=t(p===!0?o.children:p.children,!0,r);r.flatten?n.push.apply(n,y):n.push({scopeParent:o,candidates:y})}else s.unshift.apply(s,o.children)}}return n},BX=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},GX=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||jMe(e))&&!BX(e)?0:e.tabIndex},VMe=function(e,i){var r=GX(e);return r<0&&i&&!BX(e)?0:r},zMe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},HX=function(e){return e.tagName==="INPUT"},UMe=function(e){return HX(e)&&e.type==="hidden"},BMe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},GMe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},HMe=function(e){if(!e.name)return!0;var i=e.form||mM(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=GMe(n,e.form);return!s||s===e},qMe=function(e){return HX(e)&&e.type==="radio"},WMe=function(e){return qMe(e)&&!HMe(e)},ZMe=function(e){var i,r=e&&mM(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,h,p;r=mM(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=n)!==null&&h!==void 0&&(p=h.ownerDocument)!==null&&p!==void 0&&p.contains(n))}}return s},j8=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},YMe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Nm.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Nm.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,c=mM(e);if(l&&!l.shadowRoot&&n(l)===!0)return j8(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(ZMe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return j8(e);return!1},JMe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return Nm.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},gM=function(e,i){return!(i.disabled||yM(i)||UMe(i)||YMe(i,e)||BMe(i)||JMe(i))},uR=function(e,i){return!(WMe(i)||GX(i)<0||!gM(e,i))},KMe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},QMe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=VMe(a,o),c=o?t(n.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:c})}),r.sort(zMe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},XMe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=UX([e],i.includeContainer,{filter:uR.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:KMe}):r=zX(e,i.includeContainer,uR.bind(null,i)),QMe(r)},a9e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=UX([e],i.includeContainer,{filter:gM.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=zX(e,i.includeContainer,gM.bind(null,i)),r},l9e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Nm.call(e,fM)===!1?!1:uR(i,e)},eTe=jX.concat("iframe").join(","),u9e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Nm.call(e,eTe)===!1?!1:gM(i,e)};const tTe={getShadowRoot:!0};function c9e(t){return Array.isArray(t)?t:Array.from(t)}function d9e(t){const e="dir",i=`[${e}]`,r=iTe(t,i);return r?r.getAttribute(e):"ltr"}function Fj(t){return t.getRootNode()}function h9e(t){const e=Fj(t);return"host"in e?e:null}function qX(t){return t.host||null}function p9e(t,{selector:e,id:i}){function r(n){if(!n)return null;n.assignedSlot&&(n=n.assignedSlot);const s=Fj(n),o=i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null,a=qX(s);return o||(a?r(a):null)}return r(t)}function iTe(t,e){function i(r){return r?r.closest(e)||i(qX(Fj(r))):null}return i(t)}function rTe(t,e){return WX(t,e)}function WX(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return WX(r instanceof ShadowRoot?r.host:r,e)}function f9e(t,e){return!!rTe(e,i=>i===t?!0:void 0)}function nTe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function m9e(t){if(t)return nTe(t)?t.setFocus():t.focus()}function y9e(t){t&&(XMe(t,tTe)[0]||t).focus()}const l1=":not([slot])";function g9e(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const r=e?Array.isArray(e)?e.map(n=>`[slot="${n}"]`).join(","):`[slot="${e}"]`:l1;return i!=null&&i.all?sTe(t,r,i):oTe(t,r,i)}function ZX(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function sTe(t,e,i){let r=e===l1?ZX(t,l1):Array.from(t.querySelectorAll(e));r=i&&i.direct===!1?r:r.filter(s=>s.parentElement===t),r=i!=null&&i.matches?r.filter(s=>s==null?void 0:s.matches(i.matches)):r;const n=i==null?void 0:i.selector;return n?r.map(s=>Array.from(s.querySelectorAll(n))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):r}function oTe(t,e,i){let r=e===l1?ZX(t,l1)[0]||null:t.querySelector(e);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===t?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const n=i==null?void 0:i.selector;return n?r==null?void 0:r.querySelector(n):r}function v9e(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function _9e(t){return(!!t).toString()}function w9e(t){return cTe(t)||lTe(t)}function aTe(t){return uTe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function lTe(t){return!!aTe(t)}function uTe(t){return t.target.assignedNodes({flatten:!0})}function cTe(t){return!!dTe(t).length}function dTe(t){return t.target.assignedElements({flatten:!0})}function b9e(t){return!!(t.isPrimary&&t.button===0)}function S9e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */function V8(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(NX)||t.contains(DX)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function hTe(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?V8():document.addEventListener("DOMContentLoaded",()=>V8(),{once:!0}))}const pTe=hTe;pTe();let YX;function fTe(){try{Y2e(".")}catch{J2e(Ro(qe(YX)))}}function ml(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return Promise.all(e)}YX="components/assets";const JX=Symbol("widget"),mTe=Symbol("widget-test-data"),yTe=[],gTe={},vM=new WeakMap;function KX(t,e){let i=e.children;if(i&&i.length)for(let n=0;n<i.length;++n)i[n]=KX(t,i[n]);else i=yTe;const r=e.vnodeSelector;if(Dj(r)){const n=e.properties||gTe,s=n.key||r;return{vnodeSelector:"div",properties:{key:s,afterCreate:vTe,afterUpdate:_Te,afterRemoved:QX,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}},children:void 0,text:void 0,domNode:null}}return e}function vTe(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,vM.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r._internalHandles.add(Et(()=>QX(t)))}function _Te(t,e,i,{widgetProperties:r}){var s;const n=vM.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function QX(t){var i;const e=vM.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),vM.delete(t))}function Dj(t){return typeof t=="function"&&t[JX]}const z8=new Set;function wTe(t){z8.add(t),t.finally(()=>z8.delete(t))}var XX;const bTe="esri.widgets.Widget";let STe=0;const xTe={widgetIcon:"esri-icon-checkbox-unchecked"};function eee(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?eee(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const $Te=Z2e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const a=e==null?void 0:e(r,n,s,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),h=y=>a==null?void 0:a.call(s,y);s.addEventListener(c,h,l);const p=()=>s.removeEventListener(c,h,l),f=o.afterRemoved;o.afterRemoved=y=>{f==null||f(y),p()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(UK(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let mC=!1,qi=class extends B1(Vi.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new Kr,this._projector=$Te,this._readyForTrueRender=!1,this.iconClass=xTe.widgetIcon,this.icon=null,this.key=this,this._loadLocale=tm(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await Di(this._messageBundleProps.map(async({bundlePath:a,propertyName:l})=>{if(this.destroyed)return;let c=await VT(a);this.uiStrings&&Object.keys(this.uiStrings)&&(c=eee(F(c),this.uiStrings)),this[l]=c}));if(this.destroyed)return;for(const a of o)a.error&&U.getLogger(this).error("widget-intl:locale-error",this.declaredClass,a.error)}await this.loadLocale()}),fTe();const r="esri-widget-uid-"+bX(),n=this.render.bind(this);this._trackingTarget=new gT(()=>this.scheduleRender());const s=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;const o=n();let{properties:a}=o;a||(o.properties=a={});const{key:l}=a;l||(a.key=r),this.visible?a.styles||(a.styles={}):(a.class="",a.styles={display:"none"}),a.styles.display||(a.styles.display="");let c=0;return(h=o.children)==null||h.forEach(p=>{if(Dj(p.vnodeSelector))return;let{properties:f}=p;f||(p.properties=f={}),f.key||(f.key=`${this.id}--${c++}`)}),KX(this,o)};this.render=()=>{if(mC)return s();let o=Ybe(this)??null;if(o)return o;this._trackingTarget.clear(),mC=!0;try{o=Oc(this._trackingTarget,s)}catch(a){throw console.error(a),a}finally{mC=!1}return o&&Jbe(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),wTe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(I2)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Ue(this._trackingTarget),Ue(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,Wk(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return lj(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+STe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(XX=JX,mTe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Wk(this),this._projector.scheduleRender())}classes(...e){return cj.apply(this,e)}renderNow(){Wk(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(D(()=>this.viewModel,(r,n)=>{n&&this._internalHandles.remove("delegated-events"),r&&fT(r)&&this._internalHandles.add(this._delegatedEventNames.map(s=>mT(r,s,o=>{this.emit(s,o)})),"delegated-events")},me)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(I2),this.scheduleRender()};this._internalHandles.add([ET(e),D(()=>this.uiStrings,e),Ai(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};qi[XX]=!0,u([d()],qi.prototype,"_readyForTrueRender",void 0),u([d({value:null})],qi.prototype,"container",null),u([Re("container")],qi.prototype,"castContainer",null),u([d()],qi.prototype,"iconClass",void 0),u([d()],qi.prototype,"icon",void 0),u([d()],qi.prototype,"id",null),u([d()],qi.prototype,"label",null),u([d()],qi.prototype,"renderable",null),u([d()],qi.prototype,"uiStrings",void 0),u([d()],qi.prototype,"viewModel",void 0),u([d({value:!0})],qi.prototype,"visible",null),u([d()],qi.prototype,"key",void 0),u([d()],qi.prototype,"children",void 0),u([d()],qi.prototype,"afterCreate",void 0),u([d()],qi.prototype,"afterUpdate",void 0),u([d()],qi.prototype,"afterRemoved",void 0),qi=u([E(bTe)],qi);const Bt=qi;function U8(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function ETe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function vx(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function MTe(t){return t.type==="bing-maps"}const id=[];let Oy=class extends R0{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new se,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(n=>D(()=>{var s;return[n.suspended,(s=n.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([_i(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ai(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;id.length=0,e&&i?(i.forEach(r=>{var o;if(r.suspended||!((o=r.layer)!=null&&o.attributionVisible))return;const n=r.layer;if(U8(n,"user"))return void vx(id,r,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(r)){const a=this._fetchedAttributionData.get(r);return void(a?vx(id,r,this._getDynamicAttribution(a,e,n)):U8(n)&&vx(id,r,n.copyright))}return void this._fetchAttributionData(r)}const s=n.get("portalItem.accessInformation");vx(id,r,s||n.copyright)}),ETe(this.items,id)&&(this.items.removeAll(),this.items.addMany(id)),id.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await qT(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,MTe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,h=l.zoomMin-(i&&l.zoomMin?1:0),p=l.zoomMax-(i&&l.zoomMax?1:0),f=new lt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:_e.WGS84}),y={extent:Xl(f),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let g=h;g<=p;g++)n[g]??(n[g]=[]),n[g].push(y)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var h;const{extent:n,scale:s}=i;let o=((h=r.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],l=A1(n.center.clone().normalize(),i.spatialReference),c=new Set;return a?a.filter(p=>{const f=p.id,y=!c.has(f)&&l&&p.extent&&vT(p.extent,l);return y&&c.add(f),y}).sort((p,f)=>f.score-p.score||p.objectId-f.objectId).map(p=>p.attribution).join(", "):""}};u([d({readOnly:!0,type:se})],Oy.prototype,"items",void 0),u([d({readOnly:!0})],Oy.prototype,"state",null),u([d()],Oy.prototype,"view",void 0),Oy=u([E("esri.widgets.Attribution.AttributionViewModel")],Oy);const tee=Oy;function At(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:ITe(t[e])}}}function TTe(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function ITe(t){return function(e,...i){TTe(e)?HK(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function rt(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var kTe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},iee=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?iee(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=kTe(n)),e.push(n))}},CTe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return iee(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function x(t,e,...i){return typeof t!="function"||Dj(t)?CTe(t,e,...i):t(e,...i)}const oy="esri-attribution",rd={base:`${oy} esri-widget`,poweredBy:`${oy}__powered-by`,sources:`${oy}__sources`,open:`${oy}--open`,sourcesOpen:`${oy}__sources--open`,link:`${oy}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let cn=class extends Bt{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=rd.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new tee}initialize(){this.addHandles(_i(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[rd.open]:this._isOpen};return x("div",{bind:this,class:this.classes(rd.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return x("div",{class:rd.poweredBy},"Powered by"," ",x("a",{class:rd.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:n}=this,s={[rd.sourcesOpen]:e,[rd.interactive]:i};return x("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(rd.sources,s),innerHTML:n,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([d()],cn.prototype,"_isOpen",void 0),u([d()],cn.prototype,"_isInteractive",null),u([d()],cn.prototype,"_attributionTextOverflowed",void 0),u([d()],cn.prototype,"_prevSourceNodeHeight",void 0),u([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],cn.prototype,"attributionText",null),u([d()],cn.prototype,"iconClass",void 0),u([d()],cn.prototype,"icon",void 0),u([d()],cn.prototype,"itemDelimiter",void 0),u([d()],cn.prototype,"label",null),u([d(),rt("esri/widgets/Attribution/t9n/Attribution")],cn.prototype,"messages",void 0),u([d()],cn.prototype,"view",null),u([d({type:tee})],cn.prototype,"viewModel",void 0),u([At()],cn.prototype,"_toggleState",null),cn=u([E("esri.widgets.Attribution")],cn);const PTe=cn,iS=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return W0(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return u([d()],e.prototype,"goToOverride",void 0),u([d()],e.prototype,"view",void 0),e=u([E("esri.widgets.support.GoTo")],e),e},ATe="esri.widgets.CompassViewModel";let tf=class extends iS(X){constructor(e){super(e),this._handles=new Kr,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(D(()=>this.view,this._updateRotationWatcher,me))}destroy(){zt(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?D(()=>e==null?void 0:e.rotation,this._updateForRotation,me):D(()=>e==null?void 0:e.camera,this._updateForCamera,me))}};u([d({readOnly:!0})],tf.prototype,"canShowNorth",null),u([d()],tf.prototype,"orientation",void 0),u([d({readOnly:!0})],tf.prototype,"state",null),u([d()],tf.prototype,"view",void 0),tf=u([E(ATe)],tf);const ree=tf,nd={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let va=class extends Bt{constructor(e,i){super(e,i),this.iconClass=nd.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new ree}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,r=i==="disabled",n=(i==="rotation"?"rotation":"compass")=="compass",s=r?-1:0,o={[nd.disabled]:r,[nd.interactive]:!r},a={[nd.northIcon]:n,[nd.rotationIcon]:!n},{messages:l}=this;return x("div",{bind:this,class:this.classes(nd.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":l.reset,title:l.reset},x("span",{"aria-hidden":"true",class:this.classes(nd.icon,a),styles:this._toRotationTransform(e)}),x("span",{class:nd.text},l.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};u([d()],va.prototype,"goToOverride",null),u([d()],va.prototype,"iconClass",void 0),u([d()],va.prototype,"icon",void 0),u([d()],va.prototype,"label",null),u([d(),rt("esri/widgets/Compass/t9n/Compass")],va.prototype,"messages",void 0),u([d()],va.prototype,"view",null),u([d({type:ree})],va.prototype,"viewModel",void 0),u([At()],va.prototype,"_reset",null),va=u([E("esri.widgets.Compass")],va);const OTe=va,ay="esri-navigation-toggle",co={base:`${ay} esri-widget`,button:`${ay}__button esri-widget--button`,activeButton:`${ay}__button--active`,panButton:`${ay}__button--pan`,rotateButton:`${ay}__button--rotate`,isLayoutHorizontal:`${ay}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Ly=class extends X{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Ai(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};u([d({readOnly:!0})],Ly.prototype,"state",null),u([d()],Ly.prototype,"navigationMode",void 0),u([d()],Ly.prototype,"view",void 0),Ly=u([E("esri.widgets.NavigationToggleViewModel")],Ly);const nee=Ly;let _a=class extends Bt{constructor(e,i){super(e,i),this.iconClass=co.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new nee}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[co.disabled]:e,[co.isLayoutHorizontal]:this.layout==="horizontal"},n={[co.activeButton]:i},s={[co.activeButton]:!i},o=e?-1:0,a=this.messages.toggle;return x("div",{bind:this,class:this.classes(co.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":a,title:a},x("div",{class:this.classes(co.button,co.panButton,n)},x("span",{class:co.panIcon})),x("div",{class:this.classes(co.button,co.rotateButton,s)},x("span",{class:co.rotationIcon})))}_toggle(){this.toggle()}};u([d()],_a.prototype,"iconClass",void 0),u([d()],_a.prototype,"icon",void 0),u([d()],_a.prototype,"label",null),u([d({value:"vertical"})],_a.prototype,"layout",null),u([d(),rt("esri/widgets/NavigationToggle/t9n/NavigationToggle")],_a.prototype,"messages",void 0),u([d()],_a.prototype,"view",null),u([d({type:nee})],_a.prototype,"viewModel",void 0),u([At()],_a.prototype,"_toggle",null),_a=u([E("esri.widgets.NavigationToggle")],_a);const LTe=_a,Qv={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let zu=class extends Bt{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[Qv.disabled]:!this.enabled,[Qv.interactive]:this.enabled};return x("div",{bind:this,class:this.classes(Qv.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},x("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Qv.icon,this.iconClass??"")}),x("span",{class:Qv.iconText},this.title))}_triggerAction(){this.action.call(this)}};u([d()],zu.prototype,"action",void 0),u([d()],zu.prototype,"enabled",void 0),u([d()],zu.prototype,"iconClass",void 0),u([d()],zu.prototype,"icon",void 0),u([d()],zu.prototype,"title",void 0),u([At()],zu.prototype,"_triggerAction",null),zu=u([E("esri.widgets.IconButton")],zu);const B8=zu;let Ry=class extends X{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};u([d({readOnly:!0})],Ry.prototype,"canZoomIn",null),u([d({readOnly:!0})],Ry.prototype,"canZoomOut",null),u([d()],Ry.prototype,"view",void 0),Ry=u([E("esri.widgets.Zoom.ZoomConditions2D")],Ry);const RTe=Ry;let Fy=class extends X{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([d({readOnly:!0})],Fy.prototype,"canZoomIn",null),u([d({readOnly:!0})],Fy.prototype,"canZoomOut",null),u([d()],Fy.prototype,"view",void 0),Fy=u([E("esri.widgets.Zoom.ZoomConditions3D")],Fy);const FTe=Fy;let kd=class extends X{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new RTe({view:e}):e.type==="3d"&&(this._zoomConditions=new FTe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():qg(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():qg(e.goTo({zoomFactor:.5}))}};u([d()],kd.prototype,"_zoomConditions",void 0),u([d()],kd.prototype,"canZoomIn",null),u([d()],kd.prototype,"canZoomOut",null),u([d({readOnly:!0})],kd.prototype,"state",null),u([d()],kd.prototype,"view",null),kd=u([E("esri.widgets.Zoom.ZoomViewModel")],kd);const see=kd,Xv={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Fl=class extends Bt{constructor(e,i){super(e,i),this.iconClass=Xv.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new see}initialize(){this._zoomInButton=new B8({action:this.zoomIn.bind(this),iconClass:Xv.zoomInIcon}),this._zoomOutButton=new B8({action:this.zoomOut.bind(this),iconClass:Xv.zoomOutIcon})}destroy(){this._zoomInButton=Ue(this._zoomInButton),this._zoomOutButton=Ue(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[Xv.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:n}=e;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=n;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,x("div",{class:this.classes(Xv.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};u([d()],Fl.prototype,"iconClass",void 0),u([d()],Fl.prototype,"icon",void 0),u([d()],Fl.prototype,"label",null),u([d({value:"vertical"})],Fl.prototype,"layout",null),u([d(),rt("esri/widgets/Zoom/t9n/Zoom")],Fl.prototype,"messages",void 0),u([d()],Fl.prototype,"view",null),u([d({type:see})],Fl.prototype,"viewModel",void 0),Fl=u([E("esri.widgets.Zoom")],Fl);const DTe=Fl;function NTe(t){return(t==null?void 0:t.view)!==void 0}let nE=class extends z2e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n==null?void 0:n.widget;NTe(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([D(()=>this.components,this._componentsWatcher,me),D(()=>this.view,this._updateViewAwareWidgets,me)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new rE({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new PTe({view:i});case"compass":return new OTe({view:i});case"navigation-toggle":return new LTe({view:i});case"zoom":return new DTe({view:i})}}};u([d()],nE.prototype,"components",void 0),nE=u([E("esri.views.ui.DefaultUI")],nE);const oee=nE;let sE=class extends oee{constructor(e){super(e),this.components=["attribution","zoom"]}};u([d()],sE.prototype,"components",void 0),sE=u([E("esri.views.ui.2d.DefaultUI2D")],sE);const aee=sE;var cR;let oE=cR=class extends G{constructor(t){super(t),this.color=new ae([0,0,0,1])}clone(){return new cR(F({color:this.color}))}};u([d({type:ae,json:{write:!0}})],oE.prototype,"color",void 0),oE=cR=u([E("esri.webmap.background.ColorBackground")],oE);const jTe=oE;let lee,uee,cee,dee,hee,pee;async function VTe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:s}]=await Promise.all([O(()=>import("./webglDeps-161237df.js"),["assets/webglDeps-161237df.js","assets/VertexArrayObject-e943c837.js","assets/Texture-49e8f2d7.js","assets/enums-b14466b3.js","assets/ProgramTemplate-acf57c6e.js","assets/programUtils-01610f2d.js","assets/NestedMap-1b5db22e.js"]),O(()=>import("./mapViewDeps-56fa84d9.js"),["assets/mapViewDeps-56fa84d9.js","assets/CIMResourceManager-287fc232.js","assets/fontUtils-bfde2177.js","assets/Rasterizer-197411b5.js","assets/cimAnalyzer-513e6c62.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/enums-f1a6a48a.js","assets/alignmentUtils-ae955d28.js","assets/definitions-b77f917a.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/rasterizingUtils-8b0cb200.js","assets/imageutils-a2ed857b.js","assets/Container-c5aca323.js","assets/EffectView-88fc1232.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/BufferPool-71d7a14e.js","assets/AttributeStoreView-e6e43d4a.js","assets/TiledDisplayObject-bf2313fd.js","assets/color-40238c06.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-777ff42e.js","assets/VertexArrayObject-e943c837.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-acf57c6e.js","assets/GeometryUtils-a6bf4843.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-6c3a7c54.js","assets/visualVariablesUtils-c057ebbd.js","assets/ExpandedCIM-49489b60.js","assets/util-1d45df17.js","assets/enums-fb086c25.js","assets/programUtils-01610f2d.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-c3038988.js","assets/Matcher-e6253044.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-afee9a44.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-3160b76b.js","assets/ComputedAttributeStorage-30cf9035.js","assets/arcadeTimeUtils-4146daa5.js","assets/centroid-8e8cfa47.js","assets/RenderingContext-6a4d886d.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/basicInterfaces-bb952591.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-895344a3.js","assets/normalizeUtilsSync-58d43129.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/GraphicContainer-7ec52f09.js","assets/BaseGraphicContainer-d0a42524.js","assets/FeatureContainer-8ffad194.js","assets/TileContainer-58dd9f78.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-9d04786e.js"])]);uee=t,cee=e,dee=i,hee=r,pee=n,lee=s}const G8=160,H8={flipY:!0,premultipliedAlpha:!0};let Ie=class extends ibe(j1e(w1e(uxe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Jb({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new Pn({constraints:new WQ({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new x$e(this),this._pePromise=null,this.floors=new se,this.highlightOptions=new hX,this.inputManager=new r2e({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new pX,this.type="2d",this.ui=new aee,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([D(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(G8)},ul),this.on("resize",i=>this.stateManager.resize(i.width,i.height)),D(()=>{var i;return(i=this.animationManager)==null?void 0:i.animation},i=>{this.animation=i})]),$_e()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Ue(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new c2e(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(!n||n.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!zc()||(this._pePromise||(this._pePromise=uu().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=this.spatialReference,r=e.targetGeometry;return!!cu(r.spatialReference,i)||this._projectionEngineLoaded}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{var n;e===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get background(){return UTe(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=e,i==null||i.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){this.stateManager.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var i,r,n;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(V("esri-2d-log-updating")){const s=this.allLayerViews.reduce((o,a)=>({...o,[a.layer.id]:!a.destroyed&&!("layerViews"in a)&&a.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(r=this.labelManager)==null?void 0:r.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,i){if(e)return this.animation&&(this.animation=null),this._createAnimation(),Ci(()=>this.ready,i).then(()=>{var s;const r={animate:!0,...i},n=n$e(e,this);return(s=this.animation)==null||s.update(n),this._gotoTask={},r.animate?this._gotoAnimated(n,r):this._gotoImmediate(n,r)});U.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(e,i){const r=Qz(e)?Kz(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set,s=!1,o=null,a=null;i!=null&&i.include?W8(i.include,q8(this,p=>n.add(p),p=>{o||(o=new Set),o.add(p)},p=>n.add(p),()=>s=!0)):(s=!0,n=new Set(this.allLayerViews)),i!=null&&i.exclude&&W8(i.exclude,q8(this,p=>n.delete(p),p=>{a||(a=new Set),a.add(p)}));const l=this.allLayerViews.filter(p=>!p.suspended&&n.has(p)).reverse(),c=this.toMap(r);let h=[...s?this.graphicsView.hitTest(c).map(p=>({type:"graphic",graphic:p,layer:null,mapPoint:c})):[],...await Promise.all(l.map(p=>p.hitTest(c,r)).toArray())].filter(Pi).flat().filter(Pi);return o&&(h=h.filter(p=>!("graphic"in p)||!p.graphic||(o==null?void 0:o.has(dR(p.graphic))))),a&&(h=h.filter(p=>!("graphic"in p)||!p.graphic||!(a!=null&&a.has(dR(p.graphic))))),{screenPoint:r,results:h}}async takeScreenshot(e){const i=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(i);return p2e(r,{format:i.format,quality:i.quality,rotation:0,disableDecorations:!1},H8)}async _takeScreenshot(e){const i=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(i);return f2e(r,H8)}_createScreenshotPlan(e){e=e??{};const i=this.supersampleScreenshotsEnabled?Math.min(4,v2e(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let r;e.layers?(r=[],e.layers.forEach(o=>{const a=this.allLayerViews.find(l=>l.layer.id===o.id);a&&"container"in a&&a.container&&r.push(a.container)})):r=this._stage.children;const{format:n,quality:s}=g2e(e.format,e.quality);return h2e(e,i,this.size,this.padding,n,s,r,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const i=Qz(e)?Kz(this,e):e;return this.stateManager.toMap(i)}toScreen(e){return this.stateManager.toScreen(e)}on(e,i,r,n){return this.inputManager&&this.viewEvents.on(e,i,r,n)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,i,r;return this.map&&"initialViewProperties"in this.map&&((i=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:i.spatialReference)||((r=this.defaultsFromMap)==null?void 0:r.spatialReference)||null}hasLayerViewModule(e){return s8.hasLayerViewModule(e)}importLayerView(e){return s8.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(U.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(i=>({...i,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=A2e(this.type);return V("safari")&&V("safari")<9&&(e=new C("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:V("safari")})),e!=null?(U.getLogger(this).warn("#validate()",e.message),Promise.reject(e)):VTe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new WL),this.animation}_cancellableGoTo(e,i,r){const n=()=>e===this._gotoTask,s=r.then(()=>{n()&&(this.animation=null)}).catch(a=>{throw n()&&(i&&!i.done&&(i.stop(),this.frameTask.animationInProgress=!1),this.animation=null),a}),o=new Promise(a=>a(s));return i.when().catch(()=>{n()&&o.cancel&&o.cancel()}),o}_gotoImmediate(e,i){const r=this._gotoTask,n=this.animation,s=e.then(o=>{if(Tt(i),r!==this._gotoTask)throw new C("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(r,n,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const i=performance.now()-this._lastStationaryEventTimestamp;i<G8&&(this._stationaryTimer=this._flipStationary(i))},e)),this._stationaryTimer}_getDefaultViewpoint(){var _;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,c=((_=l==null?void 0:l.targetGeometry)==null?void 0:_.extent)??i,h=c==null?void 0:c.center,p=(l==null?void 0:l.rotation)??0,f=(l==null?void 0:l.scale)||c&&Xg(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),y=a.center??h,g=a.rotation??p,v=a.scale??f;return y&&v?new Qa({targetGeometry:y,scale:v,rotation:g}):null}_gotoAnimated(e,i){const r=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const s=e.then(o=>{if(Tt(i),r!==this._gotoTask)throw new C("view:goto-interrupted","Goto was interrupted");return n.update(o),this.animationManager.animate(n,this.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s)}_startup(){var a;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const i=new lee(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new pee,this._magnifierView.magnifier=this.magnifier;const r=new dee({view:this});this._set("labelManager",r);const n=new S$e({view:this});this._set("animationManager",n);const s=new hee({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",l=>this.fatalError=l.error),D(()=>this.stationary,l=>i.stationary=l,yn),D(()=>this.background,l=>{i.backgroundColor=l==null?void 0:l.color,this._magnifierView.backgroundColor=l==null?void 0:l.color},yn),D(()=>this.magnifier,l=>this._magnifierView.magnifier=l,yn),D(()=>this.renderingOptions,l=>i.renderingOptions=l,yn),D(()=>this.highlightOptions,l=>i.highlightOptions=l,yn),D(()=>this.state.id,()=>i.state=this.state,yn)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this._stage.addChild(i.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new O$e(ebe.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new uee({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new cee(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Ie.type="2d",u([d({readOnly:!0})],Ie.prototype,"animationManager",void 0),u([d({constructOnly:!0})],Ie.prototype,"deactivatedWebGLExtensions",void 0),u([d({constructOnly:!0})],Ie.prototype,"debugWebGLExtensions",void 0),u([d({readOnly:!0})],Ie.prototype,"featuresTilingScheme",void 0),u([d({readOnly:!0})],Ie.prototype,"fullOpacity",void 0),u([d({readOnly:!0})],Ie.prototype,"graphicsTileStore",null),u([d()],Ie.prototype,"graphicsView",void 0),u([d()],Ie.prototype,"stateManager",void 0),u([d()],Ie.prototype,"constraintsInfo",null),u([d({readOnly:!0})],Ie.prototype,"state",null),u([d()],Ie.prototype,"initialExtentRequired",null),u([d()],Ie.prototype,"labelManager",void 0),u([d({readOnly:!0})],Ie.prototype,"resourceManager",null),u([d({readOnly:!0})],Ie.prototype,"textureManager",null),u([d({readOnly:!0})],Ie.prototype,"mapViewNavigation",void 0),u([d({constructOnly:!0})],Ie.prototype,"renderCanvas",void 0),u([d()],Ie.prototype,"renderingOptions",void 0),u([d({readOnly:!0})],Ie.prototype,"rendering",void 0),u([d({constructOnly:!0})],Ie.prototype,"supersampleScreenshotsEnabled",void 0),u([d({readOnly:!0})],Ie.prototype,"supportsGround",void 0),u([d()],Ie.prototype,"_stationaryTimer",void 0),u([d()],Ie.prototype,"_defaultsFromMapSettings",null),u([d()],Ie.prototype,"_pePromise",void 0),u([d({readOnly:!0})],Ie.prototype,"typeSpecificPreconditionsReady",null),u([d()],Ie.prototype,"animation",null),u([d({type:jTe})],Ie.prototype,"background",null),u([d()],Ie.prototype,"center",null),u([d({type:WQ})],Ie.prototype,"constraints",null),u([d()],Ie.prototype,"extent",null),u([d()],Ie.prototype,"floors",void 0),u([d({type:hX})],Ie.prototype,"highlightOptions",void 0),u([d({readOnly:!0})],Ie.prototype,"inputManager",void 0),u([d()],Ie.prototype,"map",void 0),u([d()],Ie.prototype,"padding",null),u([d()],Ie.prototype,"resizeAlign",null),u([d({readOnly:!0})],Ie.prototype,"resolution",null),u([d()],Ie.prototype,"rotation",null),u([d()],Ie.prototype,"scale",null),u([d({constructOnly:!0})],Ie.prototype,"spatialReferenceLocked",void 0),u([d()],Ie.prototype,"stationary",null),u([d({type:pX,readOnly:!0})],Ie.prototype,"timeline",void 0),u([d({readOnly:!0})],Ie.prototype,"type",void 0),u([d({readOnly:!0})],Ie.prototype,"updating",null),u([d()],Ie.prototype,"viewpoint",null),u([d()],Ie.prototype,"zoom",null),u([d({readOnly:!0})],Ie.prototype,"navigating",null),u([d(),Re(t=>t instanceof oee?t:dT(aee,t))],Ie.prototype,"ui",void 0),Ie=u([E("esri.views.MapView")],Ie);const zTe=Ie;function dR(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function q8(t,e,i,r,n){return s=>{if(s instanceof fi){if(s.layer===t)n==null||n();else{const o=t.allLayerViews.find(a=>a.layer===s.layer);o&&(r==null||r(o))}i(dR(s))}else{const o=t.allLayerViews.find(a=>a.layer===s);o&&e(o)}}}function W8(t,e){if(t)if(E2(t))for(const i of t)if(E2(i))for(const r of i)e(r);else e(i);else e(t)}function UTe(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}var _M;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(_M||(_M={}));function fee(t,e,i){return t.units[e][i]}function fv(t,e,i,r=2,n="abbr"){return`${Yo(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:e>0?"never":"exceptZero"})} ${fee(t,i,n)}`}function iI(t,e,i,r=2,n="abbr"){return`${Yo(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${fee(t,i,n)}`}function N9e(t,e,i,r=2,n="abbr"){const s=pW(e,i);return fv(t,ht(e,i,s),s,r,n)}function j9e(t,e,i,r=2,n="abbr"){const s=pW(e,i);return iI(t,ht(e,i,s),s,r,n)}function V9e(t,e,i,r=2,n="abbr"){const s=fW(e,i);return fv(t,ht(e,i,s),s,r,n)}function z9e(t,e,i,r=2,n="abbr"){const s=fW(e,i);return iI(t,ht(e,i,s),s,r,n)}function U9e(t,e,i,r=2,n="abbr"){const s=mW(e,i);return fv(t,ht(e,i,s),s,r,n)}function B9e(t,e,i,r=2,n="abbr"){const s=mW(e,i);return iI(t,ht(e,i,s),s,r,n)}function G9e(t,e,i,r=2,n="abbr"){const s=yW(e,i);return fv(t,ht(e,i,s),s,r,n)}function H9e(t,e,i,r=2,n="abbr"){const s=yW(e,i);return iI(t,ht(e,i,s),s,r,n)}function q9e(t,e,i,r=2,n="abbr"){const s=Qde(e,i);return fv(t,ht(e,i,s),s,r,n)}function W9e(t,e,i,r=2,n="abbr"){const s=Xde(e,i);return fv(t,ht(e,i,s),s,r,n)}function Z9e(t,e,i,r,n){n=n??2;let s=zJ.normalize(BTe(ht(t,e,"degrees"),i,r),0,!0);const o={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:n,minimumFractionDigits:n,signDisplay:s>0?"never":"exceptZero"};return s=mee(s,o),Yo(s,o)}function Y9e(t,e,i,r,n){i!==r&&(t=-t);const s={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:n=n??2,minimumFractionDigits:n,signDisplay:"exceptZero"};let o=ht(t,e,"degrees")%360;return o=mee(o,s),Yo(o,s)}const Z8=new Map;function mee(t,e){const i=JSON.stringify(e);let r=Z8.get(i);return r||(r=new Intl.NumberFormat("en-US",e),Z8.set(i,r)),/\-?\+?360/.test(r.format(t))?0:t}function BTe(t,e,i){if(e===i)return t;switch(i){case"arithmetic":return GTe(t);case"geographic":return HTe(t)}}function GTe(t){return 90-t}function HTe(t){return-t-90}const Y8=["B","kB","MB","GB","TB"];function qTe(t,e){let i=e===0?0:Math.floor(Math.log(e)/Math.log(_M.KILOBYTES));i=xs(i,0,Y8.length-1);const r=Yo(e/_M.KILOBYTES**i,{maximumFractionDigits:2});return Wo(t.units.bytes[Y8[i]],{fileSize:r})}function WTe(t){const{exifInfo:e,exifName:i,tagName:r}=t;if(!e||!i||!r)return null;const n=e.find(s=>s.name===i);return n?ZTe({tagName:r,tags:n.tags}):null}function ZTe(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const r=i.find(n=>n.name===e);return r&&r.value||null}var hR;const YTe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let es=hR=class extends G{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=WTe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return YTe[e]||null}clone(){return new hR({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};u([d({type:String})],es.prototype,"contentType",void 0),u([d()],es.prototype,"exifInfo",void 0),u([d({readOnly:!0})],es.prototype,"orientationInfo",null),u([d({type:Mt})],es.prototype,"id",void 0),u([d({type:String})],es.prototype,"globalId",void 0),u([d({type:String})],es.prototype,"keywords",void 0),u([d({type:String})],es.prototype,"name",void 0),u([d({json:{read:!1}})],es.prototype,"parentGlobalId",void 0),u([d({json:{read:!1}})],es.prototype,"parentObjectId",void 0),u([d({type:Mt})],es.prototype,"size",void 0),u([d({json:{read:!1}})],es.prototype,"url",void 0),es=hR=u([E("esri.layers.support.AttachmentInfo")],es);const JTe=es;var pR;let Tr=pR=class extends G{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new pR(F({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};u([d({type:[String],json:{write:!0}})],Tr.prototype,"attachmentTypes",void 0),u([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Tr.prototype,"attachmentsWhere",void 0),u([d({type:Boolean,json:{write:!0}})],Tr.prototype,"cacheHint",void 0),u([d({type:[String],json:{write:!0}})],Tr.prototype,"keywords",void 0),u([d({type:[Number],json:{write:!0}})],Tr.prototype,"globalIds",void 0),u([d({json:{write:!0}})],Tr.prototype,"name",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Tr.prototype,"num",void 0),u([d({type:[Number],json:{write:!0}})],Tr.prototype,"objectIds",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],Tr.prototype,"returnMetadata",void 0),u([d({type:[Number],json:{write:!0}})],Tr.prototype,"size",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],Tr.prototype,"start",void 0),u([ie("start"),ie("num")],Tr.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Tr.prototype,"where",void 0),Tr=pR=u([E("esri.rest.support.AttachmentQuery")],Tr),Tr.from=Xt(Tr);const fR=Tr,KTe="esri.widgets.Feature.support.featureUtils",J8=U.getLogger(KTe),QTe=/href=(""|'')/gi,XTe=/(\{([^\{\r\n]+)\})/g,eIe=/\'/g,yee=/^\s*expression\//i,tIe=/(\n)/gi,iIe=/[\u00A0-\u9999<>\&]/gim,rIe=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,nIe=/^(?:mailto:|tel:)/,gee="relationships/",K8=$g("short-date-short-time");function vee(t){if(t!=null)return t.get("sourceLayer")||t.get("layer")}async function wM(t,e){return typeof t=="function"?t(e):t}function _ee(t=""){if(t)return!nIe.test(t.trim().toLowerCase())}function Nj(t){return!!t&&yee.test(t)}function sIe(t,e){if(!Nj(e)||!t)return null;const i=e.replace(yee,"").toLowerCase();let r=null;return t.some(n=>n.name.toLowerCase()===i&&(r=n,!0)),r}function wee(t,e){const i=sIe(e,t==null?void 0:t.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function oIe(t,e){const i=e.get(t.toLowerCase());return`{${i&&i.fieldName||t}}`}function aIe(t){return t.replaceAll(QTe,"")}function u1(t,e){const i=jj(e,t);return i?i.name:t}function lIe(t,e){return t&&t.map(i=>u1(i,e))}function jj(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function bee(t){return`${t}`.trim()}function Zf({attributes:t,globalAttributes:e,layer:i,text:r,expressionAttributes:n,fieldInfoMap:s}){return r?mR({formattedAttributes:e,template:hIe(r,{...e,...n,...t},i),fieldInfoMap:s}):""}function mR({formattedAttributes:t,template:e,fieldInfoMap:i}){return bee(aIe(Wo(Wo(e,r=>oIe(r,i)),t)))}function uIe(t,e,i=!1){const r=e[t];if(typeof r=="string"){const n="%27",s=(i?encodeURIComponent(r):r).replaceAll(eIe,n);e[t]=s}}function cIe(t,e=!1){const i={...t};return Object.keys(i).forEach(r=>uIe(r,i,e)),i}function dIe(t,e,i){const r=(e=bee(e))&&e[0]!=="{";return Wo(t,cIe(i,r||!1))}function yR(t,e){return t.replaceAll(XTe,(i,r,n)=>{const s=jj(e,n);return s?`{${s.name}}`:r})}function hIe(t,e,i){const r=yR(t,i);return r&&r.replaceAll(rIe,(n,s,o)=>dIe(n,s||o,e))}function pIe(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const i=Number(t);if(!isNaN(i))return i}return t}function Q8(t){return t!=null&&typeof t=="object"&&"layer"in t&&!!t.layer}function fIe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function mIe(t){return t!=null&&typeof t=="object"&&"fieldsIndex"in t&&"geometryType"in t&&"getField"in t&&"load"in t&&"loaded"in t&&"objectIdField"in t&&"spatialReference"in t&&"type"in t&&t.type==="feature"&&"when"in t}function yIe(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatureCount"in t&&"queryObjectIds"in t&&"queryRelatedFeatures"in t&&"queryRelatedFeaturesCount"in t&&"relationships"in t}function rS(t){return mIe(t)&&yIe(t)}function gIe(t){return!!t&&typeof t=="object"&&"sourceLayer"in t&&rS(t.sourceLayer)}function vIe(t,e){var h;const{fieldInfos:i,fieldName:r,preventPlacesFormatting:n,layer:s}=e,o=See(i,r),a=o==null?void 0:o.clone(),l=jj(s,r);if(a&&!ZA(r)){const p=l==null?void 0:l.type;if(p==="date"||p==="date-only"||p==="time-only"||p==="timestamp-offset"||(h=a.format)!=null&&h.dateFormat){const f=a.format??new Eg;if(f.dateFormat??(f.dateFormat=p==="date-only"?"short-date":"short-date-short-time"),typeof t=="number"){const y=!Q8(s)&&tQ(s)&&s.datesInUnknownTimezone||Q8(s)&&fIe(s.layer)&&s.layer.datesInUnknownTimezone;return f.formatDate(t,y)}switch(p){case"date-only":return f.formatDateOnly(t);case"time-only":return f.formatTimeOnly(t);case"timestamp-offset":return f.formatTimestamp(t)}}}const c=a==null?void 0:a.format;return typeof t=="string"&&ZA(r)&&c?c.formatRasterPixelValue(t):typeof(t=pIe(t,c))=="string"||t==null||c==null?nS(t):n?Yo(t,{...PY(c),minimumFractionDigits:0,maximumFractionDigits:20}):c.formatNumber(t)}function See(t,e){if(t&&t.length&&e)return t.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===e.toLowerCase()})}function _Ie({fieldName:t,graphic:e,layer:i}){if(yc(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const n=i.getFeatureType(e);return n?n.name:null}function wIe({fieldName:t,value:e,graphic:i,layer:r}){if(yc(t)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(t,{feature:i});return n&&n.type==="coded-value"?n.getName(e):null}function bIe(t,e){const{creatorField:i,creationDateField:r,editorField:n,editDateField:s}=t;if(!e)return;const o=e[s];if(typeof o=="number"){const l=e[n];return{type:"edit",date:io(o,K8),user:l}}const a=e[r];if(typeof a=="number"){const l=e[i];return{type:"create",date:io(a,K8),user:l}}return null}function SIe(t,e){const i=new Map;return t&&t.forEach(r=>{const n=u1(r.fieldName,e);r.fieldName=n,i.set(n.toLowerCase(),r)}),i}function X8(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const s=n&&n.fieldInfos;s&&e.push(...s)}}),e}function Vj(t){return t.replaceAll(iIe,e=>`&#${e.charCodeAt(0)};`)}function nS(t){return typeof t=="string"?t.replaceAll(tIe,'<br class="esri-text-new-line" />'):t}function xee(t){var c,h;const{value:e,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:s,graphic:o}=t;if(e==null)return"";const a=wIe({fieldName:i,value:e,graphic:o,layer:s});if(a)return a;const l=_Ie({fieldName:i,graphic:o,layer:s});if(l)return l;if(n.get(i.toLowerCase()))return vIe(e,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:s});switch((h=(c=s==null?void 0:s.fieldsIndex)==null?void 0:c.get(i))==null?void 0:h.type){case"date":return io(e);case"date-only":return SN(e);case"time-only":return xN(e);case"timestamp-offset":return $N(e)}return nS(e)}function yC({fieldInfos:t,attributes:e,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:s}){const o={};return s==null||s.forEach(a=>MIe({attributes:o,relatedInfo:a,fieldInfoMap:n,fieldInfos:t,layer:i})),e&&Object.keys(e).forEach(a=>{const l=e[a];o[a]=xee({fieldName:a,fieldInfos:t,fieldInfoMap:n,layer:i,value:l,graphic:r})}),o}async function $ee(t,e){var h,p;const{layer:i,graphic:r,outFields:n,objectIds:s,returnGeometry:o,spatialReference:a}=t,l=s[0];if(typeof l!="number"&&typeof l!="string"){const f="Could not query required fields for the specified feature. The feature's ID is invalid.",y={layer:i,graphic:r,objectId:l,requiredFields:n};return J8.warn(f,y),null}if(!((p=(h=hu(i))==null?void 0:h.operations)!=null&&p.supportsQuery)){const f="The specified layer cannot be queried. The following fields will not be available.",y={layer:i,graphic:r,requiredFields:n,returnGeometry:o};return J8.warn(f,y),null}const c=i.createQuery();return c.objectIds=s,c.outFields=n!=null&&n.length?n:[i.objectIdField],c.returnGeometry=!!o,c.returnZ=!!o,c.returnM=!!o,c.outSpatialReference=a,(await i.queryFeatures(c,e)).features[0]}async function xIe(t){var r;if(!((r=t.expressionInfos)!=null&&r.length))return!1;const e=await su(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function $Ie({graphic:t,popupTemplate:e,layer:i,spatialReference:r},n){if(!i||!e||(typeof i.load=="function"&&await i.load(n),!t.attributes))return;const s=t.attributes[i.objectIdField];if(s==null)return;const o=[s],a=await e.getRequiredFields(i.fieldsIndex),l=lme(a,t),c=l?[]:a,h=e.returnGeometry||await xIe(e);if(l&&!h)return;const p=await $ee({layer:i,graphic:t,outFields:c,objectIds:o,returnGeometry:h,spatialReference:r},n);p&&(p.geometry&&(t.geometry=p.geometry),p.attributes&&(t.attributes={...t.attributes,...p.attributes}))}function yc(t=""){return!!t&&t.includes(gee)}function EIe(t){return t?`${gee}${t.layerId}/${t.fieldName}`:""}function eU({attributes:t,graphic:e,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:s}){t&&e&&i&&Object.keys(e.attributes).forEach(o=>{const a=EIe({layerId:i.relation.id.toString(),fieldName:o}),l=e.attributes[o];t[a]=xee({fieldName:a,fieldInfos:r,fieldInfoMap:n,layer:s,value:l,graphic:e})})}function MIe({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n}){t&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(s=>eU({attributes:t,graphic:s,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(s=>eU({attributes:t,graphic:s,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n})))}const tU=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},Eee=({layer:t,method:e,query:i,definitionExpression:r})=>{var o,a;if(!((a=(o=t.capabilities)==null?void 0:o.query)!=null&&a.supportsCacheHint)||e==="attachments")return;const n=i.where!=null?i.where:null,s=i.geometry!=null?i.geometry:null;tU(r)||tU(n)||(s==null?void 0:s.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},TIe=({query:t,layer:e,method:i})=>{Eee({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},IIe=({queryPayload:t,layer:e,method:i})=>{Eee({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function kIe(t,e,i){return t&&e&&i?iU(t.allLayers,e,i)||iU(t.allTables,e,i):null}function iU(t,e,i){return t.filter(rS).find(r=>r!==e&&r.url===e.url&&r.layerId===i.relatedTableId)}const rU={editing:!1,operations:{add:!0,update:!0,delete:!0}},Mee=se.ofType(JTe);let ts=class extends X{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...rU},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Mee,this.fileInfos=new se,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(D(()=>this.graphic,()=>this._graphicChanged(),me))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(e){return{...rU,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.layer||e.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i}=this;if(!e||typeof e.queryAttachments!="function")throw new C("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId(),n=new fR({objectIds:[r],returnMetadata:!0}),s=[],o=e.queryAttachments(n).then(l=>l[r]||s).catch(()=>s);this._getAttachmentsPromise=o,this.notifyChange("state");const a=await o;return i.removeAll(),a.length&&i.addMany(a),this._getAttachmentsPromise=null,this.notifyChange("state"),a}async addAttachment(e,i=this.graphic){var l;const{_attachmentLayer:r,attachmentInfos:n,capabilities:s}=this;if(!i)throw new C("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new C("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((l=s.operations)!=null&&l.add))throw new C("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new C("invalid-layer","addAttachment(): A valid layer is required.");const o=r.addAttachment(i,e).then(c=>this._queryAttachment(c.objectId,i)),a=await o;return n.add(a),a}async deleteAttachment(e){var l;const{_attachmentLayer:i,attachmentInfos:r,graphic:n,capabilities:s}=this;if(!e)throw new C("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((l=s.operations)!=null&&l.delete))throw new C("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new C("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new C("invalid-graphic","deleteAttachment(): A graphic is required.");const o=i.deleteAttachments(n,[e.id]).then(()=>e),a=await o;return r.remove(a),a}async updateAttachment(e,i=this.activeAttachmentInfo){var h;const{_attachmentLayer:r,attachmentInfos:n,graphic:s,capabilities:o}=this;if(!e)throw new C("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new C("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((h=o.operations)!=null&&h.update))throw new C("invalid-capabilities","updateAttachment(): Update capabilities are required.");const a=n.findIndex(p=>p===i);if(!r||typeof r.updateAttachment!="function")throw new C("invalid-layer","updateAttachment(): A valid layer is required.");if(!s)throw new C("invalid-graphic","updateAttachment(): A graphic is required.");const l=r.updateAttachment(s,i.id,e).then(p=>this._queryAttachment(p.objectId)),c=await l;return n.splice(a,1,c),c}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const r={file:e,form:i};return this.fileInfos.add(r),r}updateFile(e,i,r=this.activeFileInfo){if(!e||!i||!r)return null;const n=this.fileInfos.findIndex(s=>r===s);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:i}),this.fileInfos.items[n]}deleteFile(e){const i=this.fileInfos.find(r=>r.file===e);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:r}=this;if(!e||!(r!=null&&r.queryAttachments))throw new C("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i),s=new fR({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return r.queryAttachments(s).then(o=>o[n][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,i=vee(e);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};u([d()],ts.prototype,"capabilities",void 0),u([Re("capabilities")],ts.prototype,"castCapabilities",null),u([d()],ts.prototype,"activeAttachmentInfo",void 0),u([d()],ts.prototype,"activeFileInfo",void 0),u([d({readOnly:!0,type:Mee})],ts.prototype,"attachmentInfos",void 0),u([d()],ts.prototype,"fileInfos",void 0),u([d({type:fi})],ts.prototype,"graphic",void 0),u([d()],ts.prototype,"mode",void 0),u([d({readOnly:!0})],ts.prototype,"state",null),u([d()],ts.prototype,"filesEnabled",void 0),u([d({readOnly:!0})],ts.prototype,"supportsResizeAttachments",null),ts=u([E("esri.widgets.Attachments.AttachmentsViewModel")],ts);const rI=ts;function nU(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function CIe(t){const e=qe("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const sU={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Qe="esri-attachments",$p="esri-button",te={base:Qe,loaderContainer:`${Qe}__loader-container`,loader:`${Qe}__loader`,fadeIn:`${Qe}--fade-in`,container:`${Qe}__container`,containerList:`${Qe}__container--list`,containerPreview:`${Qe}__container--preview`,actions:`${Qe}__actions`,deleteButton:`${Qe}__delete-button`,addAttachmentButton:`${Qe}__add-attachment-button`,errorMessage:`${Qe}__error-message`,items:`${Qe}__items`,item:`${Qe}__item`,itemButton:`${Qe}__item-button`,itemMask:`${Qe}__item-mask`,itemMaskIcon:`${Qe}__item-mask--icon`,itemImage:`${Qe}__image`,itemImageResizable:`${Qe}__image--resizable`,itemLabel:`${Qe}__label`,itemFilename:`${Qe}__filename`,itemChevronIcon:`${Qe}__item-chevron-icon`,itemLink:`${Qe}__item-link`,itemLinkOverlay:`${Qe}__item-link-overlay`,itemLinkOverlayIcon:`${Qe}__item-link-overlay-icon`,itemEditIcon:`${Qe}__item-edit-icon`,itemAddIcon:`${Qe}__item-add-icon`,itemAddButton:`${Qe}__item-add-button`,formNode:`${Qe}__form-node`,fileFieldset:`${Qe}__file-fieldset`,fileLabel:`${Qe}__file-label`,fileName:`${Qe}__file-name`,fileInput:`${Qe}__file-input`,metadata:`${Qe}__metadata`,metadataFieldset:`${Qe}__metadata-fieldset`,progressBar:`${Qe}__progress-bar`,esriWidget:"esri-widget",esriButton:$p,buttonDisabled:`${$p}--disabled`,esriButtonSecondary:`${$p}--secondary`,esriButtonTertiary:`${$p}--tertiary`,esriButtonThird:`${$p}--third`,esriButtonSmall:`${$p}--small`,esriButtonHalf:`${$p}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},gC=window.CSS;let dn=class extends Bt{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...sU},this._supportsImageOrientation=gC&&gC.supports&&gC.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new rI),this.addHandles([_i(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),_i(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),D(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),me)])}loadDependencies(){return ml({icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"])})}get capabilities(){return this.viewModel.capabilities}set capabilities(e){this.viewModel.capabilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...sU,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new C("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new C("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new C("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){var r;const i=this.viewModel.deleteFile(e||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:r}=i;return x("div",{class:this.classes(te.base,te.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?x("div",{key:"error-message",class:te.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this.renderAddForm():i==="edit"?this.renderDetailsForm(r||e):this.renderAttachmentContainer()}renderLoading(){return x("div",{class:te.loaderContainer,key:"loader"},x("div",{class:te.loader}))}renderProgressBar(){return this.visibleElements.progressBar?x("div",{class:te.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:i}=this,r=e||!i,n=this.visibleElements.cancelAddButton?x("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(te.esriButton,te.esriButtonTertiary,te.esriButtonSmall,te.esriButtonHalf,e&&te.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?x("button",{type:"submit",disabled:r,class:this.classes(te.esriButton,te.esriButtonSecondary,te.esriButtonSmall,te.esriButtonHalf,{[te.buttonDisabled]:r})},this.messages.add):null,o=i?x("span",{key:"file-name",class:te.fileName},i.name):null,a=x("form",{bind:this,afterCreate:mc,afterRemoved:wz,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},x("fieldset",{class:te.fileFieldset},o,x("label",{class:this.classes(te.fileLabel,te.esriButton,te.esriButtonSecondary)},i?this.messages.changeFile:this.messages.selectFile,x("input",{class:te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,n);return x("div",{key:"add-form-container",class:te.formNode},a)}renderDetailsForm(e){var $,T,I;const{visibleElements:i,viewModel:r,selectedFile:n,submitting:s}=this,{capabilities:o}=r,a=s||!n;let l,c,h,p;n?(l=n.type,c=n.name,h=n.size):e&&"file"in e?(l=e.file.type,c=e.file.name,h=e.file.size):e&&"contentType"in e&&(l=e.contentType,c=e.name,h=e.size,p=e.url);const f=o.editing&&(($=o.operations)!=null&&$.delete)&&i.deleteButton?x("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:A=>this._submitDeleteAttachment(A,e),class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonTertiary,te.deleteButton,{[te.buttonDisabled]:s})},this.messages.delete):void 0,y=o.editing&&((T=o.operations)!=null&&T.update)&&i.updateButton?x("button",{disabled:a,key:"update-button",type:"submit",class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonThird,{[te.buttonDisabled]:a})},this.messages.update):void 0,g=this.visibleElements.cancelUpdateButton?x("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonTertiary,te.esriButtonThird,{[te.buttonDisabled]:s})},this.messages.cancel):void 0,v=o.editing&&((I=o.operations)!=null&&I.update)?x("fieldset",{key:"file",class:te.fileFieldset},x("span",{key:"file-name",class:te.fileName},c),x("label",{class:this.classes(te.fileLabel,te.esriButton,te.esriButtonSecondary)},this.messages.changeFile,x("input",{class:te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,_=x("fieldset",{key:"size",class:te.metadataFieldset},x("label",null,qTe(this.messagesUnits,h??0))),w=x("fieldset",{key:"content-type",class:te.metadataFieldset},x("label",null,l)),S=p!=null?x("a",{class:te.itemLink,href:p,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),x("div",{class:te.itemLinkOverlay},x("span",{class:te.itemLinkOverlayIcon},x("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),b=x("form",{bind:this,afterCreate:mc,afterRemoved:wz,"data-node-ref":"_updateAttachmentForm",onsubmit:A=>this._submitUpdateAttachment(A,e)},x("div",{class:te.metadata},_,w),v,x("div",{class:te.actions},f,g,y));return x("div",{key:"edit-form-container",class:te.formNode},S,b)}renderImageMask(e,i){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,i):null}renderGenericImageMask(e,i){const{supportsResizeAttachments:r}=this.viewModel,n=CIe(i),s={[te.itemImageResizable]:r};return x("div",{key:n,class:this.classes(te.itemMaskIcon,te.itemMask)},x("img",{title:e,alt:e,src:n,class:this.classes(s,te.itemImage)}))}renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:r}=this.viewModel;if(!e)return null;const{contentType:n,name:s,url:o}=e;if(!r||!nU(n))return this.renderGenericImageMask(s,n);const a=this._getCSSTransform(e),l=a?{transform:a,"image-orientation":"none"}:{},c=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${i}`,h={[te.itemImageResizable]:r};return x("div",{key:c,class:this.classes(te.itemMask)},x("img",{styles:l,alt:s,title:s,src:c,class:this.classes(h,te.itemImage)}))}renderFile(e){const{file:i}=e;return x("li",{class:te.item,key:i},x("button",{key:"details-button",bind:this,class:te.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),x("label",{class:te.itemLabel},x("span",{class:te.itemFilename},i.name||this.messages.noTitle),x("span",{"aria-hidden":"true",class:this.classes(te.itemChevronIcon,Fc(this.container)?te.iconLeft:te.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{capabilities:s,supportsResizeAttachments:o}=r,{contentType:a,name:l,url:c}=e,h=this.renderImageMask(e,i==="list"?48:400),p=s.editing?x("span",{"aria-hidden":"true",class:this.classes(te.itemChevronIcon,Fc(this.container)?te.iconLeft:te.iconRight)}):null,f=[h,n==="preview"&&o&&nU(a)?null:x("label",{class:te.itemLabel},x("span",{class:te.itemFilename},l||this.messages.noTitle),p)],y=s.editing?x("button",{key:"details-button",bind:this,class:te.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},f):x("a",{key:"details-link",class:te.itemButton,href:c??void 0,target:"_blank"},f);return x("li",{class:te.item,key:e},y)}renderAttachmentContainer(){var g;const{effectiveDisplayType:e,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,capabilities:s,fileInfos:o}=i,a=!!(n!=null&&n.length),l=!!(o!=null&&o.length),c={[te.containerList]:e!=="preview",[te.containerPreview]:e==="preview"},h=s.editing&&((g=s.operations)!=null&&g.add)&&r.addButton?x("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(te.esriButton,te.esriButtonTertiary,te.addAttachmentButton),type:"button"},x("span",{"aria-hidden":"true",class:this.classes(te.itemAddIcon,te.iconPlus)}),this.messages.add):void 0,p=a?x("ul",{key:"attachments-list",class:te.items},n.toArray().map(v=>this.renderAttachmentInfo({attachmentInfo:v,displayType:e}))):void 0,f=l?x("ul",{key:"file-list",class:te.items},o.toArray().map(v=>this.renderFile(v))):void 0,y=l||a?void 0:x("div",{class:te.empty},this.messages.noAttachments);return x("div",{key:"attachments-container",class:this.classes(te.container,c)},p,f,y,h)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const i=e.target,r=i&&i.files&&i.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};u([d()],dn.prototype,"capabilities",null),u([d()],dn.prototype,"displayType",void 0),u([d({readOnly:!0})],dn.prototype,"effectiveDisplayType",null),u([d()],dn.prototype,"graphic",null),u([d()],dn.prototype,"label",null),u([d(),rt("esri/widgets/Attachments/t9n/Attachments")],dn.prototype,"messages",void 0),u([d(),rt("esri/core/t9n/Units")],dn.prototype,"messagesUnits",void 0),u([d({readOnly:!0})],dn.prototype,"selectedFile",void 0),u([d({readOnly:!0})],dn.prototype,"submitting",void 0),u([d({readOnly:!0})],dn.prototype,"error",void 0),u([d({type:rI})],dn.prototype,"viewModel",void 0),u([d()],dn.prototype,"visibleElements",void 0),u([Re("visibleElements")],dn.prototype,"castVisibleElements",null),dn=u([E("esri.widgets.Attachments")],dn);const Tee=dn,ko="esri-feature-form",sd=`${ko}__group`,la=`${ko}__input`,oU=`${ko}__related-records`,Fe={base:ko,form:`${ko}__form`,formHeader:`${ko}__form-header`,label:`${ko}__label`,relationshipLabel:`${ko}__relationship-label`,fieldInputWrapper:`${la}-wrapper`,fieldInputLoader:`${la}-loader`,fieldInput:`${la}`,inputDate:`${la}--date`,inputTime:`${la}--time`,inputRadioGroup:`${la}--radio-group`,inputRadio:`${la}--radio`,inputRadioLabel:`${la}--radio-label`,inputDisabled:`${la}--disabled`,inputSwitch:`${la}--switch`,inputInvalid:`${la}--invalid`,centeredButton:`${ko}__centered-button`,description:`${ko}__description-text`,listObserver:`${ko}__list-observer`,relatedRecordsHeader:`${oU}_header`,relatedRecordsList:`${oU}_list`,dateInputContainer:`${`${ko}__date`}-input-container`,group:sd,groupLabel:`${sd}-label`,groupHeader:`${sd}-header`,groupTitle:`${sd}-title`,groupToggleIcon:`${sd}-toggle-icon`,groupCollapsed:`${sd}--collapsed`,groupSequential:`${sd}--sequential`,groupActive:`${sd}--active`,collapseIcon:"esri-icon-up",expandIcon:"esri-icon-down",widget:"esri-widget",panel:"esri-widget--panel",input:"esri-input"},fh=t=>(t==null?void 0:t.type)==="field",zh=t=>(t==null?void 0:t.type)==="group",t0=t=>(t==null?void 0:t.type)==="relationship",vC=t=>!zh(t)&&t.group!=null,Iee=t=>t.type==="field",_C=t=>t.type==="group",aU=t=>t.type==="relationship",kee=t=>t.reduce((e,i)=>zh(i)?[...e,...i.inputs]:[...e,i],[]),lU=t=>kee(t).filter(fh),PIe=t=>kee(t).filter(t0),Of=(t,e)=>{var i;return t!=null&&((i=t.input)==null?void 0:i.type)===e},uU=t=>t!=null&&(Of(t,"text-box")||Of(t,"text-area")),cU=({domain:t,inputType:e="text-box",dataType:i})=>i==="number"&&e==="text-box"&&(!t||t.type!=="coded-value"),Cee=t=>"items"in t,dU={typeFieldName:null,types:[]};function gR(t,e,i){const r=Object.keys(e).filter(o=>Ob(t,o)),n=r.map(o=>e[o]),s=r.map(o=>i.get(o)).filter(Pi);return OIe(t,Pee(n,s))}function Pee(t,e){const i=e.map((r,n)=>{let s=t[n];if(r.domain&&r.domain.type==="coded-value"){const o=r.domain.codedValues.find(a=>a.code===s);o!=null&&o.name&&(s=o.name)}return WA(r)&&(s=Aee(r,s)),[r.name,s]});return Object.fromEntries(i)}function Aee(t,e){if(!t||e==null)return null;switch(t.type){case"date":return io(e);case"date-only":return SN(e);case"time-only":return xN(e);case"timestamp-offset":return $N(e);default:return null}}const AIe=new Set(["date-only","time-only","timestamp-offset"]);function OIe(t,e){return Wo(Wo(t,i=>`{${i.toLowerCase()}}`),Object.fromEntries(Object.entries(e).map(([i,r])=>[i.toLowerCase(),r])))}const vR=t=>{var e,i;return t?t.type==="subtype-sublayer"?{typeFieldName:(e=t.parent)==null?void 0:e.subtypeField,types:((i=t.parent)==null?void 0:i.subtypes)??[]}:"types"in t&&t.types?{typeFieldName:t.typeIdField,types:t.types.map(({id:r,name:n,domains:s})=>({code:r,name:n,domains:s}))}:dU:dU},LIe=(t,e)=>{if(!t)return!0;const{operations:i}=t;switch(e){case"INSERT":return i.supportsAdd;case"UPDATE":case"DELETE":return i.supportsUpdate;default:return!0}};var bM;(function(t){t.TOO_SHORT="length-validation-error::too-short"})(bM||(bM={}));const hU={type:"number"},pU={type:"number",intlOptions:{notation:"scientific"}},fU={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};function mU(t){return t>=1e7||t<=-1e7}const RIe=(t,e)=>{const{dataType:i,domain:r,error:n,field:s,minLength:o,value:a,required:l}=t;if(!e||!n)return null;if(l&&a===null)return e.validationErrors.cannotBeNull;if(n===Zh.VALUE_OUT_OF_RANGE||n===Ub.OUT_OF_RANGE){const c=oN(r)||MZ(s);return er(e.validationErrors.outsideRange,c,{format:{max:i==="date"?fU:mU(c.max)?pU:hU,min:i==="date"?fU:mU(c.min)?pU:hU}})}return n===Zh.INVALID_CODED_VALUE?e.validationErrors.invalidCodedValue:n===T0.INVALID_TYPE?e.validationErrors.invalidType:n===bM.TOO_SHORT?er(e.validationErrors.tooShort,{min:o}):null},FIe=t=>{var n;if(!t)return;const e=t.layer,i=e&&"geometryType"in e?e.geometryType:void 0,r=(n=t.geometry)==null?void 0:n.type;return r==="polyline"||i==="polyline"?"line":r||i||"table"},DIe=t=>{var i;const e=[];if(t.formTemplate){const{description:r,title:n}=t.formTemplate;(i=t.fields)==null||i.forEach(s=>{const o=n&&Ob(n,s.name),a=r&&Ob(r,s.name);(o||a)&&e.push(s.name)})}return e};function NIe(t){var e;return"formTemplate"in t&&t.formTemplate?(((e=t.formTemplate.elements)==null?void 0:e.filter(Iee))??[]).some(({fieldName:i})=>!t.fieldsIndex.get(i)):!1}var _R;let rf=_R=class extends G{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new _R({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],rf.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],rf.prototype,"name",void 0),u([d({type:["boolean","date","number","string"],json:{write:!0}})],rf.prototype,"returnType",void 0),u([d({type:String,json:{write:!0}})],rf.prototype,"title",void 0),rf=_R=u([E("esri.form.ExpressionInfo")],rf);const jIe=rf;let nf=class extends G{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([d({type:String,json:{write:!0}})],nf.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],nf.prototype,"label",void 0),u([d()],nf.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],nf.prototype,"visibilityExpression",void 0),nf=u([E("esri.form.elements.Element")],nf);const V0=nf;var wR;let aE=wR=class extends G{constructor(t){super(t),this.type=null}clone(){return new wR({type:this.type})}};u([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],aE.prototype,"type",void 0),aE=wR=u([E("esri.form.elements.inputs.AttachmentInput")],aE);const VIe=aE;var bR;let sf=bR=class extends V0{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new bR({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};u([d({type:String,json:{write:!0}})],sf.prototype,"attachmentKeyword",void 0),u([d({type:Boolean,json:{write:!0}})],sf.prototype,"editable",void 0),u([d({type:VIe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],sf.prototype,"input",void 0),u([d({type:["attachment"],json:{read:!1,write:!0}})],sf.prototype,"type",void 0),sf=bR=u([E("esri.form.elements.AttachmentElement")],sf);const yU=sf;let lE=class extends G{constructor(e){super(e),this.type=null}};u([d()],lE.prototype,"type",void 0),lE=u([E("esri.form.elements.inputs.Input")],lE);const mv=lE;let X_=class extends mv{constructor(e){super(e),this.maxLength=null,this.minLength=0}};u([d({type:Number,json:{write:!0}})],X_.prototype,"maxLength",void 0),u([d({type:Number,json:{write:!0}})],X_.prototype,"minLength",void 0),X_=u([E("esri.form.elements.inputs.TextInput")],X_);const zj=X_;var SR;let uE=SR=class extends zj{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new SR({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],uE.prototype,"type",void 0),uE=SR=u([E("esri.form.elements.inputs.BarcodeScannerInput")],uE);const zIe=uE;var xR;let Dy=xR=class extends mv{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new xR({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([d({type:String,json:{write:!0}})],Dy.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],Dy.prototype,"showNoValueOption",void 0),u([d({type:["combo-box"],json:{read:!1,write:!0}})],Dy.prototype,"type",void 0),Dy=xR=u([E("esri.form.elements.inputs.ComboBoxInput")],Dy);const UIe=Dy;var $R;function gU(t){return t!=null?new Date(t):null}function vU(t){return t?t.getTime():null}let wa=$R=class extends mv{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return gU(e.max)}writeMax(t,e){e.max=vU(t)}readMin(t,e){return gU(e.min)}writeMin(t,e){e.min=vU(t)}clone(){return new $R({includeTime:this.includeTime,max:this.max,min:this.min})}};u([d({type:Boolean,json:{write:!0}})],wa.prototype,"includeTime",void 0),u([d({type:Date,json:{type:Number,write:!0}})],wa.prototype,"max",void 0),u([Q("max")],wa.prototype,"readMax",null),u([ie("max")],wa.prototype,"writeMax",null),u([d({type:Date,json:{type:Number,write:!0}})],wa.prototype,"min",void 0),u([Q("min")],wa.prototype,"readMin",null),u([ie("min")],wa.prototype,"writeMin",null),u([d({type:["datetime-picker"],json:{read:!1,write:!0}})],wa.prototype,"type",void 0),wa=$R=u([E("esri.form.elements.inputs.DateTimePickerInput")],wa);const BIe=wa;var ER;let Ny=ER=class extends mv{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new ER({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([d({type:String,json:{write:!0}})],Ny.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],Ny.prototype,"showNoValueOption",void 0),u([d({type:["radio-buttons"],json:{read:!1,write:!0}})],Ny.prototype,"type",void 0),Ny=ER=u([E("esri.form.elements.inputs.RadioButtonsInput")],Ny);const GIe=Ny;var MR;let jy=MR=class extends mv{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new MR({offValue:this.offValue,onValue:this.onValue})}};u([d({type:[String,Number],json:{write:!0}})],jy.prototype,"offValue",void 0),u([d({type:[String,Number],json:{write:!0}})],jy.prototype,"onValue",void 0),u([d({type:["switch"],json:{read:!1,write:!0}})],jy.prototype,"type",void 0),jy=MR=u([E("esri.form.elements.inputs.SwitchInput")],jy);const HIe=jy;var TR;let cE=TR=class extends zj{constructor(t){super(t),this.type="text-area"}clone(){return new TR({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-area"],json:{read:!1,write:!0}})],cE.prototype,"type",void 0),cE=TR=u([E("esri.form.elements.inputs.TextAreaInput")],cE);const qIe=cE;var IR;let dE=IR=class extends zj{constructor(t){super(t),this.type="text-box"}clone(){return new IR({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-box"],json:{read:!1,write:!0}})],dE.prototype,"type",void 0),dE=IR=u([E("esri.form.elements.inputs.TextBoxInput")],dE);const WIe=dE,ZIe={base:mv,key:"type",typeMap:{"barcode-scanner":zIe,"combo-box":UIe,"datetime-picker":BIe,"radio-buttons":GIe,switch:HIe,"text-area":qIe,"text-box":WIe}};var kR;let Cg=kR=class extends G{constructor(t){super(t),this.name=null,this.code=null}clone(){return new kR({name:this.name,code:this.code})}};u([d({type:String,json:{write:!0}})],Cg.prototype,"name",void 0),u([d({type:[String,Number],json:{write:!0}})],Cg.prototype,"code",void 0),Cg=kR=u([E("esri.layers.support.CodedValue")],Cg);const YIe=new Ge({inherited:"inherited",codedValue:"coded-value",range:"range"});let ew=class extends G{constructor(e){super(e),this.name=null,this.type=null}};u([d({type:String,json:{write:!0}})],ew.prototype,"name",void 0),u([ye(YIe)],ew.prototype,"type",void 0),ew=u([E("esri.layers.support.Domain")],ew);const nI=ew;var CR;let tw=CR=class extends nI{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new CR({codedValues:F(this.codedValues),name:this.name})}};u([d({type:[Cg],json:{write:!0}})],tw.prototype,"codedValues",void 0),u([ye({codedValue:"coded-value"})],tw.prototype,"type",void 0),tw=CR=u([E("esri.layers.support.CodedValueDomain")],tw);const Uj=tw;var PR;let hE=PR=class extends nI{constructor(t){super(t),this.type="inherited"}clone(){return new PR}};u([ye({inherited:"inherited"})],hE.prototype,"type",void 0),hE=PR=u([E("esri.layers.support.InheritedDomain")],hE);const Oee=hE;var AR;let Vy=AR=class extends nI{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new AR({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};u([d({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],Vy.prototype,"maxValue",void 0),u([d({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],Vy.prototype,"minValue",void 0),u([ye({range:"range"})],Vy.prototype,"type",void 0),Vy=AR=u([E("esri.layers.support.RangeDomain")],Vy);const Lee=Vy,Ree={key:"type",base:nI,typeMap:{range:Lee,"coded-value":Uj,inherited:Oee}};function sI(t){if(!t||!t.type)return null;switch(t.type){case"range":return Lee.fromJSON(t);case"codedValue":return Uj.fromJSON(t);case"inherited":return Oee.fromJSON(t)}return null}var OR;const Fee="esri.form.elements.FieldElement",_U=U.getLogger(Fee);let bo=OR=class extends V0{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return Ha(_U,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){Ha(_U,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new OR({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([d({types:Ree,json:{read:{reader:sI},write:!0}})],bo.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],bo.prototype,"editable",null),u([d({type:String,json:{write:!0}})],bo.prototype,"editableExpression",void 0),u([d({type:String,json:{write:!0}})],bo.prototype,"fieldName",void 0),u([d({type:String,json:{write:!0}})],bo.prototype,"hint",void 0),u([d({types:ZIe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],bo.prototype,"input",void 0),u([d({type:String,json:{write:!0}})],bo.prototype,"requiredExpression",void 0),u([d({type:String,json:{read:!1,write:!0}})],bo.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],bo.prototype,"valueExpression",void 0),bo=OR=u([E(Fee)],bo);const wU=bo;var LR;let Uu=LR=class extends V0{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new LR({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:F(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([d({type:Number,json:{write:!0}})],Uu.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],Uu.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],Uu.prototype,"editableExpression",void 0),u([d({type:[MN],json:{write:!0}})],Uu.prototype,"orderByFields",void 0),u([d({type:Number,json:{write:!0}})],Uu.prototype,"relationshipId",void 0),u([d({type:["relationship"],json:{read:!1,write:!0}})],Uu.prototype,"type",void 0),Uu=LR=u([E("esri.form.elements.RelationshipElement")],Uu);const bU=Uu;function Dee(t){return{typesWithGroup:{base:V0,key:"type",typeMap:{attachment:yU,field:wU,group:t,relationship:bU}},typesWithoutGroup:{base:V0,key:"type",typeMap:{attachment:yU,field:wU,relationship:bU}}}}function Nee(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function jee(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function Vee(t,e,i=!0){return t?t.map(r=>iu(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var RR;let Gl=RR=class extends V0{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Vee(t,wC,!1)}readElements(t,e){return Nee(e.formElements,wC,!1)}writeElements(t,e){e.formElements=jee(t,wC,!1)}clone(){return new RR({description:this.description,elements:F(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([d({json:{write:!0}})],Gl.prototype,"elements",void 0),u([Re("elements")],Gl.prototype,"castElements",null),u([Q("elements",["formElements"])],Gl.prototype,"readElements",null),u([ie("elements")],Gl.prototype,"writeElements",null),u([d({type:["collapsed","expanded"],json:{write:!0}})],Gl.prototype,"initialState",void 0),u([d({type:String,json:{read:!1,write:!0}})],Gl.prototype,"type",void 0),Gl=RR=u([E("esri.form.elements.GroupElement")],Gl);const wC=Dee(Gl),JIe=Gl;var FR;const bC=Dee(JIe);let ba=FR=class extends G{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Vee(t,bC)}readElements(t,e){return Nee(e.formElements,bC)}writeElements(t,e){e.formElements=jee(t,bC)}clone(){return new FR({description:this.description,expressionInfos:F(this.expressionInfos),elements:F(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};u([d({type:String,json:{write:!0}})],ba.prototype,"description",void 0),u([d({json:{write:!0}})],ba.prototype,"elements",void 0),u([Re("elements")],ba.prototype,"castElements",null),u([Q("elements",["formElements"])],ba.prototype,"readElements",null),u([ie("elements")],ba.prototype,"writeElements",null),u([d({type:[jIe],json:{write:!0}})],ba.prototype,"expressionInfos",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ba.prototype,"preserveFieldValuesWhenHidden",void 0),u([d({type:String,json:{write:!0}})],ba.prototype,"title",void 0),ba=FR=u([E("esri.form.FormTemplate")],ba);const zee=ba;let of=class extends X{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.codedValue=null}};u([d()],of.prototype,"objectType",void 0),u([d()],of.prototype,"maxValue",void 0),u([d()],of.prototype,"minValue",void 0),u([d()],of.prototype,"codedValue",void 0),of=u([E("esri.layers.support.ContingentValue")],of);const kr=of;let af=class extends X{constructor(e){super(e),this.isRetired=!1}};u([d()],af.prototype,"id",void 0),u([d()],af.prototype,"isRetired",void 0),u([d()],af.prototype,"subtype",void 0),u([d()],af.prototype,"values",void 0),af=u([E("esri.layers.support.Contingency")],af);const SU=af;let iw=class extends X{constructor(e){super(e)}};u([d()],iw.prototype,"fieldGroup",void 0),u([d()],iw.prototype,"type",void 0),iw=u([E("esri.layers.support.ContingencyConstraintViolation")],iw);const xU=iw;let rw=class extends X{constructor(e){super(e)}};u([d()],rw.prototype,"contingentValuesAllGroups",void 0),u([d()],rw.prototype,"contingentValuesByFieldGroup",void 0),rw=u([E("esri.layers.support.ContingentValuesResult")],rw);const KIe=rw;let lf=class extends X{constructor(e){super(e),this.fields=null,this.isEditingRestrictive=!1}};u([d()],lf.prototype,"name",void 0),u([d()],lf.prototype,"fields",void 0),u([d()],lf.prototype,"isEditingRestrictive",void 0),u([d()],lf.prototype,"contingencies",void 0),lf=u([E("esri.layers.support.FieldGroup")],lf);const DR=lf;let Bu=class extends G{constructor(){super(...arguments),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=sI(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};u([d({type:Number,json:{write:!0}})],Bu.prototype,"code",void 0),u([d({type:Object,json:{write:!0}})],Bu.prototype,"defaultValues",void 0),u([d({json:{write:!0}})],Bu.prototype,"domains",void 0),u([Q("domains")],Bu.prototype,"readDomains",null),u([ie("domains")],Bu.prototype,"writeDomains",null),u([d({type:String,json:{write:!0}})],Bu.prototype,"name",void 0),Bu=u([E("esri.layers.support.Subtype")],Bu);const $U=Bu;var Cd;let Pd=Cd=class extends K0(lu){constructor(t){super(t),this.request=tt,this.fieldGroups=null,this.fieldGroupDefinitions=null}initialize(){}get subtypeFieldName(){const{layer:t}=this;return t.type==="subtype-group"?t.subtypeField:t.typeIdField}static async createLoadedLayerContingentValuesCache(t){await t.load();const e=t.sourceJSON;if(t.layerId===void 0)return null;const i=e.hasContingentValuesDefinition;if(i)return new Cd({layer:t}).load();if(i===void 0){const r=wc(t.url);if(r==null)return null;const n=r.url.path;if((await Cd._staticFetchEnterpriseFeatureRoot(n)).supportsQueryDataElements){const s=t.layerId.toString(),o=await Cd._staticFetchEnterpriseFieldGroup(n,s);if(o){const a=o.map(l=>({name:l.name,isEditingRestrictive:l.isEditingRestrictive,fields:l.fieldNames.names}));return new Cd({layer:t,fieldGroupDefinitions:a}).load()}}}return null}async load(t){const e=this.layer.load(t).then(()=>this._initializeContingentValues(this.fieldGroupDefinitions,t));return this.addResolvingPromise(e),this}validateContingencyConstraints(t,e){const i=Object.keys(t),r=[],n=[];for(const s of this.fieldGroups){const o=s.isEditingRestrictive?"error":"warning";if(e&&!s.fields.some(h=>e.includes(h)))continue;if(!s.fields.every(h=>i.includes(h))){n.push(new xU({fieldGroup:s,type:o}));continue}let a=!1;const l=t[this.subtypeFieldName],c=s.contingencies.filter(h=>!(!h.isRetired&&h.subtype)||h.subtype.code===l);for(const h of c){let p=!0;for(const f in h.values){const y=h.values[f];if(y.objectType!=="any"){if(y.objectType==="null"){if(t[f]!=null){p=!1;break}}else if(y.objectType==="code"){if(t[f]!==y.codedValue.code){p=!1;break}}else if(y.objectType==="range"){const g=t[f];if(g<y.minValue||g>y.maxValue){p=!1;break}}}}if(p){a=!0;break}}a||r.push(new xU({fieldGroup:s,type:o}))}return{invalid:r,incomplete:n}}getContingentValues(t,e,i=!1){const r=t[this.subtypeFieldName],n=r!=null,s={};let o=[];const a=this.fieldGroups.filter(l=>l.fields.includes(e));o.push(new kr({objectType:"any"}));for(const l of a){let c=[];const h=l.contingencies.filter(y=>!(y.isRetired||y.subtype&&n&&y.subtype.code!==r));let p=!1;const f={};for(const y of h){let g,v=!0;for(const _ in y.values){const w=y.values[_];if(e!==_){if(t[_]!==void 0&&w.objectType!=="any"){if(w.objectType==="null")t[_]!==null&&(v=!1);else if(w.objectType==="code")t[_]!==w.codedValue.code&&(v=!1);else if(w.objectType==="range"){const S=t[_];(S<w.minValue||S>w.maxValue)&&(v=!1)}}}else g=w,p=p||w.objectType==="range"}if(g&&v){if(g.objectType==="any"){c.length=0,c.push(g);break}const _=this._generateKey(g);f[_]||c.push(g),f[_]=!0}}p&&(c=this._joinRange(c)),s[l.name]=c,o=i?this._filterIntersection(o,c):[]}return a.length===1&&i&&(o=[]),new KIe({contingentValuesAllGroups:o,contingentValuesByFieldGroup:s})}_generateKey(t){switch(t.objectType){case"any":return"@any@";case"null":return"@null@";case"code":return t.codedValue.name+t.codedValue.code.toString();case"range":return t.minValue.toString()+"-"+t.maxValue.toString()}}_joinRange(t){let e,i;t.sort((n,s)=>n.objectType==="null"?-1:s.objectType==="null"?1:n.minValue-s.minValue);const r=[];for(const n of t)n.objectType!=="null"?e!=null&&i!=null?i<n.minValue?(r.push(new kr({objectType:"range",minValue:e,maxValue:i})),e=n.minValue,i=n.maxValue):i<n.maxValue&&(i=n.maxValue):(e=n.minValue,i=n.maxValue):r.push(n);return r.push(new kr({objectType:"range",minValue:e,maxValue:i})),r}_filterIntersection(t,e){var n,s;if(t.length===0||e.length===0)return[];if(t[0].objectType==="any")return e;if(e[0].objectType==="any")return t;const i=t[0].objectType==="range"||((n=t[1])==null?void 0:n.objectType)==="range",r=e[0].objectType==="range"||((s=e[1])==null?void 0:s.objectType)==="range";return i||r?this._intersectRanges(t,e):this._intersectValues(t,e)}_intersectRanges(t,e){const i=[];let r,n=0;for(const s of t)for(;n<e.length;n++){const o=e[n];if(s.objectType==="null"&&o.objectType==="null")i.push(new kr({objectType:"null"}));else{if(s.objectType==="null")break;if(o.objectType==="null")continue}if(s.maxValue<o.minValue)break;if(s.maxValue===o.minValue){i.push(new kr({objectType:"range",minValue:s.maxValue,maxValue:o.minValue}));break}if(!(s.minValue>o.maxValue))if(s.minValue!==o.maxValue){if(r=s.minValue>o.minValue?s.minValue:o.minValue,s.maxValue<o.maxValue){i.push(new kr({objectType:"range",minValue:r,maxValue:s.maxValue}));break}i.push(new kr({objectType:"range",minValue:r,maxValue:o.maxValue}))}else i.push(new kr({objectType:"range",minValue:s.minValue,maxValue:o.maxValue}))}return i}_intersectValues(t,e){const i=[];for(const r of t)e.some(n=>{if(r.objectType===n.objectType)switch(r.objectType){case"any":case"null":return!0;case"code":return r.codedValue.code===n.codedValue.code&&r.codedValue.name===n.codedValue.name}return!1})&&i.push(r);return i}static async _staticFetchEnterpriseFeatureRoot(t,e){return tt(t,{responseType:"json",query:{f:"json"},...e}).then(i=>i.data)}static async _staticFetchEnterpriseFieldGroup(t,e,i){return tt(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([e]),f:"json"},...i}).then(r=>{var n;return(n=r.data.layerDataElements)==null?void 0:n[0].dataElement.fieldGroups})}async _initializeContingentValues(t,e){const i=t??await this._fetchFieldGroupDefs(e);if(i.length===0)return void(this.fieldGroups=[]);const r=await this._fetchContingentValues(i,e);this.fieldGroups=r}async _fetchFieldGroupDefs(t){if(this.layer.layerId===void 0)return[];const e=this.layer.sourceJSON,i=this.layer.layerId.toString(),r=wc(this.layer.url).url.path;return e.hasContingentValuesDefinition?(await this._fetchAGOLFieldGroup(r,i,t)).map(n=>({name:n.name,isEditingRestrictive:n.restrictive,fields:n.fields.map(s=>this.layer.fieldsIndex.normalizeFieldName(s))})):e.hasContingentValuesDefinition!==void 0?[]:this._fetchEnterpriseFeatureRoot(r,t).then(async n=>n.supportsQueryDataElements?(await this._fetchEnterpriseFieldGroup(r,i,t)).map(s=>({name:s.name,isEditingRestrictive:s.isEditingRestrictive,fields:s.fieldNames.names.map(o=>this.layer.fieldsIndex.normalizeFieldName(o))})):[])}async _fetchAGOLFieldGroup(t,e,i){return tt(`${t}/${e}/fieldgroups`,{responseType:"json",query:{f:"json"},...i}).then(r=>r.data.fieldGroups)}async _fetchEnterpriseFieldGroup(t,e,i){return Cd._staticFetchEnterpriseFieldGroup(t,e,i)}async _fetchEnterpriseFeatureRoot(t,e){return Cd._staticFetchEnterpriseFeatureRoot(t,e)}async _fetchContingentValues(t,e){if(this.layer.layerId===void 0)return[];const i=this.layer.sourceJSON,r=this.layer.layerId.toString(),n=wc(this.layer.url).url.path;if(i.hasContingentValuesDefinition){const o=await this._fetchAGOLContingentValues(n,r,e);return this._constructFieldGroupsAGOL(t,o)}const s=await this._fetchEnterpriseContingentValues(n,r,e);return this._constructFieldGroupsEnterprise(t,s)}_constructFieldGroupsAGOL(t,e){return t.map(i=>{const r=e.contingentValuesDefinition.fieldGroups.find(n=>n.name===i.name);if(r){let n=[];return n=e.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(i,e,r.subTypes):this._parseAGOLFieldGroup(i,e,r.contingentValues),new DR({name:i.name,isEditingRestrictive:i.isEditingRestrictive,fields:i.fields,contingencies:n})}return null}).filter(Pi)}_parseAGOLFieldGroupSubtype(t,e,i){let r=[];return i==null||i.forEach(n=>{const s=this._getSubtypeAGOL(n.name);r=r.concat(this._parseAGOLFieldGroup(t,e,n.contingentValues,s))}),r}_parseAGOLFieldGroup(t,e,i,r=null){const n=[];for(const s of i??[]){const o=this._parseAGOLContingency(s,t,e,r);n.push(o)}return n}_parseAGOLContingency(t,e,i,r){const n=t.id,s=!!t.retired&&t.retired===1,o={};for(let a=0,l=0;a<e.fields.length;a++){const c=e.fields[a],h=i.typeCodes[t.types[a]];if(h==="Code"){let p=t.values[l];l++;const f=this._getDomain(r,c),y=this.layer.getField(c);if((y==null?void 0:y.type)==="string"){const _=i.stringDicts.find(w=>w.domain===f.name);_&&(p=_.entries[p])}const g=f.codedValues.find(_=>_.code===p),v=new kr({codedValue:g,objectType:"code"});o[c]=v}else if(h==="Range"){const p=t.values[l];l++;const f=p.range[0],y=p.range[1],g=new kr({minValue:f,maxValue:y,objectType:"range"});o[c]=g}else if(h==="Any"){const p=new kr({objectType:"any"});o[c]=p}else{const p=new kr({objectType:"null"});o[c]=p}}return new SU({id:n,isRetired:s,subtype:r,values:o})}_constructFieldGroupsEnterprise(t,e){const i=e.fieldGroups;return t.map(r=>{const n=i.find(s=>s.name===r.name);if(n){const s=n.contingencies.map(o=>{const a=o.id,l=o.isRetired||!1,c=this._getSubtypeEnterprise(o.subtypeCode),h={};for(let p=0;p<r.fields.length;p++){const f=r.fields[p];let y=o.values[p];if(typeof y=="number"||typeof y=="string"){const g=this._getDomain(c,f),v=this.layer.getField(f);(v==null?void 0:v.type)==="string"?y=e.stringDictionary[y]:(v==null?void 0:v.type)==="date"&&(y=new Date(`${y}+00:00`).getTime());const _=g.codedValues.find(S=>S.code===y),w=new kr({codedValue:_,objectType:"code"});h[f]=w}else if(typeof y=="object"){const g=y.minValue,v=y.maxValue,_=new kr({minValue:g,maxValue:v,objectType:"range"});h[f]=_}else if(y){const g=new kr({objectType:"any"});h[f]=g}else{const g=new kr({objectType:"null"});h[f]=g}}return new SU({id:a,isRetired:l,subtype:c,values:h})});return new DR({name:r.name,isEditingRestrictive:r.isEditingRestrictive,fields:r.fields,contingencies:s})}return null}).filter(Pi)}async _fetchEnterpriseContingentValues(t,e,i){return tt(`${t}/queryContingentValues`,{responseType:"json",query:{layers:JSON.stringify([e]),f:"json"},...i}).then(r=>{var n;return(n=r.data.contingentValueSets)==null?void 0:n[0]})}async _fetchAGOLContingentValues(t,e,i){return tt(`${t}/${e}/contingentValues`,{responseType:"json",query:{f:"json"},...i}).then(r=>r.data)}_getSubtypeEnterprise(t){const e=this.layer.sourceJSON;let i;if(e.subtypes){const r=e.subtypes.find(n=>n.code===t);i=$U.fromJSON(r)}return i||null}_getSubtypeAGOL(t){const e=this.layer.sourceJSON;let i;if(e.subtypes){const r=e.subtypes.find(n=>n.name===t);i=$U.fromJSON(r)}return i||null}_getDomain(t,e){var r;const i=t?(r=t.domains)==null?void 0:r[e]:this.layer.getFieldDomain(e);return(i==null?void 0:i.type)==="inherited"?this.layer.getFieldDomain(e):i}};u([d({constructOnly:!0})],Pd.prototype,"layer",void 0),u([d({constructOnly:!0})],Pd.prototype,"request",void 0),u([d({type:[DR]})],Pd.prototype,"fieldGroups",void 0),u([d({constructOnly:!0})],Pd.prototype,"fieldGroupDefinitions",void 0),u([d()],Pd.prototype,"subtypeFieldName",null),Pd=Cd=u([E("esri.layers.support.LayerContingentValuesCache")],Pd);const QIe=Pd;let So=class extends Xr(X){constructor(e){super(e),this.element=null,this.feature=null,this.layer=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){var e;return(e=this.element)==null?void 0:e.description}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return e!=null?!!e.lastEvaluatedValue:null}get label(){var e;return(e=this.element)==null?void 0:e.label}get visible(){return this.evaluatedVisibilityExpression!=null?this.evaluatedVisibilityExpression:this.element!=null}};u([d({readOnly:!0})],So.prototype,"description",null),u([d({constructOnly:!0})],So.prototype,"element",void 0),u([d()],So.prototype,"evaluatedVisibilityExpression",null),u([d()],So.prototype,"feature",void 0),u([d()],So.prototype,"label",null),u([d()],So.prototype,"layer",void 0),u([d()],So.prototype,"type",void 0),u([d()],So.prototype,"visible",null),u([d()],So.prototype,"visibilityExpressionExecutor",void 0),So=u([E("esri.widgets.FeatureForm.InputBase")],So);const Uee=So;let Ad=class extends Uee{constructor(e){super(e),this.arcadeEditType="NA",this.editableExpressionExecutor=null}get editable(){return!!this.layerAllowsEdits&&(this.evaluatedEditableExpression??!1)}get evaluatedEditableExpression(){const{editableExpressionExecutor:e}=this;return e!=null?!!e.lastEvaluatedValue:null}get layerAllowsEdits(){const{layer:e}=this;if(!e)return!1;const i=hu(e),r=i==null?void 0:i.operations.supportsEditing,n=LIe(i,this.arcadeEditType);return!(!r||!n)}};u([d()],Ad.prototype,"arcadeEditType",void 0),u([d()],Ad.prototype,"editable",null),u([d()],Ad.prototype,"editableExpressionExecutor",void 0),u([d()],Ad.prototype,"evaluatedEditableExpression",null),u([d()],Ad.prototype,"layerAllowsEdits",null),Ad=u([E("esri.widgets.FeatureForm.EditableInput")],Ad);const Bee=Ad;var Eo;(function(t){t.Text="text",t.Number="number",t.Date="date",t.Unsupported="unsupported"})(Eo||(Eo={}));const XIe="__internal-type-based-coded-value-domain__";let He=class extends Bee{constructor(e){super(e),this._storedValue=null,this.error=null,this.field=null,this.group=null,this.requiredExpressionExecutor=null,this.type="field",this.valueExpressionExecutor=null}get _dateRange(){var i;const{element:e}=this;if(((i=e==null?void 0:e.input)==null?void 0:i.type)==="datetime-picker"){const{max:r,min:n}=e.input;return{max:r,min:n}}return{min:null,max:null}}get _configAllowsEdits(){var s,o;const{element:e,layer:i,name:r}=this;if(e!=null)return e.editableExpression?!!this.evaluatedEditableExpression:e.editable!==!1;if(i!=null&&i.userHasUpdateItemPrivileges)return!0;const n=i&&"popupTemplate"in i?(o=(s=i==null?void 0:i.popupTemplate)==null?void 0:s.fieldInfos)==null?void 0:o.find(({fieldName:a})=>a===r):null;return(n==null?void 0:n.isEditable)??!0}get _layerAndFieldAllowEdits(){var e;return this.layerAllowsEdits&&((e=this.field)==null?void 0:e.editable)}get _isVisibleByDefault(){const{field:e,layer:i}=this;return!!(e!=null&&e.visible)&&SZ(e,i)}get _isEditTrackingField(){var e;return uN(this.layer).includes((e=this.name)==null?void 0:e.toLowerCase())}get _shouldUseValueExpression(){return this._layerAndFieldAllowEdits&&!this._configAllowsEdits&&this.valueExpressionExecutor!=null}get dataType(){const{field:e}=this;return nm(e)?Eo.Number:o6(e)?Eo.Text:WA(e)?Eo.Date:Eo.Unsupported}get dateDataType(){if(this.dataType===Eo.Date)return this.field.type!=="date"?"string":"number"}get domain(){var a;const{layer:e}=this,{typeFieldName:i,types:r}=vR(e);if(i===this.name&&this.field.domain==null)return new Uj({name:XIe,codedValues:r.map(({code:l,name:c})=>new Cg({code:l,name:c}))});const{feature:n}=this,s=e==null?void 0:e.getFieldDomain(this.name,{feature:n}),o=(a=this.element)==null?void 0:a.domain;return o!=null&&this._isDomainCompatible(o)?o:s}get editable(){return!!this._layerAndFieldAllowEdits&&(this.evaluatedEditableExpression??this._configAllowsEdits)}get evaluatedRequiredExpression(){const{requiredExpressionExecutor:e}=this;return e!=null?!!e.lastEvaluatedValue:null}get evaluatedValueExpression(){const{valueExpressionExecutor:e}=this;return e!=null?e.lastEvaluatedValue:null}get hint(){var e;return(e=this.element)==null?void 0:e.hint}get includeDate(){return!(this.dataType!==Eo.Date||this.field.type==="time-only")}get includeTime(){var n;const{element:e,field:i}=this;if(this.dataType!==Eo.Date)return!1;if(i.type==="time-only")return!0;if(i.type==="date-only")return!1;const r=((n=e==null?void 0:e.input)==null?void 0:n.type)==="datetime-picker"?e.input.includeTime:void 0;return r===void 0||r}get includeTimestamp(){return this.field.type==="timestamp-offset"}set initialFeature(e){this._set("initialFeature",e),this.notifyChange("valid")}get inputType(){var e,i;return(i=(e=this.element)==null?void 0:e.input)==null?void 0:i.type}get isRelationshipKeyField(){var r;const{field:e,layer:i}=this;return rS(i)&&!!((r=i.relationships)!=null&&r.some(n=>n.keyField===e.name))}get label(){var e;return((e=this.element)==null?void 0:e.label)||this.field.alias||this.field.name}get maxLength(){if(this.dataType===Eo.Date)return-1;const{field:i,element:r}=this,n=i==null?void 0:i.length,s=uU(r)?r.input.maxLength:NaN;return s!=null&&!isNaN(s)&&s>=-1&&(n===-1||s<=n)?s:n}get minLength(){if(this.dataType===Eo.Date)return-1;const{field:i,element:r}=this,n=i==null?void 0:i.length,s=uU(r)?r.input.minLength:NaN;return s!=null&&!isNaN(s)&&s>=-1&&(n===-1||s<=n)?s:-1}get name(){var e;return(e=this.field)==null?void 0:e.name}get range(){const{_dateRange:e,domain:i,field:r}=this,{max:n,min:s}=e,o=n!=null&&EU(n)?n.getTime():null,a=s!=null&&EU(s)?s.getTime():null,l=oN(i)||MZ(r);if(!l)return{max:o,min:a};const c=l.max===Number.MAX_VALUE?null:l.max,h=l.min===Number.MIN_VALUE?null:l.min;return{max:o!=null&&(c===null||c!=null&&o<c)?o:c,min:a!=null&&(h===null||h!=null&&a>h)?a:h}}get required(){const{editable:e,evaluatedRequiredExpression:i,field:r,visible:n}=this;return!!e&&((r==null?void 0:r.nullable)===!1||!(!n||i==null)&&i)}set required(e){this._overrideIfSome("required",e)}get submittable(){const{field:e,required:i,valid:r,value:n}=this;return(!i||n!=null)&&(!!r||this.initialFeature.getAttribute(e.name)===n)}get updating(){const{editableExpressionExecutor:e,valueExpressionExecutor:i}=this;return i!=null&&i.updating||e!=null&&e.updating}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),e===null}get value(){if(this._shouldUseValueExpression){const e=this.evaluatedValueExpression;if(this.dataType===Eo.Date){if(e instanceof Date)return e.getTime();if(typeof e!="number")return parseInt(e,10)}return e!=null&&typeof e=="object"?e.toString():e}return this.get("_storedValue")}set value(e){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",e)}get visible(){return!this._isEditTrackingField&&(this.evaluatedVisibilityExpression!=null?this.evaluatedVisibilityExpression:this.element!=null||this._isVisibleByDefault)}_isDomainCompatible(e){const{field:i}=this;if((e==null?void 0:e.type)==="coded-value"){const r=typeof e.codedValues[0].code;if(r==="string"&&o6(i)||r==="number"&&nm(i))return!0}return!!((e==null?void 0:e.type)==="range"&&nm(i)||WA(i))}_validate(){const{dataType:e,domain:i,field:r,initialFeature:n,minLength:s,required:o,valid:a,value:l}=this,c=o&&l==null,h=a!==void 0;return!c&&n.getAttribute(r.name)===l&&h?null:c?T0.INVALID_TYPE:e==="text"&&s>-1&&typeof l=="string"&&l.length<s?bM.TOO_SHORT:i?l!==null||o?gZ(i,l):null:tme(r,l)}};u([d()],He.prototype,"_storedValue",void 0),u([d()],He.prototype,"_configAllowsEdits",null),u([d()],He.prototype,"_layerAndFieldAllowEdits",null),u([d()],He.prototype,"_isVisibleByDefault",null),u([d()],He.prototype,"_isEditTrackingField",null),u([d()],He.prototype,"_shouldUseValueExpression",null),u([d()],He.prototype,"dataType",null),u([d()],He.prototype,"dateDataType",null),u([d()],He.prototype,"domain",null),u([d()],He.prototype,"editable",null),u([d({readOnly:!0})],He.prototype,"error",void 0),u([d()],He.prototype,"evaluatedRequiredExpression",null),u([d()],He.prototype,"evaluatedValueExpression",null),u([d()],He.prototype,"field",void 0),u([d()],He.prototype,"group",void 0),u([d({readOnly:!0})],He.prototype,"hint",null),u([d()],He.prototype,"includeDate",null),u([d()],He.prototype,"includeTime",null),u([d()],He.prototype,"includeTimestamp",null),u([d()],He.prototype,"initialFeature",null),u([d({readOnly:!0})],He.prototype,"inputType",null),u([d()],He.prototype,"label",null),u([d()],He.prototype,"maxLength",null),u([d()],He.prototype,"minLength",null),u([d({readOnly:!0})],He.prototype,"name",null),u([d()],He.prototype,"range",null),u([d()],He.prototype,"required",null),u([d()],He.prototype,"requiredExpressionExecutor",void 0),u([d()],He.prototype,"submittable",null),u([d({readOnly:!0})],He.prototype,"type",void 0),u([d()],He.prototype,"updating",null),u([d()],He.prototype,"valid",null),u([d({value:null})],He.prototype,"value",null),u([d()],He.prototype,"valueExpressionExecutor",void 0),u([d()],He.prototype,"visible",null),He=u([E("esri.widgets.FeatureForm.FieldInput")],He);const EU=t=>t&&!Number.isNaN(t.valueOf()),MU=He;var Ne;(function(t){t.AsyncNotEnabled="AsyncNotEnabled",t.ModulesNotSupported="ModulesNotSupported",t.CircularModules="CircularModules",t.NeverReach="NeverReach",t.UnsupportedHashType="UnsupportedHashType",t.InvalidParameter="InvalidParameter",t.UnexpectedToken="UnexpectedToken",t.Unrecognised="Unrecognised",t.UnrecognisedType="UnrecognisedType",t.MaximumCallDepth="MaximumCallDepth",t.BooleanConditionRequired="BooleanConditionRequired",t.TypeNotAllowedInFeature="TypeNotAllowedInFeature",t.KeyMustBeString="KeyMustBeString",t.WrongNumberOfParameters="WrongNumberOfParameters",t.CallNonFunction="CallNonFunction",t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",t.NoFunctionInDictionary="NoFunctionInDictionary",t.NoFunctionInArray="NoFunctionInArray",t.AssignModuleFunction="AssignModuleFunction",t.LogicExpressionOrAnd="LogicExpressionOrAnd",t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",t.FunctionNotFound="FunctionNotFound",t.InvalidMemberAccessKey="InvalidMemberAccessKey",t.UnsupportedUnaryOperator="UnsupportUnaryOperator",t.InvalidIdentifier="InvalidIdentifier",t.MemberOfNull="MemberOfNull",t.UnsupportedOperator="UnsupportedOperator",t.Cancelled="Cancelled",t.ModuleAccessorMustBeString="ModuleAccessorMustBeString",t.ModuleExportNotFound="ModuleExportNotFound",t.Immutable="Immutable",t.OutOfBounds="OutOfBounds",t.IllegalResult="IllegalResult",t.FieldNotFound="FieldNotFound",t.PortalRequired="PortalRequired",t.LogicError="LogicError",t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",t.KeyAccessorMustBeString="KeyAccessorMustBeString",t.WrongSpatialReference="WrongSpatialReference"})(Ne||(Ne={}));const Gee={[Ne.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[Ne.LogicError]:"Logic error - {reason}",[Ne.NeverReach]:"Encountered unreachable logic",[Ne.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[Ne.ModuleAccessorMustBeString]:"Module accessor must be a string",[Ne.ModuleExportNotFound]:"Module has no export with provided identifier",[Ne.ModulesNotSupported]:"Current profile does not support modules",[Ne.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[Ne.FunctionNotFound]:"Function not found",[Ne.FieldNotFound]:"Key not found - {key}",[Ne.CircularModules]:"Circular module dependencies are not allowed",[Ne.Cancelled]:"Execution cancelled",[Ne.UnsupportedHashType]:"Type not supported in hash function",[Ne.IllegalResult]:"Value is not a supported return type",[Ne.PortalRequired]:"Portal is required",[Ne.InvalidParameter]:"Invalid parameter",[Ne.WrongNumberOfParameters]:"Call with wrong number of parameters",[Ne.Unrecognised]:"Unrecognised code structure",[Ne.UnrecognisedType]:"Unrecognised type",[Ne.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[Ne.BooleanConditionRequired]:"Conditions must use booleans",[Ne.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[Ne.NoFunctionInArray]:"Arrays cannot contain functions.",[Ne.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[Ne.KeyAccessorMustBeString]:"Accessor must be a string",[Ne.KeyMustBeString]:"Object keys must be a string",[Ne.Immutable]:"Object is immutable",[Ne.UnexpectedToken]:"Unexpected token",[Ne.MemberOfNull]:"Cannot access property of null object",[Ne.MaximumCallDepth]:"Exceeded maximum function depth",[Ne.OutOfBounds]:"Out of bounds",[Ne.InvalidIdentifier]:"Identifier not recognised",[Ne.CallNonFunction]:"Expression is not a function",[Ne.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[Ne.AssignModuleFunction]:"Cannot assign function to module variable",[Ne.UnsupportedUnaryOperator]:"Unsupported unary operator",[Ne.UnsupportedOperator]:"Unsupported operator",[Ne.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[Ne.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&"};let eke=class extends Error{constructor(...e){super(...e)}},TU=class Hee extends eke{constructor(e,i){super(Bj(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,Hee),i&&i.loc&&(this.loc=i.loc)}},h7e=class qee extends Error{constructor(e,i,r,n){super("Execution error - "+Bj(r)+oI(Gee[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,qee),r&&r.loc&&(this.loc=r.loc)}};function Bj(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let p7e=class Wee extends Error{constructor(e,i,r,n){super("Compilation error - "+Bj(r)+oI(Gee[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,Wee),r&&r.loc&&(this.loc=r.loc)}},f7e=class Zee extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,Zee)}};function oI(t,e){try{if(!e)return t;for(const i in e){let r=e[i];r||(r=""),t=t.replace("{"+i+"}",e[i])}}catch{}return t}function m7e(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&e&&e.loc?new TU(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e&&e.loc?new TU(i,{cause:i}):i)}var SM;(function(t){t.UnrecognisedUri="UnrecognisedUri",t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(SM||(SM={}));const tke={[SM.UnrecognisedUri]:"Unrecognised uri - {uri}",[SM.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let y7e=class Yee extends Error{constructor(e,i){super(oI(tke[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,Yee)}},nh=class{};var xM;nh.instance=new al("Etc/UTC"),function(t){t.TimeZoneNotRecognised="TimeZoneNotRecognised"}(xM||(xM={}));const ike={[xM.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};let rke=class Jee extends Error{constructor(e,i){super(oI(ike[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,Jee)}},SC=class Wi{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(a))return null;let c=0;const h=$e.local(e,i).daysInMonth;r<1&&(c=r-1,r=1),r>h&&(c=r-h,r=h);let p=0;i>12?(p=i-12,i=12):i<1&&(p=i-1,i=1);let f=0;s>59?(f=s-59,s=59):s<0&&(f=s,s=0);let y=0;o>59?(y=o-59,o=59):o<0&&(y=o,o=0);let g=0;a>999?(g=a-999,a=999):a<0&&(g=a,a=0);let v=$e.fromObject({day:r,year:e,month:i,hour:n,minute:s,second:o,millisecond:a},{zone:_x(l)});return p!==0&&(v=v.plus({months:p})),c!==0&&(v=v.plus({days:c})),f!==0&&(v=v.plus({minutes:f})),y!==0&&(v=v.plus({seconds:y})),g!==0&&(v=v.plus({milliseconds:g})),new Wi(v)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=_x(i);return e.isUnknownTimeZone||r===nh.instance?Wi.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Wi(e._date.setZone(i))}static dateJSToArcadeDate(e){return new Wi($e.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){return new Wi($e.fromJSDate(e,{zone:i}))}static unknownEpochToArcadeDate(e){return new Wi($e.fromMillis(e,{zone:nh.instance}))}static unknownDateJSToArcadeDate(e){return new Wi($e.fromMillis(e.getTime(),{zone:nh.instance}))}static epochToArcadeDate(e,i="system"){return new Wi($e.fromMillis(e,{zone:i}))}static dateTimeToArcadeDate(e){return new Wi(e)}clone(){return new Wi(this._date)}changeTimeZone(e){const i=_x(e);return Wi.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=_x(i);return e.zone===nh.instance||r===nh.instance?Wi.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Wi(e.setZone(r))}static nowToArcadeDate(e){return new Wi($e.fromJSDate(new Date,{zone:e}))}static nowUTCToArcadeDate(){return new Wi($e.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Wi.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===nh.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"utc":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Wi(this._date.plus(e))}diff(e,i="milliseconds"){return this._date.diff(e._date,i)[i]}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toFormat(e,i){return this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Wi(this._date.toUTC())}toLocal(){return new Wi(this._date.toLocal())}toString(){return this.toISOString(!0)}};function _x(t){if(t instanceof X0)return t;if(t.toLowerCase()==="system")return"system";if(t.toLowerCase()==="utc")return"utc";if(t.toLowerCase()==="unknown")return nh.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const i=qr.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(i)return i}const e=al.create(t);if(!e.isValid)throw new rke(xM.TimeZoneNotRecognised);return e}let nke=class{constructor(e=[]){this._elements=e}length(){return this._elements.length}get(e){return this._elements[e]}toArray(){const e=[];for(let i=0;i<this.length();i++)e.push(this.get(i));return e}};var NR;let nw=NR=class extends G{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new NR({minValue:this.minValue,maxValue:this.maxValue})}};u([d({type:Number,json:{write:!0}})],nw.prototype,"minValue",void 0),u([d({type:Number,json:{write:!0}})],nw.prototype,"maxValue",void 0),nw=NR=u([E("esri.renderer.support.AuthoringInfoClassBreakInfo")],nw);var jR;let sh=jR=class extends G{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new jR({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:F(this.classBreakInfos)})}};u([d({type:String,json:{write:!0}})],sh.prototype,"field",void 0),u([d({type:String,json:{write:!0}})],sh.prototype,"normalizationField",void 0),u([d({type:String,json:{write:!0}})],sh.prototype,"label",void 0),u([d({type:[nw],json:{write:!0}})],sh.prototype,"classBreakInfos",void 0),sh=jR=u([E("esri.renderers.support.AuthoringInfoFieldInfo")],sh);var VR;const wx=new Ge({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),bx=new Ge({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),IU={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},kU=["high-to-low","above-and-below","centered-on","extremes"],CU=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],PU=["seconds","minutes","hours","days","months","years"];let is=VR=class extends G{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new VR({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([d({types:IU,json:{write:!0}})],is.prototype,"endTime",void 0),u([Re("endTime")],is.prototype,"castEndTime",null),u([d({type:String,json:{write:!0}})],is.prototype,"field",void 0),u([d({type:Number,json:{write:!0}})],is.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0}})],is.prototype,"minSliderValue",void 0),u([d({types:IU,json:{write:!0}})],is.prototype,"startTime",void 0),u([Re("startTime")],is.prototype,"castStartTime",null),u([d({type:wx.apiValues,value:null,json:{type:wx.jsonValues,read:wx.read,write:wx.write}})],is.prototype,"style",null),u([d({type:CU,value:null,json:{type:CU,origins:{"web-scene":{type:kU,write:{writer:(t,e)=>{kU.includes(t)&&(e.theme=t)}}}},write:!0}})],is.prototype,"theme",null),u([d({type:bx.apiValues,json:{type:bx.jsonValues,read:bx.read,write:bx.write}})],is.prototype,"type",void 0),u([d({type:PU,json:{type:PU,write:!0}})],is.prototype,"units",void 0),is=VR=u([E("esri.renderers.support.AuthoringInfoVisualVariable")],is);const ske=is;let pE=class extends G{constructor(e){super(e),this.type=null}};u([d({readOnly:!0,json:{read:!1,write:!0}})],pE.prototype,"type",void 0),pE=u([E("esri.rest.support.ColorRamp")],pE);const Gj=pE;var zR;let uf=zR=class extends Gj{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new zR({fromColor:F(this.fromColor),toColor:F(this.toColor),algorithm:this.algorithm})}};u([ye({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],uf.prototype,"algorithm",void 0),u([d({type:ae,json:{type:[Mt],write:!0}})],uf.prototype,"fromColor",void 0),u([d({type:ae,json:{type:[Mt],write:!0}})],uf.prototype,"toColor",void 0),u([d({type:["algorithmic"]})],uf.prototype,"type",void 0),uf=zR=u([E("esri.rest.support.AlgorithmicColorRamp")],uf);const Hj=uf;var UR;let sw=UR=class extends Gj{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new UR({colorRamps:F(this.colorRamps)})}};u([d({type:[Hj],json:{write:!0}})],sw.prototype,"colorRamps",void 0),u([d({type:["multipart"]})],sw.prototype,"type",void 0),sw=UR=u([E("esri.rest.support.MultipartColorRamp")],sw);const Kee=sw,oke={key:"type",base:Gj,typeMap:{algorithmic:Hj,multipart:Kee}};function ake(t){return t&&t.type?t.type==="algorithmic"?Hj.fromJSON(t):t.type==="multipart"?Kee.fromJSON(t):null:null}var BR;const Ep=new Ge({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Sx=new Ge({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),AU=new Ge({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),OU=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],lke=["high-to-low","above-and-below","above","below","90-10"],uke=["flow-line","wave-front"],cke=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let mi=BR=class extends G{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?ake(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new BR({classificationMethod:this.classificationMethod,colorRamp:F(this.colorRamp),fadeRatio:F(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:F(this.field1),field2:F(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([d({type:Ep.apiValues,value:null,json:{type:Ep.jsonValues,read:Ep.read,write:Ep.write,origins:{"web-document":{default:"manual",type:Ep.jsonValues,read:Ep.read,write:Ep.write}}}})],mi.prototype,"classificationMethod",null),u([d({types:oke,json:{write:!0}})],mi.prototype,"colorRamp",void 0),u([Q("colorRamp")],mi.prototype,"readColorRamp",null),u([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"fadeRatio",void 0),u([d({type:[String],value:null,json:{write:!0}})],mi.prototype,"fields",null),u([d({type:sh,value:null,json:{write:!0}})],mi.prototype,"field1",null),u([d({type:sh,value:null,json:{write:!0}})],mi.prototype,"field2",null),u([d({type:uke,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mi.prototype,"flowTheme",null),u([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],mi.prototype,"focus",null),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],mi.prototype,"isAutoGenerated",void 0),u([d({type:Number,value:null,json:{type:Mt,write:!0}})],mi.prototype,"numClasses",null),u([d({type:OU,json:{type:OU,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],mi.prototype,"lengthUnit",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"minSliderValue",void 0),u([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"statistics",null),u([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],mi.prototype,"standardDeviationInterval",null),u([d({type:Sx.apiValues,value:null,json:{type:Sx.jsonValues,read:Sx.read,write:Sx.write,origins:{"web-scene":{type:AU.jsonValues,write:{writer:AU.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],mi.prototype,"type",null),u([d({type:[ske],json:{write:!0}})],mi.prototype,"visualVariables",void 0),u([d({type:cke,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mi.prototype,"univariateSymbolStyle",null),u([d({type:lke,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mi.prototype,"univariateTheme",null),mi=BR=u([E("esri.renderers.support.AuthoringInfo")],mi);const qj=mi,xC=new Ge({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let ow=class extends G{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([d({type:qj,json:{write:!0}})],ow.prototype,"authoringInfo",void 0),u([d({type:xC.apiValues,readOnly:!0,json:{type:xC.jsonValues,read:!1,write:{writer:xC.write,ignoreOrigin:!0}}})],ow.prototype,"type",void 0),ow=u([E("esri.renderers.Renderer")],ow);const Uc=ow;function dke(t){var e,i;return((i=(e=t.match(hke))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const hke=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var GR;let i0=GR=class extends G{constructor(){super(...arguments),this.title=null}clone(){return new GR({title:this.title})}};u([d({type:String,json:{write:!0}})],i0.prototype,"title",void 0),i0=GR=u([E("esri.renderers.support.LegendOptions")],i0);var HR;let fE=HR=class extends i0{constructor(){super(...arguments),this.showLegend=null}clone(){return new HR({title:this.title,showLegend:this.showLegend})}};u([d({type:Boolean,json:{write:!0}})],fE.prototype,"showLegend",void 0),fE=HR=u([E("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],fE);const Qee=fE,$C=new Ge({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Sa=class extends G{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(U.getLogger(this).error(".field: field must be a string value"),null):T1(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([d()],Sa.prototype,"index",void 0),u([d({type:$C.apiValues,readOnly:!0,json:{read:$C.read,write:$C.write}})],Sa.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Sa.prototype,"field",void 0),u([Re("field")],Sa.prototype,"castField",null),u([d({type:String,json:{write:!0}})],Sa.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],Sa.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],Sa.prototype,"arcadeRequired",null),u([d({type:Qee,json:{write:!0}})],Sa.prototype,"legendOptions",void 0),Sa=u([E("esri.renderers.visualVariables.VisualVariable")],Sa);const sS=Sa;var qR;let cf=qR=class extends G{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new qR({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([d({type:ae,json:{type:[Mt],write:!0}})],cf.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],cf.prototype,"label",void 0),u([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],cf.prototype,"value",void 0),u([ie("value")],cf.prototype,"writeValue",null),cf=qR=u([E("esri.renderers.visualVariables.support.ColorStop")],cf);const pke=cf;var WR;let df=WR=class extends sS{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new WR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};u([d({readOnly:!0})],df.prototype,"cache",null),u([d({type:["color"],json:{type:["colorInfo"]}})],df.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],df.prototype,"normalizationField",void 0),u([d({type:[pke],json:{write:!0}})],df.prototype,"stops",null),df=WR=u([E("esri.renderers.visualVariables.ColorVariable")],df);const Xee=df;var ZR;let Od=ZR=class extends G{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return Hb(e.transparency)}writeOpacity(t,e,i){e[i]=OT(t)}clone(){return new ZR({label:this.label,opacity:this.opacity,value:this.value})}};u([d({type:String,json:{write:!0}})],Od.prototype,"label",void 0),u([d({type:Number,json:{type:Mt,write:{target:"transparency"}}})],Od.prototype,"opacity",void 0),u([Q("opacity",["transparency"])],Od.prototype,"readOpacity",null),u([ie("opacity")],Od.prototype,"writeOpacity",null),u([d({type:Number,json:{write:!0}})],Od.prototype,"value",void 0),Od=ZR=u([E("esri.renderers.visualVariables.support.OpacityStop")],Od);const fke=Od;var YR;let hf=YR=class extends sS{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new YR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};u([d({readOnly:!0})],hf.prototype,"cache",null),u([d({type:["opacity"],json:{type:["transparencyInfo"]}})],hf.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],hf.prototype,"normalizationField",void 0),u([d({type:[fke],json:{write:!0}})],hf.prototype,"stops",null),hf=YR=u([E("esri.renderers.visualVariables.OpacityVariable")],hf);const ete=hf;var JR;let Gu=JR=class extends sS{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,r){if(r&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new C("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){return new JR({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};u([d({readOnly:!0})],Gu.prototype,"cache",null),u([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Gu.prototype,"axis",void 0),u([d({type:["rotation"],json:{type:["rotationInfo"]}})],Gu.prototype,"type",void 0),u([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Gu.prototype,"rotationType",void 0),u([d({type:String,json:{write:!0}})],Gu.prototype,"valueExpressionTitle",void 0),u([ie("web-scene","valueExpressionTitle")],Gu.prototype,"writeValueExpressionTitleWebScene",null),Gu=JR=u([E("esri.renderers.visualVariables.RotationVariable")],Gu);const tte=Gu;var KR;let zy=KR=class extends G{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new KR({label:this.label,size:this.size,value:this.value})}};u([d({type:String,json:{write:!0}})],zy.prototype,"label",void 0),u([d({type:Number,cast:it,json:{write:!0}})],zy.prototype,"size",void 0),u([d({type:Number,json:{write:!0}})],zy.prototype,"value",void 0),zy=KR=u([E("esri.renderers.visualVariables.support.SizeStop")],zy);const Uy=zy;var QR;let mE=QR=class extends Qee{constructor(){super(...arguments),this.customValues=null}clone(){return new QR({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};u([d({type:[Number],json:{write:!0}})],mE.prototype,"customValues",void 0),mE=QR=u([E("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],mE);const mke=mE;var Sc,tr;function kh(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function c1(t){return t!=null&&!isNaN(t)&&isFinite(t)}function ite(t){return t.valueExpression?Sc.Expression:t.field&&typeof t.field=="string"?Sc.Field:Sc.Unknown}function rte(t,e){const i=e||ite(t),r=t.valueUnit||"unknown";return i===Sc.Unknown?tr.Constant:t.stops?tr.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?tr.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?tr.Proportional:tr.Additive:tr.Identity:tr.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Sc||(Sc={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(tr||(tr={}));const oS={unknown:1,inches:ht(1,"meters","inches"),feet:ht(1,"meters","feet"),"us-feet":ht(1,"meters","us-feet"),yards:ht(1,"meters","yards"),miles:ht(1,"meters","miles"),"nautical-miles":ht(1,"meters","nautical-miles"),millimeters:ht(1,"meters","millimeters"),centimeters:ht(1,"meters","centimeters"),decimeters:ht(1,"meters","decimeters"),meters:ht(1,"meters","meters"),kilometers:ht(1,"meters","kilometers"),"decimal-degrees":1/gW(1,"meters",It.radius)},ip=U.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),LU=new fi,yE=Math.PI,nte=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function ste(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(g=>g.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void ip.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof e=="number",s=n?null:e,o=s&&s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!l&&!h){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(i==null||i.arcade==null)return void ip.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,_=v.getViewInfo(g),w=v.createExecContext(s,_);if(!p){const S=v.createSyntaxTree(r.valueExpression);p=v.createFunction(S),r.cache.compiledFunc=p}a=v.executeFunction(p,w)}else o&&(a=o[l]);const f=r.normalizationField,y=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=Zj(a,c);if(g){const v=g[0],_=g[1],w=v===_?r.stops[v].color:ae.blendColors(r.stops[v].color,r.stops[_].color,g[2],i!=null?i.color:void 0);return new ae(w)}}}function ote(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(g=>g.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void ip.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s&&s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!l&&!h){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(i==null||i.arcade==null)return void ip.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,_=v.getViewInfo(g),w=v.createExecContext(s,_);if(!p){const S=v.createSyntaxTree(r.valueExpression);p=v.createFunction(S),r.cache.compiledFunc=p}a=v.executeFunction(p,w)}else o&&(a=o[l]);const f=r.normalizationField,y=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=Zj(a,c);if(g){const v=g[0],_=g[1];if(v===_)return r.stops[v].opacity;{const w=r.stops[v].opacity;return w+(r.stops[_].opacity-w)*g[2]}}}}function Wj(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(y=>y.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void ip.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a&&a.attributes,c=r.field,{hasExpression:h}=r.cache;let p=r.cache.compiledFunc,f=0;if(!c&&!h)return f;if(h){if(i==null||i.arcade==null)return void ip.error("Use of arcade expressions requires an arcade context");const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(y),_=g.createExecContext(a,v);if(!p){const w=g.createSyntaxTree(r.valueExpression);p=g.createFunction(w),r.cache.compiledFunc=p}f=g.executeFunction(p,_)}else l&&(f=l[c]||0);return f=typeof f!="number"||isNaN(f)?null:s+o*f,f}function yke(t,e,i){const r=typeof e=="number",n=r?null:e,s=n&&n.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const h=i!=null?i.scale:void 0,p=i!=null?i.view:void 0;o=h==null||p==="3d"?gke(t):h}else if(!r)switch(t.inputValueType){case Sc.Expression:{if(i==null||i.arcade==null)return void ip.error("Use of arcade expressions requires an arcade context");const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,f=p.getViewInfo(h),y=p.createExecContext(n,f);if(!l){const g=p.createSyntaxTree(t.valueExpression);l=p.createFunction(g),t.cache.compiledFunc=l}o=p.executeFunction(l,y);break}case Sc.Field:s&&(o=s[t.field]);break;case Sc.Unknown:o=null}if(!c1(o))return null;if(r||!t.normalizationField)return o;const c=s?parseFloat(s[t.normalizationField]):null;return c1(c)&&c!==0?o/c:null}function gke(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function aS(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(s=>s.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void ip.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=lte(yke(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function ws(t,e,i){return t==null?null:kh(t)?aS(t,e,i):c1(t)?t:null}function ate(t,e,i){return c1(i)&&t>i?i:c1(e)&&t<e?e:t}function vke(t,e,i,r){return t+((ws(e.minSize,i,r)||e.minDataValue)??0)}function _ke(t,e,i){const r=t.stops;let n=r&&r.length&&r[0].size;return n==null&&(n=t.minSize),ws(n,e,i)}function wke(t,e,i,r){const n=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),s=ws(e.minSize,i,r),o=ws(e.maxSize,i,r),a=r!=null?r.shape:void 0;if(t<=e.minDataValue)return s;if(t>=e.maxDataValue)return o;if(s==null||o==null)return null;if(e.scaleBy==="area"&&a){const l=a==="circle",c=l?yE*(s/2)**2:s*s,h=c+n*((l?yE*(o/2)**2:o*o)-c);return l?2*Math.sqrt(h/yE):Math.sqrt(h)}return s+n*(o-s)}function bke(t,e,i,r){const n=r!=null?r.shape:void 0,s=t/e.minDataValue,o=ws(e.minSize,i,r),a=ws(e.maxSize,i,r);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,ate(l,o,a)}function Ske(t,e,i,r,n){var l,c,h;const[s,o,a]=Zj(t,n);if(s===o)return ws((l=e.stops)==null?void 0:l[s].size,i,r);{const p=ws((c=e.stops)==null?void 0:c[s].size,i,r);return p+(ws((h=e.stops)==null?void 0:h[o].size,i,r)-p)*a}}function xke(t,e,i,r){const n=(r!=null&&r.resolution?r.resolution:1)*oS[e.valueUnit],s=ws(e.minSize,i,r),o=ws(e.maxSize,i,r),{valueRepresentation:a}=e;let l=null;return l=a==="area"?2*Math.sqrt(t/yE)/n:a==="radius"||a==="distance"?2*t/n:t/n,ate(l,s,o)}function lte(t,e,i,r,n){switch(e.transformationType){case tr.Additive:return vke(t,e,i,r);case tr.Constant:return _ke(e,i,r);case tr.ClampedLinear:return wke(t,e,i,r);case tr.Proportional:return bke(t,e,i,r);case tr.Stops:return Ske(t,e,i,r,n);case tr.RealWorldSize:return xke(t,e,i,r);case tr.Identity:return t;case tr.Unknown:return null}}function $ke(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=ws(t.minSize,LU,n),o=ws(t.maxSize,LU,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function Eke(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const c=ste(l,e,i);r.push({variable:l,value:c})}),s.forEach(l=>{const c=ote(l,e,i);r.push({variable:l,value:c})}),a.forEach(l=>{const c=Wj(l,e,i);r.push({variable:l,value:c})}),o.forEach(l=>{const c=aS(l,e,i);r.push({variable:l,value:c})}),r.filter(l=>l.value!=null)}function Zj(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function Mke(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":aS(n,e,i);switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const aI=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Mke,getColor:ste,getOpacity:ote,getRotationAngle:Wj,getSize:aS,getSizeForValue:lte,getSizeFromNumberOrVariable:ws,getSizeRangeAtScale:$ke,getVisualVariableValues:Eke,viewScaleRE:nte},Symbol.toStringTag,{value:"Module"}));var XR;const xx=new Ge({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),eF=new Ge({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function RU(t){if(t!=null)return typeof t=="string"||typeof t=="number"?it(t):t.type==="size"?kh(t)?t:(delete(t={...t}).type,new ct(t)):void 0}function FU(t,e,i){if(typeof t!="object")return t;const r=new ct;return r.read(t,i),r}let ct=XR=class extends sS{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&nte.test(this.valueExpression)}}set expression(t){U.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){kh(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),kh(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return ite(this)}set maxDataValue(t){t&&this.stops&&(U.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(U.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return RU(t)}readMaxSize(t,e,i){return FU(t,e,i)}set minDataValue(t){t&&this.stops&&(U.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(U.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return RU(t)}readMinSize(t,e,i){return FU(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(U.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return rte(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new C("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?eF.read(t):null}clone(){return new XR({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:kh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:kh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===tr.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===tr.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};u([d({readOnly:!0})],ct.prototype,"cache",null),u([d({type:xx.apiValues,json:{type:xx.jsonValues,origins:{"web-map":{read:!1}},read:xx.read,write:xx.write}})],ct.prototype,"axis",void 0),u([d({type:String,value:null,json:{read:!1}})],ct.prototype,"expression",null),u([d()],ct.prototype,"index",null),u([d({type:String,readOnly:!0})],ct.prototype,"inputValueType",null),u([d({type:mke,json:{write:!0}})],ct.prototype,"legendOptions",void 0),u([d({type:Number,value:null,json:{write:!0}})],ct.prototype,"maxDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],ct.prototype,"maxSize",null),u([Re("maxSize")],ct.prototype,"castMaxSize",null),u([Q("maxSize")],ct.prototype,"readMaxSize",null),u([d({type:Number,value:null,json:{write:!0}})],ct.prototype,"minDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],ct.prototype,"minSize",null),u([Re("minSize")],ct.prototype,"castMinSize",null),u([Q("minSize")],ct.prototype,"readMinSize",null),u([d({type:String,json:{write:!0}})],ct.prototype,"normalizationField",void 0),u([d({readOnly:!0})],ct.prototype,"arcadeRequired",null),u([d({type:String})],ct.prototype,"scaleBy",void 0),u([d({type:[Uy],value:null,json:{write:!0}})],ct.prototype,"stops",null),u([d({type:["outline"],json:{write:!0}})],ct.prototype,"target",void 0),u([d({type:String,readOnly:!0})],ct.prototype,"transformationType",null),u([d({type:["size"],json:{type:["sizeInfo"]}})],ct.prototype,"type",void 0),u([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ct.prototype,"useSymbolValue",void 0),u([d({type:String,json:{write:!0}})],ct.prototype,"valueExpression",void 0),u([Q("valueExpression",["valueExpression","expression"])],ct.prototype,"readValueExpression",null),u([ie("web-scene","valueExpression")],ct.prototype,"writeValueExpressionWebScene",null),u([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ct.prototype,"valueRepresentation",void 0),u([d({type:eF.apiValues,json:{write:eF.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ct.prototype,"valueUnit",void 0),u([Q("valueUnit")],ct.prototype,"readValueUnit",null),ct=XR=u([E("esri.renderers.visualVariables.SizeVariable")],ct);const lI=ct,Tke={color:Xee,size:lI,opacity:ete,rotation:tte},Ike=new Ge({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),kke=/^\[([^\]]+)\]$/i;let gE=class extends X{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n&&n.match(kke),a=o&&o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map(l=>{const c=Ike.read(l.type),h=Tke[c];h||(U.getLogger(this).warn(`Unknown variable type: ${c}`),r&&r.messages&&r.messages.push(new Zo("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const p=new h;return p.read(l,r),p})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([d()],gE.prototype,"visualVariables",null),gE=u([E("esri.renderers.visualVariables.VisualVariableFactory")],gE);const Cke=gE,Pke={base:sS,key:"type",typeMap:{opacity:ete,color:Xee,rotation:tte,size:lI}},yv=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new Cke}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,s){r[n]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&Zs(i,r,s.field),s.normalizationField&&Zs(i,r,s.normalizationField),s.valueExpression&&(Ake(s.valueExpression,i,r)||await Gn(i,r,s.valueExpression)))}};return u([d({types:[Pke],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),u([Q("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),u([ie("visualVariables")],e.prototype,"writeVisualVariables",null),e=u([E("esri.renderers.mixins.VisualVariablesMixin")],e),e};function Ake(t,e,i){const r=dke(t);return r!=null&&(Zs(e,i,r),!0)}const e_={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function ute(t,e=e_){var a,l;if(!t)return{symbol:null};const{retainId:i=e_.retainId,ignoreDrivers:r=e_.ignoreDrivers,hasLabelingContext:n=e_.hasLabelingContext,retainCIM:s=e_.retainCIM}=e;let o=null;if(Kh(t)||t instanceof qm)o=t.clone();else if(t.type==="cim"){const c=(l=(a=t.data)==null?void 0:a.symbol)==null?void 0:l.type;if(c!=="CIMPointSymbol")return{error:new C("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:t})};o=s?t.clone():Hf.fromCIMSymbol(t)}else if(t instanceof En)o=NT.fromSimpleLineSymbol(t);else if(t instanceof ll)o=Hf.fromSimpleMarkerSymbol(t);else if(t instanceof Jh)o=Hf.fromPictureMarkerSymbol(t);else if(t instanceof Qo)o=e.geometryType&&e.geometryType==="mesh"?H1.fromSimpleFillSymbol(t):q1.fromSimpleFillSymbol(t);else{if(!(t instanceof Hm))return{error:new C("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};o=n?DT.fromTextSymbol(t):Hf.fromTextSymbol(t)}return i&&o&&o.type!=="cim"&&(o.id=t.id),r&&Kh(o)&&o.symbolLayers.forEach(c=>c.ignoreDrivers=!0),{symbol:o}}function $M(t,e,i,r){const n=cte(t,{},{context:r,isLabelSymbol:!1});n!=null&&(e[i]=n)}function DU(t,e,i,r){const n=cte(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function NU(t){return t instanceof cv||t instanceof qm}function cte(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!NU(t)){const a=ute(t,{retainCIM:!0,hasLabelingContext:n});return a.symbol!=null?a.symbol.write(e,r):(o==null||o.push(new C("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!iQ(r==null?void 0:r.layer))&&NU(t)?(o==null||o.push(new C("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function dte(t,e){return Nve(t,null,e)}const gv={types:jJ,json:{write:{writer:$M},origins:{"web-scene":{types:Z6,write:{writer:$M},read:{reader:Z0({types:Z6})}}}}},hte={types:{base:Es,key:"type",typeMap:{"simple-fill":Ba.typeMap["simple-fill"],"picture-fill":Ba.typeMap["picture-fill"],"polygon-3d":Ba.typeMap["polygon-3d"]}},json:{write:{writer:$M},origins:{"web-scene":{type:q1,write:{writer:$M}}}}},vE={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var tF;let Ld=tF=class extends G{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new tF({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};u([d({type:String,json:{write:!0}})],Ld.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Ld.prototype,"label",void 0),u([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ld.prototype,"minValue",void 0),u([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ld.prototype,"maxValue",void 0),u([d(gv)],Ld.prototype,"symbol",void 0),Ld=tF=u([E("esri.renderers.support.ClassBreakInfo")],Ld);const EM=Ld;var iF;const pte="log",_E="percent-of-total",wE="field",$x=new Ge({esriNormalizeByLog:pte,esriNormalizeByPercentOfTotal:_E,esriNormalizeByField:wE}),Oke=Xt(EM);let Zi=iF=class extends yv(Uc){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new EM;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(U.getLogger(this).error(".field: field must be a string value"),null):T1(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&wE||i&&_E||null,e&&i&&U.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==wE&&t!==_E||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new EM({minValue:t,maxValue:e,symbol:VJ(i)}):Oke(F(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return!this.valueExpression||e!=null&&e.arcade!=null||U.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await su()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void U.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null||e.arcade==null)){const n=await su(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new iF({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:F(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:F(this.visualVariables),legendOptions:F(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Gn(t,e,this.valueExpression)];Zs(t,e,this.field),Zs(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s}=e??{},{valueExpression:o}=this;let a=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const l=s.arcadeUtils;if(!a){const h=l.createSyntaxTree(o);a=l.createFunction(h),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=o;const c=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===pte)n=Math.log(n)*Math.LOG10E;else if(r!==_E||s==null||isNaN(s)){if(r===wE&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};u([d(hte)],Zi.prototype,"backgroundFillSymbol",void 0),u([d({type:[EM]})],Zi.prototype,"classBreakInfos",void 0),u([Q("classBreakInfos")],Zi.prototype,"readClassBreakInfos",null),u([ie("classBreakInfos")],Zi.prototype,"writeClassBreakInfos",null),u([d({type:String,json:{write:!0}})],Zi.prototype,"defaultLabel",void 0),u([d(gv)],Zi.prototype,"defaultSymbol",void 0),u([d({type:String,json:{write:!0}})],Zi.prototype,"field",void 0),u([Re("field")],Zi.prototype,"castField",null),u([d({type:Boolean})],Zi.prototype,"isMaxInclusive",void 0),u([d({type:i0,json:{write:!0}})],Zi.prototype,"legendOptions",void 0),u([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Zi.prototype,"minValue",null),u([d({type:String,json:{write:!0}})],Zi.prototype,"normalizationField",void 0),u([d({type:Number,cast:t=>Oo(t),json:{write:!0}})],Zi.prototype,"normalizationTotal",void 0),u([d({type:$x.apiValues,value:null,json:{type:$x.jsonValues,read:$x.read,write:$x.write}})],Zi.prototype,"normalizationType",null),u([ye({classBreaks:"class-breaks"})],Zi.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Zi.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],Zi.prototype,"valueExpressionTitle",void 0),Zi=iF=u([E("esri.renderers.ClassBreaksRenderer")],Zi);const fte=Zi,EC=-3;var oh;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(oh||(oh={}));let x7e=class{constructor(e,i,r){this.name=e,this._storage=i,this.id=Rke+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(e,i,r,n=0){this._storage.put(this,e,i,r,n)}get(e){const i=this._storage.get(this,e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this,e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,r){this._storage.updateSize(this,e,i,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Lke=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new em,this._users=new em}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,oh.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,oh.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const a=1+Math.max(s,EC)-EC;this._db.set(i,{entry:r,size:n,lifetime:a,lives:a}),this._size+=n,e.size+=n,this._checkSizeLimits()}updateSize(e,i,r,n){i=e.id+i;const s=this._db.get(i);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(i,r,oh.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(c=>{const{id:h,name:p}=c;if(a.startsWith(h)){const f=i[p]||0;i[p]=f+o.size}})});const n={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+EC-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,oh.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,oh.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r){let n;return this._removeFuncs.some(s=>{if(e.startsWith(s[0])){const o=s[1](i,r);return typeof o=="number"&&(n=o),!0}return!1}),n}_checkSizeLimits(){if(this._size>this._maxSize){for(const[e,i]of this._db)if(this._purgeItem(e,i),this._size<=.9*this.maxSize)return}this._users.forEach(e=>{if(e.maxSize>0&&e.size>e.maxSize){for(const[i,r]of this._db)if(i.startsWith(e.id)&&(this._purgeItem(i,r,e),e.size<=.9*e.maxSize))return}})}_purgeItem(e,i,r=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,oh.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},Rke=0,mte=class{constructor(e,i){this._storage=new Lke,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},rF=class{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new C(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new rF(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!r||!r.match||!s.test(r))throw new C((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!s.test(n))throw new C((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(n,10);return new rF(o,a,i)}};function Fke(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function jU(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function VU(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let yte=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const r of e){const n=r==null?void 0:r.name,s=UU(r==null?void 0:r.name);if(n&&s){const o=zU(n);this._fieldsMap.set(n,r),this._fieldsMap.set(o,r),this._normalizedFieldsMap.set(s,r),i.push(o),Fke(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):nm(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),jU(r)||VU(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)jU(e)||VU(e)||e.nullable||qfe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(zU(e))??this._normalizedFieldsMap.get(UU(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function zU(t){return t.trim().toLowerCase()}function UU(t){var e;return((e=Afe(t))==null?void 0:e.toLowerCase())??""}const BU="esri.renderers.support.DictionaryLoader",Dke={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Yj=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new mte(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(g){if(xn(g))return this._dictionaryPromise=null,null}const n=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),s={};if(this.fieldMap)for(const g of this._symbolFields){const v=this._getFieldName(this.fieldMap[g]);s[g]=v?n?e.attributes[v]:""+e.attributes[v]:""}let o=null;try{o=r==null?void 0:r(s,i)}catch{return null}if(!o||typeof o!="string")return null;const a=OD(o).toString(),l=this._symbolCache.get(a);if(l)return l.catch(()=>{this._symbolCache.pop(a)}),l;const c=o.split(";"),h=[],p=[];for(const g of c)if(g)if(g.includes("po:")){const v=g.substr(3).split("|");if(v.length===3){const _=v[0],w=v[1];let S=v[2];if(w==="DashTemplate")S=S.split(" ").map(b=>Number(b));else if(w==="Color"){const b=new ae(S).toRgba();S=[b[0],b[1],b[2],255*b[3]]}else S=Number(S);p.push({primitiveName:_,propertyName:w,value:S})}}else if(g.includes("|")){for(const v of g.split("|"))if(this._itemNames.has(v)){h.push(v);break}}else this._itemNames.has(g)&&h.push(g);const f=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",y=this._cimPartsToCIMSymbol(h,p,f,i);return this._symbolCache.put(a,y,1),y}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void U.getLogger(BU).error("no valid URL!");const i=tt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([i,su()]);if(!r)throw this._dictionaryPromise=null,new C("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:a}=r,l=o;let c=!1;s&&(this._dictionaryVersion=rF.parse(s),c=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=n.symbol;const h={};if(this.config){const y=this.config;for(const g in y)h[g]=y[g]}if(n.configuration)for(const y of n.configuration)h.hasOwnProperty(y.name)||(h[y.name]=y.value);const p=[];if(e!=null&&e.fields&&this.fieldMap)for(const y of this._symbolFields){const g=this.fieldMap[y],v=e.fields.filter(_=>_.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&p.push({...v[0],type:c?v[0].type:"esriFieldTypeString"})}p.length>0&&(this._fieldIndex=new yte(p));const f=kfe(l,e!=null?e.spatialReference:null,p,h).then(y=>{const g={scale:0};return(v,_)=>{if(y==null)return null;const w=y.repurposeFeature({geometry:null,attributes:v});return g.scale=_!=null?_.scale??void 0:void 0,y.evaluate({$feature:w,$view:g},y.services)}}).catch(y=>(U.getLogger(BU).error("Creating dictinoary expression failed:",y),null));return this._dictionaryPromise=f,f}async _cimPartsToCIMSymbol(e,i,r,n){const s=new Array(e.length);for(let l=0;l<e.length;l++)s[l]=this._getSymbolPart(e[l],n);const o=await Promise.all(s),a=this.fieldMap;if(a)for(const l of o)gte(l,a);return new N1({data:this._combineSymbolParts(o,i,r)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(s=>s.data);const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),n=tt(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,n);try{return(await n).data}catch(s){throw this._ongoingRequests.delete(e),s}}_combineSymbolParts(e,i,r){if(!e||e.length===0)return null;const n={...e[0]};if(e.length>1){n.symbolLayers=[];for(const s of e){const o=s;n.symbolLayers.unshift(...o.symbolLayers)}}return r&&(n.callout=Dke),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function gte(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&Nke(n,e)}}function Nke(t,e){const i=t.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":gte(n,e);break;case"CIMTextSymbol":n.fieldMap=e}}}const C7e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:Yj},Symbol.toStringTag,{value:"Module"}));var nF;let xa=nF=class extends yv(Uc){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Yj(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new nF({config:F(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:F(this.fieldMap),url:F(this.url),visualVariables:F(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Gn(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};u([d({type:Yj})],xa.prototype,"_loader",null),u([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],xa.prototype,"config",void 0),u([d({type:Object,json:{write:!0}})],xa.prototype,"fieldMap",void 0),u([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],xa.prototype,"scaleExpression",void 0),u([ie("scaleExpression")],xa.prototype,"writeData",null),u([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],xa.prototype,"scaleExpressionTitle",void 0),u([d({type:String,json:{write:!0}})],xa.prototype,"url",void 0),u([ie("visualVariables")],xa.prototype,"writeVisualVariables",null),xa=nF=u([E("esri.renderers.DictionaryRenderer")],xa);const jke=xa;var sF;let Hu=sF=class extends G{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(U.getLogger(this).error(".field: field must be a string value"),null):T1(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new sF({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:ae,json:{type:[Number],write:!0}})],Hu.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],Hu.prototype,"field",void 0),u([Re("field")],Hu.prototype,"castField",null),u([d({type:String,json:{write:!0}})],Hu.prototype,"label",void 0),u([d({type:String,json:{write:!0}})],Hu.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],Hu.prototype,"valueExpressionTitle",void 0),Hu=sF=u([E("esri.renderers.support.AttributeColorInfo")],Hu);const vte=Hu;var oF;let bE=oF=class extends G{constructor(){super(...arguments),this.unit=null}clone(){return new oF({unit:this.unit})}};u([d({type:String,json:{write:!0}})],bE.prototype,"unit",void 0),bE=oF=u([E("esri.renderers.support.DotDensityLegendOptions")],bE);const Vke=bE;var aF;let rs=aF=class extends yv(Uc){constructor(t){super(t),this.attributes=null,this.backgroundColor=new ae([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new En,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Qo({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new aF({attributes:F(this.attributes),backgroundColor:F(this.backgroundColor),dotBlendingEnabled:F(this.dotBlendingEnabled),dotShape:F(this.dotShape),dotSize:F(this.dotSize),dotValue:F(this.dotValue),legendOptions:F(this.legendOptions),outline:F(this.outline),referenceScale:F(this.referenceScale),visualVariables:F(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Gn(t,e,i.valueExpression),i.field&&t.add(i.field)}};u([d({type:[vte],json:{write:!0}})],rs.prototype,"attributes",void 0),u([d({type:ae,json:{write:!0}})],rs.prototype,"backgroundColor",void 0),u([d({type:Boolean,json:{write:!0}})],rs.prototype,"dotBlendingEnabled",void 0),u([d({type:String,json:{write:!1}})],rs.prototype,"dotShape",void 0),u([d({type:Number,json:{write:!0}})],rs.prototype,"dotSize",void 0),u([d({type:Vke,json:{write:!0}})],rs.prototype,"legendOptions",void 0),u([d({type:En,json:{default:null,write:!0}})],rs.prototype,"outline",void 0),u([d({type:Number,json:{write:!0}})],rs.prototype,"dotValue",void 0),u([d({type:Number,json:{write:!0}})],rs.prototype,"referenceScale",void 0),u([d({type:Number,json:{write:!0}})],rs.prototype,"seed",void 0),u([ye({dotDensity:"dot-density"})],rs.prototype,"type",void 0),rs=aF=u([E("esri.renderers.DotDensityRenderer")],rs);const zke=rs;var lF;let aw=lF=class extends G{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new lF({color:this.color,ratio:this.ratio})}};u([d({type:ae,json:{type:[Mt],default:null,write:!0}})],aw.prototype,"color",void 0),u([d({type:Number,json:{write:!0}})],aw.prototype,"ratio",void 0),aw=lF=u([E("esri.renderers.support.HeatmapColorStop")],aw);const Kw=aw;let By=class extends Ft(G){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([d({type:String,json:{write:!0}})],By.prototype,"minLabel",void 0),u([d({type:String,json:{write:!0}})],By.prototype,"maxLabel",void 0),u([d({type:String,json:{write:!0}})],By.prototype,"title",void 0),By=u([E("esri.renderers.support.HeatmapLegendOptions")],By);function uI(){return[0,0,0,0]}function Uke(t){return[t[0],t[1],t[2],t[3]]}function vv(t,e,i,r){return[t,e,i,r]}function Bke(t){const e=uI(),i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Gke(t,e){return new Float64Array(t,e,4)}function _te(){return uI()}function wte(){return vv(1,1,1,1)}function bte(){return vv(1,0,0,0)}function Ste(){return vv(0,1,0,0)}function xte(){return vv(0,0,1,0)}function $te(){return vv(0,0,0,1)}const Hke=_te(),qke=wte(),Wke=bte(),Zke=Ste(),Yke=xte(),Jke=$te();Object.freeze(Object.defineProperty({__proto__:null,ONES:qke,UNIT_W:Jke,UNIT_X:Wke,UNIT_Y:Zke,UNIT_Z:Yke,ZEROS:Hke,clone:Uke,create:uI,createView:Gke,fromArray:Bke,fromValues:vv,ones:wte,unitW:$te,unitX:bte,unitY:Ste,unitZ:xte,zeros:_te},Symbol.toStringTag,{value:"Module"}));const Jj=2.4;function Kke(t){return Js(t*Jj)}function Qke(t){return Wr(t)/Jj}function Xke(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=xs((r-s)/(a-s),0,1);JW(t,n.toArray(),o.toArray(),l)}function A7e(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=uI();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];Xke(o,r,n,l),i.set(o,4*a)}return i}function O7e(t,e,i,r){const{radius:n,fieldOffset:s,field:o}=e,a=Math.round(Wr(n)),l=new Float64Array(i*r);let c,h=Number.NEGATIVE_INFINITY;const p=iCe(o,s),f=new Set;for(const y of t){const g=y.getCursor();for(;g.next();){const v=g.getObjectId();if(f.has(v))continue;f.add(v);const _=g.readLegacyPointGeometry(),w=128;if(_.x<-w||_.x>=i+w||_.y<-w||_.y>r+w)continue;const S=+p(g),b=Math.max(0,Math.round(_.x)-a),$=Math.max(0,Math.round(_.y)-a),T=Math.min(r,Math.round(_.y)+a),I=Math.min(i,Math.round(_.x)+a);for(let A=$;A<T;A++)for(let L=b;L<I;L++){const z=A*i+L,j=tCe(_.x-L,_.y-A,a);c=l[z]+=j*S,c>h&&(h=c)}}}return{matrix:l.buffer,max:h}}function L7e(t,e,i,r,n,s){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const o=t.getImageData(0,0,e,e);i&&r&&o.data.set(new Uint8ClampedArray(eCe(e,i,r,n,s))),t.putImageData(o,0,0)}function eCe(t,e,i,r,n){const s=new Uint32Array(t*t),o="buffer"in e?e:new Float64Array(e),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),l=a.length/(n-r);for(let c=0;c<o.length;c++){const h=o[c],p=Math.floor((h-r)*l);s[c]=a[xs(p,0,a.length-1)]}return s.buffer}function tCe(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function R7e(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function iCe(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var uF;const Ete="esri.renderers.HeatmapRenderer",rCe=U.getLogger(Ete);function GU(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let pr=uF=class extends Uc{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Kw({ratio:0,color:new ae("rgba(255, 140, 0, 0)")}),new Kw({ratio:.75,color:new ae("rgba(255, 140, 0, 1)")}),new Kw({ratio:.9,color:new ae("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return GU(t)}get blurRadius(){return Qke(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Kke(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(Jj**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||Bn(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,J0(()=>{Ha(rCe,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=GU(t),super.read(t,e)}getSymbol(){return new ll}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Zs(t,e,i),r&&typeof r=="string"&&await Gn(t,e,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new uF({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:F(this.colorStops),field:this.field,legendOptions:F(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:qj,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],pr.prototype,"authoringInfo",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],pr.prototype,"blurRadius",null),u([d({type:[Kw],json:{write:!0}})],pr.prototype,"colorStops",void 0),u([d({type:String,json:{write:!0}})],pr.prototype,"field",void 0),u([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],pr.prototype,"fieldOffset",void 0),u([d({type:By,json:{write:!0}})],pr.prototype,"legendOptions",void 0),u([d({type:Number,json:{write:!0}})],pr.prototype,"maxDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],pr.prototype,"maxPixelIntensity",null),u([d({type:Number,json:{write:!0}})],pr.prototype,"minDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],pr.prototype,"minPixelIntensity",null),u([d({type:Number,cast:it,json:{write:!0}})],pr.prototype,"radius",void 0),u([d({type:Number,range:{min:0},json:{default:0,write:!0}})],pr.prototype,"referenceScale",void 0),u([ye({heatmap:"heatmap"})],pr.prototype,"type",void 0),u([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],pr.prototype,"valueExpression",void 0),u([d({type:String})],pr.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],pr.prototype,"_pixelIntensityToDensity",null),pr=uF=u([E(Ete)],pr);const Mte=pr;let Lf=class extends Ft(G){constructor(){super(...arguments),this.color=new ae([0,0,0,0]),this.label=null,this.threshold=0}};u([d({type:ae,json:{write:!0}})],Lf.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],Lf.prototype,"label",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Lf.prototype,"threshold",void 0),Lf=u([E("esri.renderers.support.OthersCategory")],Lf);let SE=class extends Ft(G){constructor(){super(...arguments),this.title=null}};u([d({type:String,json:{write:!0}})],SE.prototype,"title",void 0),SE=u([E("esri.renderers.support.PieChartLegendOptions")],SE);let Cs=class extends yv(Ft(Uc)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ae([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Lf,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new ll({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Pi)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Gn(e,i,r.valueExpression),r.field&&e.add(r.field)}};u([d({type:[vte],json:{write:!0}})],Cs.prototype,"attributes",void 0),u([d({type:Qo,json:{default:null,write:!0}})],Cs.prototype,"backgroundFillSymbol",void 0),u([d({type:ae,json:{write:!0}})],Cs.prototype,"defaultColor",void 0),u([d({type:String,json:{write:!0}})],Cs.prototype,"defaultLabel",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Cs.prototype,"holePercentage",void 0),u([d({type:Lf,json:{write:!0}})],Cs.prototype,"othersCategory",void 0),u([d({type:SE,json:{write:!0}})],Cs.prototype,"legendOptions",void 0),u([d({type:En,json:{default:null,write:!0}})],Cs.prototype,"outline",void 0),u([d({type:Number,cast:it,json:{write:!0}})],Cs.prototype,"size",void 0),u([ye({pieChart:"pie-chart"})],Cs.prototype,"type",void 0),Cs=u([E("esri.renderers.PieChartRenderer")],Cs);const nCe=Cs;var cF;let pf=cF=class extends yv(Uc){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new cF({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:F(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};u([d({type:String,json:{write:!0}})],pf.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],pf.prototype,"label",void 0),u([d(gv)],pf.prototype,"symbol",void 0),u([ye({simple:"simple"})],pf.prototype,"type",void 0),pf=cF=u([E("esri.renderers.SimpleRenderer")],pf);const cI=pf,sCe=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function dF(t){return t instanceof X}function HU(t){return t instanceof se?Object.keys(t.items):dF(t)?Bn(t).keys():t?Object.keys(t):[]}function Ex(t,e){return t instanceof se?t.items[e]:t[e]}function oCe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Qw(t){return t?t.declaredClass:null}function Tte(t,e){var p;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=HU(t),n=HU(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||oCe(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(f=>!r.includes(f)),o=r.filter(f=>!n.includes(f)),a=r.filter(f=>n.includes(f)&&Ex(t,f)!==Ex(e,f)).concat(s,o).sort(),l=Qw(t);if(l&&sCe.includes(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let c;const h=dF(t)&&dF(e);for(const f of a){const y=Ex(t,f),g=Ex(e,f);let v;if((h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(i&&i[f]&&typeof i[f]=="function")v=(p=i[f])==null?void 0:p.call(i,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&Qw(y)===Qw(g)?Tte(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(c!=null?c.diff[f]=v:c={type:"partial",diff:{[f]:v}})}}return c}function aCe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function j7e(t,e){for(const i of e)if(aCe(t,i))return!0;return!1}function Ite(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Qw(t)!==Qw(e)?{type:"complete",oldValue:t,newValue:e}:Tte(t,e)}function Mx(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!Mx(i))return!1;for(const i of e.removed)if(!Mx(i))return!1;for(const i of e.changed)if(!Mx(i))return!1;return!0}case"partial":for(const e in t.diff)if(!Mx(t.diff[e]))return!1;return!0}}let Gy=class extends Ft(G){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};u([d(vE)],Gy.prototype,"value",void 0),u([d(vE)],Gy.prototype,"value2",void 0),u([d(vE)],Gy.prototype,"value3",void 0),Gy=u([E("esri.renderers.support.UniqueValue")],Gy);const r0=Gy;let Rd=class extends Ft(G){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new r0({value:r})):i==="object"?e[0]instanceof r0?e:e.map(r=>new r0(r)):null}};u([d({type:String,json:{write:!0}})],Rd.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Rd.prototype,"label",void 0),u([d(gv)],Rd.prototype,"symbol",void 0),u([d({type:[r0],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new r0({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(Pi).map(s=>s.toString());i.push(n)}e.values=i}}}})],Rd.prototype,"values",void 0),u([Re("values")],Rd.prototype,"castValues",null),Rd=u([E("esri.renderers.support.UniqueValueClass")],Rd);const kte=Rd;let lw=class extends Ft(G){constructor(e){super(e),this.heading=null,this.classes=null}};u([d({type:String,json:{write:!0}})],lw.prototype,"heading",void 0),u([d({type:[kte],json:{write:!0}})],lw.prototype,"classes",void 0),lw=u([E("esri.renderers.support.UniqueValueGroup")],lw);const hF=lw;var pF;let ff=pF=class extends G{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new pF({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};u([d({type:String,json:{write:!0}})],ff.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],ff.prototype,"label",void 0),u([d(gv)],ff.prototype,"symbol",void 0),u([d(vE)],ff.prototype,"value",void 0),ff=pF=u([E("esri.renderers.support.UniqueValueInfo")],ff);const Xw=ff,lCe=()=>!!V("enable-feature:force-wosr"),uCe=()=>V.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),cCe=()=>V.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),Kj=()=>!!V("enable-i3s-patching"),dCe=()=>V.add("enable-i3s-patching",!0,!0,!0),hCe=()=>V.add("enable-i3s-patching",!1,!0,!0),Qj=()=>!!V("enable-feature:SceneLayer-editing"),pCe=(t="i3s-patching")=>{switch(hCe(),cCe(),V.add("enable-feature:SceneLayer-editing",!0,!0,!0),t){case"feature-layer-view":uCe();break;case"i3s-patching":dCe()}};pCe("i3s-patching");let MC={};async function fCe(t,e){try{return{data:(await Xj(t,e)).data,baseUrl:UN(t),styleUrl:t}}catch(i){return Wl(i),null}}function mCe(t,e,i){const r=e.portal!=null?e.portal:lr.getDefault();let n;const s=`${r.url} - ${r.user&&r.user.username} - ${t}`;return MC[s]||(MC[s]=yCe(t,r,i).then(o=>(n=o,o.fetchData())).then(o=>({data:o,baseUrl:n.itemUrl??"",styleName:t}))),MC[s]}function yCe(t,e,i){return e.load(i).then(()=>{const r=new Jl({disableExtraQuery:!0,query:`owner:${qU} AND type:${WU} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var o;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===s))&&a.type===WU&&a.owner===qU){n=a;break}}if(!n)throw new C("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function Cte(t,e,i){return t&&t.styleUrl!=null?fCe(t.styleUrl,i):t&&t.styleName!=null?mCe(t.styleName,e,i):Promise.reject(new C("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Pte(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function gCe(t,e,i=["gltf"]){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!lCe())for(const r of i){const n=t.formatInfos.find(s=>s.type===r);if(n)return n.href}return t.webRef}function Xj(t,e){const i={responseType:"json",query:{f:"json"},...e};return tt(Ja(t),i)}const qU="esri_en",WU="Style",vCe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var uw;const Ate="esri.renderers.UniqueValueRenderer",od=U.getLogger(Ate),ZU="uvInfos-watcher",YU="uvGroups-watcher",_Ce=",",wCe=Xt(Xw);function bCe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map(l=>{var w;const{symbol:c,label:h,value:p,description:f}=l,[y,g,v]=a?((w=p==null?void 0:p.toString())==null?void 0:w.split(n||""))||[]:[p],_=[];return(e||o)&&_.push(y),i&&_.push(g),r&&_.push(v),{symbol:c,label:h,values:[_],description:f}})}]}let ni=uw=class extends yv(Uc){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find(a=>a.value===i[s].value);o?Ite(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(o=>o.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:T1(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r&&r.messages?r.messages.push(new C("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):od.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||lr.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Yh(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=U1(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?od.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?od.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void od.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?wCe(t):new Xw({value:t,symbol:VJ(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void od.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await su()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void od.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null||i.arcade==null)){const n=await su(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,s)=>n+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new uw({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:F(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:F(this.visualVariables),legendOptions:F(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:F(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=F(this.uniqueValueInfos),i=F(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(F(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Gn(t,e,this.valueExpression)];Zs(t,e,this.field),Zs(t,e,this.field2),Zs(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return Cte(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new qm({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Xw({value:r.name,symbol:n});e.push(s),this._valueInfoMap[r.name]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",_Ce)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(ZU);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(D(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,ZU)}}_watchUniqueValueGroups(){this.removeHandles(YU);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(D(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(D(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,YU)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of s)for(const c of l.classes??[]){const{symbol:h,label:p,values:f,description:y}=c;for(const g of f??[]){const{value:v,value2:_,value3:w}=g,S=[v];i&&S.push(_),r&&S.push(w);const b=a?S.join(n||""):S[0];t.push(new Xw({symbol:h,label:p,value:b,description:y}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map(c=>{var w;const{symbol:h,label:p,value:f,description:y}=c,[g,v,_]=o?((w=f==null?void 0:f.toString())==null?void 0:w.split(n||""))||[]:[f];return new kte({symbol:h,label:p,description:y,values:[new r0({value:g,value2:v,value3:_})]})}),l=[new hF({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s}=e??{};let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const c=a.createSyntaxTree(this.valueExpression);o=a.createFunction(c),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(t,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(typeof e!="function"&&this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else typeof e=="function"?r=e(t):e&&(r=i[e]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,e){const i=new uw(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||lr.getDefault());const r=i.populateFromStyle();return r.catch(n=>{od.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new uw(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{od.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};u([d({readOnly:!0})],ni.prototype,"_cache",null),u([ye({uniqueValue:"unique-value"})],ni.prototype,"type",void 0),u([d(hte)],ni.prototype,"backgroundFillSymbol",void 0),u([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ni.prototype,"field",null),u([Re("field")],ni.prototype,"castField",null),u([ie("field")],ni.prototype,"writeField",null),u([d({type:String,value:null,json:{write:!0}})],ni.prototype,"field2",null),u([d({type:String,value:null,json:{write:!0}})],ni.prototype,"field3",null),u([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ni.prototype,"orderByClassesEnabled",void 0),u([d({type:String,value:null,json:{write:!0}})],ni.prototype,"valueExpression",null),u([d({type:String,json:{write:!0}})],ni.prototype,"valueExpressionTitle",void 0),u([d({type:i0,json:{write:!0}})],ni.prototype,"legendOptions",void 0),u([d({type:String,json:{write:!0}})],ni.prototype,"defaultLabel",void 0),u([d(uq({...gv},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ni.prototype,"defaultSymbol",null),u([d({type:String,value:null,json:{write:!0}})],ni.prototype,"fieldDelimiter",null),u([d({type:lr,readOnly:!0})],ni.prototype,"portal",void 0),u([Q("portal",["styleName"])],ni.prototype,"readPortal",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ni.prototype,"styleOrigin",void 0),u([Q("styleOrigin",["styleName","styleUrl"])],ni.prototype,"readStyleOrigin",null),u([ie("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ni.prototype,"writeStyleOrigin",null),u([d({type:[hF],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||bCe(e)).map(r=>hF.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ni.prototype,"uniqueValueGroups",null),u([d({type:[Xw],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ni.prototype,"uniqueValueInfos",null),ni=uw=u([E(Ate)],ni);const dI=ni,hI={key:"type",base:Uc,typeMap:{heatmap:Mte,simple:cI,"unique-value":dI,"class-breaks":fte,"dot-density":zke,dictionary:jke,"pie-chart":nCe},errorContext:"renderer"},SCe={key:"type",base:Uc,typeMap:{simple:cI,"unique-value":dI,"class-breaks":fte,heatmap:Mte},errorContext:"renderer"};function B7e(t,e){return d1(t,null,e)}const xCe=Z0({types:hI});function d1(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Zo("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):xCe(t,e,i):null}let $Ce=class Ote{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(LA),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new Ote,r=this._originStores[Ve.DEFAULTS];r&&r.forEach((n,s)=>{i.set(s,F(n),Ve.DEFAULTS)});for(let n=Ve.SERVICE;n<LA;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{e&&e.has(a)||i.set(a,F(o),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Ve.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=Ve.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r&&r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||Ve.DEFAULTS}forEach(e){this._values.forEach(e)}};const Lte=t=>{let e=class extends t{constructor(...i){super(...i);const r=Bn(this),n=r.store,s=new $Ce;r.store=s,tW(r,n,s)}read(i,r){rW(this,i,r)}getAtOrigin(i,r){const n=TC(this),s=wh(r);if(typeof i=="string")return n.get(i,s);const o={};return i.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(i){return M2(this.originIdOf(i))}originIdOf(i){return TC(this).originOf(i)}revert(i,r){const n=TC(this),s=wh(r),o=Bn(this);let a;a=typeof i=="string"?i==="*"?n.keys(s):[i]:i,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return e=u([E("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function TC(t){return Bn(t).store}let JU=class extends Lte(X){};JU=u([E("esri.core.ReadOnlyMultiOriginJSONSupport")],JU);const ECe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return IC(this).delete(i,wh(r))}write(i,r){return sW(this,i=i||{},r),i}setAtOrigin(i,r,n){Bn(this).setAtOrigin(i,r,wh(n))}removeOrigin(i){const r=IC(this),n=wh(i),s=r.keys(n);for(const o of s)r.originOf(o)===n&&r.set(o,r.get(o,n),Ve.USER)}updateOrigin(i,r){const n=IC(this),s=wh(r),o=this.get(i);for(let a=s+1;a<LA;++a)n.delete(i,a);n.set(i,o,s)}toJSON(i){return this.write({},i)}};return e=u([E("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function IC(t){return Bn(t).store}const Rte=t=>{let e=class extends ECe(Lte(t)){constructor(...i){super(...i)}};return e=u([E("esri.core.MultiOriginJSONSupport")],e),e};let KU=class extends Rte(X){};KU=u([E("esri.core.MultiOriginJSONSupport")],KU);async function MCe(t,e){const{WhereClause:i}=await O(()=>import("./WhereClause-8e39ce65.js").then(r=>r.W),[]);return i.create(t,e)}function TCe(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}function QU(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function ICe(t,e,i){if(!t&&!e||!i)return;const r=S0(i);XU(t,i,r),XU(e,i,r)}function XU(t,e,i){if(t)for(const r of t)kCe(r.geometry,e,i)}function kCe(t,e,i){if(t==null||!t.spatialReference||Si(t.spatialReference,e))return;const r=S0(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)QU(t,t.rings,r);else if("paths"in t)QU(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function fF(t,e,i){if(!i||!i.features||!i.hasZ)return;const r=rK(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}const CCe=new Ge({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var mF;const PCe=new Ge({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let hn=mF=class extends G{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?PCe.fromJSON(i.fieldValueType):null}clone(){return new mF({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};u([d({type:String,json:{write:!0}})],hn.prototype,"alias",void 0),u([d({type:[String,Number],json:{write:{allowNull:!0}}})],hn.prototype,"defaultValue",void 0),u([d()],hn.prototype,"description",void 0),u([Q("description")],hn.prototype,"readDescription",null),u([d({types:Ree,json:{read:{reader:sI},write:!0}})],hn.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],hn.prototype,"editable",void 0),u([d({type:Mt,json:{write:!0}})],hn.prototype,"length",void 0),u([d({type:String,json:{write:!0}})],hn.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0}})],hn.prototype,"nullable",void 0),u([ye(CCe)],hn.prototype,"type",void 0),u([d()],hn.prototype,"valueType",void 0),u([Q("valueType",["description"])],hn.prototype,"readValueType",null),u([d({type:Boolean,json:{read:!1}})],hn.prototype,"visible",void 0),hn=mF=u([E("esri.layers.support.Field")],hn);const e5=hn;var yF;const gF=new Ge({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ir=yF=class extends G{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=_e.fromJSON(e.spatialReference),r=[];for(let n=0;n<t.length;n++){const s=t[n],o=fi.fromJSON(s),a=s.geometry&&s.geometry.spatialReference;o.geometry==null||a||(o.geometry.spatialReference=i);const l=s.aggregateGeometries,c=o.aggregateGeometries;if(l&&c!=null)for(const h in c){const p=c[h],f=l[h],y=f==null?void 0:f.spatialReference;p==null||y||(p.spatialReference=i)}r.push(o)}return r}writeGeometryType(t,e,i,r){if(t)return void gF.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if(s&&s.geometry!=null)return void gF.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Wh(t);return r&&!i&&e.spatialReference&&(r.spatialReference=_e.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new yF(this.cloneProperties())}cloneProperties(){return F({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t&&t[i];r.geometry=n&&n.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=c=>Math.round((c-r)/e),o=c=>Math.round((n-c)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=t,this}unquantize(){var f,y;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=g=>g*s+r,l=g=>n-g*o;let c=null,h=null;if(this.hasZ&&((f=i==null?void 0:i.scale)==null?void 0:f[2])!=null){const{translate:[,,g],scale:[,,v]}=i;c=_=>_*v+g}if(this.hasM&&((y=i==null?void 0:i.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=i;h=_=>_==null?_:_*v+g}const p=this._getHydrationFunction(t,a,l,c,h);for(const{geometry:g}of e)g!=null&&p&&p(g);return this.transform=null,this}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const c=e(l[0]),h=i(l[1]);c===r&&h===n||(s.push([c-r,h-n]),r=c,n=h)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=rm(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this._quantizePoints(l,e,i);c&&s.push(c)}return s.length>0?(rm(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=rm(s)?s.rings:s.paths;let a,l;for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let f=0,y=p.length;f<y;f++){const g=p[f];f>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=e(a),g[1]=i(l)}}if(r&&n)for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let f=0,y=p.length;f<y;f++){const g=p[f];g[2]=r(g[2]),g[3]=n(g[3])}}else if(r)for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let f=0,y=p.length;f<y;f++){const g=p[f];g[2]=r(g[2])}}else if(n)for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let f=0,y=p.length;f<y;f++){const g=p[f];g[2]=n(g[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,h=o.length;c<h;c++){const p=o[c];c>0?(a+=p[0],l+=p[1]):(a=p[0],l=p[1]),p[0]=e(a),p[1]=i(l)}if(r&&n)for(let c=0,h=o.length;c<h;c++){const p=o[c];p[2]=r(p[2]),p[3]=n(p[3])}else if(r)for(let c=0,h=o.length;c<h;c++){const p=o[c];p[2]=r(p[2])}else if(n)for(let c=0,h=o.length;c<h;c++){const p=o[c];p[2]=n(p[2])}}:null}};u([d({type:String,json:{write:!0}})],Ir.prototype,"displayFieldName",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ir.prototype,"exceededTransferLimit",void 0),u([d({type:[fi],json:{write:!0}})],Ir.prototype,"features",void 0),u([Q("features")],Ir.prototype,"readFeatures",null),u([d({type:[e5],json:{write:!0}})],Ir.prototype,"fields",void 0),u([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:gF.read}}})],Ir.prototype,"geometryType",void 0),u([ie("geometryType")],Ir.prototype,"writeGeometryType",null),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ir.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ir.prototype,"hasZ",void 0),u([d({types:Um,json:{write:!0}})],Ir.prototype,"queryGeometry",void 0),u([Q("queryGeometry")],Ir.prototype,"readQueryGeometry",null),u([d({type:_e,json:{write:!0}})],Ir.prototype,"spatialReference",void 0),u([ie("spatialReference")],Ir.prototype,"writeSpatialReference",null),u([d({json:{write:!0}})],Ir.prototype,"transform",void 0),Ir=yF=u([E("esri.rest.support.FeatureSet")],Ir),Ir.prototype.toJSON.isDefaultToJSON=!0;const pI=Ir;let ACe=0;const Fte="esri.layers.graphics.sources.MemorySource",kC=U.getLogger(Fte);let rc=class extends lu.LoadableMixin(B1(Xr(se))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);fF(e,this.layer.spatialReference,r);const n=pI.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new C("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return fF(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:lt.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new C("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const p=o(h);p!=null&&n.push(p)}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(s.push(this._serializeFeature(h)),a){const p=o(h);p!=null&&a.set(p,h)}}ICe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateClientGraphicIds(a,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new C("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const c=o[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[a]:h.attributes[a]=c,s._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(ACe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Un.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await E_e("MemorySourceWorker",{strategy:V("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a}=this.layer,l=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const c=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",y=>{kC.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const h={features:c.features,fields:i&&i.map(y=>y.toJSON()),geometryType:i6.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:l?null:r&&r.toJSON(),timeInfo:a?a.toJSON():null},p=await this._connection.invoke("load",h,{signal:e});for(const y of p.warnings)kC.warn(y.message,{layer:this.layer,warning:y});p.featureErrors.length&&kC.warn(`Encountered ${p.featureErrors.length} validation errors while loading features`,p.featureErrors);const f=p.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(c.inferredGeometryType)&&(f.geometryType=i6.toJSON(c.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),c.finish(p.assignedObjectIds)}};u([sN({Type:fi,ensureType:Xt(fi)})],rc.prototype,"itemType",void 0),u([d()],rc.prototype,"type",void 0),u([d({constructOnly:!0})],rc.prototype,"layer",void 0),u([d({readOnly:!0})],rc.prototype,"_workerGeometryType",null),u([d()],rc.prototype,"sourceJSON",void 0),rc=u([E(Fte)],rc);function OCe(t){return"portalItem"in t}const LCe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):OCe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([d({type:String})],e.prototype,"apiKey",null),e=u([E("esri.layers.mixins.APIKeyMixin")],e),e},RCe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=wc(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",exe(i,U.getLogger(this)))}};return u([d()],e.prototype,"title",null),u([d({type:String})],e.prototype,"url",null),e=u([E("esri.layers.mixins.ArcGISService")],e),e};function fI(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function FCe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function DCe(t,e,i,r,n,s,o,a,l,c,h,p,f,y,g,v){const _=new Float32Array(16);return _[0]=t,_[1]=e,_[2]=i,_[3]=r,_[4]=n,_[5]=s,_[6]=o,_[7]=a,_[8]=l,_[9]=c,_[10]=h,_[11]=p,_[12]=f,_[13]=y,_[14]=g,_[15]=v,_}function NCe(t,e){return new Float32Array(t,e,16)}const jCe=fI();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:jCe,clone:FCe,create:fI,createView:NCe,fromValues:DCe},Symbol.toStringTag,{value:"Module"}));const VCe=(t,e)=>{const i=pp(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Vc(i,i)},zCe=(t,e)=>{const i=pp(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Vc(i,i)},UCe=(t,e)=>{const i=1-e,r=pp(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Vc(r,r)},BCe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=pp(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Vc(n,n)},GCe=(t,e)=>{const i=1-2*e,r=pp(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Vc(r,r)},HCe=(t,e)=>{const i=pp(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Vc(i,i)},qCe=(t,e)=>{const i=1-e,r=pp(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Vc(r,r)};let Dte=class Nte{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=hs(e.strength,i.strength,r),this.radius=hs(e.radius,i.radius,r),this.threshold=hs(e.threshold,i.threshold,r)}clone(){return new Nte(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:eb(this.radius),strength:this.strength,threshold:this.threshold}}},jte=class Vte{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(hs(e.radius,i.radius,r))}clone(){return new Vte(this.radius)}toJSON(){return{type:"blur",radius:eb(this.radius)}}},vF=class zte{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=hs(e.amount,i.amount,r),this._updateMatrix()}clone(){return new zte(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||fI();switch(this.type){case"brightness":this._colorMatrix=VCe(e,this.amount);break;case"contrast":this._colorMatrix=zCe(e,this.amount);break;case"grayscale":this._colorMatrix=UCe(e,this.amount);break;case"invert":this._colorMatrix=GCe(e,this.amount);break;case"saturate":this._colorMatrix=HCe(e,this.amount);break;case"sepia":this._colorMatrix=qCe(e,this.amount)}}},Ute=class Bte{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=hs(e.offsetX,i.offsetX,r),this.offsetY=hs(e.offsetY,i.offsetY,r),this.blurRadius=hs(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(hs(e.color[0],i.color[0],r)),this.color[1]=Math.round(hs(e.color[1],i.color[1],r)),this.color[2]=Math.round(hs(e.color[2],i.color[2],r)),this.color[3]=hs(e.color[3],i.color[3],r)}clone(){return new Bte(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:eb(this.offsetX),yoffset:eb(this.offsetY),blurRadius:eb(this.blurRadius),color:e}}},Gte=class Hte{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=hs(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Hte(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||fI();this._colorMatrix=BCe(e,this.angle)}},qte=class Wte{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=hs(e.amount,i.amount,r)}clone(){return new Wte(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function hs(t,e,i){return t+(e-t)*i}function eb(t){return Math.round(1e3*Js(t))/1e3}function WCe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new vF(t.type,0);case"saturate":case"brightness":case"contrast":return new vF(t.type,1);case"opacity":return new qte(1);case"hue-rotate":return new Gte(0);case"blur":return new jte(0);case"drop-shadow":return new Ute(0,0,0,[...IN("transparent")]);case"bloom":return new Dte(0,0,1)}}function ZCe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function YCe(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(WCe(i[n]))}function JCe(t){const e=t[0];return!!e&&"type"in e}var eB,tB,_F={exports:{}};_F.exports,tB=function(){function t(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function e(n,s,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,e.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function i(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function r(n,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,c={start:cV},h=cV,p="none",f=")",y=",",g="(",v="%",_="px",w="cm",S="mm",b="in",$="pt",T="pc",I="deg",A="rad",L="grad",z="turn",j="#",H=".",J="e",ue=/^[ \t\n\r]/,re=/^[a-z\-]/,pe=/^[0-9a-fA-F]/,Dt=/^[+\-]/,we=/^[0-9]/,q=gu("none"),le=xr("none",!1),Ee=xr(")",!1),ft=xr(",",!1),mt=gu("whitespace"),Dr=Mv([" ","	",`
`,"\r"],!1,!1),Wn=gu("function"),yu=xr("(",!1),Xo=gu("identifier"),gp=Mv([["a","z"],"-"],!1,!1),ooe=gu("percentage"),aoe=xr("%",!1),loe=gu("length"),uoe=xr("px",!1),coe=xr("cm",!1),doe=xr("mm",!1),hoe=xr("in",!1),poe=xr("pt",!1),foe=xr("pc",!1),moe=gu("angle"),yoe=xr("deg",!1),goe=xr("rad",!1),voe=xr("grad",!1),_oe=xr("turn",!1),woe=gu("number"),boe=gu("color"),Soe=xr("#",!1),oV=Mv([["0","9"],["a","f"],["A","F"]],!1,!1),aV=Mv(["+","-"],!1,!1),Bc=Mv([["0","9"]],!1,!1),xoe=xr(".",!1),$oe=xr("e",!1),Eoe=function(){return[]},Moe=function(k,B){return{type:"function",name:k,parameters:B||[]}},Toe=function(k,B){return B.length>0?oae(k,B,3):[k]},Ioe=function(k){return{type:"quantity",value:k.value,unit:k.unit}},koe=function(k){return{type:"color",colorType:k.type,value:k.value}},Coe=function(k){return k},Poe=function(){return mS()},Aoe=function(k){return{value:k,unit:"%"}},Ooe=function(k){return{value:k,unit:"px"}},Loe=function(k){return{value:k,unit:"cm"}},Roe=function(k){return{value:k,unit:"mm"}},Foe=function(k){return{value:k,unit:"in"}},Doe=function(k){return{value:k,unit:"pt"}},Noe=function(k){return{value:k,unit:"pc"}},joe=function(k){return{value:k,unit:"deg"}},Voe=function(k){return{value:k,unit:"rad"}},zoe=function(k){return{value:k,unit:"grad"}},Uoe=function(k){return{value:k,unit:"turn"}},Boe=function(k){return{value:k,unit:null}},Goe=function(){return{type:"hex",value:mS()}},Hoe=function(k){return{type:"function",value:k}},qoe=function(){return{type:"named",value:mS()}},Woe=function(){return parseFloat(mS())},N=0,ai=0,fS=[{line:1,column:1}],yl=0,jI=[],fe=0;if("startRule"in s){if(!(s.startRule in c))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=c[s.startRule]}function mS(){return n.substring(ai,N)}function xr(k,B){return{type:"literal",text:k,ignoreCase:B}}function Mv(k,B,Z){return{type:"class",parts:k,inverted:B,ignoreCase:Z}}function Zoe(){return{type:"end"}}function gu(k){return{type:"other",description:k}}function lV(k){var B,Z=fS[k];if(Z)return Z;for(B=k-1;!fS[B];)B--;for(Z={line:(Z=fS[B]).line,column:Z.column};B<k;)n.charCodeAt(B)===10?(Z.line++,Z.column=1):Z.column++,B++;return fS[k]=Z,Z}function uV(k,B,Z){var De=lV(k),zi=lV(B),kt={source:l,start:{offset:k,line:De.line,column:De.column},end:{offset:B,line:zi.line,column:zi.column}};return Z&&l&&typeof l.offset=="function"&&(kt.start=l.offset(kt.start),kt.end=l.offset(kt.end)),kt}function Ae(k){N<yl||(N>yl&&(yl=N,jI=[]),jI.push(k))}function Yoe(k,B,Z){return new e(e.buildMessage(k,B),k,B,Z)}function cV(){var k;return(k=Joe())===a&&(k=Koe()),k}function Joe(){var k,B;return fe++,k=N,$r(),n.substr(N,4)===p?(B=p,N+=4):(B=a,fe===0&&Ae(le)),B!==a?($r(),ai=k,k=Eoe()):(N=k,k=a),fe--,k===a&&fe===0&&Ae(q),k}function Koe(){var k,B;if(k=[],(B=VI())!==a)for(;B!==a;)k.push(B),B=VI();else k=a;return k}function VI(){var k,B,Z,De;return k=N,$r(),(B=Xoe())!==a?($r(),(Z=Qoe())===a&&(Z=null),$r(),n.charCodeAt(N)===41?(De=f,N++):(De=a,fe===0&&Ae(Ee)),De!==a?($r(),ai=k,k=Moe(B,Z)):(N=k,k=a)):(N=k,k=a),k}function Qoe(){var k,B,Z,De,zi,kt,ao,yS;if(k=N,(B=zI())!==a){for(Z=[],De=N,zi=$r(),n.charCodeAt(N)===44?(kt=y,N++):(kt=a,fe===0&&Ae(ft)),kt===a&&(kt=null),ao=$r(),(yS=zI())!==a?De=zi=[zi,kt,ao,yS]:(N=De,De=a);De!==a;)Z.push(De),De=N,zi=$r(),n.charCodeAt(N)===44?(kt=y,N++):(kt=a,fe===0&&Ae(ft)),kt===a&&(kt=null),ao=$r(),(yS=zI())!==a?De=zi=[zi,kt,ao,yS]:(N=De,De=a);ai=k,k=Toe(B,Z)}else N=k,k=a;return k}function zI(){var k,B;return k=N,(B=eae())===a&&(B=tae())===a&&(B=iae())===a&&(B=rae()),B!==a&&(ai=k,B=Ioe(B)),(k=B)===a&&(k=N,(B=nae())!==a&&(ai=k,B=koe(B)),k=B),k}function $r(){var k,B;for(fe++,k=[],ue.test(n.charAt(N))?(B=n.charAt(N),N++):(B=a,fe===0&&Ae(Dr));B!==a;)k.push(B),ue.test(n.charAt(N))?(B=n.charAt(N),N++):(B=a,fe===0&&Ae(Dr));return fe--,B=a,fe===0&&Ae(mt),k}function Xoe(){var k,B,Z;return fe++,k=N,(B=dV())!==a?(n.charCodeAt(N)===40?(Z=g,N++):(Z=a,fe===0&&Ae(yu)),Z!==a?(ai=k,k=Coe(B)):(N=k,k=a)):(N=k,k=a),fe--,k===a&&(B=a,fe===0&&Ae(Wn)),k}function dV(){var k,B,Z;if(fe++,k=N,B=[],re.test(n.charAt(N))?(Z=n.charAt(N),N++):(Z=a,fe===0&&Ae(gp)),Z!==a)for(;Z!==a;)B.push(Z),re.test(n.charAt(N))?(Z=n.charAt(N),N++):(Z=a,fe===0&&Ae(gp));else B=a;return B!==a&&(ai=k,B=Poe()),fe--,(k=B)===a&&(B=a,fe===0&&Ae(Xo)),k}function eae(){var k,B,Z;return fe++,k=N,$r(),(B=oo())!==a?(n.charCodeAt(N)===37?(Z=v,N++):(Z=a,fe===0&&Ae(aoe)),Z!==a?(ai=k,k=Aoe(B)):(N=k,k=a)):(N=k,k=a),fe--,k===a&&fe===0&&Ae(ooe),k}function tae(){var k,B,Z;return fe++,k=N,$r(),(B=oo())!==a?(n.substr(N,2)===_?(Z=_,N+=2):(Z=a,fe===0&&Ae(uoe)),Z!==a?(ai=k,k=Ooe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,$r(),(B=oo())!==a?(n.substr(N,2)===w?(Z=w,N+=2):(Z=a,fe===0&&Ae(coe)),Z!==a?(ai=k,k=Loe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,$r(),(B=oo())!==a?(n.substr(N,2)===S?(Z=S,N+=2):(Z=a,fe===0&&Ae(doe)),Z!==a?(ai=k,k=Roe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,$r(),(B=oo())!==a?(n.substr(N,2)===b?(Z=b,N+=2):(Z=a,fe===0&&Ae(hoe)),Z!==a?(ai=k,k=Foe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,$r(),(B=oo())!==a?(n.substr(N,2)===$?(Z=$,N+=2):(Z=a,fe===0&&Ae(poe)),Z!==a?(ai=k,k=Doe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,$r(),(B=oo())!==a?(n.substr(N,2)===T?(Z=T,N+=2):(Z=a,fe===0&&Ae(foe)),Z!==a?(ai=k,k=Noe(B)):(N=k,k=a)):(N=k,k=a)))))),fe--,k===a&&fe===0&&Ae(loe),k}function iae(){var k,B,Z;return fe++,k=N,(B=oo())!==a?(n.substr(N,3)===I?(Z=I,N+=3):(Z=a,fe===0&&Ae(yoe)),Z!==a?(ai=k,k=joe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,(B=oo())!==a?(n.substr(N,3)===A?(Z=A,N+=3):(Z=a,fe===0&&Ae(goe)),Z!==a?(ai=k,k=Voe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,(B=oo())!==a?(n.substr(N,4)===L?(Z=L,N+=4):(Z=a,fe===0&&Ae(voe)),Z!==a?(ai=k,k=zoe(B)):(N=k,k=a)):(N=k,k=a),k===a&&(k=N,(B=oo())!==a?(n.substr(N,4)===z?(Z=z,N+=4):(Z=a,fe===0&&Ae(_oe)),Z!==a?(ai=k,k=Uoe(B)):(N=k,k=a)):(N=k,k=a)))),fe--,k===a&&(B=a,fe===0&&Ae(moe)),k}function rae(){var k,B;return fe++,k=N,$r(),(B=oo())!==a?(ai=k,k=Boe(B)):(N=k,k=a),fe--,k===a&&fe===0&&Ae(woe),k}function nae(){var k,B,Z,De;if(fe++,k=N,n.charCodeAt(N)===35?(B=j,N++):(B=a,fe===0&&Ae(Soe)),B!==a){if(Z=[],pe.test(n.charAt(N))?(De=n.charAt(N),N++):(De=a,fe===0&&Ae(oV)),De!==a)for(;De!==a;)Z.push(De),pe.test(n.charAt(N))?(De=n.charAt(N),N++):(De=a,fe===0&&Ae(oV));else Z=a;Z!==a?(ai=k,k=Goe()):(N=k,k=a)}else N=k,k=a;return k===a&&(k=N,(B=VI())!==a&&(ai=k,B=Hoe(B)),(k=B)===a&&(k=N,(B=dV())!==a&&(ai=k,B=qoe()),k=B)),fe--,k===a&&(B=a,fe===0&&Ae(boe)),k}function oo(){var k,B,Z,De,zi,kt,ao;for(k=N,Dt.test(n.charAt(N))?(n.charAt(N),N++):fe===0&&Ae(aV),B=N,Z=[],we.test(n.charAt(N))?(De=n.charAt(N),N++):(De=a,fe===0&&Ae(Bc));De!==a;)Z.push(De),we.test(n.charAt(N))?(De=n.charAt(N),N++):(De=a,fe===0&&Ae(Bc));if(n.charCodeAt(N)===46?(De=H,N++):(De=a,fe===0&&Ae(xoe)),De!==a){if(zi=[],we.test(n.charAt(N))?(kt=n.charAt(N),N++):(kt=a,fe===0&&Ae(Bc)),kt!==a)for(;kt!==a;)zi.push(kt),we.test(n.charAt(N))?(kt=n.charAt(N),N++):(kt=a,fe===0&&Ae(Bc));else zi=a;zi!==a?B=Z=[Z,De,zi]:(N=B,B=a)}else N=B,B=a;if(B===a)if(B=[],we.test(n.charAt(N))?(Z=n.charAt(N),N++):(Z=a,fe===0&&Ae(Bc)),Z!==a)for(;Z!==a;)B.push(Z),we.test(n.charAt(N))?(Z=n.charAt(N),N++):(Z=a,fe===0&&Ae(Bc));else B=a;if(B!==a){if(Z=N,n.charCodeAt(N)===101?(De=J,N++):(De=a,fe===0&&Ae($oe)),De!==a){if(Dt.test(n.charAt(N))?(zi=n.charAt(N),N++):(zi=a,fe===0&&Ae(aV)),zi===a&&(zi=null),kt=[],we.test(n.charAt(N))?(ao=n.charAt(N),N++):(ao=a,fe===0&&Ae(Bc)),ao!==a)for(;ao!==a;)kt.push(ao),we.test(n.charAt(N))?(ao=n.charAt(N),N++):(ao=a,fe===0&&Ae(Bc));else kt=a;kt!==a?Z=De=[De,zi,kt]:(N=Z,Z=a)}else N=Z,Z=a;Z===a&&(Z=null),ai=k,k=Woe()}else N=k,k=a;return k}function sae(k,B){return k.map(function(Z){return Z[B]})}function oae(k,B,Z){return[k].concat(sae(B,Z))}if((o=h())!==a&&N===n.length)return o;throw o!==a&&N<n.length&&Ae(Zoe()),Yoe(jI,yl<n.length?n.charAt(yl):null,yl<n.length?uV(yl,yl+1):uV(yl,yl))}return t(e,Error),e.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,h=this.location.source+":"+c.line+":"+c.column;if(a){var p=this.location.end,f=i("",c.line.toString().length," "),y=a[l.line-1],g=(l.line===p.line?p.column:y.length+1)-l.column||1;s+=`
 --> `+h+`
`+f+` |
`+c.line+" | "+y+`
`+f+" | "+i("",l.column-1," ")+i("",g,"^")}else s+=`
 at `+h}return s},e.buildMessage=function(n,s){var o={literal:function(y){return'"'+l(y.text)+'"'},class:function(y){var g=y.parts.map(function(v){return Array.isArray(v)?c(v[0])+"-"+c(v[1]):c(v)});return"["+(y.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(y){return y.description}};function a(y){return y.charCodeAt(0).toString(16).toUpperCase()}function l(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(y){return o[y.type](y)}function p(y){var g,v,_=y.map(h);if(_.sort(),_.length>0){for(g=1,v=1;g<_.length;g++)_[g-1]!==_[g]&&(_[v]=_[g],v++);_.length=v}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function f(y){return y?'"'+l(y)+'"':"end of input"}return"Expected "+p(n)+" but "+f(s)+" found."},{SyntaxError:e,parse:r}},(eB=_F).exports&&(eB.exports=tB());var KCe=_F.exports;function Zte(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=iB(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new C("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:iB(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!ZCe(e[i].effects,e[i+1].effects))throw new C("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});YCe(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function iB(t){let e;if(!t)return[];try{e=KCe.parse(t)}catch(i){throw new C("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>QCe(i))}function QCe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return XCe(t);case"opacity":return ePe(t);case"hue-rotate":return tPe(t);case"blur":return iPe(t);case"drop-shadow":return rPe(t);case"bloom":return nPe(t)}}catch(e){throw e.details.filter=t,e}throw new C("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function XCe(t){let e=1;return _v(t.parameters,1),t.parameters.length===1&&(e=Ra(t.parameters[0])),new vF(t.name,e)}function ePe(t){let e=1;return _v(t.parameters,1),t.parameters.length===1&&(e=Ra(t.parameters[0])),new qte(e)}function tPe(t){let e=0;return _v(t.parameters,1),t.parameters.length===1&&(e=cPe(t.parameters[0])),new Gte(e)}function iPe(t){let e=0;return _v(t.parameters,1),t.parameters.length===1&&(e=r5(t.parameters[0]),lS(e,t.parameters[0])),new jte(e)}function rPe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new C("effect:type-error","Accepts only one color",{});i=dPe(r)}else{const n=r5(r);if(Object.isFrozen(e))throw new C("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&lS(n,r)}if(e.length<2||e.length>3)throw new C("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Ute(e[0],e[1],e[2]||0,i||Yte("black"))}function nPe(t){let e=1,i=0,r=0;return _v(t.parameters,3),t.parameters[0]&&(e=Ra(t.parameters[0])),t.parameters[1]&&(i=r5(t.parameters[1]),lS(i,t.parameters[1])),t.parameters[2]&&(r=Ra(t.parameters[2])),new Dte(e,i,r)}function _v(t,e){if(t.length>e)throw new C("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function mI(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in i5)return"<length>";if(t.unit in t5)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function lS(t,e){if(t<0)throw new C("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function sPe(t){if(t.type!=="quantity"||t.unit!==null)throw new C("effect:type-error",`Expected <double>, Actual: ${mI(t)}`,{term:t})}function oPe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new C("effect:type-error",`Expected <double> or <percentage>, Actual: ${mI(t)}`,{term:t})}const t5={deg:1,grad:.9,rad:180/Math.PI,turn:360};function aPe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&t5[t.unit]!=null))throw new C("effect:type-error",`Expected <angle>, Actual: ${mI(t)}`,{term:t})}const i5={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function lPe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&i5[t.unit]!=null))throw new C("effect:type-error",`Expected <length>, Actual: ${mI(t)}`,{term:t})}function Ra(t){oPe(t);const e=t.value;return lS(e,t),t.unit==="%"?.01*e:e}function uPe(t){return sPe(t),lS(t.value,t),t.value}function cPe(t){return aPe(t),t.value*t5[t.unit]||0}function r5(t){return lPe(t),t.value*i5[t.unit]||0}function dPe(t){switch(t.colorType){case"hex":return Cge(t.value);case"named":return Yte(t.value);case"function":return fPe(t.value)}}function Yte(t){if(!zY(t))throw new C("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return kge(t)}const hPe=/^rgba?/i,pPe=/^hsla?/i;function fPe(t){if(_v(t.parameters,4),hPe.test(t.name))return[Ra(t.parameters[0]),Ra(t.parameters[1]),Ra(t.parameters[2]),t.parameters[3]?Ra(t.parameters[3]):1];if(pPe.test(t.name))return UY(uPe(t.parameters[0]),Ra(t.parameters[1]),Ra(t.parameters[2]),t.parameters[3]?Ra(t.parameters[3]):1);throw new C("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function n5(t,e,i){var r;try{return yPe(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function s5(t,e,i,r){try{const n=mPe(t);Sn(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function mPe(t){const e=Zte(t);return e?JCe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function yPe(t){if(!t||t.length===0)return null;if(gPe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:wF(i.value)});return e}return wF(t)}function gPe(t){const e=t[0];return!!e&&"scale"in e}function wF(t){if(!t||!t.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Su(i,"amount")];break;case"blur":r=[Su(i,"radius","pt")];break;case"hue-rotate":r=[Su(i,"angle","deg")];break;case"drop-shadow":r=[Su(i,"xoffset","pt"),Su(i,"yoffset","pt"),Su(i,"blurRadius","pt"),vPe(i,"color")];break;case"bloom":r=[Su(i,"strength"),Su(i,"radius","pt"),Su(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;Zte(n),e.push(n)}return e.join(" ")}function Su(t,e,i){if(t[e]==null)throw new C("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function vPe(t,e){if(t[e]==null)throw new C("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const rB={read:{reader:n5},write:{allowNull:!0,writer:s5}},Jte=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),u([d({json:{read:!1,write:!1,origins:{"web-map":rB,"portal-item":rB}}})],e.prototype,"effect",void 0),e=u([E("esri.layers.mixins.BlendLayer")],e),e},_Pe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return u([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=u([E("esri.layers.mixins.CustomParametersMixin")],e),e},Kte=new Vi.EventEmitter;function W7e(t,e,i=!1){const r=bs();return i=e==null||i,Kte.emit("apply-edits",{serviceUrl:t,layerId:e,mayReceiveServiceEdits:i,result:r.promise}),r}const Qte="esri.layers.mixins.EditBusLayer",Xte=Symbol(Qte);function Z7e(t){return t!=null&&typeof t=="object"&&Xte in t}const wPe=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this.when().then(()=>{this.own([Kte.on("apply-edits",n=>{const{serviceUrl:s,layerId:o,mayReceiveServiceEdits:a,result:l}=n,c=s===this.url,h=o!=null&&this.layerId!=null&&o===this.layerId;if(!c||!h&&!a)return;const p=l.then(f=>{var g;if(h&&(f.addedFeatures.length||f.updatedFeatures.length||f.deletedFeatures.length||f.addedAttachments.length||f.updatedAttachments.length||f.deletedAttachments.length))return this.emit("edits",F(f)),f;const y=(g=f.editedFeatures)==null?void 0:g.find(({layerId:v})=>v===this.layerId);if(y){const{adds:v,updates:_,deletes:w}=y.editedFeatures,S={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:v?v.map(({attributes:b})=>({objectId:this.objectIdField&&b[this.objectIdField],globalId:this.globalIdField&&b[this.globalIdField]})):[],deletedFeatures:w?w.map(({attributes:b})=>({objectId:this.objectIdField&&b[this.objectIdField],globalId:this.globalIdField&&b[this.globalIdField]})):[],updatedFeatures:_?_.map(({current:{attributes:b}})=>({objectId:this.objectIdField&&b[this.objectIdField],globalId:this.globalIdField&&b[this.globalIdField]})):[],editedFeatures:F(f.editedFeatures),exceededTransferLimit:!1};return this.emit("edits",S),S}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:F(f.editedFeatures),exceededTransferLimit:!1}});this.emit("apply-edits",{result:p})})])},()=>{})}};return e=Xte,i=u([E(Qte)],i),i};var bF;let Hy=bF=class extends G{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new bF({mapLayerId:t,gdbVersion:e})}};u([ye({mapLayer:"map-layer"})],Hy.prototype,"type",void 0),u([d({type:Mt,json:{write:!0}})],Hy.prototype,"mapLayerId",void 0),u([d({type:String,json:{write:!0}})],Hy.prototype,"gdbVersion",void 0),Hy=bF=u([E("esri.layers.support.source.MapLayerSource")],Hy);var SF;let qu=SF=class extends G{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new SF(s)}};u([ye({queryTable:"query-table"})],qu.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],qu.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],qu.prototype,"query",void 0),u([d({type:String,json:{write:!0}})],qu.prototype,"oidFields",void 0),u([d({type:_e,json:{write:!0}})],qu.prototype,"spatialReference",void 0),u([ye(bfe)],qu.prototype,"geometryType",void 0),qu=SF=u([E("esri.layers.support.source.QueryTableDataSource")],qu);var xF;let qy=xF=class extends G{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new xF({workspaceId:t,dataSourceName:e})}};u([ye({raster:"raster"})],qy.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],qy.prototype,"dataSourceName",void 0),u([d({type:String,json:{write:!0}})],qy.prototype,"workspaceId",void 0),qy=xF=u([E("esri.layers.support.source.RasterDataSource")],qy);var $F;let mf=$F=class extends G{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new $F({workspaceId:t,gdbVersion:e,dataSourceName:i})}};u([ye({table:"table"})],mf.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],mf.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],mf.prototype,"gdbVersion",void 0),u([d({type:String,json:{write:!0}})],mf.prototype,"dataSourceName",void 0),mf=$F=u([E("esri.layers.support.source.TableDataSource")],mf);var EF,MF;const bPe=$n()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Ps=EF=class extends G{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return nB()(t,e,i)}castLeftTableSource(t){return iu(TF(),t)}readRightTableSource(t,e,i){return nB()(t,e,i)}castRightTableSource(t){return iu(TF(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new EF(s)}};u([ye({joinTable:"join-table"})],Ps.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Ps.prototype,"leftTableKey",void 0),u([d({type:String,json:{write:!0}})],Ps.prototype,"rightTableKey",void 0),u([d({json:{write:!0}})],Ps.prototype,"leftTableSource",void 0),u([Q("leftTableSource")],Ps.prototype,"readLeftTableSource",null),u([Re("leftTableSource")],Ps.prototype,"castLeftTableSource",null),u([d({json:{write:!0}})],Ps.prototype,"rightTableSource",void 0),u([Q("rightTableSource")],Ps.prototype,"readRightTableSource",null),u([Re("rightTableSource")],Ps.prototype,"castRightTableSource",null),u([ye(bPe)],Ps.prototype,"joinType",void 0),Ps=EF=u([E("esri.layers.support.source.JoinTableDataSource")],Ps);let CC=null;function nB(){return CC||(CC=Z0({types:TF()})),CC}let PC=null;function TF(){return PC||(PC={key:"type",base:null,typeMap:{"data-layer":Fa,"map-layer":Hy}}),PC}const SPe={key:"type",base:null,typeMap:{"join-table":Ps,"query-table":qu,raster:qy,table:mf}};let Fa=MF=class extends G{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new MF({fields:t,dataSource:e})}};u([ye({dataLayer:"data-layer"})],Fa.prototype,"type",void 0),u([d({type:[e5],json:{write:!0}})],Fa.prototype,"fields",void 0),u([d({types:SPe,json:{write:!0}})],Fa.prototype,"dataSource",void 0),Fa=MF=u([E("esri.layers.support.source.DataLayerSource")],Fa),Fa.from=Xt(Fa);let yf=class extends Ft(G){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],yf.prototype,"onFields",void 0),u([d({type:String,json:{write:!0}})],yf.prototype,"operator",void 0),u([d({type:String,json:{write:!0}})],yf.prototype,"searchTerm",void 0),u([d({type:String,json:{write:!0}})],yf.prototype,"searchType",void 0),yf=u([E("esri.rest.support.FullTextSearch")],yf);const eie=yf;var IF;const sB=new Ge({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let $a=IF=class extends G{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=F(t))}clone(){return new IF({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:F(this.statisticParameters)})}};u([d({type:Number,json:{write:!0}})],$a.prototype,"maxPointCount",void 0),u([d({type:Number,json:{write:!0}})],$a.prototype,"maxRecordCount",void 0),u([d({type:Number,json:{write:!0}})],$a.prototype,"maxVertexCount",void 0),u([d({type:String,json:{write:!0}})],$a.prototype,"onStatisticField",void 0),u([d({type:String,json:{write:!0}})],$a.prototype,"outStatisticFieldName",void 0),u([d({type:String,json:{read:{source:"statisticType",reader:sB.read},write:{target:"statisticType",writer:sB.write}}})],$a.prototype,"statisticType",void 0),u([d({type:Object})],$a.prototype,"statisticParameters",void 0),u([ie("statisticParameters")],$a.prototype,"writeStatisticParameters",null),$a=IF=u([E("esri.rest.support.StatisticDefinition")],$a);const tie=$a;var n0;const xPe=new Ge({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),$Pe=new Ge({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let xe=n0=class extends G{static from(t){return dT(n0,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const n=t[r];Array.isArray(n)?i[r]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?i[r]=n.getTime():i[r]=n}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new n0(F({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};xe.MAX_MAX_RECORD_COUNT_FACTOR=5,u([d({json:{write:!0}})],xe.prototype,"aggregateIds",void 0),u([d({type:Boolean,json:{write:!0}})],xe.prototype,"cacheHint",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"compactGeometryEnabled",void 0),u([d({json:{write:!0}})],xe.prototype,"datumTransformation",void 0),u([Re("datumTransformation")],xe.prototype,"castDatumTransformation",null),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"defaultSpatialReferenceEnabled",void 0),u([d({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],xe.prototype,"distance",void 0),u([d({type:Fa,json:{write:!0}})],xe.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"formatOf3DObjects",void 0),u([d({type:[eie],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],xe.prototype,"fullText",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"gdbVersion",void 0),u([d({types:Um,json:{read:Wh,write:!0}})],xe.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],xe.prototype,"geometryPrecision",void 0),u([d({type:[String],json:{write:!0}})],xe.prototype,"groupByFieldsForStatistics",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"having",void 0),u([d({type:Date})],xe.prototype,"historicMoment",void 0),u([ie("historicMoment")],xe.prototype,"writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],xe.prototype,"maxAllowableOffset",void 0),u([d({type:Number,cast:t=>t<1?1:t>n0.MAX_MAX_RECORD_COUNT_FACTOR?n0.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],xe.prototype,"maxRecordCountFactor",void 0),u([d({type:["xyFootprint"],json:{write:!0}})],xe.prototype,"multipatchOption",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],xe.prototype,"num",void 0),u([d({json:{write:!0}})],xe.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],xe.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],xe.prototype,"outFields",void 0),u([d({type:_e,json:{name:"outSR",write:!0}})],xe.prototype,"outSpatialReference",void 0),u([d({type:[tie],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],xe.prototype,"outStatistics",void 0),u([d({json:{write:!0}})],xe.prototype,"parameterValues",void 0),u([ie("parameterValues")],xe.prototype,"writeParameterValues",null),u([d({type:ce,json:{write:!0}})],xe.prototype,"pixelSize",void 0),u([d({type:cX,json:{write:!0}})],xe.prototype,"quantizationParameters",void 0),u([d({type:[Object],json:{write:!0}})],xe.prototype,"rangeValues",void 0),u([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],xe.prototype,"relationParameter",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"resultType",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnCentroid",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnDistinctValues",void 0),u([d({type:Boolean,json:{default:!0,write:!0}})],xe.prototype,"returnExceededLimitFeatures",void 0),u([d({type:Boolean,json:{write:!0}})],xe.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnQueryGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],xe.prototype,"returnZ",void 0),u([d({type:_e,json:{write:!0}})],xe.prototype,"sourceSpatialReference",void 0),u([ye(xPe,{ignoreUnknown:!1,name:"spatialRel"})],xe.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],xe.prototype,"start",void 0),u([ie("start"),ie("num")],xe.prototype,"writeStart",null),u([d({type:String,json:{write:!0}})],xe.prototype,"sqlFormat",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"text",void 0),u([d({type:mu,json:{write:!0}})],xe.prototype,"timeExtent",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"timeReferenceUnknownClient",void 0),u([ye($Pe,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],xe.prototype,"units",void 0),u([d({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],xe.prototype,"where",void 0),u([ie("where")],xe.prototype,"writeWhere",null),xe=n0=u([E("esri.rest.support.Query")],xe);const tu=xe;var kF;const AC=new Ge({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),OC=new Ge({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Dl=kF=class extends G{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new tu({geometry:F(i),objectIds:F(s),spatialRelationship:r,timeExtent:F(n),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new kF({geometry:F(e),objectIds:F(n),spatialRelationship:i,timeExtent:F(r),where:t,units:s,distance:o})}};u([d({type:String,json:{write:!0}})],Dl.prototype,"where",void 0),u([d({types:Um,json:{write:!0}})],Dl.prototype,"geometry",void 0),u([d({type:AC.apiValues,json:{name:"spatialRel",read:{reader:AC.read},write:{allowNull:!1,writer:AC.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Dl.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Dl.prototype,"distance",void 0),u([d({type:[Number],json:{write:!0}})],Dl.prototype,"objectIds",void 0),u([d({type:OC.apiValues,json:{read:OC.read,write:{writer:OC.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Dl.prototype,"units",void 0),u([d({type:mu,json:{write:!0}})],Dl.prototype,"timeExtent",void 0),Dl=kF=u([E("esri.layers.support.FeatureFilter")],Dl);const h1=Dl;var CF;const oB={read:{reader:n5},write:{writer:s5,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},aB={read:{reader:n5},write:{writer:s5,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},lB={name:"showExcludedLabels",default:!0};let gf=CF=class extends G{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new C("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new C("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new CF({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([d({type:h1,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?Sn(i,n,e):Sn(i,null,e)}}}})],gf.prototype,"filter",void 0),u([d({json:{write:!0,origins:{"web-map":oB,"portal-item":oB}}})],gf.prototype,"includedEffect",void 0),u([d({json:{write:!0,origins:{"web-map":aB,"portal-item":aB}}})],gf.prototype,"excludedEffect",void 0),u([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":lB,"portal-item":lB}}})],gf.prototype,"excludedLabelsVisible",void 0),gf=CF=u([E("esri.layers.support.FeatureEffect")],gf);const EPe=gf,uB={write:{allowNull:!0}},MPe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return u([d({type:EPe,json:{origins:{"web-map":uB,"portal-item":uB}}})],e.prototype,"featureEffect",void 0),e=u([E("esri.layers.mixins.FeatureEffectLayer")],e),e};function TPe(t){if(!t)return t;const{start:e,end:i}=t;return new mu({start:e!=null?cm(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?cm(i,-i.getTimezoneOffset(),"minutes"):i})}function IPe(t){if(!t)return t;const{start:e,end:i}=t;return new mu({start:e!=null?cm(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?cm(i,i.getTimezoneOffset(),"minutes"):i})}var PF;let cw=PF=class extends G{constructor(t){super(t)}async collectRequiredFields(t,e){return Gn(t,e,this.expression)}clone(){return new PF({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};u([d({type:String,json:{write:!0}})],cw.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],cw.prototype,"title",void 0),cw=PF=u([E("esri.layers.support.FeatureExpressionInfo")],cw);const cB=cw;function J7e(t){return!!t&&oS[t]!=null}function kPe(t){return 1/(oS[t]||1)}function CPe(){const t=Object.keys(oS);return t.sort(),t}const PPe=CPe();var AF;const Tx=$n()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),dB=new Ge({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Wu=AF=class extends G{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new AF({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&nce(this.featureExpressionInfo,t.featureExpressionInfo)}};u([d({type:cB,json:{write:!0}})],Wu.prototype,"featureExpressionInfo",void 0),u([Q("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Wu.prototype,"readFeatureExpressionInfo",null),u([ie("featureExpressionInfo",{featureExpressionInfo:{type:cB},"featureExpression.value":{type:[0]}})],Wu.prototype,"writeFeatureExpressionInfo",null),u([d({type:Tx.apiValues,nonNullable:!0,json:{type:Tx.jsonValues,read:Tx.read,write:{writer:Tx.write,isRequired:!0}}})],Wu.prototype,"mode",null),u([d({type:Number,json:{write:!0}})],Wu.prototype,"offset",void 0),u([d({type:PPe,json:{type:String,read:dB.read,write:dB.write}})],Wu.prototype,"unit",null),Wu=AF=u([E("esri.layers.support.ElevationInfo")],Wu);const iie=Wu,APe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},o5={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},a5={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},OPe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Am}}},LPe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},RPe={value:null,type:iie,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function K7e(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const rie={write:!0,read:!0},OF={type:Number,json:{origins:{"web-document":rie,"portal-item":{write:!0}}}},FPe={...OF,json:{...OF.json,origins:{"web-document":{...rie,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Hb(e.layerDefinition.drawingInfo.transparency):void 0:Hb(e.drawingInfo.transparency)}}},Q7e={type:mu,readOnly:!0,get(){var a,l;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,r=(l=this.view)==null?void 0:l.timeExtent;let n=this.layer.timeExtent;t&&(n=IPe(n));let s=i?r&&n?r.intersection(n):r||n:n;if(!s||s.isEmpty||s.isAllTime)return s;e&&(s=s.offset(-e.value,e.unit)),t&&(s=TPe(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},X7e={type:lt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=lt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=_e.fromJSON(e.spatialReference)),i}}}},read:!1}},DPe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},NPe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},jPe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},nie={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};let Zu=class extends Ft(G){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};u([d()],Zu.prototype,"creatorField",void 0),u([d()],Zu.prototype,"creationDateField",void 0),u([d()],Zu.prototype,"editorField",void 0),u([d()],Zu.prototype,"editDateField",void 0),u([d()],Zu.prototype,"realm",void 0),u([d({type:F0})],Zu.prototype,"dateFieldsTimeReference",void 0),Zu=u([E("esri.layers.support.EditFieldsInfo")],Zu);const VPe=Zu;let Hl=class extends Ft(G){constructor(e){super(e)}};u([d({constructOnly:!0,json:{write:!0}})],Hl.prototype,"name",void 0),u([d({constructOnly:!0,json:{write:!0}})],Hl.prototype,"fields",void 0),u([d({constructOnly:!0,json:{write:!0}})],Hl.prototype,"isAscending",void 0),u([d({constructOnly:!0,json:{write:!0}})],Hl.prototype,"indexType",void 0),u([d({constructOnly:!0,json:{write:!0}})],Hl.prototype,"isUnique",void 0),u([d({constructOnly:!0,json:{write:!0}})],Hl.prototype,"description",void 0),Hl=u([E("esri.layers.support.FeatureIndex")],Hl);var LF;let li=LF=class extends G{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new LF(F({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};u([d({type:Boolean,json:{write:!0}})],li.prototype,"cacheHint",void 0),u([d({type:Fa,json:{write:!0}})],li.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],li.prototype,"gdbVersion",void 0),u([d({type:Number,json:{write:!0}})],li.prototype,"geometryPrecision",void 0),u([d({type:Date})],li.prototype,"historicMoment",void 0),u([ie("historicMoment")],li.prototype,"_writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],li.prototype,"maxAllowableOffset",void 0),u([d({type:[Number],json:{write:!0}})],li.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],li.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],li.prototype,"outFields",void 0),u([d({type:_e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],li.prototype,"outSpatialReference",void 0),u([d({json:{write:!0}})],li.prototype,"relationshipId",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],li.prototype,"start",void 0),u([ie("start"),ie("num")],li.prototype,"writeStart",null),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],li.prototype,"num",void 0),u([d({json:{write:!0}})],li.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],li.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],li.prototype,"returnZ",void 0),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],li.prototype,"where",void 0),li=LF=u([E("esri.rest.support.RelationshipQuery")],li),li.from=Xt(li);const z0=li,iHe=Object.freeze(Object.defineProperty({__proto__:null,default:z0},Symbol.toStringTag,{value:"Module"})),RF=new Ge({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function zPe(t,e,i,r){const n=await mp(t);if(await l5(t,e,r),!n.addAttachment)throw new C(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function l5(t,e,i){const{attributes:r}=e,{objectIdField:n}=t;return t.get("capabilities.data.supportsAttachment")?e?r?n&&r[n]?Promise.resolve():Promise.reject(new C(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new C(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new C(i,"A feature is required to add/delete/update attachments")):Promise.reject(new C(i,"this layer doesn't support attachments"))}async function UPe(t,e,i,r,n){const s=await mp(t);if(await l5(t,e,n),!s.updateAttachment)throw new C(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function BPe(t,e,i){const{applyEdits:r}=await O(()=>import("./editingSupport-7260f5c0.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function GPe(t,e,i){const{uploadAssets:r}=await O(()=>import("./editingSupport-7260f5c0.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function HPe(t,e,i,r){const n=await mp(t);if(await l5(t,e,r),!n.deleteAttachments)throw new C(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function qPe(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new C(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function WPe(t,e,i,r){var y,g;e=fR.from(e),await t.load();const n=t.source,s=t.capabilities;if(!((y=s==null?void 0:s.data)!=null&&y.supportsAttachment))throw new C(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:h,start:p,where:f}=e;if(!((g=s==null?void 0:s.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(h==null?void 0:h.length)>0||c||p||f))throw new C(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||f))throw new C(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new C(r,"Layer source does not support queryAttachments capability",e);return n.queryAttachments(e)}async function ZPe(t,e,i,r){const n=await mp(t);if(!n.queryObjectIds)throw new C(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(tu.from(e)??t.createQuery(),i)}async function YPe(t,e,i,r){const n=await mp(t);if(!n.queryFeatureCount)throw new C(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(tu.from(e)??t.createQuery(),i)}async function JPe(t,e,i,r){const n=await mp(t);if(!n.queryExtent)throw new C(r,"Layer source does not support queryExtent capability");return n.queryExtent(tu.from(e)??t.createQuery(),i)}async function KPe(t,e,i,r){const n=await mp(t);if(!n.queryRelatedFeatures)throw new C(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(z0.from(e),i)}async function QPe(t,e,i,r){const n=await mp(t);if(!n.queryRelatedFeaturesCount)throw new C(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(z0.from(e),i)}async function XPe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await MCe(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function eAe(t){const e=new tu,i=t.get("capabilities.data"),r=t.get("capabilities.query");e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function sie(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function oie(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function tAe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function mp(t){return(await t.load()).source}async function iAe(t,e){if(!Be||Be.findCredential(t))return;let i;try{const r=await yj(t,e);r&&(i=await Be.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await Be.getCredential(t,{signal:r})}catch{}}async function rAe(t,e){var r;const i=(r=t.parsedUrl)==null?void 0:r.path;i&&nAe(t)&&await iAe(i,e)}function nAe(t){const e=t.editFieldsInfo;return!(!(e!=null&&e.creatorField)&&!(e!=null&&e.editorField))||(t.userHasUpdateItemPrivileges?t.hasUpdateItemRestrictions:!!t.userHasFullEditingPrivileges&&t.hasFullEditingRestrictions)}function sAe(t){var e;return!((e=t.sourceJSON)!=null&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const LC=Z0({types:jJ});function u5(t,e){if(t.defaultSymbol)return t.types&&t.types.length?new dI({defaultSymbol:LC(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:LC(i.symbol,i,e)}))}):new cI({symbol:LC(t.defaultSymbol,t,e)})}let Wy=class extends Ft(G){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Wy.prototype,"shapeAreaField",void 0),u([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Wy.prototype,"shapeLengthField",void 0),u([d({type:String,json:{read:t=>ohe.read(t)||ahe.read(t)}})],Wy.prototype,"units",void 0),Wy=u([E("esri.layers.support.GeometryFieldsInfo")],Wy);const oAe=Wy;var FF;let Zy=FF=class extends G{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new se}clone(){return new FF({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([d({type:String,json:{write:!0}})],Zy.prototype,"floorField",void 0),u([d({json:{read:!1,write:!1}})],Zy.prototype,"viewAllMode",void 0),u([d({json:{read:!1,write:!1}})],Zy.prototype,"viewAllLevelIds",void 0),Zy=FF=u([E("esri.layers.support.LayerFloorInfo")],Zy);const aAe=Zy,hB=new Ge({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),pB=new Ge({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let xo=class extends Ft(G){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([d({json:{read:hB.read,write:hB.write}})],xo.prototype,"cardinality",void 0),u([d({json:{read:!0,write:!0}})],xo.prototype,"composite",void 0),u([d({json:{read:!0,write:!0}})],xo.prototype,"id",void 0),u([d({json:{read:!0,write:!0}})],xo.prototype,"keyField",void 0),u([d({json:{read:!0,write:!0}})],xo.prototype,"keyFieldInRelationshipTable",void 0),u([d({json:{read:!0,write:!0}})],xo.prototype,"name",void 0),u([d({json:{read:!0,write:!0}})],xo.prototype,"relatedTableId",void 0),u([d({json:{read:!0,write:!0}})],xo.prototype,"relationshipTableId",void 0),u([d({json:{read:pB.read,write:pB.write}})],xo.prototype,"role",void 0),xo=u([E("esri.layers.support.Relationship")],xo);const lAe=xo,uAe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Me(t,e,i){return!!aie(t,e,i)}function Ix(t,e,i){return aie(t,e,i)}function aie(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function cAe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function uS(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function lie(t,e){return{analytics:dAe(t),attachment:hAe(t),data:pAe(t),metadata:fAe(t),operations:mAe(t.capabilities,t,e),query:yAe(t,e),queryRelated:gAe(t),queryTopFeatures:vAe(t),editing:_Ae(t)}}function dAe(t){return{supportsCacheHint:uS(t.advancedQueryCapabilities,"queryAnalytics")}}function hAe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:uS(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Me(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=uAe[r.name];n&&(i[n]=!!r.isEnabled)}),i}function pAe(t){return{isVersioned:Me(t,"isDataVersioned",!1),supportsAttachment:Me(t,"hasAttachments",!1),supportsM:Me(t,"hasM",!1),supportsZ:Me(t,"hasZ",!1)}}function fAe(t){return{supportsAdvancedFieldProperties:Me(t,"supportsFieldDescriptionProperty",!1)}}function mAe(t,e,i){const r=t?t.toLowerCase().split(",").map(f=>f.trim()):[],n=i?wc(i):null,s=r.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone;let a=o&&r.includes("create"),l=o&&r.includes("delete"),c=o&&r.includes("update");const h=r.includes("changetracking"),p=e.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:Me(e,"supportsCalculate",!1),supportsTruncate:Me(e,"supportsTruncate",!1),supportsValidateSql:Me(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:Me(p,"supportsQueryAnalytic",!1),supportsQueryAttachments:Me(p,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Me(p,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Me(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:Me(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Me(e,"supportsAsyncConvert3D",!1)}}function yAe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=V("mapserver-pbf-version-support"),l=gQ(e),c=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{supportsStatistics:Me(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:Me(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Me(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:cAe(i),supportsCentroid:Me(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Me(i,"supportsQueryWithDistance",!1),supportsDistinct:Me(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Me(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Me(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Me(i,"supportsHavingClause",!1),supportsOrderBy:Me(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Me(i,"supportsPagination",!1),supportsQuantization:Me(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Me(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Me(t,"supportsReturningQueryGeometry",!1),supportsResultType:Me(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Me(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Me(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Me(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Me(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Me(r,"allowOthersToQuery",!0),supportsHistoricMoment:Me(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a&&c.has("pbf"),supportsDisjointSpatialRelationship:Me(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Me(i,"supportsQueryWithCacheHint",!1)||uS(i,"query"),supportsDefaultSpatialReference:Me(i,"supportsDefaultSR",!1),supportsCompactGeometry:l,supportsFullTextSearch:Me(i,"supportsFullTextSearch",!1),maxRecordCountFactor:Ix(t,"maxRecordCountFactor",void 0),maxRecordCount:Ix(t,"maxRecordCount",void 0),standardMaxRecordCount:Ix(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:Ix(t,"tileMaxRecordCount",void 0)}}function gAe(t){const e=t.advancedQueryCapabilities,i=Me(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Me(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:uS(e,"queryRelated")}}function vAe(t){return{supportsCacheHint:uS(t.advancedQueryCapabilities,"queryTopFilter")}}function _Ae(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Me(t,"allowGeometryUpdates",!0),supportsGlobalId:Me(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Me(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Me(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Me(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Me(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Me(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Me(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Me(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Me(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Me(i,"supportsAsyncApplyEdits",!1)}}const wAe=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=_e.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(se.ofType(Hl)),this.version=void 0}readCapabilitiesFromService(i,r){return lie(r,this.url)}get effectiveCapabilities(){var o;const i=this.capabilities;if(!i)return null;const r=F(i),{operations:n,editing:s}=r;return(o=this.sourceJSON)!=null&&o.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),r)}get hasFullEditingRestrictions(){var s;const i=this.capabilities;if(!i||(s=this.sourceJSON)!=null&&s.isMultiServicesView)return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var s;const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return(s=this.sourceJSON)!=null&&s.isMultiServicesView?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return sie(r)}readObjectIdFieldFromService(i,r){return oie(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=txe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:U.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,s){ixe(this,i,null,r,s)}readVersion(i,r){return tAe(r)}};return u([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),u([Q("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),u([d({readOnly:!0})],e.prototype,"effectiveCapabilities",null),u([d({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),u([d({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),u([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),u([d({type:F0})],e.prototype,"dateFieldsTimeReference",void 0),u([d({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),u([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),u([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),u([d({readOnly:!0,type:VPe})],e.prototype,"editFieldsInfo",void 0),u([d({readOnly:!0})],e.prototype,"editingInfo",void 0),u([Q("editingInfo")],e.prototype,"readEditingInfo",null),u([d((()=>{const i=F(RPe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),u([d({type:aAe,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),u([d({type:lt,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),u([d()],e.prototype,"gdbVersion",void 0),u([d({readOnly:!0,type:oAe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),u([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:RF.read}}}})],e.prototype,"geometryType",void 0),u([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),u([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),u([d({readOnly:!0,type:J1})],e.prototype,"heightModelInfo",void 0),u([d({type:Date})],e.prototype,"historicMoment",void 0),u([d({readOnly:!0})],e.prototype,"isTable",void 0),u([Q("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),u([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),u([d(NPe)],e.prototype,"minScale",void 0),u([Q("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),u([d(jPe)],e.prototype,"maxScale",void 0),u([Q("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),u([d({type:String})],e.prototype,"globalIdField",void 0),u([Q("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),u([d({type:String})],e.prototype,"objectIdField",void 0),u([Q("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),u([d({type:F0})],e.prototype,"preferredTimeReference",void 0),u([d({type:[lAe],readOnly:!0})],e.prototype,"relationships",void 0),u([d()],e.prototype,"sourceJSON",void 0),u([d({type:Boolean})],e.prototype,"returnM",void 0),u([d({type:Boolean})],e.prototype,"returnZ",void 0),u([d({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),u([Q("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),u([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),u([d({type:_e,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),u([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),u([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),u([d({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),u([d({type:se.ofType(Hl),readOnly:!0})],e.prototype,"indexes",void 0),u([d(OPe)],e.prototype,"url",null),u([ie("url")],e.prototype,"writeUrl",null),u([d({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),u([Q("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=u([E("esri.layers.mixins.FeatureLayerBase")],e),e};let Yy=class extends Ft(G){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};u([d({type:String,json:{write:!0}})],Yy.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],Yy.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Yy.prototype,"returnType",void 0),Yy=u([E("esri.layers.support.ExpressionInfo")],Yy);const c5=Yy;var DF;let Yu=DF=class extends G{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new DF({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:F(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};u([d({type:Boolean,json:{write:!0}})],Yu.prototype,"isAutoGenerated",void 0),u([d({type:String,json:{write:!0}})],Yu.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],Yu.prototype,"alias",void 0),u([d({type:String,json:{write:!0}})],Yu.prototype,"onStatisticField",void 0),u([d({type:c5,json:{write:!0}})],Yu.prototype,"onStatisticExpression",void 0),u([d({type:String,json:{write:!0}})],Yu.prototype,"statisticType",void 0),Yu=DF=u([E("esri.layers.support.AggregateField")],Yu);const jm=Yu;let Uh=class extends G{constructor(){super(...arguments),this.type=null}};u([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Uh.prototype,"type",void 0),Uh=u([E("esri.layers.support.FeatureReduction")],Uh);const d5="__begin__",h5="__end__",bAe=new RegExp(d5,"ig"),SAe=new RegExp(h5,"ig"),fB=new RegExp("^"+d5,"i"),mB=new RegExp(h5+"$","i"),MM='"',xAe=MM+" + ",$Ae=" + "+MM;function EAe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function MAe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function p5(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=EAe(t.labelExpression),e.type="conventional"),e}function TAe(t){const e=p5(t);if(!e)return null;switch(e.type){case"conventional":return NF(e.expression);case"arcade":return e.expression}return null}function IAe(t){const e=p5(t);if(!e)return null;switch(e.type){case"conventional":return CAe(e.expression);case"arcade":return uie(e.expression)}return null}function NF(t){let e;return t?(e=Wo(t,i=>d5+'$feature["'+i+'"]'+h5),e=fB.test(e)?e.replace(fB,""):MM+e,e=mB.test(e)?e.replace(mB,""):e+MM,e=e.replaceAll(bAe,xAe).replaceAll(SAe,$Ae)):e='""',e}const kAe=/^\s*\{([^}]+)\}\s*$/i;function CAe(t){const e=t==null?void 0:t.match(kAe);return e&&e[1].trim()||null}const PAe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,AAe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,OAe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function uie(t){if(!t)return null;let e=PAe.exec(t)||AAe.exec(t);return e?e[1]||e[3]:(e=OAe.exec(t),e?e[2]:null)}var jF;let Fd=jF=class extends G{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?NF(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=NF(this.value)),t!=null&&(e[i]=t)}clone(){return new jF({expression:this.expression,title:this.title,value:this.value})}};u([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Fd.prototype,"expression",void 0),u([Q("expression",["expression","value"])],Fd.prototype,"readExpression",null),u([ie("expression")],Fd.prototype,"writeExpression",null),u([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Fd.prototype,"title",void 0),u([d({json:{read:!1,write:!1}})],Fd.prototype,"value",void 0),Fd=jF=u([E("esri.layers.support.LabelExpressionInfo")],Fd);const cie=Fd,die=[252,146,31,255],aHe=[153,153,153,255],LAe={type:"esriSMS",style:"esriSMSCircle",size:6,color:die,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},RAe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:die},FAe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},DAe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},NAe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},jAe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},VAe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},zAe=ll.fromJSON(LAe),UAe=En.fromJSON(RAe),BAe=Qo.fromJSON(FAe),GAe=Hm.fromJSON(DAe);function lHe(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return zAe;case"polyline":return UAe;case"polygon":case"extent":return BAe}return null}const uHe=ll.fromJSON(NAe),cHe=En.fromJSON(jAe),dHe=Qo.fromJSON(VAe);var VF;const kx=new Ge({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Cx(t,e,i){return{enabled:!iQ(i==null?void 0:i.layer)}}function hie(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function HAe(t){return(t==null?void 0:t.type)==="map-image"}function pie(t){var e,i;return!!HAe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function qAe(t){return hie(t)||pie(t==null?void 0:t.layer)}let Ei=VF=class extends G{static evaluateWhere(t,e){const i=(r,n,s)=>{switch(n){case"=":return r==s;case"<>":return r!=s;case">":return r>s;case">=":return r>=s;case"<":return r<s;case"<=":return r<=s}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const n=i(e[r[0]],r[1],r[2]),s=r[3],o=i(e[r[4]],r[5],r[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=GAe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=MAe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=uie(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&hie(r))t=new cie({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(r);n.expression&&(e[i]=n)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return p5(this)}getLabelExpressionArcade(){return TAe(this)}getLabelExpressionSingleField(){return IAe(this)}hash(){return JSON.stringify(this)}clone(){return new VF({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:F(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:F(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};u([d({type:String,json:{write:!0}})],Ei.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Cx}}}}})],Ei.prototype,"allowOverrun",void 0),u([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Cx}}}}})],Ei.prototype,"deconflictionStrategy",void 0),u([d({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&pie(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ei.prototype,"labelExpression",void 0),u([Q("labelExpression")],Ei.prototype,"readLabelExpression",null),u([ie("labelExpression")],Ei.prototype,"writeLabelExpression",null),u([d({type:cie,json:{write:{overridePolicy:(t,e,i)=>qAe(i)?{allowNull:!0}:{enabled:!1}}}})],Ei.prototype,"labelExpressionInfo",void 0),u([ie("labelExpressionInfo")],Ei.prototype,"writeLabelExpressionInfo",null),u([d({type:kx.apiValues,json:{type:kx.jsonValues,read:kx.read,write:kx.write}})],Ei.prototype,"labelPlacement",void 0),u([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ei.prototype,"labelPosition",void 0),u([d({type:Number})],Ei.prototype,"maxScale",void 0),u([ie("maxScale")],Ei.prototype,"writeMaxScale",null),u([d({type:Number})],Ei.prototype,"minScale",void 0),u([ie("minScale")],Ei.prototype,"writeMinScale",null),u([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Cx}}}}})],Ei.prototype,"repeatLabel",void 0),u([d({type:Number,cast:it,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Cx}}}}})],Ei.prototype,"repeatLabelDistance",void 0),u([d({types:jve,json:{origins:{"web-scene":{types:Vve,write:DU,default:null}},write:DU,default:null}})],Ei.prototype,"symbol",void 0),u([d({type:Boolean,json:{write:!0}})],Ei.prototype,"useCodedValues",void 0),u([d({type:String,json:{write:!0}})],Ei.prototype,"where",void 0),Ei=VF=u([E("esri.layers.support.LabelClass")],Ei);const yI=Ei;var zF;const WAe="esri.layers.support.FeatureReductionBinning";let An=zF=class extends Uh{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Sn(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?d1(r,e,i)??void 0:u5(e,i)}clone(){return new zF({fields:F(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:F(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:F(this.popupTemplate),renderer:F(this.renderer)})}};u([ye({binning:"binning"})],An.prototype,"type",void 0),u([ye({geohash:"geohash"})],An.prototype,"binType",void 0),u([d({type:Number,range:{min:1,max:9},json:{write:!0}})],An.prototype,"fixedBinLevel",void 0),u([d({type:[yI],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],An.prototype,"labelingInfo",void 0),u([d(a5)],An.prototype,"labelsVisible",void 0),u([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],An.prototype,"maxScale",void 0),u([d(o5)],An.prototype,"popupEnabled",void 0),u([d({type:dp,json:{name:"popupInfo",write:!0}})],An.prototype,"popupTemplate",void 0),u([d({type:[jm],json:{write:!0}})],An.prototype,"fields",void 0),u([ie("fields")],An.prototype,"writeFields",null),u([d({types:hI,json:{write:{target:"drawingInfo.renderer"}}})],An.prototype,"renderer",void 0),u([Q("renderer",["drawingInfo.renderer"])],An.prototype,"readRenderer",null),An=zF=u([E(WAe)],An);const fie=An;var UF;const ZAe="esri.layers.support.FeatureReductionCluster";function yB(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Yi=UF=class extends G{constructor(t){super(t),this.type="cluster",this.clusterRadius=it("80px"),this.clusterMinSize=it("12px"),this.clusterMaxSize=it("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?yB(r)?null:d1(r,e,i)??void 0:u5(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&yB(r)){const o=d1(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new cI({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Sn(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>jm.fromJSON(r))}clone(){return new UF({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:F(this.labelingInfo),labelsVisible:this.labelsVisible,fields:F(this.fields),maxScale:this.maxScale,renderer:F(this.renderer),symbol:F(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:F(this.popupTemplate)})}};u([d({type:["cluster"],readOnly:!0,json:{write:!0}})],Yi.prototype,"type",void 0),u([d({type:Number,cast:t=>t==="auto"?t:it(t),json:{write:!0}})],Yi.prototype,"clusterRadius",void 0),u([d({type:Number,cast:it,json:{write:!0}})],Yi.prototype,"clusterMinSize",void 0),u([d({type:Number,cast:it,json:{write:!0}})],Yi.prototype,"clusterMaxSize",void 0),u([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Yi.prototype,"maxScale",void 0),u([d(o5)],Yi.prototype,"popupEnabled",void 0),u([d({type:dp,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Yi.prototype,"popupTemplate",void 0),u([d({types:hI,json:{write:{target:"drawingInfo.renderer"}}})],Yi.prototype,"renderer",void 0),u([Q("renderer",["drawingInfo.renderer"])],Yi.prototype,"readRenderer",null),u([d({types:Dve})],Yi.prototype,"symbol",void 0),u([Q("symbol",["drawingInfo.renderer"])],Yi.prototype,"readSymbol",null),u([ie("symbol")],Yi.prototype,"writeSymbol",null),u([d({type:[yI],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Yi.prototype,"labelingInfo",void 0),u([d(a5)],Yi.prototype,"labelsVisible",void 0),u([d({type:[jm],json:{write:!0}})],Yi.prototype,"fields",void 0),u([ie("fields")],Yi.prototype,"writeFields",null),u([Q("fields")],Yi.prototype,"readFields",null),Yi=UF=u([E(ZAe)],Yi);const mie=Yi;var BF;let xE=BF=class extends Uh{constructor(t){super(t),this.type="selection"}clone(){return new BF}};u([d({type:["selection"]})],xE.prototype,"type",void 0),xE=BF=u([E("esri.layers.support.FeatureReductionSelection")],xE);const gB=xE,vB={key:"type",base:Uh,typeMap:{cluster:mie,binning:fie}},YAe={types:{key:"type",base:Uh,typeMap:{selection:gB,cluster:mie,binning:fie}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:vB},"portal-item":{types:vB},"web-scene":{types:{key:"type",base:Uh,typeMap:{selection:gB}}}}}},ly={Base64:0,Hex:1,String:2,Raw:3},s0=8,yie=(1<<s0)-1;function Ch(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function JAe(t){const e=[];for(let i=0,r=t.length*s0;i<r;i+=s0)e[i>>5]|=(t.charCodeAt(i/s0)&yie)<<i%32;return e}function KAe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=s0)e.push(String.fromCharCode(t[i>>5]>>>i%32&yie));return e.join("")}function QAe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function XAe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function eOe(t,e){return t<<e|t>>>32-e}function gI(t,e,i,r,n,s){return Ch(eOe(Ch(Ch(e,t),Ch(r,s)),n),i)}function rn(t,e,i,r,n,s,o){return gI(e&i|~e&r,t,e,n,s,o)}function nn(t,e,i,r,n,s,o){return gI(e&r|i&~r,t,e,n,s,o)}function sn(t,e,i,r,n,s,o){return gI(e^i^r,t,e,n,s,o)}function on(t,e,i,r,n,s,o){return gI(i^(e|~r),t,e,n,s,o)}function tOe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,c=n,h=s;i=rn(i,r,n,s,t[o],7,-680876936),s=rn(s,i,r,n,t[o+1],12,-389564586),n=rn(n,s,i,r,t[o+2],17,606105819),r=rn(r,n,s,i,t[o+3],22,-1044525330),i=rn(i,r,n,s,t[o+4],7,-176418897),s=rn(s,i,r,n,t[o+5],12,1200080426),n=rn(n,s,i,r,t[o+6],17,-1473231341),r=rn(r,n,s,i,t[o+7],22,-45705983),i=rn(i,r,n,s,t[o+8],7,1770035416),s=rn(s,i,r,n,t[o+9],12,-1958414417),n=rn(n,s,i,r,t[o+10],17,-42063),r=rn(r,n,s,i,t[o+11],22,-1990404162),i=rn(i,r,n,s,t[o+12],7,1804603682),s=rn(s,i,r,n,t[o+13],12,-40341101),n=rn(n,s,i,r,t[o+14],17,-1502002290),r=rn(r,n,s,i,t[o+15],22,1236535329),i=nn(i,r,n,s,t[o+1],5,-165796510),s=nn(s,i,r,n,t[o+6],9,-1069501632),n=nn(n,s,i,r,t[o+11],14,643717713),r=nn(r,n,s,i,t[o],20,-373897302),i=nn(i,r,n,s,t[o+5],5,-701558691),s=nn(s,i,r,n,t[o+10],9,38016083),n=nn(n,s,i,r,t[o+15],14,-660478335),r=nn(r,n,s,i,t[o+4],20,-405537848),i=nn(i,r,n,s,t[o+9],5,568446438),s=nn(s,i,r,n,t[o+14],9,-1019803690),n=nn(n,s,i,r,t[o+3],14,-187363961),r=nn(r,n,s,i,t[o+8],20,1163531501),i=nn(i,r,n,s,t[o+13],5,-1444681467),s=nn(s,i,r,n,t[o+2],9,-51403784),n=nn(n,s,i,r,t[o+7],14,1735328473),r=nn(r,n,s,i,t[o+12],20,-1926607734),i=sn(i,r,n,s,t[o+5],4,-378558),s=sn(s,i,r,n,t[o+8],11,-2022574463),n=sn(n,s,i,r,t[o+11],16,1839030562),r=sn(r,n,s,i,t[o+14],23,-35309556),i=sn(i,r,n,s,t[o+1],4,-1530992060),s=sn(s,i,r,n,t[o+4],11,1272893353),n=sn(n,s,i,r,t[o+7],16,-155497632),r=sn(r,n,s,i,t[o+10],23,-1094730640),i=sn(i,r,n,s,t[o+13],4,681279174),s=sn(s,i,r,n,t[o],11,-358537222),n=sn(n,s,i,r,t[o+3],16,-722521979),r=sn(r,n,s,i,t[o+6],23,76029189),i=sn(i,r,n,s,t[o+9],4,-640364487),s=sn(s,i,r,n,t[o+12],11,-421815835),n=sn(n,s,i,r,t[o+15],16,530742520),r=sn(r,n,s,i,t[o+2],23,-995338651),i=on(i,r,n,s,t[o],6,-198630844),s=on(s,i,r,n,t[o+7],10,1126891415),n=on(n,s,i,r,t[o+14],15,-1416354905),r=on(r,n,s,i,t[o+5],21,-57434055),i=on(i,r,n,s,t[o+12],6,1700485571),s=on(s,i,r,n,t[o+3],10,-1894986606),n=on(n,s,i,r,t[o+10],15,-1051523),r=on(r,n,s,i,t[o+1],21,-2054922799),i=on(i,r,n,s,t[o+8],6,1873313359),s=on(s,i,r,n,t[o+15],10,-30611744),n=on(n,s,i,r,t[o+6],15,-1560198380),r=on(r,n,s,i,t[o+13],21,1309151649),i=on(i,r,n,s,t[o+4],6,-145523070),s=on(s,i,r,n,t[o+11],10,-1120210379),n=on(n,s,i,r,t[o+2],15,718787259),r=on(r,n,s,i,t[o+9],21,-343485551),i=Ch(i,a),r=Ch(r,l),n=Ch(n,c),s=Ch(s,h)}return[i,r,n,s]}function gie(t,e=ly.Hex){const i=e||ly.Base64,r=tOe(JAe(t),t.length*s0);switch(i){case ly.Raw:return r;case ly.Hex:return QAe(r);case ly.String:return KAe(r);case ly.Base64:return XAe(r)}}var GF;let dw=GF=class extends lI{writeLevels(t,e,i){for(const r in t){const n=this.levels[r];return void(e.stops=n)}}clone(){return new GF({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:kh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:kh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:F(this.levels)})}};u([d()],dw.prototype,"levels",void 0),u([ie("levels")],dw.prototype,"writeLevels",null),dw=GF=u([E("esri.views.2d.engine.LevelDependentSizeVariable")],dw);const iOe=U.getLogger("esri.views.2d.layers.support.clusterUtils");V.add("esri-cluster-arcade-enabled",!0);const rOe=V("esri-cluster-arcade-enabled"),nOe=(t,e,i,r,n)=>{const s=e.clone();if(!oOe(s))return s;if(s.authoringInfo||(s.authoringInfo=new qj),s.authoringInfo.isAutoGenerated=!0,"visualVariables"in s){const o=(s.visualVariables||[]).filter(l=>l.valueExpression!=="$view.scale"),a=vie(o);o.forEach(l=>{l.type==="rotation"?l.field?l.field=Mp(t,l.field,"avg_angle","number"):l.valueExpression&&(l.field=t_(t,l.valueExpression,"avg_angle","number"),l.valueExpression=null):l.normalizationField?(l.field=Mp(t,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=Mp(t,l.field,"avg","number"):l.valueExpression&&(l.field=t_(t,l.valueExpression,"avg","number"),l.valueExpression=null)}),a==null&&!sOe(o)&&n&&(o.push(_ie(i,r)),s.dynamicClusterSize=!0),s.visualVariables=o}switch(s.type){case"simple":break;case"pie-chart":for(const o of s.attributes)o.field?o.field=Mp(t,o.field,"sum","number"):o.valueExpression&&(o.field=t_(t,o.valueExpression,"sum","number"),o.valueExpression=null);break;case"unique-value":s.field?s.field=Mp(t,s.field,"mode","string"):s.valueExpression&&(s.field=t_(t,s.valueExpression,"mode","string"),s.valueExpression=null);break;case"class-breaks":s.normalizationField?(s.field=Mp(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=Mp(t,s.field,"avg","number"):s.valueExpression&&(s.field=t_(t,s.valueExpression,"avg","number"),s.valueExpression=null)}return s},vie=t=>{for(const e of t)if(e.type==="size")return e;return null};function hHe(t,e,i){const r=t.clone();let n=!1;if("visualVariables"in r){const s=(r.visualVariables||[]).filter(o=>o.valueExpression!=="$view.scale");vie(s)==null&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(_ie(e,i)),r.dynamicClusterSize=!0,n=!0)}return{renderer:r,didInject:n}}const sOe=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},_ie=(t,e)=>{const i=[new Uy({value:0,size:0}),new Uy({value:1})];if(e==null)return new lI({field:"cluster_count",stops:[...i,new Uy({value:2,size:0})]});const r=Object.keys(e).reduce((n,s)=>({...n,[s]:[...i,new Uy({value:Math.max(2,e[s].minValue),size:t.clusterMinSize}),new Uy({value:Math.max(3,e[s].maxValue),size:t.clusterMaxSize})]}),{});return new dw({field:"cluster_count",levels:r})},oOe=t=>{const e=i=>iOe.error(new C("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!rOe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function aOe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+gie(s)}}}function t_(t,e,i,r){const n=gie(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===s)||t.push(new jm({name:s,isAutoGenerated:!0,onStatisticExpression:new c5({expression:e,returnType:r}),statisticType:i})),s}function Mp(t,e,i,r,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const s=aOe(i,e,n);return t.some(o=>o.name===s)||(i==="avg_norm"?t.push(new jm({name:s,isAutoGenerated:!0,onStatisticExpression:new c5({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new jm({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const lOe=t=>{let e=class extends t{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var a;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new jm({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter(l=>!l.isAutoGenerated);if(i.renderer&&!((a=i.renderer.authoringInfo)!=null&&a.isAutoGenerated))return r.fields=[...n,...s],r;if(i.symbol)return r.fields=[...n,...s],r.renderer=null,r;if(!this.renderer)return i;const o=nOe(n,this.renderer,i,null,!1);return r.fields=[...n,...s],r.renderer=o,r}};return u([d(YAe)],e.prototype,"featureReduction",null),e=u([E("esri.layers.mixins.FeatureReductionLayer")],e),e},_B={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},wB={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},bB={ArcGISFeatureLayer:!0},uOe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":_B,"web-map/basemap":wB,"web-map/tables":bB,"link-chart/operational-layers":{..._B,LinkChartLayer:!0},"link-chart/basemap":wB,"link-chart/tables":bB,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},cOe=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,r,n,s){(s&&s.layerContainerType==="ground"||i&&Ode(this,n,{},s))&&(r[n]=i)}writeOperationalLayerType(i,r,n,s){!i||s&&s.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),Cde(this,i,n=>super.read(i,n),r)}write(i,r){var o,a;if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,c=uOe[l];let h=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(h=!1),!h)return(o=r.messages)==null||o.push(new C("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(l=>l instanceof C&&l.name==="web-document-write:property-required").length;return FT(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new C("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return u([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),u([d(nie)],e.prototype,"listMode",void 0),u([ie("listMode")],e.prototype,"writeListMode",null),u([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),u([ie("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),u([d(OF)],e.prototype,"opacity",void 0),u([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),u([ie("title"),ie(["web-scene"],"title")],e.prototype,"writeTitle",null),u([d({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=u([E("esri.layers.mixins.OperationalLayer")],e),e};var HF;const RC=new Ge({asc:"ascending",desc:"descending"});let Jy=HF=class extends G{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new HF({field:this.field,valueExpression:this.valueExpression,order:this.order})}};u([d({type:String,json:{write:!0}})],Jy.prototype,"field",void 0),u([d({type:String,json:{write:!0}})],Jy.prototype,"valueExpression",void 0),u([d({type:RC.apiValues,json:{read:RC.read,write:RC.write}})],Jy.prototype,"order",void 0),Jy=HF=u([E("esri.layers.support.OrderByInfo")],Jy);const wie=Jy;function dOe(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new wie;return n.read(r,i),[n]}function hOe(t,e,i,r){const n=t.find(s=>!!s.field);n&&Sn(i,[n.toJSON()],e)}const pOe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return u([d({type:[wie],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:dOe},write:{target:"layerDefinition.orderBy",writer:hOe}}})],e.prototype,"orderBy",void 0),e=u([E("esri.layers.mixins.OrderedLayer")],e),e};async function fOe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Bf(t);const i=_e.WGS84;return await ij(e,i),Jo(t,i)}function pHe(t,e){if(!bie(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function bie(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function fHe(t){return bie(t,mOe.HOSTED_SERVICE)}function mHe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}async function yHe(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return fOe(i)}const mOe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function SB(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(l=e.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const yOe=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ue(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new Zw({id:r.itemId,portal:n&&n.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const{load:n}=await O(()=>import("./layersLoader-1720f8b7.js"),["assets/layersLoader-1720f8b7.js","assets/fetchService-2f2a79db.js","assets/jsonContext-53ff6760.js"]);return Tt(r),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(n){throw xn(n)||U.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Wl(r),!0)))}async _setUserPrivileges(i,r){if(!Ye.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){Wl(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=i===n.id;if(s&&n.portal.user)return SB(n);let o,a;if(s)o=n.portal.url;else try{o=await yj(this.url,r)}catch(p){Wl(p)}if(!o||!E0e(o,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const p=r!=null?r.signal:null;a=await(Be==null?void 0:Be.getCredential(`${o}/sharing`,{prompt:!1,signal:p}))}catch(p){Wl(p)}const l=!0,c=!1,h=!1;if(!a)return{features:{edit:l,fullEdit:c},content:{updateItem:h}};try{if(s?await n.reload():(n=new Zw({id:i,portal:{url:o}}),await n.load(r)),n.portal.user)return SB(n)}catch(p){Wl(p)}return{features:{edit:l,fullEdit:c},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){Wl(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Be==null?void 0:Be.findCredential(this.url):null;if(!r)return!0;const n=Px.credential===r?Px.user:await this._fetchEditingUser(i);return Px.credential=r,Px.user=n,n==null||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var h,p;const r=(p=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:p.user;if(r)return r;const n=Be.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=lr.getDefault();if(o&&o.loaded&&Ja(o.restUrl)===Ja(s))return o.user;const a=`${s}/community/self`,l=i!=null?i.signal:null,c=await qT(tt(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?qN.fromJSON(c.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const n=r&&r.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||lr.getDefault());return n&&s&&!sJ(s.restUrl,n.restUrl)?(r.messages&&r.messages.push(new C("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return u([d({type:Zw})],e.prototype,"portalItem",null),u([Q("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),u([ie("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),u([d({clonable:!1})],e.prototype,"resourceReferences",void 0),u([d({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=u([E("esri.layers.mixins.PortalLayer")],e),e},Px={credential:null,user:null};let hw=class extends X{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([d()],hw.prototype,"updating",void 0),u([d()],hw.prototype,"status",void 0),hw=u([E("esri.layers.support.PublishingInfo")],hw);const gOe=hw,Sie="esri.layers.mixins.PublishableLayer",vOe=Symbol(Sie),_Oe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new gOe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let o=0;const a=async c=>{let h;r.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(r.status==="publishing"&&this.refresh(),l.remove()),r.status=h,r.updating=!1,l.removed||(o=setTimeout(a,c,c+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.own(l)}};return e=vOe,u([d({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=u([E(Sie)],i),i},p1=new se,tb=new WeakMap;function wOe(t){xie(t)&&p1.push(t)}function bOe(t){xie(t)&&p1.includes(t)&&p1.remove(t)}function xie(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function $ie(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:$ie(e,t%e):0}let FC=0,Ax=0;function SOe(){const t=Date.now();for(const e of p1)e.refreshInterval&&t-(tb.get(e)??0)+5>=6e4*e.refreshInterval&&(tb.set(e,t),e.refresh(t))}Zq(()=>{const t=Date.now();let e=0;for(const i of p1)e=$ie(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?tb.get(i)||tb.set(i,t):tb.delete(i);if(e!==Ax){if(Ax=e,clearInterval(FC),Ax===0)return void(FC=0);FC=setInterval(SOe,Ax)}});const xOe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=tm(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||wOe(this)},()=>{})}destroy(){bOe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){qg(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{U.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return u([d({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),u([d({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),u([d()],e.prototype,"refreshParameters",null),e=u([E("esri.layers.mixins.RefreshableLayer")],e),e},Eie=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&$Oe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return u([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),u([d({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=u([E("esri.layers.mixins.ScaleRangeLayer")],e),e};function $Oe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const Mie=$n()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let pw=class extends Ft(G){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return $Se(this.value,this.unit,"milliseconds")}};u([ye(Mie,{nonNullable:!0})],pw.prototype,"unit",void 0),u([d({type:Number,json:{write:!0},nonNullable:!0})],pw.prototype,"value",void 0),pw=u([E("esri.TimeInterval")],pw);const TM=pw;function xB(t,e){return TM.fromJSON({value:t,unit:e})}let pn=class extends Ft(G){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),n=new Date(i.timeExtent[1]);return new mu({start:r,end:n})}writeFullTimeExtent(e,i){e&&e.start!=null&&e.end!=null?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?xB(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?xB(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};u([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],pn.prototype,"cumulative",void 0),u([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],pn.prototype,"endField",void 0),u([d({type:mu,json:{write:{enabled:!0,allowNull:!0}}})],pn.prototype,"fullTimeExtent",void 0),u([Q("fullTimeExtent",["timeExtent"])],pn.prototype,"readFullTimeExtent",null),u([ie("fullTimeExtent")],pn.prototype,"writeFullTimeExtent",null),u([d({type:Boolean,json:{write:!0}})],pn.prototype,"hasLiveData",void 0),u([d({type:TM,json:{write:{enabled:!0,allowNull:!0}}})],pn.prototype,"interval",void 0),u([Q("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],pn.prototype,"readInterval",null),u([ie("interval")],pn.prototype,"writeInterval",null),u([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],pn.prototype,"startField",void 0),u([d({type:F0,json:{write:{enabled:!0,allowNull:!0}}})],pn.prototype,"timeReference",void 0),u([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],pn.prototype,"trackIdField",void 0),u([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],pn.prototype,"useTime",void 0),pn=u([E("esri.layers.support.TimeInfo")],pn);const Tie=pn,EOe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=Mie.fromJSON(n.timeOffsetUnits);return s&&o?new TM({value:s,unit:o}):null}set timeInfo(i){_Z(i,this.fieldsIndex),this._set("timeInfo",i)}};return u([d({type:mu,json:{write:!1}})],e.prototype,"timeExtent",void 0),u([d({type:TM})],e.prototype,"timeOffset",void 0),u([Q("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),u([d({value:null,type:Tie,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),u([d({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=u([E("esri.layers.mixins.TemporalLayer")],e),e},$B=new Ge({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Dd=class extends Ft(G){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([d({json:{write:!0}})],Dd.prototype,"name",void 0),u([d({json:{write:!0}})],Dd.prototype,"description",void 0),u([d({json:{read:$B.read,write:$B.write}})],Dd.prototype,"drawingTool",void 0),u([d({json:{write:!0}})],Dd.prototype,"prototype",void 0),u([d({json:{write:!0}})],Dd.prototype,"thumbnail",void 0),Dd=u([E("esri.layers.support.FeatureTemplate")],Dd);const f5=Dd;let Ju=class extends Ft(G){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=sI(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};u([d({json:{write:!0}})],Ju.prototype,"id",void 0),u([d({json:{write:!0}})],Ju.prototype,"name",void 0),u([d({json:{write:!0}})],Ju.prototype,"domains",void 0),u([Q("domains")],Ju.prototype,"readDomains",null),u([ie("domains")],Ju.prototype,"writeDomains",null),u([d({type:[f5],json:{write:!0}})],Ju.prototype,"templates",void 0),Ju=u([E("esri.layers.support.FeatureType")],Ju);const Iie=Ju;function MOe(){return{fields:{type:[e5],value:null},fieldsIndex:{readOnly:!0,get(){return new yte(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||U.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return $T(this.fieldsIndex,t)}}}}const DC=U.getLogger("esri.layers.support.labelingInfo"),TOe=/\[([^\[\]]+)\]/gi;function EB(t,e,i){return t?t.map(r=>{const n=new yI;if(n.read(r,i),n.labelExpression){const s=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(TOe,(o,a)=>`[${IOe(a,s)}]`)}return n}):null}function IOe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const kOe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function SHe(t,e){const i=F(t);return i.some(r=>COe(r,e))?[]:i}function COe(t,e){const i=t.labelPlacement,r=kOe[e];if(!t.symbol)return DC.warn("No ILabelClass symbol specified."),!0;if(!r)return DC.error(new C("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!r.includes(i)){const n=r[0];i&&DC.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${n}`),t.labelPlacement=n}return!1}const Ea=[];function POe(t,e){if(gQ(t.url??""))return!0;const{wkid:i}=e;for(const r of Ea){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Ea.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),Ea.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Ea.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Ea.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Ea.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),Ea.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),Ea.push([10.61,()=>new Set([102497])]),Ea.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),Ea.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),Ea.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);async function AOe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await qT(r.populateFromStyle());if(Tt(i),n.ok===!1){const s=n.error;e&&e.messages&&e.messages.push(new Zo("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}var qF;let Ky=qF=class extends G{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new qF({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};u([d({type:[String],json:{write:!0}})],Ky.prototype,"groupByFields",void 0),u([d({type:Number,json:{write:!0}})],Ky.prototype,"topCount",void 0),u([d({type:[String],json:{write:!0}})],Ky.prototype,"orderByFields",void 0),Ky=qF=u([E("esri.rest.support.TopFilter")],Ky);const OOe=Ky;var WF;const MB=new Ge({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),TB=new Ge({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ht=WF=class extends G{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new WF(F({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};u([d({type:Boolean,json:{write:!0}})],Ht.prototype,"cacheHint",void 0),u([d({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ht.prototype,"distance",void 0),u([d({types:Um,json:{read:Wh,write:!0}})],Ht.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],Ht.prototype,"geometryPrecision",void 0),u([d({type:Number,json:{write:!0}})],Ht.prototype,"maxAllowableOffset",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Ht.prototype,"num",void 0),u([d({json:{write:!0}})],Ht.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],Ht.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],Ht.prototype,"outFields",void 0),u([d({type:_e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ht.prototype,"outSpatialReference",void 0),u([d({type:String,json:{write:!0}})],Ht.prototype,"resultType",void 0),u([d({json:{write:!0}})],Ht.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ht.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ht.prototype,"returnZ",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],Ht.prototype,"start",void 0),u([ie("start"),ie("num")],Ht.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"spatialRel",reader:MB.read},write:{target:"spatialRel",writer:MB.write}}})],Ht.prototype,"spatialRelationship",void 0),u([d({type:mu,json:{write:!0}})],Ht.prototype,"timeExtent",void 0),u([d({type:OOe,json:{write:!0}})],Ht.prototype,"topFilter",void 0),u([d({type:String,json:{read:TB.read,write:{writer:TB.write,overridePolicy(t){return{enabled:t!=null&&this.distance!=null&&this.distance>0}}}}})],Ht.prototype,"units",void 0),u([d({type:String,json:{write:!0}})],Ht.prototype,"where",void 0),Ht=WF=u([E("esri.rest.support.TopFeaturesQuery")],Ht),Ht.from=Xt(Ht);const Ox=Ht;function LOe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=NOe({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const a=zOe({titleBase:n,fields:i,displayField:t}),l=VOe();return new dp({title:a,content:l,fieldInfos:o})}const ROe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):SZ(t,e);function FOe(t,e){const i=t;return e&&(t=t.filter(r=>!e.includes(r.type))),t===i&&(t=t.slice()),t.sort(DOe),t}function DOe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:IB(t)?-1:IB(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function NOe(t,e){const i=e==null?void 0:e.visibleFieldNames;return FOe(t.fields??[],(e==null?void 0:e.ignoreFieldTypes)||UOe).map(r=>new D1({fieldName:r.name,isEditable:Gfe(r,t),label:r.alias,format:jOe(r),visible:ROe(r,{...t,visibleFieldNames:i})}))}function jOe(t){switch(t.type){case"small-integer":case"integer":case"single":return new Eg({digitSeparator:!0,places:0});case"double":return new Eg({digitSeparator:!0,places:2});case"date":return new Eg({dateFormat:"long-month-day-year"});default:return t.type==="string"&&ZA(t.name)?new Eg({digitSeparator:!0,places:0}):null}}function VOe(){return[new k0,new Bb]}function zOe(t){const e=lN(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function IB(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const UOe=["geometry","blob","raster","guid","xml"],Mn="FeatureLayer",kie="esri.layers.FeatureLayer",BOe=U.getLogger(kie);function Lx(t,e){return new C("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function kB(t){return t&&t instanceof se}const NC=MOe();function jC(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let he=class extends wAe(lOe(MPe(_Oe(wPe(Jte(pOe(EOe(Eie(xOe(RCe(cOe(yOe(Rte(_Pe(LCe(Ft(r1))))))))))))))))){constructor(...e){super(...e),this._handles=new Kr,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=_e.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Ue(this._handles)}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Wl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new C("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>rAe(this,e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,i){return i=i.layerDefinition||i,lie(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return sAe(this)}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n!=null&&n.writeLayerSchema&&Sn(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return sie(i.layerDefinition||i)}readObjectIdField(e,i){return oie(i.layerDefinition||i)}get parsedUrl(){const e=_r(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Pm(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Pm(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){n6(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var s;i=i.layerDefinition||i;const n=(s=i.drawingInfo)==null?void 0:s.renderer;if(n){const o=d1(n,i,r)??void 0;return o||BOe.error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return u5(i,r)}set source(e){const i=this._get("source");i!==e&&(kB(i)&&this._resetMemorySource(i),kB(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof se?new rc({layer:this,items:e}):e:null}readSource(e,i){const r=pI.fromJSON(i.featureSet);return new rc({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r&&r.creatorField,s=r&&r.editorField;return e=e&&e.map(o=>f5.fromJSON(o)),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){var s;const r=((s=i.layerDefinition)==null?void 0:s.name)??i.name,n=i.title||i.layerDefinition&&i.layerDefinition.title;if(r){const o=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?XSe(this.url,r):r;let a=r;if(!a&&this.url){const l=wc(this.url);l!=null&&(a=l.title)}return a?(this.sublayerTitleMode==="item-title-and-service-name"&&o&&o!==a&&(a=o+" - "+a),bj(a)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){return i.title||i.layerDefinition&&i.layerDefinition.name}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(s=>s.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r&&r.creatorField,s=r&&r.editorField;return e&&e.map(o=>(o=Iie.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o))}readVisible(e,i){return i.layerDefinition&&i.layerDefinition.defaultVisibility!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){return zPe(this,e,i,Mn)}async updateAttachment(e,i,r){return UPe(this,e,i,r,Mn)}async applyEdits(e,i){return BPe(this,e,i)}async uploadAssets(e,i){return GPe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return LOe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await xm(O(()=>import("./FeatureLayerSource-d70b43f3.js"),["assets/FeatureLayerSource-d70b43f3.js","assets/mat4f64-65d35099.js","assets/MeshGeoreferencedRelativeVertexSpace-df99e052.js","assets/vec32-cc735301.js","assets/External-0aaf9d5b.js","assets/editingSupport-7260f5c0.js","assets/clientSideDefaults-e3faf25f.js","assets/QueryEngineCapabilities-42e44ded.js","assets/QueryTask-e86abb97.js","assets/executeForIds-0f7ad8f2.js","assets/executeQueryPBF-a6a8e784.js"]),e);return new i({layer:this}).load({signal:e})}createQuery(){const e=eAe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=TCe(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){return HPe(this,e,i,Mn)}async fetchRecomputedExtents(e){return qPe(this,e,Mn)}getFeatureType(e){const{typeIdField:i,types:r}=this;if(!i||!e)return null;const n=e.attributes?e.attributes[i]:void 0;if(n==null)return null;let s=null;return r==null||r.some(o=>{const{id:a}=o;return a!=null&&(a.toString()===n.toString()&&(s=o),!!s)}),s}getFieldDomain(e,i){const r=i==null?void 0:i.feature,n=this.getFeatureType(r);if(n){const s=n.domains&&n.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,i){return WPe(this,e,i,Mn)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(tu.from(e)??r.createQuery(),i);if(n!=null&&n.features)for(const s of n.features)s.layer=s.sourceLayer=r;return n}async queryObjectIds(e,i){return ZPe(this,e,i,Mn)}async queryFeatureCount(e,i){return YPe(this,e,i,Mn)}async queryExtent(e,i){return JPe(this,e,i,Mn)}async queryRelatedFeatures(e,i){return KPe(this,e,i,Mn)}async queryRelatedFeaturesCount(e,i){return QPe(this,e,i,Mn)}async queryTopFeatures(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new C(Mn,"Layer source does not support queryTopFeatures capability");const s=await r.queryTopFeatures(Ox.from(e),i);if(s!=null&&s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new C(Mn,"Layer source does not support queryTopObjectIds capability");return r.queryTopObjectIds(Ox.from(e),i)}async queryTopFeaturesExtent(e,i){var s;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((s=n==null?void 0:n.query)!=null&&s.supportsTopFeaturesQuery))throw new C(Mn,"Layer source does not support queryTopExtents capability");return r.queryTopExtents(Ox.from(e),i)}async queryTopFeatureCount(e,i){var s;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((s=n==null?void 0:n.query)!=null&&s.supportsTopFeaturesQuery))throw new C(Mn,"Layer source does not support queryFeatureCount capability");return r.queryTopCount(Ox.from(e),i)}read(e,i){const r=e.featureCollection;if(r){const n=r.layers;n&&n.length===1&&(super.read(n[0],i),r.showLegend!=null&&super.read({showLegend:r.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(Lx(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(r==="web-scene"||r==="web-map"&&n!=="tables")return s==null||s.push(Lx(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s==null||s.push(Lx(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&r==="web-map"&&n==="tables")return s==null||s.push(Lx(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new C(Mn,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||POe(this,e))}async save(e){const{save:i}=await O(()=>import("./featureLayerUtils-41a67848.js"),["assets/featureLayerUtils-41a67848.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-2f2a79db.js","assets/jsonContext-53ff6760.js"]);return i(this,e)}async saveAs(e,i){const{saveAs:r}=await O(()=>import("./featureLayerUtils-41a67848.js"),["assets/featureLayerUtils-41a67848.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-2f2a79db.js","assets/jsonContext-53ff6760.js"]);return r(this,e,i)}_readEditingEnabled(e,i,r){var s;let n=(s=e.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,n){var s,o;if(!e){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Sn("layerDefinition.capabilities",a,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=a)}}_getLayerDomain(e){const i=this.fieldsIndex.get(e);return i?i.domain:null}_fetchFirstLayerId(e){return tt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),n6(this.renderer,this.fieldsIndex),_Z(this.timeInfo,this.fieldsIndex),AOe(this,{origin:"service"})}async hasDataChanged(){return XPe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{const n=r.prototype&&r.prototype.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new C("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new C("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this._handles.add([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};u([Q("service","capabilities")],he.prototype,"readCapabilities",null),u([d({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],he.prototype,"charts",void 0),u([d({readOnly:!0})],he.prototype,"createQueryVersion",null),u([d({json:{read:{source:"layerDefinition.copyrightText"}}})],he.prototype,"copyright",void 0),u([d({json:{read:{source:"layerDefinition.displayField"}}})],he.prototype,"displayField",void 0),u([d({types:Ba,readOnly:!0})],he.prototype,"defaultSymbol",void 0),u([d({type:Fa})],he.prototype,"dynamicDataSource",void 0),u([d({type:Boolean})],he.prototype,"editingEnabled",null),u([Q(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],he.prototype,"readEditingEnabled",null),u([Q("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],he.prototype,"readEditingEnabledFromWebMap",null),u([ie(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],he.prototype,"writeEditingEnabled",null),u([ie("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],he.prototype,"writeEditingEnabledToWebMap",null),u([d({readOnly:!0})],he.prototype,"effectiveEditingEnabled",null),u([d({...NC.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:jC}}}}})],he.prototype,"fields",void 0),u([d(NC.fieldsIndex)],he.prototype,"fieldsIndex",void 0),u([d({type:zee,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],he.prototype,"formTemplate",void 0),u([d({json:{read:{source:"layerDefinition.extent"}}})],he.prototype,"fullExtent",void 0),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:jC,writer(t,e,i){const r=t?RF.toJSON(t):null;r&&Sn(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:RF.read}}})],he.prototype,"geometryType",void 0),u([d({json:{read:{source:"layerDefinition.hasM"}}})],he.prototype,"hasM",void 0),u([d({json:{read:{source:"layerDefinition.hasZ"}}})],he.prototype,"hasZ",void 0),u([d(DPe)],he.prototype,"id",void 0),u([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],he.prototype,"infoFor3D",void 0),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],he.prototype,"isTable",void 0),u([Q("service","isTable",["type","geometryType"]),Q("isTable",["layerDefinition.type","layerDefinition.geometryType"])],he.prototype,"readIsTable",null),u([ie("web-map","isTable")],he.prototype,"writeIsTable",null),u([d(a5)],he.prototype,"labelsVisible",void 0),u([d({type:[yI],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:EB},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:EB},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],he.prototype,"labelingInfo",void 0),u([d((()=>{const t=F(FPe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Sn(r,OT(e),i)}}},t})())],he.prototype,"opacity",void 0),u([d(LPe)],he.prototype,"legendEnabled",void 0),u([d({type:["show","hide"],json:(()=>{const t=F(nie.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],he.prototype,"listMode",void 0),u([Q("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],he.prototype,"readGlobalIdField",null),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:jC}}}}})],he.prototype,"objectIdField",void 0),u([Q("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],he.prototype,"readObjectIdField",null),u([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],he.prototype,"operationalLayerType",void 0),u([d(NC.outFields)],he.prototype,"outFields",void 0),u([d({readOnly:!0})],he.prototype,"parsedUrl",null),u([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],he.prototype,"path",void 0),u([d(o5)],he.prototype,"popupEnabled",void 0),u([d({type:dp,json:{name:"popupInfo",write:!0}})],he.prototype,"popupTemplate",void 0),u([d({readOnly:!0})],he.prototype,"defaultPopupTemplate",null),u([d({types:hI,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:SCe,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],he.prototype,"renderer",null),u([Q("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Q("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],he.prototype,"readRenderer",null),u([d((()=>{const t=F(APe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],he.prototype,"screenSizePerspectiveEnabled",void 0),u([d({clonable:!1})],he.prototype,"source",null),u([Re("source")],he.prototype,"castSource",null),u([Q("portal-item","source",["featureSet"]),Q("web-map","source",["featureSet"])],he.prototype,"readSource",null),u([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],he.prototype,"spatialReference",void 0),u([d({type:Number})],he.prototype,"subtypeCode",void 0),u([d({type:[f5]})],he.prototype,"templates",void 0),u([Q("templates",["editFieldsInfo","creatorField","editorField","templates"])],he.prototype,"readTemplates",null),u([d({type:Tie})],he.prototype,"timeInfo",void 0),u([d()],he.prototype,"title",void 0),u([Q("service","title",["name"]),Q("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],he.prototype,"readTitle",null),u([Q("web-map","title",["layerDefinition.name","title"])],he.prototype,"readTitleFromWebMap",null),u([d({type:String})],he.prototype,"sublayerTitleMode",void 0),u([d({json:{read:!1}})],he.prototype,"type",void 0),u([d({type:String})],he.prototype,"typeIdField",void 0),u([Q("service","typeIdField"),Q("typeIdField",["layerDefinition.typeIdField"])],he.prototype,"readTypeIdField",null),u([d({type:[Iie]})],he.prototype,"types",void 0),u([Q("service","types",["types"]),Q("types",["layerDefinition.types"])],he.prototype,"readTypes",null),u([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],he.prototype,"visible",void 0),u([Q("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],he.prototype,"readVisible",null),he=u([E(kie)],he);const cS=he,$He=Object.freeze(Object.defineProperty({__proto__:null,default:cS},Symbol.toStringTag,{value:"Module"}));let ib=null;function GOe(t,e,i,r={}){const n=e.elementType,s="value",o=n.type==="array"?[{name:s,type:n.type,elementType:n.elementType}]:n.type==="dictionary"?[{name:s,type:n.type,properties:n.properties}]:[{name:s,type:n.type}];return new nke(t.map(a=>{const l={};return m5(l,o,{[s]:a},i,r),l[s]}))}function HOe(t,e,i={}){const r=t instanceof pI?new cS({source:t.features,geometryType:t.geometryType,fields:t.fields,spatialReference:t.spatialReference}):t;return e.constructFeatureSet(r,i.spatialReference,null,!0,i.lruCache,i.interceptor)}function qOe(t,e,i={}){const{spatialReference:r,interceptor:n,lruCache:s}=i;return typeof t=="string"?e.createFeatureSetCollectionFromService(t,r,s,n):e.createFeatureSetCollectionFromMap(t,r,s,n)}function WOe(t,e,i,r={}){const n={};return m5(n,e.properties,t,i,r),new ib.Dictionary(n)}function m5(t,e,i,r,n={}){var o,a;const s={};for(const l of Object.keys(i))s[l.toLowerCase()]=i[l];for(const l of e){const c=l.name.toLowerCase();if(n.variablesPreProcessed)t[c]=s[c];else switch(l.type){case"array":{const h=s[c];t[c]=h==null?null:GOe(h,l,r,n);break}case"feature":{const h=s[c];t[c]=h==null?null:ib.Feature.createFromGraphic(h,n==null?void 0:n.timeReference);break}case"featureSet":{const h=s[c];t[c]=h==null?null:r?HOe(h,r,n):null;break}case"featureSetCollection":{const h=s[c];t[c]=h==null?null:r?qOe(h,r,n):null;break}case"dictionary":{const h=s[c];t[c]=h==null?null:WOe(h,l,r,n);break}case"date":{const h=s[c];t[c]=h?h instanceof SC?h:(o=n==null?void 0:n.timeReference)!=null&&o.timeZone?SC.dateJSAndZoneToArcadeDate(h,(a=n==null?void 0:n.timeReference)==null?void 0:a.timeZone):SC.dateJSToArcadeDate(h):null;break}case"geometry":case"boolean":case"text":case"number":t[c]=s[c]}}}function Cie(t,e){for(const i of t)e.push(i),i.type==="dictionary"&&Cie(i.properties,e);return e}function CB(t,e,i,r,n){const{spatialReference:s,interceptor:o,lruCache:a,console:l,abortSignal:c,timeReference:h,services:p={portal:lr.getDefault()}}=i,f={vars:{},spatialReference:s,interceptor:o,timeReference:h,lrucache:a,useAsync:n,services:p,console:l,abortSignal:c};return e&&m5(f.vars,t.variables,e,r,i),f}function IM(t,e){switch(e.getArcadeType(t)){case"number":case"text":case"boolean":case"point":case"polygon":case"polyline":case"multipoint":case"extent":return t;case"date":return t.toJSDate();case"feature":{const i=(t.type,t),r="geometry"in i?i.geometry():null,n="readAttributes"in i?i.readAttributes():i.attributes;return new fi({geometry:r,attributes:n})}case"dictionary":{const i=t,r=i.attributes,n={};for(const s of Object.keys(r))n[s]=IM(i.field(s),e);return n}case"array":return("toArray"in t?t.toArray():t).map(i=>IM(i,e))}return t}const PB={variables:[{name:"$feature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"}]},AB={variables:[{name:"$feature",type:"feature"},{name:"$aggregatedFeatures",type:"featureSet"}]},OB=new Map([["form-constraint",{variables:[{name:"$feature",type:"feature"}]}],["feature-z",{variables:[{name:"$feature",type:"feature"}]}],["field-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$datastore",type:"featureSetCollection"}]}],["form-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$originalFeature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$featureSet",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$editContext",type:"dictionary",properties:[{name:"editType",type:"text"}]}]}],["labeling",{variables:[{name:"$feature",type:"feature"}]}],["popup",PB],["popup-element",PB],["feature-reduction-popup",AB],["feature-reduction-popup-element",AB],["visualization",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"}]}]}]]);function ZOe(t){const e=OB.get(t);if(!e){const i=Array.from(OB.keys()).map(r=>`'${r}'`).join(", ");throw new C("createArcadeProfile:invalid-profile-name",`Invalid profile name '${t}'. You must specify one of the following values: ${i}`)}return F(e)}async function YOe(t,e,i={}){ib||(ib=await su());const{arcade:r,arcadeUtils:n}=ib,{loadScriptDependencies:s,referencesMember:o,scriptIsAsync:a}=r,l=Cie(e.variables,[]),c=l.filter($=>$.type==="featureSet"||$.type==="featureSetCollection").map($=>$.name.toLowerCase()),h=r.parseScript(t,c);if(!h)throw new C("arcade:invalid-script","Unable to create SyntaxTree");const p=n.extractFieldNames(h),f=r.scriptTouchesGeometry(h),y=l.map($=>$.name.toLowerCase()).filter($=>o(h,$)),g=a(h,c);await s(h,g,c);const v={vars:{},spatialReference:null,useAsync:g};for(const $ of y)v.vars[$]="any";const{lruCache:_}=i,w=r.compileScript(h,v),S=r.featureSetUtils(),{services:b}=i;return{execute:($,T={})=>{if(g)throw new C("arcade:invalid-execution-mode","Cannot execute the script in synchronous mode");const I=w(CB(e,$,{lruCache:_,...T},S,g));return T.rawOutput?I:IM(I,n)},executeAsync:async($,T={})=>{const I=await w(CB(e,$,{lruCache:_,services:b,...T},S,g));return T.rawOutput?I:IM(I,n)},isAsync:g,variablesUsed:y,fieldsUsed:p,geometryUsed:f,syntaxTree:h}}var Pie;const JOe=Symbol("FormExpressionArcadeExecutor");let On=class extends X{constructor(e){super(e),this[Pie]=!0,this._lastEvaluatedValue=null,this._abortController=new AbortController,this._stale=!1,this._updatingTracking=new um,this._executeAsyncDebounced=tm(async(i,r,n)=>{const s=await this.executor.executeAsync(i,{...r,abortSignal:n});return n.aborted?this._lastEvaluatedValue:(this._lastEvaluatedValue=s,this._stale=!1,s)})}get isAsync(){return this.executor.isAsync}get fieldsUsed(){return this.executor.fieldsUsed}get syntaxTree(){return this.executor.syntaxTree}get updating(){return this._updatingTracking.updating}get stale(){return this._stale}get geometryUsed(){return this.executor.geometryUsed}get variablesUsed(){return this.executor.variablesUsed}get lastEvaluatedValue(){return this._lastEvaluatedValue}abort(){this._abortController.abort()}execute(e,i){this._abortController=new AbortController;const r=this.executor.execute(e,{...i,abortSignal:this._abortController.signal});return this._lastEvaluatedValue=r,r}async executeAsync(e,i){return this._abortController=new AbortController,this._updatingTracking.addPromise(this._executeAsyncDebounced(e,i??{},this._abortController.signal))}markStale(){this._stale=!0}reset(){this.abort(),this._lastEvaluatedValue=null,this._stale=!1}};Pie=JOe,u([d()],On.prototype,"_lastEvaluatedValue",void 0),u([d()],On.prototype,"_stale",void 0),u([d()],On.prototype,"_updatingTracking",void 0),u([d({constructOnly:!0})],On.prototype,"executor",void 0),u([d()],On.prototype,"isAsync",null),u([d()],On.prototype,"fieldsUsed",null),u([d()],On.prototype,"syntaxTree",null),u([d()],On.prototype,"updating",null),u([d()],On.prototype,"stale",null),u([d()],On.prototype,"geometryUsed",null),u([d()],On.prototype,"variablesUsed",null),u([d()],On.prototype,"lastEvaluatedValue",null),On=u([E("esri.widgets.FeatureForm.FormExpressionArcadeExecutor")],On);const KOe=async(t,e)=>{const i=ZOe("form-calculation"),r=await YOe(t,i,{});return e!=null&&e.fieldsIndex&&(r.fieldsUsed=$T(e.fieldsIndex,r.fieldsUsed)),new On({executor:r})},VC="#JSAPI_FORM_EXPRESSIONS_MANAGER_GEOMETRY",QOe="esri.widgets.FeatureForm.FormExpressionsManager";let Nd=class extends X{constructor(e){super(e),this._fieldReferencesLookup=new Map,this._fieldsAffectedLookup=new Map,this._latestFieldValues={...e.feature.attributes}}initialize(){this._dependencyGraph=this._buildDependencyGraph()}get _baseContext(){const{editType:e,layer:i,map:r,originalFeature:n,spatialReference:s}=this.arcadeContextInfo,o=(i==null?void 0:i.type)==="feature"?i:(i==null?void 0:i.type)==="scene"&&i.associatedLayer!=null?i.associatedLayer:void 0;return[{$originalfeature:n,$editcontext:{editType:e},$layer:o,$featureset:o,$datastore:i==null?void 0:i.url,$map:r},{spatialReference:s??void 0}]}set feature(e){this._latestFieldValues={...e==null?void 0:e.attributes},this._set("feature",e)}evaluateAll(){return this._evaluate(this.executors)}evaluateExpressions(e){return this._evaluate(e)}evaluateInvalidated(e){const{_fieldReferencesLookup:i,_latestFieldValues:r,feature:n}=this,s=new Set;for(const o of e)if(r[o]=n.getAttribute(o),i.has(o))for(const a of i.get(o))s.add(a);return this._evaluate([...s])}async evaluateInvalidatedByGeometry(){if(this._fieldReferencesLookup.has(VC))return this._evaluate([...this._fieldReferencesLookup.get(VC)])}resetExecutors(){for(const e of this.executors)e.reset()}_buildDependencyGraph(){const{_fieldReferencesLookup:e,_fieldsAffectedLookup:i,executors:r}=this,n=new Map(this.fieldInputs.map(o=>[o.name,o])),s=new Map(r.map(o=>[o,new Array]));for(const o of r){for(const a of o.fieldsUsed){Sg(e,a,()=>new Set).add(o);const l=n.get(a),c=l==null?void 0:l.valueExpressionExecutor,h=l==null?void 0:l.editableExpressionExecutor;c!=null&&c!==o&&(s.get(c).push(o),Sg(i,c,()=>new Set).add(l)),h!=null&&h!==o&&(s.get(h).push(o),Sg(i,h,()=>new Set).add(l))}o.geometryUsed&&Sg(e,VC,()=>new Set).add(o)}return s}async _evaluate(e){const i=new Map,{_dependencyGraph:r,_fieldsAffectedLookup:n,_latestFieldValues:s}=this;for(const a of e)Aie(a,i,r);for(const[a,{resolver:l,dependencyPromises:c}]of i)Promise.all(c).then(async()=>{const[h,p]=this._makeContext(s);return a.executeAsync(h,p)}).then(()=>{if(n.has(a))for(const h of n.get(a))this._latestFieldValues[h.name]=h.value;l.resolve()},h=>{!h||xn(h)||LB(h)||a.markStale(),l.reject(h)});const o=(await Promise.allSettled(Array.from(i.values(),({resolver:a})=>a.promise))).filter(a=>a.status==="rejected"&&!(xn(a.reason)||LB(a.reason)));if(o.length>0)throw new AggregateError(o,"One or more expression executions failed")}_makeContext(e){const[i,r]=this._baseContext,n=this.feature.clone();return n.attributes=e,[{...i,$feature:n},r]}};u([d()],Nd.prototype,"_baseContext",null),u([d()],Nd.prototype,"feature",null),u([d()],Nd.prototype,"executors",void 0),u([d()],Nd.prototype,"fieldInputs",void 0),u([d()],Nd.prototype,"arcadeContextInfo",void 0),Nd=u([E(QOe)],Nd);const Aie=(t,e,i)=>{if(e.has(t))return;const r=bs();e.set(t,{resolver:r,dependencyPromises:[]}),t.abort();const n=i.get(t);for(const s of n)Aie(s,e,i),e.get(s).dependencyPromises.push(r.promise)},LB=t=>t&&typeof t=="object"&&"message"in t&&t.message==="Cancelled",Oie="esri.widgets.FeatureForm.GroupInput",RB=U.getLogger(Oie);let jd=class extends Uee{constructor(e){super(e),this._expressionTrackingHandles=new Map,this.type="group"}initialize(){this.addHandles([D(()=>[this.visible,this.inputs],([e])=>{const{inputs:i}=this,r=!!e&&void 0;for(const n of i)fh(n)&&(n.required=r)},{initial:!0,equals:(e,i)=>i[0]===e[0]&&i[1]===e[1]})])}destroy(){for(const e of this._expressionTrackingHandles.values())e.remove()}set inputFields(e){ep(RB,"Property: GroupInput.inputFields",{replacement:"GroupInput.inputs",version:"4.27"}),this.inputs=e}get inputFields(){return ep(RB,"Property: GroupInput.inputFields",{replacement:"GroupInput.inputs",version:"4.27"}),this.inputs}get inputs(){return this._get("inputs")}set inputs(e){this.handles.removeAll(),e&&this.handles.add(e.map(i=>D(()=>i.visible,()=>this._dirtyEvaluatedVisibilityExpression()))),this._set("inputs",e)}get label(){return this.element.label}set label(e){pc(this.element,i=>{i.label=e})}get state(){return this.element.initialState||"expanded"}set state(e){this._overrideIfSome("state",e)}get visible(){return this.evaluatedVisibilityExpression!==!1&&this.inputs&&this.inputs.some(e=>e.visible)}_dirtyEvaluatedVisibilityExpression(){const{element:e}=this;e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};u([d()],jd.prototype,"inputs",null),u([d()],jd.prototype,"label",null),u([d()],jd.prototype,"state",null),u([d({readOnly:!0})],jd.prototype,"type",void 0),u([d()],jd.prototype,"visible",null),jd=u([E(Oie)],jd);const XOe=jd,zC=100;let ut=class extends Ft(jc(Xr(X))){constructor(e){super(e),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await qg(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await qg(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await qg(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=tm(this._queryController,zC),this._queryFeatureCountDebounced=tm(this._queryFeatureCountController,zC),this._queryPageDebounced=tm(this._queryPageController,zC),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.removeAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.handles.add([D(()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount]},()=>this._queryDebounced(),me),D(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),D(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,n=1,s=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(e,n),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map(r=>{const n=r.clone();return n.field=u1(r.field,i),n}):e??[]}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e;return((e=this.orderByFieldsFixedCasing[0])==null?void 0:e.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new se}get relatedFeatureInfos(){const{itemDescriptionFieldName:e,relatedFeatures:i,relatedLayer:r}=this;if(!i.length||!r)return[];const n=r&&"formTemplate"in r&&r.formTemplate,s=n&&(n==null?void 0:n.title)||void 0;return i.map(o=>{let a;if(e){const l=o.getAttribute(e),c=r.fieldsIndex.get(e);if(c){const h=Pee([l],[c])[e];h!=null&&(a=h.toString())}}return{feature:o,description:a,title:s?gR(s,o.attributes,r.fieldsIndex):void 0}}).toArray()}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;return e!=null&&e.loaded&&i&&r?kIe(i,e,r)??null:null}get relationship(){var r;const{relationshipId:e,layer:i}=this;return typeof e=="number"?((r=i==null?void 0:i.relationships)==null?void 0:r.find(({id:n})=>n===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new se}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:s,canLoad:o}=this;return i||o&&!s?"loading":e||r?"querying":n?"ready":"disabled"}getRelatedFeatureByObjectId(e){return this.relatedFeatures.find(i=>i.getObjectId()===e)}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(i=>!i.destroyed&&i.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i,relationshipId:r,objectId:n,_queryFeatureCountAbortController:s,canQuery:o,supportsCacheHint:a}=this;if(await(e==null?void 0:e.load()),await(i==null?void 0:i.load()),!o||!e||!i)return void this._set("featureCount",0);const l=i.createQuery(),c=new z0({cacheHint:a,relationshipId:r,returnGeometry:!1,objectIds:[n],where:l.where??void 0}),h=await e.queryRelatedFeaturesCount(c,{signal:s==null?void 0:s.signal});this._set("featureCount",h[n]||0)}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:s}=this;!r||i<2||!s||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var A;const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:n,displayCount:s,layer:o,relationshipId:a,featurePage:l,featureCount:c,relatedLayer:h,supportsCacheHint:p}=this,{canQuery:f,objectId:y}=this;if(!f||!o||!h)return[];const g=r?((l-1)*n+c)%c:0,v=r?n:s,_=h.objectIdField,w=[...i.map(L=>L.field),...DIe(h),_].filter(Pi),S=i.map(L=>`${L.field} ${L.order}`),b=h.createQuery(),$=new z0({orderByFields:S,start:g,num:v,outFields:w,cacheHint:p,relationshipId:a,returnGeometry:!1,objectIds:[y],where:b.where??void 0}),T=await o.queryRelatedFeatures($,{signal:e==null?void 0:e.signal}),I=((A=T[y])==null?void 0:A.features)||[];return I.forEach(L=>{L.sourceLayer=h,L.layer=h}),I}};u([d()],ut.prototype,"_loaded",void 0),u([d()],ut.prototype,"_queryAbortController",void 0),u([d()],ut.prototype,"_queryPageAbortController",void 0),u([d()],ut.prototype,"_queryFeatureCountAbortController",void 0),u([d({value:1})],ut.prototype,"featurePage",null),u([d()],ut.prototype,"featuresPerPage",void 0),u([d({readOnly:!0})],ut.prototype,"orderByFieldsFixedCasing",null),u([d({readOnly:!0})],ut.prototype,"supportsCacheHint",null),u([d({readOnly:!0})],ut.prototype,"canLoad",null),u([d({readOnly:!0})],ut.prototype,"canQuery",null),u([d()],ut.prototype,"description",void 0),u([d({readOnly:!0})],ut.prototype,"itemDescriptionFieldName",null),u([d({value:3})],ut.prototype,"displayCount",null),u([d({type:fi})],ut.prototype,"graphic",void 0),u([d()],ut.prototype,"layer",void 0),u([d()],ut.prototype,"map",void 0),u([d({readOnly:!0})],ut.prototype,"objectId",null),u([d({readOnly:!0})],ut.prototype,"objectIdField",null),u([d()],ut.prototype,"orderByFields",void 0),u([d({readOnly:!0})],ut.prototype,"relatedFeatures",null),u([d({readOnly:!0})],ut.prototype,"relatedFeatureInfos",null),u([d({readOnly:!0})],ut.prototype,"relatedLayer",null),u([d({readOnly:!0})],ut.prototype,"relationship",null),u([d()],ut.prototype,"featureCount",void 0),u([d({readOnly:!0})],ut.prototype,"relatedFeatureViewModels",null),u([d()],ut.prototype,"relationshipId",void 0),u([d()],ut.prototype,"showAllEnabled",void 0),u([d()],ut.prototype,"state",null),u([d()],ut.prototype,"title",void 0),u([d()],ut.prototype,"getRelatedFeatureByObjectId",null),ut=u([E("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],ut);const vI=ut,eLe=3;let Mi=class extends Bee{constructor(e){super(e),this._relationshipVM=null,this.group=null,this.type="relationship",this.handles.add([D(()=>({feature:this.feature,element:this.element,layer:this.layer}),i=>this._createRelationshipVM(i),me)])}destroy(){var e;(e=this._relationshipVM)==null||e.destroy()}get canAddRelatedFeature(){const{editable:e,featureCount:i,_relationshipVM:r}=this;if(!(r!=null&&r.relationship)||!this.loaded||!this.relatedLayerAllowsAdds)return!1;const{cardinality:n,role:s}=r.relationship;return!(n==="one-to-one"&&i>0)&&n!=="many-to-many"&&!(n==="one-to-many"&&s==="destination"&&i>0)&&e}get displayCount(){return this.element.displayCount??eLe}get displayType(){return this.element.displayType}get editable(){return!!this.relatedLayerAllowsEdits&&(this.evaluatedEditableExpression??!1)}get featureCount(){var e;return((e=this._relationshipVM)==null?void 0:e.featureCount)??0}get map(){return this._get("map")}set map(e){var i;e&&((i=this._relationshipVM)==null||i.set("map",e)),this._set("map",e)}get orderByFields(){return this.element.orderByFields}get relationshipId(){return this.element.relationshipId}get relatedFeatureInfos(){var e;return((e=this._relationshipVM)==null?void 0:e.relatedFeatureInfos)??[]}get relatedLayer(){var e;return(e=this._relationshipVM)==null?void 0:e.relatedLayer}get relatedLayerAllowsAdds(){var r;const{relatedLayer:e}=this;if(!e||!this.relatedLayerAllowsEdits)return!1;const i=hu(e);return!!((r=i==null?void 0:i.operations)!=null&&r.supportsAdd)}get relatedLayerAllowsEdits(){var r;const{relatedLayer:e}=this;if(!e)return!1;const i=hu(e);return!!((r=i==null?void 0:i.operations)!=null&&r.supportsEditing)}get showAllEnabled(){return this._get("showAllEnabled")}set showAllEnabled(e){var i;(i=this._relationshipVM)==null||i.set("showAllEnabled",e),this._set("showAllEnabled",e)}get showAllActionVisible(){return!this.showAllEnabled&&this.featureCount>0&&this.featureCount>this.displayCount}get visible(){const{_relationshipVM:e,relatedLayer:i}=this;if(!(e!=null&&e.relationship))return!1;const{cardinality:r}=e.relationship;return r!=="many-to-many"&&!(i&&!L0(i))&&(this.evaluatedVisibilityExpression!=null?this.evaluatedVisibilityExpression:this.element!=null)}get updating(){var e,i;return((e=this._relationshipVM)==null?void 0:e.state)==="loading"||((i=this._relationshipVM)==null?void 0:i.state)==="querying"}get loaded(){var e;return((e=this._relationshipVM)==null?void 0:e.state)==="ready"}incrementPage(){this._relationshipVM&&this._relationshipVM.featurePage++}getRelatedFeatureByObjectId(e){var i;return(i=this._relationshipVM)==null?void 0:i.getRelatedFeatureByObjectId(e)}_createRelationshipVM(e){var h;const{feature:i,element:r,layer:n}=e;if((h=this._relationshipVM)==null||h.destroy(),!i||!r||!n)return;const{displayCount:s,map:o,orderByFields:a,relationshipId:l,showAllEnabled:c}=this;rS(n)&&(this._relationshipVM=new vI({graphic:i,displayCount:s,layer:n,map:o,orderByFields:a,relationshipId:l,showAllEnabled:c}))}};u([d()],Mi.prototype,"canAddRelatedFeature",null),u([d()],Mi.prototype,"displayCount",null),u([d()],Mi.prototype,"displayType",null),u([d()],Mi.prototype,"editable",null),u([d()],Mi.prototype,"group",void 0),u([d()],Mi.prototype,"map",null),u([d()],Mi.prototype,"orderByFields",null),u([d()],Mi.prototype,"relationshipId",null),u([d()],Mi.prototype,"relatedFeatureInfos",null),u([d()],Mi.prototype,"relatedLayer",null),u([d()],Mi.prototype,"relatedLayerAllowsAdds",null),u([d()],Mi.prototype,"relatedLayerAllowsEdits",null),u([d()],Mi.prototype,"showAllEnabled",null),u([d()],Mi.prototype,"showAllActionVisible",null),u([d({readOnly:!0})],Mi.prototype,"type",void 0),u([d()],Mi.prototype,"visible",null),u([d()],Mi.prototype,"updating",null),u([d()],Mi.prototype,"incrementPage",null),u([d()],Mi.prototype,"getRelatedFeatureByObjectId",null),Mi=u([E("esri.widgets.FeatureForm.RelationshipInput")],Mi);const tLe=Mi,UC=new fi({attributes:{}}),iLe=["editableExpression","requiredExpression","valueExpression","visibilityExpression"],rLe=["visibilityExpression"],nLe=["editableExpression","visibilityExpression"],sLe="#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",uy="#JSAPI_CONTINGENT_VALUE_ANY_HASH",oLe="#JSAPI_CONTINGENT_VALUE_NULL_HASH",y5="esri.widgets.FeatureForm.FeatureFormViewModel",Rx=U.getLogger(y5);let et=class extends Xr(B1(Vi.EventedAccessor)){constructor(e){super(e),this._expressionExecutorLookup=new Map,this._expressionsManager=null,this._contingentValuesCache=null,this._featureClone=UC.clone(),this._initialFeature=UC.clone(),this.arcadeEditType="NA",this.contingencyConstraintViolations=new Map,this.disabled=!1,this.inputs=[],this.map=null,this.relatedRecordCallbacks=null,this.strict=!1}initialize(){const e=D(()=>{var n;return[this.layer,!!((n=this.layer)!=null&&n.loaded),this.formTemplate,this.feature,this.arcadeEditType]},([n,s])=>{n!=null&&(s?this._updateInputs():n.load().catch(()=>U.getLogger(this).error("Failed to load layer",n.loadError)))},{equals:([n,s,o,a,l],[c,h,p,f,y])=>n===c&&s===h&&o===p&&a===f&&l===y,initial:!0}),i=D(()=>this._arcadeContextInfo,n=>{this._expressionsManager!=null&&(this._expressionsManager.arcadeContextInfo=n)}),r=D(()=>this.layer,n=>{const s=(n==null?void 0:n.type)==="subtype-sublayer"?n.parent:(n==null?void 0:n.type)==="feature"?n:null;s&&this.addResolvingPromise(QIe.createLoadedLayerContingentValuesCache(s).then(o=>{this._contingentValuesCache=o,this.notifyChange("fieldsWithContingentValues")}))},{initial:!0});this.handles.add([e,i,r])}destroy(){this.feature=null,this.layer=null,this._contingentValuesCache=Ue(this._contingentValuesCache)}get _expressionInfosLookup(){var e,i;return new Map((i=(e=this.formTemplate)==null?void 0:e.expressionInfos)==null?void 0:i.map(r=>[r.name,r]))}get activeRelationshipInput(){return this.allRelationshipInputs.find(e=>e.relationshipId===this.relationshipId)}get _arcadeContextInfo(){const{_initialFeature:e,arcadeEditType:i,layer:r,map:n,spatialReference:s}=this;return{layer:YT(r)?r:null,originalFeature:e,editType:i,map:n,spatialReference:s}}get allFieldInputs(){return lU(this.inputs)}get allRelationshipInputs(){return PIe(this.inputs)}get _layerFieldsByName(){var e;return new Map((e=this.layer)==null?void 0:e.fields.map(i=>[i.name,i]))}get feature(){return this._get("feature")}set feature(e){this._featureClone=e?e.clone():UC.clone(),this._initialFeature=this._featureClone.clone(),e?(this._resetFieldInputValues(this._featureClone),this.allRelationshipInputs.forEach(i=>i.feature=e)):(this.inputs.forEach(i=>i.destroy()),this.inputs.length=0),this.contingencyConstraintViolations.clear(),this._expressionsManager!=null&&(this._expressionsManager.resetExecutors(),this._expressionsManager.feature=this._featureClone,this.updatingHandles.addPromise(this._expressionsManager.evaluateAll().finally(()=>this._afterExpressionsEvaluated()))),this._set("feature",e)}get fieldsWithContingentValues(){if(this._contingentValuesCache==null)return new Set;const e=this._contingentValuesCache.fieldGroups.flatMap(i=>i.fields);return new Set(e)}get formTemplate(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null}set formTemplate(e){e===void 0?this._clearOverride("formTemplate"):this._override("formTemplate",e)}get formDescription(){const{formTemplate:e,layer:i}=this;return e!=null&&e.description&&i?gR(e.description,this.getValues(),i.fieldsIndex):null}get formTitle(){const{formTemplate:e,layer:i}=this;return e!=null&&e.title&&i?gR(e.title,this.getValues(),i.fieldsIndex):null}formHeaderVisible(){const{activeRelationshipInput:e,formDescription:i,formTitle:r}=this;return!(e||!i&&!r)}set inputFields(e){Ha(Rx,"inputFields",{replacement:"FeatureFormViewModel.inputs",version:"4.27"}),this.inputs=e}get inputFields(){return Ha(Rx,"inputFields",{replacement:"FeatureFormViewModel.inputs",version:"4.27"}),this.inputs}get joinedContingentValues(){return this._joinContingentValues()}get layer(){var e;return(e=this.feature)!=null&&e.sourceLayer&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null}set layer(e){this._override("layer",e)}get relationshipId(){return this._get("relationshipId")}set relationshipId(e){const i=this.allRelationshipInputs;if(e!=null&&e===this.relationshipId||i.forEach(r=>r.showAllEnabled=!1),e!=null){const r=i.find(n=>n.relationshipId===e);r&&(r.showAllEnabled=!0)}this._set("relationshipId",e)}get spatialReference(){var e;return((e=this.layer)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){return this.get("layer.loaded")?"ready":"disabled"}get submittable(){return!!this.valid||this.allFieldInputs.filter(e=>!e.valid).every(({submittable:e})=>e)}get updating(){return this.updatingHandles.updating}get valid(){const e=this.allFieldInputs;return e.length>0&&e.every(({valid:i})=>i)}get view(){return Ha(Rx,"view",{replacement:"FeatureForm.map",version:"4.27"}),this._get("view")}set view(e){Ha(Rx,"view",{replacement:"FeatureForm.map",version:"4.27"}),this._set("view",e),e!=null&&e.map&&(this.map=e.map)}findField(e){return this.allFieldInputs.find(i=>i.name===e)}getValue(e){const{_featureClone:i,layer:r}=this,n=!!(r!=null&&r.getField(e));return i.getAttribute(e)??(n?null:void 0)}setValue(e,i){const{_featureClone:r,strict:n}=this,s=this.findField(e);i=i===""?null:i,s&&r.getAttribute(e)!==i&&(s.value=i,n&&!s.valid||(this._afterValueChange(s),this._expressionsManager!=null&&this.updatingHandles.addPromise(this._expressionsManager.evaluateInvalidated([s.name]).finally(()=>this._afterExpressionsEvaluated()))))}getValues(){return{...this._featureClone.attributes}}submit(){const e=this.allFieldInputs,i=new Set(e.filter(s=>s.valid).map(({name:s})=>s)),r=e.filter(s=>!s.valid).map(({name:s})=>s),n=this.getValues();if(this.validateContingencyConstraints(n,{includeIncompleteViolations:!0}).length>0)for(const[s,o]of this.contingencyConstraintViolations.entries())o.type==="error"&&(i.delete(s),r.push(s));this.emit("submit",{valid:[...i],invalid:r,values:n})}validateContingencyConstraints(e,i){const{_contingentValuesCache:r}=this,n=new Map;if(this.contingencyConstraintViolations=n,r==null)return[];const{invalid:s,incomplete:o}=r.validateContingencyConstraints(e),a=[...s,...i!=null&&i.includeIncompleteViolations?o:[]];for(const l of a)for(const c of l.fieldGroup.fields)n.set(c,l);return a}notifyFeatureGeometryChanged(){const{_expressionsManager:e,feature:i,_featureClone:r}=this;r.geometry=i.geometry,e!=null&&this.updatingHandles.addPromise(e.evaluateInvalidatedByGeometry().finally(()=>this._afterExpressionsEvaluated()))}_emitChangeEvent({name:e,valid:i,value:r}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:e,value:r,valid:i})}_updateInputs(){const{_featureClone:e,_initialFeature:i,arcadeEditType:r,formTemplate:n,inputs:s,layer:o}=this;if(!o)return;const a={arcadeEditType:r,feature:e,initialFeature:i,layer:o},l=s.slice(),c=n!=null&&n.elements&&n.elements.length>0?this._updateInputsUsingFormElements(l,n.elements,a):this._updateInputsUsingLayerFields(l,o==null?void 0:o.fields,a);this.inputs=c}_updateInputsUsingFormElements(e,i,r){const n=new Map;for(const a of e)if(zh(a)){n.set(a.element,a);for(const l of a.inputs)l.element&&n.set(l.element,l)}else a.element&&n.set(a.element,a);const s=new Map,o=this._updateInputsUsingFormElementsRecursive({existingInputsByElement:n,updatedElements:i.filter(FB),sharedInitializationProperties:r,group:null,newExpressionExecutorPromises:s});this.updatingHandles.addPromise(Promise.all(Array.from(s.values())).then(()=>{const a=Array.from(this._expressionExecutorLookup.values()),l=lU(o);return this._createExpressionsManager(a,l),this._expressionsManager.evaluateAll().finally(()=>this._afterExpressionsEvaluated())}));for(const[a,l]of n.entries())n.delete(a),l.destroy();return o}_updateInputsUsingFormElementsRecursive(e){const{existingInputsByElement:i,updatedElements:r,sharedInitializationProperties:n,group:s,newExpressionExecutorPromises:o}=e,a=[];for(const l of r){const c=i.has(l),h=c?i.get(l):_C(l)?this._makeGroupInputFromElement(l,n):Iee(l)?this._makeFieldInputFromElement(l,n,s):aU(l)?this._makeRelationshipInputFromElement(l,n,s):null;if(h){if(a.push(h),c)if(i.delete(l),zh(h)){const{feature:p}=n;h.set({feature:p})}else if(t0(h)){const p=this.relationshipId===l.relationshipId;h.set(n),h.set({map:this.map,showAllEnabled:p})}else h.set(n);else this._assignExpressionExecutors(h,l,o);if(_C(l)){const p=l.elements.filter(f=>FB(f));h.inputs=this._updateInputsUsingFormElementsRecursive({existingInputsByElement:i,updatedElements:p,sharedInitializationProperties:n,group:h,newExpressionExecutorPromises:o})}}}return a}_updateInputsUsingLayerFields(e,i,r){if(!Array.isArray(i))return U.getLogger(this).warn(this.declaredClass,"No attribute fields found."),[];const n=new Map;for(const h of e)if(zh(h)){for(const p of h.inputs)p.destroy();h.inputs.length=0,h.destroy()}else t0(h)?h.destroy():fh(h)&&(h.element!==null?h.destroy():n.set(h.field,h));const s=[],{arcadeEditType:o,feature:a,initialFeature:l,layer:c}=r;for(const h of i){const p=n.get(h)??new MU({arcadeEditType:o,field:h,feature:a,initialFeature:l,layer:c,value:(a==null?void 0:a.getAttribute(h.name))??null});s.push(p),n.delete(h)}for(const[h,p]of n.entries())n.delete(h),p.destroy();return s}_resetFieldInputValues(e){for(const i of this.allFieldInputs)i.value=e.getAttribute(i.name)}_makeFieldInputFromElement(e,i,r){const{arcadeEditType:n,feature:s,initialFeature:o,layer:a}=i,{fieldName:l}=e,c=l&&this._layerFieldsByName.get(l);return c?new MU({arcadeEditType:n,element:e,field:c,value:(s==null?void 0:s.getAttribute(e.fieldName))??null,feature:s,initialFeature:o,layer:a,group:r}):null}_makeGroupInputFromElement(e,i){const{feature:r,layer:n}=i;return new XOe({element:e,inputs:[],feature:r,layer:n})}_makeRelationshipInputFromElement(e,i,r=null){const{map:n}=this,{feature:s,layer:o}=i;return new tLe({element:e,feature:s,group:r,layer:o,map:n})}_assignExpressionExecutors(e,i,r){var o;const n=_C(i)?rLe:aU(i)?nLe:iLe,s=[];for(const a of n){const l=i[a],{_expressionExecutorLookup:c}=this;if(l!=null&&l!==""){const h=`${a}Executor`,p=((o=this._expressionInfosLookup.get(l))==null?void 0:o.expression)??l;if(c.has(p))e[h]=c.get(p);else if(r.has(p)){const f=r.get(p).then(y=>(e[h]=y,y));r.set(p,f)}else{const f=KOe(p,this.layer).then(y=>(e[h]=y,c.set(p,y),y));r.set(p,f)}}}return s}_createExpressionsManager(e,i){const{_arcadeContextInfo:r,_featureClone:n}=this;this._expressionsManager=new Nd({executors:e,feature:n,arcadeContextInfo:r,fieldInputs:i})}_afterValueChange(e){var h;const{name:i,value:r}=e,{_featureClone:n,formTemplate:s,layer:o}=this;if(!o)return;const a=n.getAttribute(i);n.setAttribute(i,r);const{typeFieldName:l,types:c}=vR(o);if(i===l&&r!==a){if(o.type==="subtype-sublayer"){const f=(h=o.parent)==null?void 0:h.findSublayerForFeature(n);n.sourceLayer=this.feature.sourceLayer=f}const p=new Set;for(const f of c)if(f.domains&&typeof f.domains=="object")for(const y of Object.keys(f.domains))p.add(y);for(const f of p){const y=this.findField(f);y&&y.notifyChange("domain")}}if(s!=null){const{description:p,title:f}=s;f&&Ob(f,i)&&this.notifyChange("formTitle"),p&&Ob(p,i)&&this.notifyChange("formDescription")}this._emitChangeEvent(e)}_afterExpressionsEvaluated(){const{_featureClone:e}=this;for(const i of this.allFieldInputs)i.value!==e.getAttribute(i.name)&&this._afterValueChange(i)}_joinContingentValues(){const e=this._contingentValuesCache;if(e==null)return[];const{typeFieldName:i}=vR(this.layer),r=i?this.getValue(i):null,n=[];for(const a of e.fieldGroups){const{contingencies:l,fields:c,name:h}=a,p=[];for(const f of l)f.isRetired||f.subtype!=null&&f.subtype.code!==r||p.push({values:f.values});p.length>0&&n.push({name:h,fields:c,contingencies:p})}const[s,o]=this._generateJoinPlan(n);return[...s.flatMap(a=>this._joinFieldGroupContingencies(a)),...o.flatMap(a=>a.contingencies)]}_generateJoinPlan(e){const i=new Map,r=[],n=new Set;for(const c of e)for(const h of c.fields)if(i.has(h)){const p=i.get(h),f=c,y=[p.name,f.name].sort().join("|");if(n.has(y))continue;r.push([p,f]),n.add(y),i.set(h,f)}else i.set(h,c);const s=new Set(r.flat()),o=new Set(e);for(const c of s)o.delete(c);const a=new Map,l=new Map;for(const c of new Set(r.flat())){const h=Symbol(c.name);a.set(h,new Set([c])),l.set(c,h)}for(const[c,h]of r){const p=l.get(c),f=l.get(h);if(p===f)continue;const y=a.get(p),g=a.get(f);for(const v of g)y.add(v),l.set(v,p);a.delete(f)}return[[...a.values()].map(c=>[...c]),[...o]]}_joinFieldGroupContingencies(e){var c,h;const i=e.slice(),r=i.shift();let n=i.shift(),s=this._generateJoinKey(r.fields,n.fields),o=new Set([...r.fields,...n.fields]),a=new Map;for(const p of r.contingencies){const[f]=this._hashContingency(p,s.codedValueFields,!0);a.has(f)?(c=a.get(f))==null||c.push(p):a.set(f,[p])}for(;i.length>0;){const p=new Map,f=i.shift(),y=this._generateJoinKey(o,f.fields);for(const g of n.contingencies){const[v,_]=this._hashContingency(g,s.codedValueFields),w=_?this._findMatchingContingenciesWithAnyHashMask(a,v):a.get(v);if(a.has(uy)&&(w==null||w.push(...this._findMatchingContingenciesContainingAny(g,a.get(uy),s.codedValueFields))),w!=null)for(const S of w){const b=s.rangeFields.length>0?this._joinContingenciesWithRangeDomains(S,g,s.rangeFields):this._joinContingencies(S,g);if(b==null)break;const[$]=this._hashContingency(b,y.codedValueFields,!0);p.has($)?(h=p.get($))==null||h.push(b):p.set($,[b])}}a=p,n=f,s=y,o=new Set([...o,...n.fields])}const l=[];for(const p of n.contingencies){const[f,y]=this._hashContingency(p,s.codedValueFields),g=y?this._findMatchingContingenciesWithAnyHashMask(a,f):a.get(f);if(a.has(uy)&&g.push(...this._findMatchingContingenciesContainingAny(p,a.get(uy),s.codedValueFields)),g!=null)for(const v of g){const _=s.rangeFields.length>0?this._joinContingenciesWithRangeDomains(v,p,s.rangeFields):this._joinContingencies(v,p);_!=null&&l.push(_)}}return l}_joinContingencies(e,i){const r={values:{...e.values,...i.values}};for(const[n,s]of Object.entries(r.values))s.objectType==="any"&&e.values[n]!=null&&(r.values[n]=e.values[n]);return r}_joinContingenciesWithRangeDomains(e,i,r){const n=this._joinContingencies(e,i);for(const s of r){const o=e.values[s],a=i.values[s],{leftIsNull:l,rightIsNull:c,bothAreNull:h,leftIsAny:p,rightIsAny:f,bothAreAny:y,leftIsRange:g,rightIsRange:v}=this._compareObjectTypes(o.objectType,a.objectType);if(h||y)continue;if(l&&f||c&&p){n.values[s]=new kr({objectType:"null"});continue}if(l&&v||c&&g)return null;p?(o.minValue=-1/0,o.maxValue=1/0):f&&(a.minValue=-1/0,a.maxValue=1/0);const _=Math.max(o.minValue,a.minValue),w=Math.min(o.maxValue,a.maxValue);if(_>w)return null;n.values[s]=new kr({objectType:"range",minValue:_,maxValue:w})}return n}_findMatchingContingenciesContainingAny(e,i,r){return i.filter(n=>r.every(s=>{var l,c;const o=n.values[s],a=e.values[s];return o.objectType==="any"||a.objectType==="any"||((l=o.codedValue)==null?void 0:l.code)===((c=a.codedValue)==null?void 0:c.code)}))}_findMatchingContingenciesWithAnyHashMask(e,i){const r=RegExp(`${i}$`),n=[];for(const[s,o]of e){if(s===uy)break;r.test(s)&&n.push(...o)}return n}_generateJoinKey(e,i){var c;const r=Array.isArray(e)?new Set(e):e,n=Array.isArray(i)?new Set(i):i,s=r.size<n.size?r:n,o=s===r?n:r,a=new Set,l=new Set;for(const h of s)if(o.has(h)){const p=(c=this.layer)==null?void 0:c.getFieldDomain(h,{feature:this.feature});if(p==null)continue;switch(p.type){case"coded-value":a.add(h);break;case"range":l.add(h)}}return{codedValueFields:[...a],rangeFields:[...l]}}_hashContingency(e,i,r=!1){var o;if(i.length<1)return[sLe,!1];const n=[];let s=!1;for(const a of i){const l=e.values[a];if(l.objectType==="any"){if(r)return[uy,!0];s=!0,n.push(`${a}:.*`)}else l.objectType==="null"?n.push(`${a}:${oLe}`):n.push(`${a}:${(o=l.codedValue)==null?void 0:o.code}`)}return[n.sort().join("&"),s]}_compareObjectTypes(e,i){return{leftIsNull:e==="null",rightIsNull:i==="null",bothAreNull:e==="null"&&i==="null",leftIsAny:e==="any",rightIsAny:i==="any",bothAreAny:e==="any"&&i==="any",leftIsRange:e==="range",rightIsRange:i==="range"}}};function FB(t){return t.type==="field"||t.type==="group"||t.type==="relationship"||(U.getLogger(y5).warn("form-info::unsupported-element-type","Only element types 'field', 'group' and 'relationship' are supported",`Element ${t.label} has unsupported type '${t.type}'`),!1)}u([d()],et.prototype,"_expressionInfosLookup",null),u([d()],et.prototype,"_featureClone",void 0),u([d()],et.prototype,"activeRelationshipInput",null),u([d()],et.prototype,"_arcadeContextInfo",null),u([d({readOnly:!0})],et.prototype,"allFieldInputs",null),u([d()],et.prototype,"allRelationshipInputs",null),u([d()],et.prototype,"_layerFieldsByName",null),u([d()],et.prototype,"arcadeEditType",void 0),u([d()],et.prototype,"contingencyConstraintViolations",void 0),u([d()],et.prototype,"disabled",void 0),u([d()],et.prototype,"feature",null),u([d()],et.prototype,"fieldsWithContingentValues",null),u([d({type:zee})],et.prototype,"formTemplate",null),u([d()],et.prototype,"formDescription",null),u([d()],et.prototype,"formTitle",null),u([d()],et.prototype,"formHeaderVisible",null),u([d()],et.prototype,"inputs",void 0),u([d()],et.prototype,"inputFields",null),u([d()],et.prototype,"joinedContingentValues",null),u([d()],et.prototype,"layer",null),u([d()],et.prototype,"map",void 0),u([d()],et.prototype,"relatedRecordCallbacks",void 0),u([d()],et.prototype,"relationshipId",null),u([d()],et.prototype,"spatialReference",null),u([d()],et.prototype,"state",null),u([d()],et.prototype,"strict",void 0),u([d()],et.prototype,"submittable",null),u([d()],et.prototype,"updating",null),u([d()],et.prototype,"valid",null),u([d()],et.prototype,"view",null),u([d()],et.prototype,"getValues",null),u([d()],et.prototype,"submit",null),et=u([E(y5)],et);const Lie=et,aLe={heading:"esri-widget__heading"};function Uo({level:t,class:e,...i},r){const n=Rie(t);return x(`h${n}`,{...i,class:cj(aLe.heading,e),role:"heading","aria-level":String(n)},r)}function Rie(t){return xs(Math.ceil(t),1,6)}function fw(t,e=1){return Rie(t+e)}function wv(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:lLe(t);i.push(...r)}}function lLe(t){return t.split(",").map(e=>e.trim())}const DB="TT",i_="data-field-name",NB="latn",jB=t=>"valueAsDate"in t,Fie="esri.widgets.FeatureForm",VB=U.getLogger(Fie);let yi=class extends Bt{constructor(e,i){super(e,i),this._dateFieldInputMap=new Map,this._activeInputName="",this._activeNumberFieldEdit=null,this._fieldFocusNeeded=!1,this._fieldToInitialIncompatibleDomainValue=new Map,this._switchFieldsWithInitialIncompatibleValue=new Set,this._userUpdatedFieldInputNames=new Set,this._listObserverNode=null,this._listObserver=new IntersectionObserver(r=>{r.length&&r[0].isIntersecting&&this._incrementRelatedRecordPage()},{root:window.document}),this.groupDisplay="all",this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesFeature=null,this.messagesTemplates=null,this.viewModel=new Lie,this._onShowAllRelatedRecordsClick=r=>{const{feature:n,relatedRecordCallbacks:s}=this;n&&(s!=null&&s.showAllRelatedRecords)&&s.showAllRelatedRecords({parentFeature:n,relationshipId:r})},this._onAddRelatedRecordsClick=(r,n)=>{const{feature:s,relatedRecordCallbacks:o}=this;s&&(o!=null&&o.addRelatedRecord)&&o.addRelatedRecord({parentFeature:s,relatedLayer:n,relationshipId:r})},this._handleInputInput=r=>{this._commitInputValue(r.currentTarget)},this._handleFormKeyDown=this._handleFormKeyDown.bind(this),this._handleInputBlur=this._handleInputBlur.bind(this),this._handleInputFocus=this._handleInputFocus.bind(this),this._handleNumberInputMouseDown=this._handleNumberInputMouseDown.bind(this),this._handleInputKeyDown=this._handleInputKeyDown.bind(this),this._handleOptionChange=this._handleOptionChange.bind(this),this._handleGroupClick=this._handleGroupClick.bind(this),this._handleSubmit=this._handleSubmit.bind(this),this._afterInputCreateOrUpdate=this._afterInputCreateOrUpdate.bind(this),this._afterDateInputCreateOrUpdate=this._afterDateInputCreateOrUpdate.bind(this)}initialize(){this.addHandles([D(()=>this.feature,()=>{const e=this._getFocusableInput("forward");this._activeInputName=(e==null?void 0:e.name)||"",this._userUpdatedFieldInputNames.clear(),this._fieldToInitialIncompatibleDomainValue.clear(),this._switchFieldsWithInitialIncompatibleValue.clear(),this._dateFieldInputMap.clear(),this._fieldFocusNeeded=!0}),this.on("submit",e=>{if(e.invalid.length>0){const[i]=e.invalid;e.invalid.forEach(r=>this._userUpdatedFieldInputNames.add(r)),this._activeInputName=i,this._fieldFocusNeeded=!0,this.scheduleRender()}}),D(()=>[this.viewModel.activeRelationshipInput,this._listObserverNode],()=>this._onObserverChange())])}loadDependencies(){return ml({button:()=>O(()=>import("./calcite-button-ed004c4c.js"),["assets/calcite-button-ed004c4c.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js"]),combobox:()=>O(()=>import("./calcite-combobox-5b2b0560.js"),["assets/calcite-combobox-5b2b0560.js","assets/filter2-77b3a64c.js","assets/debounce-fe65f68f.js","assets/floating-ui-9672dd95.js","assets/form-5cdb3d6c.js","assets/guid-0d265cb2.js","assets/interactive-c63d961a.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/openCloseComponent-ad0ec359.js","assets/utils2-b00183d7.js","assets/conditionalSlot-3a9e5c5a.js","assets/icon-001847d5.js"]),"combobox-item":()=>O(()=>import("./calcite-combobox-item-6411ba25.js"),["assets/calcite-combobox-item-6411ba25.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/guid-0d265cb2.js","assets/interactive-c63d961a.js","assets/utils2-b00183d7.js","assets/icon-001847d5.js"]),"combobox-item-group":()=>O(()=>import("./calcite-combobox-item-group-09bc1b8e.js"),["assets/calcite-combobox-item-group-09bc1b8e.js","assets/guid-0d265cb2.js","assets/utils2-b00183d7.js"]),icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"]),"input-date-picker":()=>O(()=>import("./calcite-input-date-picker-d8664952.js"),["assets/calcite-input-date-picker-d8664952.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/openCloseComponent-ad0ec359.js","assets/focusTrapComponent-67860a68.js","assets/icon-001847d5.js","assets/guid-0d265cb2.js","assets/input-137231d2.js","assets/progress-a78ebc6f.js"]),"input-message":()=>O(()=>import("./calcite-input-message-d6040f29.js"),["assets/calcite-input-message-d6040f29.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"]),"input-time-picker":()=>O(()=>import("./calcite-input-time-picker-e31a7a93.js"),["assets/calcite-input-time-picker-e31a7a93.js","assets/form-5cdb3d6c.js","assets/guid-0d265cb2.js","assets/interactive-c63d961a.js","assets/key-bcbe3efc.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/observers-d8508c63.js","assets/focusTrapComponent-67860a68.js","assets/icon-001847d5.js","assets/openCloseComponent-ad0ec359.js","assets/action-7e59ed9f.js","assets/loader-6e51c251.js","assets/input-137231d2.js","assets/progress-a78ebc6f.js","assets/popover-26a7b513.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/FloatingArrow-3cfbf1c2.js"]),list:()=>O(()=>import("./calcite-list-fa432183.js"),["assets/calcite-list-fa432183.js","assets/interactive-c63d961a.js","assets/observers-d8508c63.js","assets/utils3-72f50212.js","assets/loadable-2a2d3905.js","assets/filter2-77b3a64c.js","assets/debounce-fe65f68f.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/icon-001847d5.js","assets/input-137231d2.js","assets/form-5cdb3d6c.js","assets/label2-5308b85f.js","assets/progress-a78ebc6f.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js","assets/scrim-6c563638.js"]),"list-item":()=>O(()=>import("./calcite-list-item-941d6637.js"),["assets/calcite-list-item-941d6637.js","assets/interactive-c63d961a.js","assets/utils3-72f50212.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/handle-db6dd90b.js"]),loader:()=>O(()=>import("./calcite-loader-420257c5.js"),["assets/calcite-loader-420257c5.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js"]),notice:()=>O(()=>import("./calcite-notice-e9826fd0.js"),["assets/calcite-notice-e9826fd0.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/openCloseComponent-ad0ec359.js","assets/icon-001847d5.js"]),progress:()=>O(()=>import("./calcite-progress-2d1e494a.js"),["assets/calcite-progress-2d1e494a.js","assets/progress-a78ebc6f.js"]),switch:()=>O(()=>import("./calcite-switch-5055a31e.js"),["assets/calcite-switch-5055a31e.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/key-bcbe3efc.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js"])})}destroy(){this._listObserverNode&&this._listObserver.unobserve(this._listObserverNode)}get _relatedRecordsEnabled(){const e=this.relatedRecordCallbacks;return!(!e||!(e.addRelatedRecord||e.editRelatedRecord||e.showAllRelatedRecords))}get disabled(){return this.viewModel.disabled}set disabled(e){this.viewModel.disabled=e}get feature(){return this.viewModel.feature}set feature(e){this.viewModel.feature=e}get formTemplate(){return this.viewModel.formTemplate}set formTemplate(e){this.viewModel.formTemplate=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get relatedRecordCallbacks(){return this.viewModel.relatedRecordCallbacks}set relatedRecordCallbacks(e){this.viewModel.relatedRecordCallbacks=e}get relationshipId(){return this.viewModel.relationshipId}set relationshipId(e){this.viewModel.relationshipId=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get strict(){return this.viewModel.strict}set strict(e){this.viewModel.strict=e}get view(){return Ha(VB,"view",{replacement:"Use FeatureForm.map instead.",version:"4.27"}),this.viewModel.view}set view(e){Ha(VB,"view",{replacement:"Use FeatureForm.map instead.",version:"4.27"}),this.viewModel.view=e}getValues(){return this.viewModel.getValues()}submit(){return this.viewModel.submit()}render(){const{state:e}=this.viewModel;return x("div",{class:this.classes(Fe.base,Fe.widget,Fe.panel)},e==="ready"?this._renderForm():null)}_renderForm(){return x("form",{class:Fe.form,novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},this._renderHeader(),this._renderInputs())}_renderHeader(){const e=this.viewModel;if(!e.formHeaderVisible)return;const i=e.formTitle!=null&&x(Uo,{key:"title",level:this.headingLevel},e.formTitle),r=e.formDescription!=null&&x("p",{class:Fe.description,key:"description"},e.formDescription);return x("div",{class:Fe.formHeader},i,r)}_renderInputs(){const{viewModel:e}=this;return e.activeRelationshipInput?this._renderActiveRelationshipInput(e.activeRelationshipInput):e.inputs.filter(Pi).filter(i=>i.visible).map((i,r)=>zh(i)?this._renderGroup(i,r):fh(i)?this._renderLabeledField(i):t0(i)?this._renderRelationshipInput(i):void 0)}_renderActiveRelationshipInput(e){return this._renderRelationshipInput(e)}_renderDescriptionOrEmpty(e,i){return e==null?null:x("div",{class:this.classes(Fe.description),id:i},e)}_renderGroup(e,i){const{formTemplate:r,disabled:n}=this,{description:s,inputs:o,label:a,state:l}=e,c=o.filter(b=>b.visible),h=this.viewModel.findField(this._activeInputName),p=!(!h||h.group!==e),f=`${this.id}_group_${i}`,y=`${this.id}_group-label_${i}`,g=`${this.id}_group-description_${i}`,v=this._renderDescriptionOrEmpty(s,g),_=this.groupDisplay==="sequential",w=_?p:l==="expanded",S=w?Fe.collapseIcon:Fe.expandIcon;return x("fieldset",{"aria-expanded":w.toString(),"aria-labelledby":y,"aria-describedby":s?g:"",class:this.classes(Fe.group,_?Fe.groupSequential:null,w?null:Fe.groupCollapsed,p?Fe.groupActive:null,n?Fe.inputDisabled:null),disabled:n,"data-group":e,id:f,key:i,onclick:this._handleGroupClick},x("button",{role:_?"presentation":void 0,class:Fe.groupHeader,type:"button",tabIndex:_?-1:0},x("div",{class:Fe.groupTitle},x(Uo,{class:Fe.groupLabel,id:y,level:r!=null&&r.title?fw(this.headingLevel):this.headingLevel},a),v),_?null:x("span",{class:this.classes(S,Fe.groupToggleIcon)})),c.map(b=>fh(b)?this._renderLabeledField(b):t0(b)?this._renderRelationshipInput(b):void 0))}_getFocusableInput(e,i){const r=this.viewModel.allFieldInputs,n=e==="forward"?r:r.slice().reverse();let s;if(!i||t0(i))s=0;else if(zh(i)){const o=i.inputs.find(fh);s=o?n.indexOf(o):0}else{let o;if(vC(i)&&i.group.state==="collapsed"){const a=i.group.inputs.filter(fh);o=e==="forward"?a[a.length-1]:a[0]}else o=i;s=n.indexOf(o)+1}for(let o=s;o<n.length;o++){const a=n[o];if(a.visible&&fh(a))return a}return null}_renderLabeledField(e){const{dataType:i,feature:r,label:n,layer:s}=e;return x("label",{key:`${s.id}-${r.uid}-${e.name}`,class:Fe.label},[n,i!=="unsupported"?this._renderFieldInput(e):this._renderUnsupportedField(e),this._renderAuxiliaryText(e)])}_renderFieldInput(e){const{dataType:i,domain:r,name:n,updating:s,value:o}=e,a=this.getCommonInputProps(e);if((r==null?void 0:r.type)==="coded-value"){if(Of(e.element,"switch")){const{element:c}=e;if(!(this._switchFieldsWithInitialIncompatibleValue.has(n)||o==null||c.input.onValue!==o&&c.input.offValue!==o))return this._renderSwitchFieldInput(e,a);this._switchFieldsWithInitialIncompatibleValue.add(n)}return e.inputType==="radio-buttons"?this._renderRadioButtonsFieldInput(e,r.codedValues.map(({code:c,name:h})=>({value:c,name:h})),a):this._renderSelectFieldInput(e,this._getFieldValueOptions(n,r),a)}if(e.inputType==="datetime-picker"||i==="date")return this._renderDateFieldInput(e,a);const l=i==="number"?x("input",{type:"number",...a,value:this._activeNumberFieldEdit!=null&&this._activeNumberFieldEdit.fieldName===e.name?this._activeNumberFieldEdit.value:`${a.value}`}):e.inputType==="text-area"?x("textarea",{...a}):x("input",{type:"text",...a});return s?x("div",{key:`${a.key}-input-updating-wrapper`,class:Fe.fieldInputWrapper},l,x("div",{class:Fe.fieldInputLoader},x("calcite-progress",{type:"indeterminate"}))):l}_renderDateFieldInput(e,i){const{dateDataType:r,includeTime:n,label:s,name:o,valid:a,value:l}=e,{readOnly:c,required:h}=i;if(r==="string")return this._renderUnsupportedField(e,Aee(e.field,i.value));const{date:p,time:f}=this._formatValueForDateInputs(l),y=i.max!=null?this._formatValueForDateInputs(i.max):void 0,g=i.min!=null?this._formatValueForDateInputs(i.min):void 0,v=(y==null?void 0:y.date)??void 0,_=(g==null?void 0:g.date)??void 0,w={afterCreate:this._afterDateInputCreate,afterUpdate:this._afterDateInputCreateOrUpdate,"aria-invalid":!a,label:s,numberingSystem:NB,overlayPositioning:"fixed",readOnly:c,required:h,tabIndex:0,[i_]:o};return x("div",{key:`${i.key}-date-time-container`,class:Fe.dateInputContainer},x("calcite-input-date-picker",{bind:this,...w,class:this.classes(i.class,Fe.inputDate),"data-date-part":"date",key:`${i.key}-date-input`,valueAsDate:p??void 0,maxAsDate:v,minAsDate:_,onCalciteInputDatePickerChange:S=>this._commitDateChanges(S.target),onblur:S=>this._commitDateChanges(S.target,!0)}),n?x("calcite-input-time-picker",{bind:this,...w,class:this.classes(i.class,Fe.inputTime),"data-date-part":"time",key:`${i.key}-time-input`,value:f??void 0,step:1,onCalciteInputTimePickerChange:S=>this._commitDateChanges(S.target),onfocus:S=>{S.target.calciteTimePickerEl&&(S.target.calciteTimePickerEl.showSecond=!0)},onblur:S=>this._commitDateChanges(S.target,!0)}):null)}_renderUnsupportedField(e,i){const r=this.getCommonInputProps(e);return x("input",{afterCreate:r.afterCreate,afterUpdate:r.afterUpdate,class:this.classes(Fe.input,Fe.fieldInput,Fe.inputDisabled),onfocus:r.onfocus,readOnly:!0,tabIndex:r.tabIndex,type:"text",value:i!=null?`${i}`:r.value,[i_]:r[i_]})}_renderSelectFieldInput(e,i,r){var _;const{element:n,required:s,value:o}=e,{messages:a,messagesTemplates:l}=this,c=i.map(w=>w.map(S=>x("calcite-combobox-item",{value:`${S.value}`,textLabel:S.name,key:`#${S.value}`,selected:o===S.value}))),[h,p]=c;this._registerIncompatibleValue(o,i.flat(),e,w=>{p.unshift(x("calcite-combobox-item",{value:`${w}`,textLabel:`${w}`,key:"incompatible-option",readOnly:!0}))});const f=p.length>0?[x("calcite-combobox-item-group",{key:"recommended",label:a.recommended},h),x("calcite-combobox-item-group",{key:"other",label:l.other},p)]:h,y=n==null,g=Of(n,"combo-box"),v=y||g&&((_=n.input)==null?void 0:_.showNoValueOption);if(!s&&v){const w="",S=g&&n.input.noValueOptionLabel||a.empty;f.unshift(x("calcite-combobox-item",{value:w,textLabel:a.empty,key:"empty-option"},S))}return x("calcite-combobox",{...r,selectionMode:"single",disabled:r.readOnly,allowCustomValues:!1,clearDisabled:!0,onCalciteComboboxChange:w=>this._handleOptionChange(w.target)},f)}_registerIncompatibleValue(e,i,r,n){const s=this._fieldToInitialIncompatibleDomainValue,o=s.has(r.name);(o||e!=null&&e!==""&&!i.some(a=>a.value===e))&&(o||s.set(r.name,e),n==null||n(e))}_renderRadioButtonsFieldInput(e,i,r){var f;const{element:n,name:s,required:o,value:a}=e,l=i.map(y=>this._renderRadioButton({key:y.name,label:y.name,name:s,value:y.value,selected:y.value===a,props:r}));this._registerIncompatibleValue(a,i,e);const c=n==null,h=Of(n,"radio-buttons"),p=c||h&&((f=n.input)==null?void 0:f.showNoValueOption);if(!o&&p){const y="",g=h&&n.input.noValueOptionLabel||this.messages.empty,v=a===y||a===null;l.unshift(this._renderRadioButton({key:"empty-option",label:g,name:s,value:y,selected:v,props:r}))}return x("div",{key:`${r.key}-radio`,class:Fe.inputRadioGroup},l)}_renderSwitchFieldInput(e,i){const{value:r}=e,n=!!Of(e.element,"switch")&&r===e.element.input.onValue;return x("calcite-switch",{...i,class:Fe.inputSwitch,onCalciteSwitchChange:s=>this._commitInputValue(s.target),checked:n,disabled:i.readOnly})}_renderRadioButton({key:e,name:i,value:r,selected:n,label:s,props:o}){return x("label",{key:e,class:Fe.inputRadioLabel},x("input",{...o,class:Fe.inputRadio,name:i,type:"radio",value:r,checked:n,disabled:o.readOnly,onchange:a=>this._commitInputValue(a.target)}),s)}_renderAuxiliaryText(e){const i=this._userUpdatedFieldInputNames.has(e.name)&&!e.valid?RIe(e,this.messages):this.viewModel.contingencyConstraintViolations.get(e.name)!=null?this.messages.validationErrors.valuesIncompatible:e.valueExpressionExecutor!=null&&e.valueExpressionExecutor.stale?this.messages.valueExpressionError:null;return i!=null?x("calcite-input-message",{status:"invalid",icon:!0},i):this._renderDescriptionOrEmpty(e.description)}_renderShowAllRelatedRecordsListItem(e){const{featureCount:i,relationshipId:r,showAllActionVisible:n}=e,{relatedRecordCallbacks:s}=this;if(!n||!(s!=null&&s.showAllRelatedRecords))return;const o=this.messages;return x("calcite-list-item",{description:er(o.totalCount,{count:i}),label:o.showAll,value:!0,onCalciteListItemSelect:()=>this._onShowAllRelatedRecordsClick(r)},x("calcite-icon",{slot:"content-end",scale:"s",icon:"list"}))}_renderAddRelatedRecordButton(e){const{canAddRelatedFeature:i,relationshipId:r,relatedLayer:n}=e,{relatedRecordCallbacks:s}=this;if(i&&(s!=null&&s.addRelatedRecord)&&n)return x("calcite-button",{alignment:"center",appearance:"outline-fill",class:Fe.centeredButton,disabled:e.updating,iconStart:"plus",key:`${r}-add-button`,round:!0,scale:"s",width:"half",onclick:()=>this._onAddRelatedRecordsClick(r,n)},this.messages.addRecord)}_renderRelatedRecordListItem(e,i){const{feature:r,description:n,title:s}=e,{feature:o,relatedRecordCallbacks:a}=this,l=()=>{a!=null&&a.editRelatedRecord&&o&&a.editRelatedRecord({parentFeature:o,relationshipId:i,relatedFeature:r})};return x("calcite-list-item",{bind:this,description:n,label:s,key:`${i}-${r.uid}`,value:s,onclick:l},x("calcite-icon",{slot:"content-start",scale:"m",icon:FIe(r)}),x("calcite-icon",{slot:"content-end",scale:"s",icon:"chevron-right"}))}_renderRelationshipInput(e){if(!this._relatedRecordsEnabled||!e.editable)return;const{featureCount:i,relationshipId:r,showAllEnabled:n}=e,s=n?null:this._renderDescriptionOrEmpty(e.description),o=i>0?this._renderRelatedRecordsList(e):e.loaded?this._renderNoRelatedRecordsNotice():void 0;return x("label",{class:this.classes(Fe.label,Fe.relationshipLabel),key:`relationship-${r}-container`},x("div",null,this._renderRelatedRecordsHeaderContainer(e),s,o),this._renderAddRelatedRecordButton(e))}_renderRelatedRecordsHeaderContainer(e){var r;const i=e.updating||!e.loaded;return x("div",{class:Fe.relatedRecordsHeader,key:`relationship-${e.relationshipId}-header`},x("span",null,e.label),i?x("calcite-loader",{label:(r=this.messagesCommon)==null?void 0:r.loading,inline:!0,key:"loader",scale:"s",type:"indeterminate"}):void 0)}_renderRelatedRecordsList(e){const{relationshipId:i}=e;return x("calcite-list",{class:Fe.relatedRecordsList},e.relatedFeatureInfos.map(r=>this._renderRelatedRecordListItem(r,i)),this._renderShowAllRelatedRecordsListItem(e),this._renderObserverNode())}_renderNoRelatedRecordsNotice(){return x("calcite-notice",{open:!0,scale:"s",kind:"brand",icon:"information",width:"full"},x("div",{slot:"message"},this.messagesFeature.noRelatedFeatures))}_renderObserverNode(){var e;if((e=this.viewModel.activeRelationshipInput)!=null&&e.showAllEnabled)return x("div",{key:"feature-observer",class:Fe.listObserver,bind:this,afterCreate:this._afterListObserverCreated,afterRemoved:this._afterListObserverRemoved})}getCommonInputProps(e){const{disabled:i,groupDisplay:r}=this,{dataType:n,editable:s,group:o,hint:a,label:l,maxLength:c,minLength:h,name:p,required:f,valid:y,value:g}=e,v=this._userUpdatedFieldInputNames.has(p),_=!s||i,w=r==="all"&&o!=null&&o.state==="collapsed";return{afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":y?"false":"true",class:this.classes(Fe.input,Fe.fieldInput,_?Fe.inputDisabled:null,v&&!y?Fe.inputInvalid:null),key:p,label:l,minlength:h>-1?`${h}`:"",maxlength:c>-1?`${c}`:"",...e.range,readOnly:_,value:g==null?"":`${g}`,[i_]:p,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:n==="number"?this._handleNumberInputMouseDown:void 0,placeholder:n==="number"||n==="text"?a??void 0:"",required:f,tabIndex:w?-1:0}}_handleNumberInputMouseDown({target:e}){e.focus(),this.scheduleRender()}_getFieldValueOptions(e,i){const r=i.codedValues.map(({code:s,name:o})=>({value:s,name:o})),n=this.viewModel.fieldsWithContingentValues.has(e)?this._getContingentValueOptions(e):[];if(n.length>0){const s=new Set(n.map(o=>o.value));return[n,r.filter(o=>!s.has(o.value))]}return[r,[]]}_getContingentValueOptions(e){const i={};for(const s of this.viewModel.allFieldInputs){const{name:o,value:a}=s;a!=null&&o!==e&&this.viewModel.fieldsWithContingentValues.has(o)&&(i[o]=a)}const r=this.viewModel.joinedContingentValues.slice(),n=new Map;for(const s of r){const o=s.values[e];if(o==null||o.objectType!=="code"&&o.objectType!=="null")continue;const{code:a,name:l}=o.codedValue&&o.objectType!=="null"?o.codedValue:{code:"",name:this.messages.empty};n.has(a)||Object.entries(i).every(([c,h])=>!s.values.hasOwnProperty(c)||this._valueIsValidContingentValue(h,s.values[c]))&&n.set(a,{name:l,value:a})}return[...n.values()]}_getFieldInputFromHTMLElement(e){return this.viewModel.findField(e.getAttribute(i_))}async _afterDateInputCreate(e){this._afterDateInputCreateOrUpdate(e)}_afterDateInputCreateOrUpdate(e){const{name:i}=this._getFieldInputFromHTMLElement(e),r=this._dateFieldInputMap.get(i),n=jB(e);r!=null?n?r.date=e:r.time=e:this._dateFieldInputMap.set(i,{[n?"date":"time"]:e}),this._afterInputCreateOrUpdate(e)}_afterInputCreateOrUpdate(e){const{viewModel:i}=this,r=this._getFieldInputFromHTMLElement(e),n=i.findField(this._activeInputName),s=this._fieldToInitialIncompatibleDomainValue.get(r.name)===r.value;this._fieldFocusNeeded&&n===r&&(r.inputType!=="radio-buttons"||s||e.checked)&&(this._fieldFocusNeeded=!1,vC(r)&&(r.group.state="expanded"),e.focus())}_handleInputFocus(e){const i=e.target,r=this._getFieldInputFromHTMLElement(i);this._activeInputName=r.name,cU(r)&&(this._activeNumberFieldEdit={fieldName:r.name,input:i,value:i.value})}_handleInputBlur(e){const i=e.target,r=this._getFieldInputFromHTMLElement(i);r.dataType==="number"&&this._activeNumberFieldEdit!=null&&(this._activeNumberFieldEdit.input.value=`${r.value}`,this._activeNumberFieldEdit=null),this._commitInputValue(i),this.scheduleRender()}_commitDateChanges(e,i=!1){const{name:r}=this._getFieldInputFromHTMLElement(e);if(!this._dateFieldInputMap.has(r))return;const n=this._dateFieldInputMap.get(r);if(!n||!n.date)return;const s=this._getFieldValueFromDateInput(e),o=this._getFieldValueFromDateInputs(n.date,n.time);this.viewModel.getValue(r)!==o&&(s!==null&&o!==null?this._updateFieldValue(r,o):i&&this._updateFieldValue(r,null))}_commitInputValue(e){const i=this._getFieldInputFromHTMLElement(e);this._activeNumberFieldEdit!=null&&cU(i)&&(this._activeNumberFieldEdit.value=e.value),this._updateFieldValue(i.name,this._parseValue(e))}_handleInputKeyDown(e){const{key:i,altKey:r,ctrlKey:n,metaKey:s}=e,o=this._getFieldInputFromHTMLElement(e.target);if(i==="Enter")vC(o)&&o.group.state==="collapsed"&&(o.group.state="expanded");else{const{type:a}=o.field,l=a==="single"||a==="double";if((a==="integer"||a==="small-integer"||l)&&!r&&!n&&!s&&i.length===1){const c=Number(i),h=["-","+"],p=["e","."],f=l?[...h,...p]:h;isNaN(c)&&!f.includes(i)&&e.preventDefault()}}}_updateFieldValue(e,i){if(this.viewModel.setValue(e,i),this._userUpdatedFieldInputNames.add(e),this.viewModel.fieldsWithContingentValues.has(e)){const r=Object.fromEntries(Object.entries(this.getValues()).filter(([n,s])=>s!=null));this.viewModel.validateContingencyConstraints(r)}}_parseValue(e){const i=this._getFieldInputFromHTMLElement(e),r=e.value;if(Of(i.element,"switch")&&e.tagName!=="CALCITE-COMBOBOX")return e.checked?i.element.input.onValue:i.element.input.offValue;if(i.inputType==="radio-buttons"&&e.type==="radio"&&!e.checked)return i.value;const{dataType:n}=i;return n==="number"?r?parseFloat(r):null:r}_handleOptionChange(e){this._commitInputValue(e),this.scheduleRender()}_handleGroupClick(e){var o;const i=e.currentTarget["data-group"],r=i.state==="expanded",n=this.groupDisplay==="sequential",s=`.${Fe.groupHeader}`;if(!(r&&!e.target.closest(s))){if(this._activeInputName=((o=this._getFocusableInput("forward",i))==null?void 0:o.name)||"",n){const a=e.target.closest(s);if(r&&!a)return;this.viewModel.inputs.forEach(l=>{zh(l)&&l!==i&&(l.state="collapsed")})}i.state=r?"collapsed":"expanded",this._fieldFocusNeeded=n,this.scheduleRender()}}_handleSubmit(e){e.preventDefault()}_handleFormKeyDown(e){e.key==="Enter"&&this.viewModel.submit()}_getDefaultLocaleOptions(){return{locale:Yr(),numberingSystem:NB}}_getFieldValueFromDateInputs(e,i){const r=this._getDateTimeFromInput(e),n=this._getDateTimeFromInput(i);if(!r&&!n)return null;const s=this._getFieldInputFromHTMLElement(e).range,o=Date.now(),a=s.max!=null&&s.max<o?s.max:o,l=$e.fromMillis(a,this._getDefaultLocaleOptions()),c=r||l,{year:h,month:p,day:f}=c,{hour:y,minute:g,second:v}=n||l,_=c.set({year:h,month:p,day:f,hour:y,minute:g,second:v});return _.isValid?_.toMillis():null}_getDateTimeFromInput(e){if(!e)return null;let i=null;if(jB(e)){const r=e.valueAsDate;if(!r||Array.isArray(r))return null;i=$e.fromJSDate(r)}else{if(!e.value)return null;i=$e.fromFormat(e.value,DB,this._getDefaultLocaleOptions())}return i??null}_getFieldValueFromDateInput(e){return this._dateTimeToFieldValue(this._getDateTimeFromInput(e))}_dateTimeToFieldValue(e){return e!=null&&e.isValid?e.toMillis():null}_dateTimeFromFieldValue(e){return e===null?null:$e.fromMillis(e,this._getDefaultLocaleOptions())}_formatValueForDateInputs(e){if(e==null||isNaN(e))return{date:null,time:null};const i=this._dateTimeFromFieldValue(e);return i?{date:i.toJSDate(),time:i.toFormat(DB,this._getDefaultLocaleOptions())}:{date:null,time:null}}_valueIsValidContingentValue(e,i){var r;switch(i.objectType){case"any":return!0;case"null":return e==null;case"code":return e===((r=i.codedValue)==null?void 0:r.code);case"range":return e!=null&&i.minValue!=null&&i.maxValue!=null&&+e>=i.minValue&&+e<=i.maxValue;default:return i.objectType,!1}}_afterListObserverCreated(e){this.viewModel.activeRelationshipInput&&(this._listObserverNode=e)}_afterListObserverRemoved(){this._listObserverNode=null}async _onObserverChange(){this._listObserverNode&&this._listObserver.unobserve(this._listObserverNode);const e=this.viewModel.activeRelationshipInput;if(!e)return;const{showAllEnabled:i,updating:r}=e;this._listObserverNode&&!r&&i&&this._listObserver.observe(this._listObserverNode)}_incrementRelatedRecordPage(){const e=this.viewModel.activeRelationshipInput;e==null||e.incrementPage()}};u([d()],yi.prototype,"_listObserverNode",void 0),u([d()],yi.prototype,"_relatedRecordsEnabled",null),u([d()],yi.prototype,"disabled",null),u([d()],yi.prototype,"feature",null),u([d()],yi.prototype,"formTemplate",null),u([d()],yi.prototype,"groupDisplay",void 0),u([d()],yi.prototype,"headingLevel",void 0),u([d()],yi.prototype,"label",null),u([d()],yi.prototype,"layer",null),u([d()],yi.prototype,"map",null),u([d(),rt("esri/widgets/FeatureForm/t9n/FeatureForm")],yi.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],yi.prototype,"messagesCommon",void 0),u([d(),rt("esri/widgets/Feature/t9n/Feature")],yi.prototype,"messagesFeature",void 0),u([d(),rt("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],yi.prototype,"messagesTemplates",void 0),u([d()],yi.prototype,"relatedRecordCallbacks",null),u([d()],yi.prototype,"relationshipId",null),u([d()],yi.prototype,"spatialReference",null),u([d()],yi.prototype,"strict",null),u([d()],yi.prototype,"view",null),u([d(),wv(["value-change","submit"])],yi.prototype,"viewModel",void 0),yi=u([E(Fie)],yi);const uLe=yi;function cLe(t){return typeof t=="function"}function AHe(t,e,i,r){return cLe(t)?t(e,i,r):t}function OHe(t){return[t.r,t.g,t.b,t.a]}const dLe=` /-,
`;function zB(t){let e=t.length;for(;e--;)if(!dLe.includes(t.charAt(e)))return!1;return!0}function hLe(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.substr(r,n-r);i.push([s,null,zB(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.substr(r,n-r)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length-1){const s=t.substr(r);i.push([s,null,zB(s)])}return i}function pLe(t,e,i){let r="",n=null;for(const s of e){const[o,a,l]=s;if(o)l?n=o:(n&&(r+=n,n=null),r+=o);else{const c=t.attributes[a];c&&(n&&(r+=n,n=null),r+=c)}}return fLe(r,i)}function LHe(t,e,i){const r=hLe(e,t);return n=>pLe(n,r,i)}function fLe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function RHe(t,e,i,r,n,s,o=!0){const a=e/n,l=i/s,c=Math.ceil(a/2),h=Math.ceil(l/2);for(let p=0;p<s;p++)for(let f=0;f<n;f++){const y=4*(f+(o?s-p-1:p)*n);let g=0,v=0,_=0,w=0,S=0,b=0,$=0;const T=(p+.5)*l;for(let I=Math.floor(p*l);I<(p+1)*l;I++){const A=Math.abs(T-(I+.5))/h,L=(f+.5)*a,z=A*A;for(let j=Math.floor(f*a);j<(f+1)*a;j++){let H=Math.abs(L-(j+.5))/c;const J=Math.sqrt(z+H*H);J>=-1&&J<=1&&(g=2*J*J*J-3*J*J+1,g>0&&(H=4*(j+I*e),$+=g*t[H+3],_+=g,t[H+3]<255&&(g=g*t[H+3]/250),w+=g*t[H],S+=g*t[H+1],b+=g*t[H+2],v+=g))}}r[y]=w/v,r[y+1]=S/v,r[y+2]=b/v,r[y+3]=$/_}}function Die(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function Nie(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function ZF(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function YF(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function mLe(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function kM(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const FHe=(t,e=0)=>t==null||isNaN(t)?e:t,DHe=t=>t.tintColor?Die(t.tintColor):{r:255,g:255,b:255,a:1},NHe=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function jHe(){return O(()=>import("./geometryEngineJSON-da6b480c.js"),["assets/geometryEngineJSON-da6b480c.js","assets/geometryEngineBase-9014f2fe.js","assets/geometryEngineJSON-bcbfbb0e.js","assets/json-48e3ea08.js"])}function VHe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function zHe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function UHe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function BHe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function UB(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=UB(e);if(i!=null)return i}break;case"CIMTextSymbol":return UB(t.symbol);case"CIMSolidFill":return t.color}}function BB(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=BB(i);if(r!=null)return r}break}case"CIMTextSymbol":return BB(t.symbol);case"CIMSolidStroke":return t.color}}function GB(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=GB(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return GB(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function GHe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function HHe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function qHe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const WHe=t=>t.includes("data:image/svg+xml");function ZHe(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function jie(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(i&&t.effects)for(const n of t.effects)vLe(n,e);if(t.symbolLayers)for(const n of t.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":yLe(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":jie(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}}else t.height!=null&&(t.height*=e)}function yLe(t,e,i){if(t&&(t.markerPlacement&&gLe(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||jie(r.symbol,e,!0,i)}function gLe(t,e){switch(kM(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function vLe(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function Vie(t){const e=[];return JF(Nie(t),e),e.length?new ae(Die(e[0])):null}function JF(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(YF(s)||ZF(s)&&s.markerPlacement&&kM(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&HB(e,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach(o=>{JF(o.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":HB(e,s.color);break;case"CIMHatchFill":JF(s.lineSymbol,e)}}}function HB(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function YHe(t,e,i){e instanceof ae||(e=new ae(e));const r=Nie(t);r&&KF(r,e,i)}function KF(t,e,i){var s;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked)continue;if(n){if(i){const{layersToColor:l}=i;if((YF(o)||ZF(o)&&o.markerPlacement&&kM(o.markerPlacement))&&l==="fill"||mLe(o)&&l==="outline")continue}else if(YF(o)||ZF(o)&&o.markerPlacement&&kM(o.markerPlacement))continue}const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(l=>{KF(l.symbol,e,i)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMHatchFill":KF(o.lineSymbol,e,i)}}}const zie="picture-fill",Uie="simple-fill",_Le="simple-line",Bie="simple-marker",wLe="text",bLe="cim",BC=new mte(1e3);function JHe(t){const e=t.style;let i=null;if(t)switch(t.type){case Bie:e!=="cross"&&e!=="x"&&(i=t.color);break;case Uie:e==="solid"?i=t.color:e!=="none"&&(i={type:"pattern",x:0,y:0,src:qe(`esri/symbols/patterns/${e}.png`),width:5,height:5});break;case zie:i={type:"pattern",src:t.url,width:Wr(t.width)*t.xscale,height:Wr(t.height)*t.yscale,x:Wr(t.xoffset),y:Wr(t.yoffset)};break;case wLe:i=t.color;break;case bLe:i=Vie(t)}return i}function SLe(t,e){const i=t+"-"+e;return BC.get(i)!==void 0?Promise.resolve(BC.get(i)):tt(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const c=a.toDataURL();return BC.put(i,c),c})}function g5(t){if(!t)return null;let e=null;switch(t.type){case Uie:case zie:case Bie:e=g5(t.outline);break;case _Le:{const i=Wr(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:v5(t.style),width:i,cap:t.cap,join:t.join==="miter"?Wr(t.miterLimit):t.join});break}default:e=null}return e}const v5=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),xLe=new ae([128,128,128]);var wr;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(wr||(wr={}));const QF={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function $Le(t,e,i){const r=wr.size;let n=r,s=r;t<1?n*=.75:t>1&&(s*=1.25);const o=0,a=0;let l=r,c=r;return e&&i&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[i?n-.5*l:a,e?s-.5*c:c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"Z",values:[]}]}]}function ELe(t){const e=wr.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function MLe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function TLe(t,e){let i=e?wr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=wr.size?i-=.5*n:i-=n;const s=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function ILe(t,e){let i=e?wr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=wr.size?i-=.5*n:i-=n;const s=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:o}]}function kLe(t,e){let i=e?wr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=wr.size?i-=.5*n:i-=n;const s=.15*i,o=r-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function CLe(t){let e=t;const i=t,r=6;e<wr.size?e-=.5*r:e-=r;const n=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:n}]}function PLe(t){let e=t;const i=t,r=4;e<wr.size?e-=.5*r:e-=r;const n=0,s=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function ALe(t){const e=t,i=2;let r=t;r<wr.size?r-=.5*i:r-=i;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[s,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function Bh(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function KHe(t,e){if(t==null)return new ae;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new ae(t);return new ae([Bh(i.r,e),Bh(i.g,e),Bh(i.b,e),i.a])}function OLe(t){return"r"in t&&"g"in t&&"b"in t}function Gie(t){return"h"in t&&"s"in t&&"v"in t}function Hie(t){return"l"in t&&"a"in t&&"b"in t}function qie(t){return"l"in t&&"c"in t&&"h"in t}function LLe(t){return"x"in t&&"y"in t&&"z"in t}const RLe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],FLe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Wie(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=t[r][n]*e[n];i.push(a)}return i}function Zie(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=Wie(RLe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function _5(t){const e=Wie(FLe,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function Yie(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Jie(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function DLe(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function NLe(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function jLe(t){return Yie(Zie(t))}function VLe(t){return _5(Jie(t))}function zLe(t){return DLe(Yie(Zie(t)))}function ULe(t){return _5(Jie(NLe(t)))}function BLe(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let o=n,a=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function GLe(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function dS(t){return OLe(t)?t:qie(t)?ULe(t):Hie(t)?VLe(t):LLe(t)?_5(t):Gie(t)?GLe(t):t}function w5(t){return Gie(t)?t:BLe(dS(t))}function QHe(t){return Hie(t)?t:jLe(dS(t))}function XHe(t){return qie(t)?t:zLe(dS(t))}const HLe="http://www.w3.org/2000/svg";let qLe=0,WLe=0;const qB=V("android"),ZLe=V("chrome")||qB&&qB>=4?"auto":"optimizeLegibility",YLe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},JLe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let di={},gt={};const WB={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},KLe=Math.PI;let QLe=1;function Pg(t,e){const i=t*(KLe/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function Kie(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function Qie(t,e,i,r){if(t){if(t.type==="circle")return x("circle",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if(t.type==="ellipse")return x("ellipse",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if(t.type==="rect")return x("rect",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if(t.type==="image")return x("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if(t.type==="path"){const n=typeof t.path!="string"?Kie(t.path):t.path;return x("path",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:n})}if(t.type==="text")return W0(r),x("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":ZLe,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:t.x,y:t.y},t.text)}return null}function Xie(t){const e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){const i="patternId-"+ ++qLe;e.fill=`url(#${i})`,e.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){const i="linearGradientId-"+ ++WLe;e.fill=`url(#${i})`,e.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(r=>({offset:r.offset,color:r.color&&new ae(r.color).toString()}))}}else if(t){const i=new ae(t);e.fill=i.toString()}}return e}function ere(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new ae(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashArray&&(e.dashOffset=t.dashoffset),t.style)){let i=null;if(t.style in WB&&(i=WB[t.style]),Array.isArray(i)){i=i.slice(0);const r=t.width??0;for(let n=0;n<i.length;++n)i[n]*=r;if(t.cap!=="butt"){for(let n=0;n<i.length;n+=2)i[n]-=r,i[n]<1&&(i[n]=1);for(let n=1;n<i.length;n+=2)i[n]+=r}i=i.join(",")}e.dashArray=i}return e}function tre(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",W0(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function XLe(t){const{pattern:e,linearGradient:i}=t;if(e)return x("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},x("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(i){const r=i.stops.map((n,s)=>x("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return x("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},r)}return null}function eRe(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:o,font:a}=r,l=Xie(s),c=ere(o),h=n.type==="text"?tre(n,a):null,p=Qie(n,l.fill,c,h);p&&i.push(p)}return x("mask",{id:e,maskUnits:"userSpaceOnUse"},x("g",null,i))}function ZB(t,e,i){return D0(t,JT(t),[e,i])}function YB(t,e,i,r,n){return KT(t,JT(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function tRe(t,e,i,r){const n=e%360*Math.PI/180;K1(t,JT(t),n);const s=Math.cos(n),o=Math.sin(n),a=t[4],l=t[5];return t[4]=a*s-l*o+r*o-i*s+i,t[5]=l*s+a*o-i*o-r*s+r,t}function Tn(t,e){di&&"left"in di?(di.left!=null&&di.left>t&&(di.left=t),(di.right==null||di.right<t)&&(di.right=t),(di.top==null||di.top>e)&&(di.top=e),(di.bottom==null||di.bottom<e)&&(di.bottom=e)):di={left:t,bottom:e,right:t,top:e}}function JB(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Tn(e[r],e[r+1]);gt.x=e[i-2],gt.y=e[i-1];break;case"H":for(r=0;r<i;++r)Tn(e[r],gt.y);gt.x=e[i-1];break;case"V":for(r=0;r<i;++r)Tn(gt.x,e[r]);gt.y=e[i-1];break;case"m":{let n=0;for(("x"in gt)||(Tn(gt.x=e[0],gt.y=e[1]),n=2),r=n;r<i;r+=2)Tn(gt.x+=e[r],gt.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Tn(gt.x+=e[r],gt.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)Tn(gt.x+=e[r],gt.y);break;case"v":for(r=0;r<i;++r)Tn(gt.x,gt.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)Tn(gt.x+e[r],gt.y+e[r+1]),Tn(gt.x+e[r+2],gt.y+e[r+3]),Tn(gt.x+=e[r+4],gt.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Tn(gt.x+e[r],gt.y+e[r+1]),Tn(gt.x+=e[r+2],gt.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)Tn(e[r+5],e[r+6]);gt.x=e[i-2],gt.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)Tn(gt.x+=e[r+5],gt.y+=e[r+6])}}function KB(t,e,i){const r=YLe[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),JB(n)):(n={action:t,args:[]},i.push(n),JB(n)))}function iRe(t){const e=(typeof t.path!="string"?Kie(t.path):t.path).match(JLe),i=[];if(di={},gt={},!e)return null;let r="",n=[];const s=e.length;for(let a=0;a<s;++a){const l=e[a],c=parseFloat(l);isNaN(c)?(r&&KB(r,n,i),n=[],r=l):n.push(c)}KB(r,n,i);const o={x:0,y:0,width:0,height:0};return di&&"left"in di&&(o.x=di.left,o.y=di.top,o.width=di.right-di.left,o.height=di.bottom-di.top),o}function rRe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=Hr(iRe(t));e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function nRe(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function sRe(t,e,i,r,n,s,o,a,l){let c=(o&&s?Pg(s,e):e)/2,h=(o&&s?Pg(s,i):i)/2;if(l){const S=l[0],b=l[1];c=(o&&s?Pg(s,S):S)/2,h=(o&&s?Pg(s,b):b)/2}const p=t.width+r,f=t.height+r,y=aM(),g=aM();let v=!1;if(n&&p!==0&&f!==0){const S=e!==i?e/i:p/f,b=e>i?e:i;let $=1,T=1;isNaN(b)||(S>1?($=b/p,T=b/S/f):(T=b/f,$=b*S/p)),Pf(g,g,YB(y,$,T,c,h)),v=!0}const _=t.x+(p-r)/2,w=t.y+(f-r)/2;if(Pf(g,g,ZB(y,c-_,h-w)),!v&&(p>e||f>i)){const S=p/e>f/i,b=(S?e:i)/(S?p:f);Pf(g,g,YB(y,b,b,_,w))}return s&&Pf(g,g,tRe(y,s,_,w)),a&&Pf(g,g,ZB(y,a[0],a[1])),`matrix(${g[0]},${g[1]},${g[2]},${g[3]},${g[4]},${g[5]})`}function oRe(t,e,i){const r=t==null?void 0:t.effects.find(c=>c.type==="bloom");if(!r)return null;const{strength:n,radius:s}=r,o=n>0?s:0,a=(n+o)*e,l=4*n+1;return x("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},x("feMorphology",{operator:"dilate",radius:(n+.5*o)*(5**(e/100)*(.4+e/100)),in:"SourceGraphic",result:"dilate"}),x("feGaussianBlur",{in:"dilate",stdDeviation:a/25,result:"blur"}),x("feGaussianBlur",{in:"blur",stdDeviation:a/50,result:"intensityBlur"}),x("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},x("feFuncR",{type:"linear",slope:l}),x("feFuncG",{type:"linear",slope:l}),x("feFuncB",{type:"linear",slope:l})),x("feMerge",null,x("feMergeNode",{in:"intensityBlur"}),x("feMergeNode",{in:"intensityBrightness"}),x("feGaussianBlur",{stdDeviation:n/10})))}function aRe(t,e,i,r={}){var c;const n=[],s=[],o=++QLe,a=oRe(r.effectView,e,o);let l=null;if(a){const h=(c=r.effectView)==null?void 0:c.effects.find(g=>g.type==="bloom"),p=(h.strength?h.strength+h.radius/2:0)/3,f=e+e*p,y=i+i*p;l=[Math.max(f,10),Math.max(y,10)]}for(let h=0;h<t.length;h++){const p=t[h],f=[],y=[];let g=0,v=0,_=0;for(const b of p){const{shape:$,fill:T,stroke:I,font:A,offset:L}=b;r.ignoreStrokeWidth||$.type==="text"||(g+=I&&I.width||0);const z=Xie(T),j=ere(I),H=$.type==="text"?tre($,A):null;n.push(XLe(z)),f.push(Qie($,z.fill,j,H)),y.push(rRe($)),L&&(v+=L[0],_+=L[1])}const w=sRe(Hr(nRe(y)),e,i,g,r.scale??!1,r.rotation,r.useRotationSize??!1,[v,_],l);let S=null;if(r.masking){const b=`mask-${h}`,$=r.masking[h];n.push(eRe($,b)),S=`url(#${b})`}s.push(S?x("g",{mask:S},x("g",{transform:w},f)):x("g",{transform:w},f))}return r.useRotationSize&&r.rotation&&(e=Pg(r.rotation,e),i=Pg(r.rotation,i)),a&&(W0(l),e=l[0],i=l[1]),x("svg",{xmlns:HLe,width:e,height:i,style:"display: block;","aria-labelledby":r.ariaLabel,role:"img",focusable:!1},a,x("defs",null,n),a?x("g",{filter:`url(#bloom${o})`},s):s)}const lRe=new ae("white");function uRe(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function eqe(t){var e;if(!t)return 0;if(Kh(t)){const i=uRe(t);return i??0}return Js((e=g5(t))==null?void 0:e.width)}function cRe(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function dRe(t){return Hr(t.resource).href}function cy(t,e){if(!t)return null;let i=null;return Kh(t)?i=hRe(t):jT(t)&&(i=t.type==="cim"?Vie(t):t.color?new ae(t.color):null),i?f1(i,e):null}function hRe(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new ae(i):null}function f1(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new ae(i)}function pRe(t,e,i){const r=t.symbolLayers;if(!r)return;const n=s=>f1(e=e??s??(i!=null?lRe:null),i);r.forEach(s=>{var o;if(s.type!=="object"||!((o=s.resource)!=null&&o.href)||e)if(s.type==="water")s.color=n(s.color);else{const a=s.material!=null?s.material.color:null,l=n(a);s.material==null?s.material=new Ks({color:l}):s.material.color=l,i!=null&&"outline"in s&&s.outline!=null&&s.outline.color!=null&&(s.outline.color=f1(s.outline.color,i))}})}function fRe(t,e,i){(e=e??t.color)&&(t.color=f1(e,i)),i!=null&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=f1(t.outline.color,i))}function GC(t,e,i){t&&(e||i!=null)&&(e&&(e=new ae(e)),Kh(t)?pRe(t,e,i):jT(t)&&fRe(t,e,i))}async function mRe(t,e){const i=t.symbolLayers;i&&await b1e(i,async r=>yRe(r,e))}async function yRe(t,e){switch(t.type){case"extrude":vRe(t,e);break;case"icon":case"line":case"text":gRe(t,e);break;case"path":wRe(t,e);break;case"object":await _Re(t,e)}}function gRe(t,e){const i=ire(e);i!=null&&(t.size=i)}function ire(t){for(const e of t)if(typeof e=="number")return e;return null}function vRe(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function _Re(t,e){const{resourceSize:i,symbolSize:r}=await bRe(t),n=rre(e,i,r);t.width=rb(e[0],r[0],i[0],n),t.depth=rb(e[1],r[1],i[1],n),t.height=rb(e[2],r[2],i[2],n)}function wRe(t,e){const i=rre(e,DW,[t.width,void 0,t.height]);t.width=rb(e[0],t.width,1,i),t.height=rb(e[2],t.height,1,i)}function rre(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return 1}async function bRe(t){const{computeObjectLayerResourceSize:e}=await O(()=>import("./symbolLayerUtils-86d61768.js"),[]),i=await e(t,10),{width:r,height:n,depth:s}=t,o=[r,s,n];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function rb(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function SRe(t,e){const i=ire(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function xRe(t,e){if(t&&e)return Kh(t)?mRe(t,e):void(jT(t)&&SRe(t,e))}function $Re(t,e,i){if(t&&e!=null)if(Kh(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=e;break;case"roll":n.roll=e;break;default:n.heading=e}})}else jT(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle=e))}function nre(t){if(!t)return null;const e=t.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return wF(e)}function tqe(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}async function ERe(t,e){return await t.fetchSymbol(e)||t.fetchCIMSymbol(e)}const QB=RL();function MRe(t,e){QB.append(t,e),QB.detach(e)}function _I(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(o=>!!o.length))return null;const s=i&&i.node||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.effectView!=null&&(s.style.filter=nre(i.effectView)),MRe(s,()=>aRe(t,r,n,i)),s}function TRe(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function IRe(t,e,i){return t?tt(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.width,o=n.height,a=s/o;let l=e;if(i){const c=Math.max(s,o);l=Math.min(l,c)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new C("renderUtils: imageDataSize","href not provided."))}function kRe(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function CRe(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=w5({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const o=dS(s);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function PRe(t,e,i,r,n){return IRe(t,e,n).then(s=>{const o=s.width??e,a=s.height??e;if(s.image&&kRe(i,r)){let l=s.image.width,c=s.image.height;V("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const h=TRe(o,a);h.drawImage(s.image,0,0,l,c,0,0,o,a);const p=h.getImageData(0,0,o,a),f=[i.r/255,i.g/255,i.b/255,i.a],y=w5(i);for(let g=0;g<p.data.length;g+=4)CRe(p.data,g,f,y,r);h.putImageData(p,0,0),t=h.canvas.toDataURL("image/png")}else{const l=Be&&Be.findCredential(t);if(l&&l.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:o,height:a}}).catch(()=>({url:t,width:e,height:e}))}function ARe(t){return t=t||globalThis.location.hostname,ORe.some(e=>(t==null?void 0:t.match(e))!=null)}function XB(t,e){return t&&(e=e||globalThis.location.hostname)?e.match(sre)!=null||e.match(are)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(ore)!=null||e.match(lre)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t}const sre=/^devext.arcgis.com$/,ore=/^qaext.arcgis.com$/,are=/^[\w-]*\.mapsdevext.arcgis.com$/,lre=/^[\w-]*\.mapsqa.arcgis.com$/,ORe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,sre,ore,/^jsapps.esri.com$/,are,lre];function ure(t,e,i,r){const n=t.name;return n==null?Promise.reject(new C("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&t.styleName==="Esri2DPointSymbolsStyle"?LRe(n,e,r):Cte(t,e,r).then(s=>dre(Hr(s),n,e,i,gCe,r))}function cre(t,e){return e.items.find(i=>i.name===t)}function dre(t,e,i,r,n,s){var y;const o=i&&i.portal!=null?i.portal:lr.getDefault(),a={portal:o,url:_r(t.baseUrl),origin:"portal-item"},l=cre(e,t.data);if(!l){const g=`The symbol name '${e}' could not be found`;return Promise.reject(new C("symbolstyleutils:symbol-name-not-found",g,{symbolName:e}))}let c=Yh(n(l,r),a),h=((y=l.thumbnail)==null?void 0:y.href)??null;const p=l.thumbnail&&l.thumbnail.imageData;ARe()&&(c=XB(c)??"",h=XB(h));const f={portal:o,url:_r(UN(c)),origin:"portal-item"};return Xj(c,s).then(g=>{const v=r==="cimRef"?Pte(g.data):g.data,_=dte(v,f);if(_&&Kh(_)){if(h){const w=Yh(h,a);_.thumbnail=new om({url:w})}else p&&(_.thumbnail=new om({url:`data:image/png;base64,${p}`}));t.styleUrl?_.styleOrigin=new Yb({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(_.styleOrigin=new Yb({portal:i.portal,styleName:t.styleName,name:e}))}return _})}function LRe(t,e,i){const r=vCe.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:lr.getDefault();return Xj(r,i).then(s=>{const o=Pte(s.data);return dte(o,{portal:n,url:_r(UN(r)),origin:"portal-item"})})}const RRe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:dre,getStyleItemFromStyle:cre,resolveWebStyleSymbol:ure},Symbol.toStringTag,{value:"Module"})),Rf=wr.size,$E=wr.maxSize,b5=wr.maxOutlineSize,eG=wr.lineWidth,XF=wr.tallSymbolWidth;function Ag(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=Wr(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,b5),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?v5(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function FRe(t,e){var r,n,s;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return dRe(e);const i=qe("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const o=await ure(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch(()=>null);if(o&&"thumbnail"in o&&((s=o.thumbnail)!=null&&s.url))return o.thumbnail.url}return i}function HC(t,e=1){const i=t.a,r=w5(t),n=r.h,s=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:c}=dS({h:n,s,v:o});return[a,l,c,i]}function CM(t){return t.type==="water"?t.color==null?null:t.color:t.material==null||t.material.color==null?null:t.material.color}function Pt(t,e=0){const i=CM(t);if(!i){if(t.type==="fill")return null;const n=xLe.r,s=Bh(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=Bh(r[n],e);return r}async function hre(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await SLe(qe(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function tG(t){return t.outline?Ag(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function pre(t,e){const i=CM(t);if(!i)return null;let r="rgba(";return r+=Bh(i.r,e)+",",r+=Bh(i.g,e)+",",r+=Bh(i.b,e)+",",r+i.a+");"}function e3(t,e){const i=pre(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?Wr(t.size):.75,b5),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?v5(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?Wr(2):t.join:null}:{}}function Fx(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function DRe(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function NRe(t,e,i){const r=[];if(!t)return r;switch(t.type){case"icon":{const o=e,a=e;switch(t.resource&&t.resource.primitive||G0e){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Pt(t,0),stroke:Ag(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:Pt(t,0),stroke:Ag(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:Pt(t,0),stroke:Ag(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*o,0]},{command:"L",values:[.5*o,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[o,.5*a]}]},stroke:tG(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[o,a]},{command:"M",values:[o,0]},{command:"L",values:[0,a]}]},stroke:tG(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,.5*a]},{command:"L",values:[.5*o,a]},{command:"Z",values:[]}]},fill:Pt(t,0),stroke:Ag(t)})}break}case"object":switch(t.resource&&t.resource.primitive||Tve){case"cone":{const n=Fx(Pt(t,0),Pt(t,-.6),i?XF:e),s=kLe(e,i);r.push({shape:s[0],fill:n}),r.push({shape:s[1],fill:n});break}case"inverted-cone":{const n=Pt(t,0),s=Fx(n,Pt(t,-.6),e),o=CLe(e);r.push({shape:o[0],fill:s}),r.push({shape:o[1],fill:n});break}case"cube":{const n=TLe(e,i);r.push({shape:n[0],fill:Pt(t,0)}),r.push({shape:n[1],fill:Pt(t,-.3)}),r.push({shape:n[2],fill:Pt(t,-.5)});break}case"cylinder":{const n=Fx(Pt(t,0),Pt(t,-.6),i?XF:e),s=ILe(e,i);r.push({shape:s[0],fill:n}),r.push({shape:s[1],fill:n}),r.push({shape:s[2],fill:Pt(t,0)});break}case"diamond":{const n=PLe(e);r.push({shape:n[0],fill:Pt(t,-.3)}),r.push({shape:n[1],fill:Pt(t,0)}),r.push({shape:n[2],fill:Pt(t,-.3)}),r.push({shape:n[3],fill:Pt(t,-.7)});break}case"sphere":{const n=Fx(Pt(t,0),Pt(t,-.6));n.x1=0,n.y1=0,n.x2=.25*e,n.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:n});break}case"tetrahedron":{const n=ALe(e);r.push({shape:n[0],fill:Pt(t,-.3)}),r.push({shape:n[1],fill:Pt(t,0)}),r.push({shape:n[2],fill:Pt(t,-.6)});break}}break}return r}function wI(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?Wr(e):null}function jRe(t){return t.type==="icon"?"multiply":"tint"}function VRe(t,e){const i=wI(e),r=e!=null&&e.maxSize?Wr(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,o=[];let a=0,l=0;const c=s.at(-1);let h;return c&&c.type==="icon"&&(h=c.size&&Wr(c.size)),s.forEach(p=>{var g;if(p.type!=="icon"&&p.type!=="object")return;const f=p.type==="icon"?p.size&&Wr(p.size):0,y=i||f?Math.ceil(Math.min(i||f,r||$E)):Rf;if(p&&p.resource&&p.resource.href){const v=FRe(t,p).then(_=>{const w=p.get("material.color"),S=jRe(p);return PRe(_,y,w,S,n)}).then(_=>{const w=_.width,S=_.height;return a=Math.max(a,w),l=Math.max(l,S),[{shape:{type:"image",x:0,y:0,width:w,height:S,src:_.url},fill:null,stroke:null}]});o.push(v)}else{let v=y;p.type==="icon"&&h&&i&&(v=y*(f/h));const _=(e==null?void 0:e.symbolConfig)==="tall"||((g=e==null?void 0:e.symbolConfig)==null?void 0:g.isTall)||p.type==="object"&&DRe(p);a=Math.max(a,_?XF:v),l=Math.max(l,v),o.push(Promise.resolve(NRe(p,v,_)))}}),Di(o).then(p=>{const f=[];return p.forEach(y=>{y.value?f.push(y.value):y.error&&U.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",y.error)}),_I(f,[a,l],{node:e&&e.node,scale:!1,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})})}function zRe(t,e){const i=t.symbolLayers,r=[],n=cRe(t),s=wI(e),o=(e&&e.maxSize?Wr(e.maxSize):null)||b5;let a,l=0,c=0;return i.forEach((h,p)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const f=[];switch(h.type){case"line":{const y=e3(h,0);if(y==null)break;const g=y&&y.width||0;p===0&&(a=g);const v=Math.min(s||g,o),_=p===0?v:s?v*(g/a):v,w=_>eG/2?2*_:eG;c=Math.max(c,_),l=Math.max(l,w),y.width=_,f.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:y});break}case"path":{const y=Math.min(s||Rf,o),g=Pt(h,0),v=Pt(h,-.2),_=pre(h,-.4),w=_?{color:_,width:1}:{};if(h.profile==="quad"){const S=h.width,b=h.height,$=$Le(S&&b?S/b:1,b===0,S===0),T={...w,join:"bevel"};f.push({shape:$[0],fill:v,stroke:T}),f.push({shape:$[1],fill:v,stroke:T}),f.push({shape:$[2],fill:g,stroke:T})}else f.push({shape:QF.pathSymbol3DLayer[0],fill:v,stroke:w}),f.push({shape:QF.pathSymbol3DLayer[1],fill:g,stroke:w});c=Math.max(c,y),l=c}}r.push(f)}),Promise.resolve(_I(r,[l,c],{node:e&&e.node,scale:n,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function URe(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=wI(e),s=e&&e.maxSize?Wr(e.maxSize):null,o=n||Rf,a=[];let l=0,c=0,h=!1;for(let p=0;p<r.length;p++){const f=r.at(p),y=[];if(i&&f.type!=="fill")continue;const g=QF.fill[0];switch(f.type){case"fill":{const v=Ag(f),_=Math.min(o,s||$E);l=Math.max(l,_),c=Math.max(c,_),h=!0;let w=Pt(f,0);const S="pattern"in f?f.pattern:null,b=CM(f);!i&&S!=null&&S.type==="style"&&S.style!=="solid"&&b&&(w=await hre(S,b)),y.push({shape:g,fill:w,stroke:v});break}case"line":{const v=e3(f,0);if(v==null)break;const _={stroke:v,shape:g};l=Math.max(l,Rf),c=Math.max(c,Rf),y.push(_);break}case"extrude":{const v={join:"round",width:1,...e3(f,-.4)},_=Pt(f,0),w=Pt(f,-.2),S=Math.min(o,s||$E),b=ELe(S);v.width=1,y.push({shape:b[0],fill:w,stroke:v}),y.push({shape:b[1],fill:w,stroke:v}),y.push({shape:b[2],fill:_,stroke:v});const $=Rf,T=.7*Rf+.5*S;l=Math.max(l,$),c=Math.max(c,T);break}case"water":{const v=Hr(CM(f)),_=HC(v),w=HC(v,2),S=HC(v,3),b=MLe();h=!0,y.push({shape:b[0],fill:_}),y.push({shape:b[1],fill:w}),y.push({shape:b[2],fill:S});const $=Math.min(o,s||$E);l=Math.max(l,$),c=Math.max(c,$);break}}a.push(y)}return _I(a,[l,c],{node:e&&e.node,scale:h,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function BRe(t,e){if(t.symbolLayers.length===0)return Promise.reject(new C("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return VRe(t,e);case"line-3d":return zRe(t,e);case"polygon-3d":case"mesh-3d":return URe(t,e)}return Promise.reject(new C("symbolPreview: swatchInfo3D","symbol not supported."))}const GRe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:hre,getSizeFromOptions:wI,getSymbolLayerFill:Pt,previewSymbol3D:BRe},Symbol.toStringTag,{value:"Module"}));let dy=null;const iG=[255,255,255];function rG(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function iqe(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,o=i&&i.swatchSize||wr.size,a=.8,l=Math.round(o*o/s**2*a),c=window.devicePixelRatio,h=document.createElement("canvas"),p=o*c;h.width=p,h.height=p,h.style.width=h.width/c+"px",h.style.height=h.height/c+"px";const f=h.getContext("2d");if(r&&(f.fillStyle=r.toCss(!0),f.fillRect(0,0,p,p),f.fill()),f.fillStyle=(e==null?void 0:e.toCss(!0))??"",dy&&dy.length/2===l)for(let g=0;g<2*l;g+=2){const v=dy[g],_=dy[g+1];f.fillRect(v,_,s*c,s*c),f.fill()}else{dy=[];for(let g=0;g<2*l;g+=2){const v=rG(0,p),_=rG(0,p);dy.push(v,_),f.fillRect(v,_,s*c,s*c),f.fill()}}n&&(n.color&&(f.strokeStyle=n.color.toCss(!0)),f.lineWidth=n.width,f.strokeRect(0,0,p,p));const y=new Image(o,o);return y.src=h.toDataURL(),y.ariaLabel=(i==null?void 0:i.ariaLabel)??null,y.alt=(i==null?void 0:i.ariaLabel)??"",y}function rqe(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,o=[],a=g5(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,c=l&&l.length===n&&l.reduce((g,v)=>g+v,0)===100,h=[0];for(let g=0;g<n;g++){let v=null;c&&(v=l[g]*r/100,h.push(v+h[g])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(v??s)/2} ${r}`,dashoffset:"-"+(c?h[g]/2:g*(s/2)),color:t[g]},offset:[0,0]})}let p=null;const f=2*i+((a==null?void 0:a.width)||0),y=e.holePercentage;if(y){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*y},fill:null,stroke:a,offset:[0,0]});const g=f/2;p=[[{shape:{type:"circle",cx:g,cy:g,r:g},fill:iG,stroke:a?{...a,color:iG}:null,offset:[0,0]},{shape:{type:"circle",cx:g,cy:g,r:i*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return _I([o],[f,f],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:p,rotation:-90,ariaLabel:e.ariaLabel})}function nqe(t,e={}){const n=e.align==="horizontal",s=n?75:24,o=n?24:75,a=e.width??s,l=e.height??o,c=e.gradient??!0,h=window.devicePixelRatio,p=a*h,f=l*h,y=document.createElement("canvas");y.width=p,y.height=f,y.ariaLabel=e.ariaLabel??null,y.style.width=`${a}px`,y.style.height=`${l}px`;const g=y.getContext("2d"),v=n?p:0,_=n?0:f;if(c){const S=g.createLinearGradient(0,0,v,_),b=t.length,$=b===1?0:1/(b-1);t.forEach((T,I)=>S.addColorStop(I*$,T.toString())),g.fillStyle=S,g.fillRect(0,0,p,f)}else{const S=n?p/t.length:p,b=n?f:f/t.length;let $=0,T=0;for(const I of t)g.fillStyle=I.toString(),g.fillRect($,T,S,b),$=n?$+S:0,T=n?0:T+b}const w=document.createElement("div");return w.style.width=`${a}px`,w.style.height=`${l}px`,HRe(w,e==null?void 0:e.effectList),w.appendChild(y),w}function HRe(t,e){if(!e)return;t.style.filter=nre(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function fre(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await O(()=>import("./previewWebStyleSymbol-23b212f3.js"),[]);return i(t,fre,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await O(()=>Promise.resolve().then(()=>GRe),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await O(()=>import("./previewSymbol2D-df61ebb7.js"),["assets/previewSymbol2D-df61ebb7.js","assets/fontUtils-bfde2177.js","assets/colorUtils-46453684.js"]);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await O(()=>import("./previewCIMSymbol-62f2aae1.js"),["assets/previewCIMSymbol-62f2aae1.js","assets/cimAnalyzer-513e6c62.js","assets/fontUtils-bfde2177.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/enums-f1a6a48a.js","assets/alignmentUtils-ae955d28.js","assets/definitions-b77f917a.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/floatRGBA-4b494040.js","assets/CIMSymbolRasterizer-6ed7fbc6.js","assets/CIMResourceManager-287fc232.js","assets/Rasterizer-197411b5.js","assets/rasterizingUtils-8b0cb200.js","assets/imageutils-a2ed857b.js"]);return i(t,e)}default:return}}function mre(t){return t&&"opacity"in t?t.opacity*mre(t.parent):1}async function PM(t,e){if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=mre(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const b=t.symbol.type==="web-style"?await ERe(t.symbol,{...e,cache:e!=null?e.webStyleCache:null}):t.symbol.clone();return GC(b,null,n),b}const s=(e!=null?e.renderer:null)??(r&&"renderer"in r?r.renderer:null);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,cache:e!=null?e.webStyleCache:null}):o.clone(),!(s&&"visualVariables"in s&&s.visualVariables&&s.visualVariables.length))return GC(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(e==null||e.arcade==null)){const b={...e};b.arcade=await su(),e=b}const{getColor:a,getOpacity:l,getAllSizes:c,getRotationAngle:h}=await O(()=>Promise.resolve().then(()=>aI),void 0),p=[],f=[],y=[],g=[];for(const b of s.visualVariables)switch(b.type){case"color":p.push(b);break;case"opacity":f.push(b);break;case"rotation":g.push(b);break;case"size":b.target||y.push(b)}const v=!!p.length&&p[p.length-1],_=v?a(v,t,e):null,w=!!f.length&&f[f.length-1];let S=w?l(w,t,e):null;if(n!=null&&(S=S!=null?S*n:n),GC(o,_,S),y.length){const b=c(y,t,e);await xRe(o,b)}for(const b of g)$Re(o,h(b,t,e),b.axis);return o}var t3;const qRe="esri.widgets.FeatureTemplates.TemplateItem";let Nl=t3=class extends X{constructor(t){super(t),this._activeFetchInfo={id:null,request:null},this.layer=null,this.template=null,this.thumbnail=null}initialize(){this.addHandles(D(()=>{const{layer:t}=this;return[t&&"renderer"in t?t.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null,this._activeFetchInfo.request=null,this._set("thumbnail",null)},me))}get description(){var t;return(t=this.template)==null?void 0:t.description}set description(t){this.template&&(this.template.description=t)}get label(){var t;return(t=this.template)==null?void 0:t.name}set label(t){this.template&&(this.template.name=t)}get id(){var t;return`${this.label??""}–${(t=this.layer)==null?void 0:t.id}`}get supportsUpload(){return this.layer.type==="scene"}clone(){const t=this.thumbnail!=null?this.thumbnail.cloneNode(!0):null,e=new t3({layer:this.layer,template:this.template});return e._set("thumbnail",t),e}static async fetchThumbnail(t,e){var n;const i=await WRe(t,e);if(i==null)return null;const r={maxSize:36};return((n=t.renderer)==null?void 0:n.type)==="dictionary"&&(r.fieldMap=t.renderer.fieldMap??void 0,r.feature={attributes:e.prototype.attributes??{}}),await fre(i,r)}};async function WRe(t,e){const{renderer:i}=t;if(i){const r=new fi({attributes:e.prototype.attributes}),n=await i.getSymbolAsync(r);if(n)return n}return ZRe(t)}async function ZRe(t){const{geometryType:e}=t,i=e==="point"||e==="multipoint"?await O(()=>Promise.resolve().then(()=>Fve),void 0):e==="polyline"?await O(()=>Promise.resolve().then(()=>Uge),void 0):e==="polygon"||e==="mesh"||e==="multipatch"?await O(()=>Promise.resolve().then(()=>Rve),void 0):null;return i?new i.default:null}u([d()],Nl.prototype,"description",null),u([d()],Nl.prototype,"label",null),u([d()],Nl.prototype,"layer",void 0),u([d()],Nl.prototype,"template",void 0),u([d({readOnly:!0})],Nl.prototype,"thumbnail",void 0),u([d()],Nl.prototype,"id",null),u([d()],Nl.prototype,"supportsUpload",null),Nl=t3=u([E(qRe)],Nl);const i3=Nl;let Qy=class extends jc(X){constructor(e){super(e),this.items=null,this.label=null}get id(){return this.label}findByTemplate(e){return this.items.find(i=>i.template===e)}};u([d()],Qy.prototype,"items",void 0),u([d()],Qy.prototype,"label",void 0),u([d()],Qy.prototype,"id",null),Qy=u([E("esri.widgets.FeatureTemplates.TemplateItemGroup")],Qy);const YRe=Qy;var mw;const JRe=({layer:t})=>({key:t,label:t.title??""}),KRe=({layer:t})=>({key:t.geometryType,label:t.geometryType??""});let ns=mw=class extends Xr(Vi.EventedAccessor){constructor(t){super(t),this._itemPool=new ru(i3),this._groupPool=new ru(YRe),this.filterFunction=null,this.selectedItem=null}initialize(){this._get("groupBy")||(this.groupBy="layer")}set groupBy(t){if(this._set("groupBy",t),typeof t!="function")switch(t){case"layer":this._groupByFunction=JRe;break;case"geometry":this._groupByFunction=KRe;break;default:this._groupByFunction=null}else this._groupByFunction=e=>this._ensureGroupByObject(t(e))}set layers(t){const e="layers";if(this.handles.remove(e),t){const i=()=>this.notifyChange("state");this.handles.add(t.map(r=>Ai(()=>r.loadStatus,i)),e)}this._set("layers",t)}get layers(){return this._get("layers")}get state(){const{layers:t}=this;return t&&t.length!==0?t.some(e=>e.loadStatus==="loading"||e.loadStatus==="not-loaded")?"loading":"ready":"disabled"}get _featureTemplatesByLayer(){if(!this.layers)return new Map;const t=[];for(const e of this.layers)if(e.type==="subtype-group")for(const i of e.sublayers){const r=nG(i);t.push([i,r])}else L0(e)||t.push([e,nG(e)]);return new Map(t)}get numberOfFeatureTemplates(){return Array.from(this._featureTemplatesByLayer.values()).reduce((t,e)=>t+e.length,0)}get items(){var s,o,a;if(this.numberOfFeatureTemplates===0)return this._releasePreviousItems(),[];const t=this._featureTemplatesByLayer,e=[],i=this.filterFunction!=null?this.filterFunction:mw._nullFilterFunction;for(const[l,c]of t)if(l.loaded||l.type==="subtype-sublayer"&&((s=l.parent)!=null&&s.loaded)){const h=(o=hu(l))==null?void 0:o.operations;if(h!=null&&h.supportsEditing&&(h!=null&&h.supportsAdd))for(const p of c)e.push({layer:l,template:p,matchesFilter:i({label:p.name})})}if(this._groupByFunction==null){const l=e.filter(({matchesFilter:c})=>c).map(({template:c,layer:h})=>this._createItem(c,h));return this._releasePreviousItems(),l}const r=new Map;for(const l of e){const{template:c,layer:h}=l,p=this._groupByFunction({template:c,layer:h}),{key:f,label:y}=p.key!=null?p:mw.nullGroupBy;r.has(f)||r.set(f,{label:y,templateItemInfos:[]}),(a=r.get(f))==null||a.templateItemInfos.push(l)}const n=[];for(const l of r.values()){const{label:c,templateItemInfos:h}=l,p=h.filter(({matchesFilter:y})=>y),f=i({label:c})?h:h.length>0?p:[];if(f.length>0){const y=f.map(({template:g,layer:v})=>this._createItem(g,v));n.push(this._createGroup(c,y))}}return n.length===1&&n[0].label===mw.nullGroupBy.label?(this._releasePreviousItems(),n[0].items):(this._releasePreviousItems(),n)}refresh(){this.notifyChange("items")}select(t,{emit:e=!0}={}){const i=this.selectedItem,r=(t==null?void 0:t.clone())||null;this._set("selectedItem",r),e&&this.emit("select",{item:r,oldItem:i,template:(r==null?void 0:r.template)??null})}_createItem(t,e){const i=this._itemPool.acquire();return i.set({template:t,layer:e}),i}_createGroup(t,e){const i=this._groupPool.acquire();return i.set("label",t),i.items=e,i}_releasePreviousItems(){this._destroyItems(this._get("items"))}_destroyItems(t){t&&(t[0]instanceof i3?t.forEach(e=>this._destroyItem(e)):t.forEach(e=>this._destroyGroup(e)))}_destroyGroup(t){t.items.forEach(e=>this._destroyItem(e)),t.items.length=0,this._groupPool.release(t)}_destroyItem(t){t.layer=null,t.template=null,this._itemPool.release(t)}_ensureGroupByObject(t){return typeof t=="string"?{key:t,label:t}:t}};ns.nullGroupBy={key:Symbol(),label:"Other​"},ns._nullFilterFunction=t=>!0,u([d()],ns.prototype,"_groupByFunction",void 0),u([d()],ns.prototype,"filterFunction",void 0),u([d()],ns.prototype,"groupBy",null),u([d()],ns.prototype,"layers",null),u([d()],ns.prototype,"state",null),u([d({readOnly:!0})],ns.prototype,"_featureTemplatesByLayer",null),u([d({readOnly:!0})],ns.prototype,"numberOfFeatureTemplates",null),u([d({readOnly:!0})],ns.prototype,"items",null),u([d({readOnly:!0})],ns.prototype,"selectedItem",void 0),ns=mw=u([E("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],ns);const nG=t=>[..."templates"in t&&Array.isArray(t.templates)?t.templates:[],..."types"in t&&Array.isArray(t.types)?t.types.flatMap(e=>e.templates):[]],r3=ns,bl="esri-item-list",xc={base:bl,group:`${bl}__group`,scroller:`${bl}__scroller`,scrollerEnabled:`${bl}__scroller--enabled`,groupHeader:`${bl}__group__header`,item:`${bl}__list-item`,itemIcon:`${bl}__list-item-icon`,itemContentEnd:`${bl}__list-item-content-end`,noMatchesMessage:`${bl}__no-matches-message`,filterContainerSticky:`${bl}__filter-container--sticky`},QRe=4;function yre(t){const{filterText:e="",id:i,messages:r,onFilterChange:n,...s}=t;return x("div",{key:i},t.filterEnabled??1?tFe({filterText:e,id:i,messages:r,onFilterChange:n}):null,eFe({...s,enableListScroll:t.enableListScroll??!0,filterText:e,messages:r}))}function XRe(t){return!!t.items}function eFe(t){const{headingLevel:e,items:i,...r}=t;return i.length===0?x("div",{class:xc.noMatchesMessage,key:"no-matches"},t.messages.noMatches):x("div",{class:cj({[xc.scroller]:!0,[xc.scrollerEnabled]:!!t.enableListScroll}),key:"item-container"},i.map(n=>XRe(n)?iFe({...r,group:n,headingLevel:e}):S5({...r,grouped:!0,item:n})))}function tFe(t){const{messages:e,filterText:i,enableListScroll:r}=t;return x("div",{key:"filter",class:r?void 0:xc.filterContainerSticky},x("calcite-input",{onCalciteInputInput:n=>{const s=n.currentTarget;t.onFilterChange&&t.onFilterChange(s.value)},placeholder:e.filterPlaceholder,value:i,type:"search"}))}function S5(t){const{grouped:e,identify:i,item:r,onItemMouseEnter:n,onItemMouseLeave:s,onItemSelect:o,renderIcon:a,renderCustomItem:l,renderItemContent:c,renderItemContentEnd:h,renderItemLabel:p,renderItemDescription:f,selectedItem:y}=t,g=sG(r,i),v=g===sG(y,i),_=l==null?void 0:l(t);if(_)return _;const w=c==null?void 0:c(r),S=h==null?void 0:h(r);return x("calcite-list-item",{"aria-level":e?"2":"",class:xc.item,"data-item":r,key:g,label:w?void 0:(p==null?void 0:p(r))??r.label??void 0,description:w?void 0:(f==null?void 0:f(r))??void 0,selected:v,tabIndex:0,afterUpdate:b=>{b.selected=v},onCalciteListItemSelect:b=>{b.preventDefault(),o==null||o(qC(b))},onmouseenter:b=>n==null?void 0:n(qC(b)),onmouseleave:b=>s==null?void 0:s(qC(b))},x("div",{key:"content-start",class:xc.itemIcon,slot:"content-start"},a==null?void 0:a(r)),w?x("div",{key:"content",slot:"content"},w):null,S?x("div",{key:"content-end",class:xc.itemContentEnd,slot:"content-end"},S):null)}function sG(t,e){return t?`${(e==null?void 0:e(t))||t.id}__${t.label}`:""}function qC(t){return t.currentTarget["data-item"]}function iFe(t){const{group:e,headingLevel:i=QRe,selectionMode:r="none",renderCustomGroupContent:n,...s}=t,o=n==null?void 0:n(t);return x("div",{class:xc.group,key:e.label??void 0},x(Uo,{level:i,class:xc.groupHeader},e.label),o||x("calcite-list",{selectionMode:r,selectionAppearance:"border"},e.items.map(a=>S5({...s,item:a,grouped:!0}))))}const oG="esri-feature-templates",WC={base:oG,loader:`${oG}__loader`,widget:"esri-widget"};function rFe(t){return t.length>0&&Cee(t[0])}function nFe(t){return t.id}const aG={filter:!0};let Oi=class extends Xr(Bt){constructor(e,i){super(e,i),this.enableListScroll=!0,this.filterText="",this.headingLevel=4,this.messages=null,this.viewModel=new r3,this.visibleElements={...aG},this.renderCustomItem=r=>null,this.renderCustomGroupContent=r=>null,this.renderItemLabel=()=>null,this.renderItemDescription=()=>null,this.renderItemContent=r=>null,this.renderItemContentEnd=r=>null,this._iconIntersectionObserver=new IntersectionObserver((r,n)=>{r.forEach(async s=>{if(s.isIntersecting){const o=s.target;if(oFe(o))return void n.unobserve(o);const a=sFe(o),{layer:l,template:c}=a;lG(o,!0);const h=await i3.fetchThumbnail(l,c).catch(()=>(lG(o,!1),null));if(h==null)return;o.appendChild(h)}})}),this.renderItemIcon=r=>x("span",{key:"icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":r,"data-has-icon":!1}),this._afterItemCreateOrUpdate=r=>{var n;(n=this._iconIntersectionObserver)==null||n.observe(r)},this._afterItemRemoved=r=>{var n;(n=this._iconIntersectionObserver)==null||n.unobserve(r)}}initialize(){const e=({label:i})=>!this.filterText||!!(i!=null&&i.toLowerCase().includes(this.filterText.toLowerCase()));this.addHandles(D(()=>this.viewModel,(i,r)=>{i&&!i.filterFunction&&(this.filterFunction=e),r&&r!==i&&r.filterFunction===e&&(r.filterFunction=null)},me))}destroy(){var e;(e=this._iconIntersectionObserver)==null||e.disconnect(),this._iconIntersectionObserver=null}loadDependencies(){return ml({input:()=>O(()=>import("./calcite-input-d3660bcd.js"),["assets/calcite-input-d3660bcd.js","assets/input-137231d2.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/key-bcbe3efc.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/observers-d8508c63.js","assets/icon-001847d5.js","assets/progress-a78ebc6f.js"]),"list-item":()=>O(()=>import("./calcite-list-item-941d6637.js"),["assets/calcite-list-item-941d6637.js","assets/interactive-c63d961a.js","assets/utils3-72f50212.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/handle-db6dd90b.js"]),notice:()=>O(()=>import("./calcite-notice-e9826fd0.js"),["assets/calcite-notice-e9826fd0.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/openCloseComponent-ad0ec359.js","assets/icon-001847d5.js"])})}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(e){this.viewModel.filterFunction=e}get groupBy(){return this.viewModel.groupBy}set groupBy(e){this.viewModel.groupBy=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get selectedItem(){return this.viewModel.selectedItem}castVisibleElements(e){return{...aG,...e}}select(e,i){return this.viewModel.select(e,i)}render(){const{enableListScroll:e,filterText:i,headingLevel:r,messages:n,viewModel:{items:s,numberOfFeatureTemplates:o,selectedItem:a,state:l}}=this,c=this.visibleElements.filter&&o>1;if(rFe(s)){const h=s.find(p=>p.label===r3.nullGroupBy.label);h&&(h.label=n.other)}return x("div",{class:this.classes(WC.base,WC.widget),"aria-label":n.widgetLabel},l==="loading"?this.renderLoader():l==="ready"?x(yre,{enableListScroll:e,filterEnabled:c,filterText:i,headingLevel:r,id:this.id,identify:nFe,items:s,messages:{filterPlaceholder:n.filterPlaceholder,noItems:n.noItems,noMatches:n.noMatches},renderIcon:this.renderItemIcon,renderCustomItem:this.renderCustomItem,renderCustomGroupContent:this.renderCustomGroupContent,renderItemContent:this.renderItemContent,renderItemContentEnd:this.renderItemContentEnd,renderItemDescription:this.renderItemDescription,renderItemLabel:this.renderItemLabel,selectedItem:a??void 0,selectionMode:"single",onItemSelect:h=>!Cee(h)&&this.viewModel.select(h),onFilterChange:h=>{this.filterText=h,this.viewModel.refresh()}}):null)}renderLoader(){return x("div",{class:WC.loader,key:"loader"})}};function sFe(t){return t==null?void 0:t["data-item"]}function oFe(t){return!!(t!=null&&t["data-has-icon"])}function lG(t,e){t&&(t["data-has-icon"]=e)}u([d()],Oi.prototype,"enableListScroll",void 0),u([d()],Oi.prototype,"filterFunction",null),u([d()],Oi.prototype,"filterText",void 0),u([d()],Oi.prototype,"groupBy",null),u([d()],Oi.prototype,"headingLevel",void 0),u([d()],Oi.prototype,"label",null),u([d()],Oi.prototype,"layers",null),u([d(),rt("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],Oi.prototype,"messages",void 0),u([d({readOnly:!0})],Oi.prototype,"selectedItem",null),u([d(),wv("select")],Oi.prototype,"viewModel",void 0),u([d()],Oi.prototype,"visibleElements",void 0),u([Re("visibleElements")],Oi.prototype,"castVisibleElements",null),u([d()],Oi.prototype,"renderCustomItem",void 0),u([d()],Oi.prototype,"renderCustomGroupContent",void 0),u([d()],Oi.prototype,"renderItemLabel",void 0),u([d()],Oi.prototype,"renderItemDescription",void 0),u([d()],Oi.prototype,"renderItemContent",void 0),u([d()],Oi.prototype,"renderItemContentEnd",void 0),Oi=u([E("esri.widgets.FeatureTemplates")],Oi);const aFe=Oi;var gre;const EE=Symbol("anchorHandles");let vf=class extends Vi.EventedAccessor{constructor(e){super(e),this[gre]=new Kr,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[EE].add([Ai(()=>pc(this.screenLocationEnabled?this.view:null,i=>[i.size,i.type==="3d"?i.camera:i.viewpoint]),()=>this.notifyChange("screenLocation")),D(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null,this[EE]=Ue(this[EE])}get screenLocation(){var n;const{location:e,view:i,screenLocationEnabled:r}=this;return r&&e!=null&&i!=null&&i.ready?(n=i.toScreen)==null?void 0:n.call(i,e):null}};gre=EE,u([d()],vf.prototype,"location",void 0),u([d()],vf.prototype,"screenLocation",null),u([d()],vf.prototype,"screenLocationEnabled",void 0),u([d()],vf.prototype,"view",void 0),vf=u([E("esri.widgets.support.AnchorElementViewModel")],vf);const vre=vf,lFe="esri.widgets.CompassViewModel";let ME=class extends vre{constructor(e){super(e),this.visible=!1}};u([d()],ME.prototype,"visible",void 0),ME=u([E(lFe)],ME);const x5=ME,ZC="esri-spinner",YC={base:ZC,spinnerStart:`${ZC}--start`,spinnerFinish:`${ZC}--finish`};let _f=class extends Bt{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new x5}initialize(){this.addHandles(D(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:r}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r&&r.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,r=!!i,n=e&&r,s=!e&&r,o={[YC.spinnerStart]:n,[YC.spinnerFinish]:s},a=this._getPositionStyles();return x("div",{class:this.classes(YC.base,o),styles:a})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=C1(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(i==null||e==null)return{};const{padding:r}=i;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};u([d()],_f.prototype,"location",null),u([d()],_f.prototype,"view",null),u([d({type:x5})],_f.prototype,"viewModel",void 0),u([d()],_f.prototype,"visible",null),_f=u([E("esri.widgets.Spinner")],_f);const _re=_f;function o0(t,e,i=void 0){ep(t,"`"+e+"` is deprecated, because it instantiates the deprecated class 'esri.widgets.Editor.CreateWorkflow'",{replacement:i,version:"4.23",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Editor-CreateFeaturesWorkflow.html"})}let Ku=class extends Jte(Eie(r1)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new dm,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};u([d({type:iie})],Ku.prototype,"elevationInfo",void 0),u([d(zL(dm,"graphics"))],Ku.prototype,"graphics",void 0),u([d({type:["show","hide"]})],Ku.prototype,"listMode",void 0),u([d()],Ku.prototype,"screenSizePerspectiveEnabled",void 0),u([d({readOnly:!0})],Ku.prototype,"type",void 0),u([d({constructOnly:!0})],Ku.prototype,"internal",void 0),Ku=u([E("esri.layers.GraphicsLayer")],Ku);const wre=Ku;function dqe(t,e,i){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]!==void 0&&e[2]!==void 0?(t[2]*i-e[2]*i)**2:0))}const yw=[];for(const t of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const e=t[0];for(let i=1;i<t.length;i++)yw[t[i]]=e}const nb=[];function uFe(t){return t.vcsWkid&&yw[t.vcsWkid]!==void 0?nb[yw[t.vcsWkid]]:t.latestVcsWkid&&yw[t.latestVcsWkid]!==void 0?nb[yw[t.latestVcsWkid]]:1}function uG(t,e,i){const r={x:0,y:0};e&&(r.z=0),i&&(r.m=0);let n=0,s=t[0];for(let o=0;o<t.length;o++){const a=t[o];if(hFe(a,s)===!1){const l=bre(s,a,e),c=cFe(s,a,e,i);c.x*=l,c.y*=l,r.x+=c.x,r.y+=c.y,e&&(c.z*=l,r.z+=c.z),i&&(c.m*=l,r.m+=c.m),n+=l,s=a}}return n>0?(r.x/=n,r.y/=n,e&&(r.z/=n),i&&(r.m/=n)):(r.x=t[0][0],r.y=t[0][1],e&&(r.z=t[0][2]),i&&e?r.m=t[0][3]:i&&(r.m=t[0][2])),r}function cFe(t,e,i,r){const n={x:(t[0]+e[0])/2,y:(t[1]+e[1])/2};return i&&(n.z=(t[2]+e[2])/2),i&&r?n.m=(t[3]+e[3])/2:r&&(n.m=(t[2]+e[2])/2),n}function dFe(t,e){if(t.length<=1)return 0;let i=0;for(let r=1;r<t.length;r++)i+=bre(t[r-1],t[r],e);return i}function bre(t,e,i){const r=e[0]-t[0],n=e[1]-t[1];if(i){const s=e[2]-e[2];return Math.sqrt(r*r+n*n+s*s)}return Math.sqrt(r*r+n*n)}function hFe(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function hqe(t){const e={x:0,y:0,spatialReference:t.spatialReference.toJSON()},i={x:0,y:0,spatialReference:t.spatialReference.toJSON()};let r=0,n=0;for(let s=0;s<t.paths.length;s++){if(t.paths[s].length===0)continue;const o=dFe(t.paths[s],t.hasZ===!0);if(o===0){const a=uG(t.paths[s],t.hasZ===!0,t.hasM===!0);e.x+=a.x,e.y+=a.y,t.hasZ===!0&&(e.z+=a.z),t.hasM===!0&&(e.m+=a.m),++r}else{const a=uG(t.paths[s],t.hasZ===!0,t.hasM===!0);i.x+=a.x*o,i.y+=a.y*o,t.hasZ===!0&&(i.z+=a.z*o),t.hasM===!0&&(i.m+=a.m*o),n+=o}}return n>0?(i.x/=n,i.y/=n,t.hasZ===!0&&(i.z/=n),t.hasM===!0&&(i.m/=n),new ce(i)):r>0?(e.x/=r,e.y/=r,t.hasZ===!0&&(i.z/=r),t.hasM===!0&&(e.m/=r),new ce(e)):null}function pqe(t){if(t.points.length===0)return null;let e=0,i=0,r=0,n=0;for(let o=0;o<t.points.length;o++){const a=t.getPoint(o);a.hasZ===!0&&(r+=a.z),a.hasM===!0&&(n+=a.m),e+=a.x,i+=a.y,n+=a.m}const s={x:e/t.points.length,y:i/t.points.length,spatialReference:null};return s.spatialReference=t.spatialReference.toJSON(),t.hasZ===!0&&(s.z=r/t.points.length),t.hasM===!0&&(s.m=n/t.points.length),new ce(s)}function pFe(t,e){return t.x*e.x+t.y*e.y}function fFe(t,e){return t.x*e.y-e.x*t.y}function bI(t,e,i=0){for(;t<i;)t+=e;const r=i+e;for(;t>=r;)t-=e;return t}function Sre(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function fqe(t,e){return bI(Sre(t,e),2*Math.PI)*(180/Math.PI)}function mqe(t,e){return bI(Math.PI/2-Sre(t,e),2*Math.PI)*(180/Math.PI)}function xre(t,e,i){const r={x:t.x-e.x,y:t.y-e.y},n={x:i.x-e.x,y:i.y-e.y};return Math.atan2(fFe(r,n),pFe(r,n))}function yqe(t,e,i){return bI(xre(t,e,i),2*Math.PI)*(180/Math.PI)}function gqe(t,e,i){return bI(-1*xre(t,e,i),2*Math.PI)*(180/Math.PI)}nb[9002]=.3048,nb[9003]=.3048006096012192,nb[9095]=.3048007491;const Mr=[0,0];function vqe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],h=t[a][l+1];if(jb(s,o,c,h,Mr)&&!(Mr[0]===s[0]&&Mr[1]===s[1]||Mr[0]===c[0]&&Mr[1]===c[1]||Mr[0]===o[0]&&Mr[1]===o[1]||Mr[0]===h[0]&&Mr[1]===h[1]))return!0}}const r=i.length;if(!(r<3))for(let n=0;n<=r-2;n++){const s=i[n],o=i[n+1];for(let a=n+2;a<=r-2;a++){const l=i[a],c=i[a+1];if(jb(s,o,l,c,Mr)&&!(Mr[0]===s[0]&&Mr[1]===s[1]||Mr[0]===l[0]&&Mr[1]===l[1]||Mr[0]===o[0]&&Mr[1]===o[1]||Mr[0]===c[0]&&Mr[1]===c[1]))return!0}}}return!1}function $re(t,e,i){switch(t){case"point":case"multipoint":return"point";case"polyline":return(e!=null&&e.type==="polyline"&&e.paths.length?e.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex";case"polygon":{const r=e!=null&&e.type==="polygon"&&e.rings.length?e.rings[0].length:0;return r<3?"polylineZeroVertices":r<4?"polygonOneVertex":"polygonTwoVertices"}case"mesh":return mFe(e,i);default:return}}function mFe(t,e){if((t==null?void 0:t.type)!=="mesh"||(e==null?void 0:e.type)!=="3d")return;const{renderCoordsHelper:i}=e,{camera:r}=e.state,{width:n,height:s,zmin:o,zmax:a,center:l,spatialReference:c}=t.extent,h=(a??0)-(o??0),p=Ss(c),f=uFe(c),y=Ss(i.spatialReference),g=Math.max(n*p,s*p,h*f)/y;nu(Dx,l.x,l.y,l.z??0),i.toRenderCoords(Dx,c,Dx);const v=g/r.computeScreenPixelSizeAt(Dx);return v>r.width*gFe?"meshTooClose":v<yFe?"meshTooFar":"mesh"}const yFe=20,gFe=1,Dx=Je();let wf=class extends X{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};u([d({constructOnly:!0})],wf.prototype,"layer",void 0),u([d()],wf.prototype,"enabled",void 0),u([d()],wf.prototype,"updating",void 0),u([d()],wf.prototype,"availability",void 0),wf=u([E("esri.views.interactive.snapping.FeatureSnappingLayerSource")],wf);const $5=wf;let Xy=class extends X{constructor(e){super(e),this.creationInfo=null,this.pendingFeatures=new se,this.viewModel=null,this.upload=null}};u([d()],Xy.prototype,"creationInfo",void 0),u([d()],Xy.prototype,"viewModel",void 0),u([d()],Xy.prototype,"upload",void 0),Xy=u([E("esri.widgets.Editor.CreateFeaturesWorkflowData")],Xy);function JC(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function vFe(t){let e=0,i=0;for(let r=0;r<t.length;r++){const n=t[r].size;typeof n=="number"&&(e+=n,i++)}return e/i}function cG(t,e){return typeof t=="number"?t:t&&t.stops&&t.stops.length?vFe(t.stops):e}function _Fe(t,e){if(!e)return t;const i=e.filter(o=>o.type==="size").map(o=>{const{maxSize:a,minSize:l}=o;return(cG(a,t)+cG(l,t))/2});let r=0;const n=i.length;if(n===0)return t;for(let o=0;o<n;o++)r+=i[o];const s=Math.floor(r/n);return Math.max(s,t)}function Ere(t){var n;const e=t&&t.renderer,i=(t&&t.event&&t.event.pointerType)==="touch"?9:6;if(!e)return i;const r="visualVariables"in e?_Fe(i,e.visualVariables):i;if(e.type==="simple")return JC(r,e.symbol);if(e.type==="unique-value"){let s=r;return(n=e.uniqueValueInfos)==null||n.forEach(o=>{s=JC(s,o.symbol)}),s}if(e.type==="class-breaks"){let s=r;return e.classBreakInfos.forEach(o=>{s=JC(s,o.symbol)}),s}return e.type==="dot-density"||e.type,r}let ah=class extends Vi.EventedAccessor{constructor(e){super(e),this.tracking=!1,this.displaying=!1,this.isDraped=!1}};u([d({constructOnly:!0})],ah.prototype,"graphic",void 0),u([d()],ah.prototype,"tracking",void 0),u([d()],ah.prototype,"displaying",void 0),u([d()],ah.prototype,"isDraped",void 0),ah=u([E("esri.views.3d.layers.graphics.GraphicState")],ah);function Mre(t,e,i,r=new lt){let n=0;if(i.type==="2d")n=e*(i.resolution??0);else if(i.type==="3d"){const h=i.overlayPixelSizeInMapUnits(t),p=i.basemapSpatialReference;n=p==null||p.equals(i.spatialReference)?e*h:Ss(p)/Ss(i.spatialReference)}const s=t.x-n,o=t.y-n,a=t.x+n,l=t.y+n,{spatialReference:c}=i;return r.xmin=Math.min(s,a),r.ymin=Math.min(o,l),r.xmax=Math.max(s,a),r.ymax=Math.max(o,l),r.spatialReference=c,r}function Sqe(t,e,i){const r=i.toMap(t);return r==null?!1:Mre(r,Ere(),i,wFe).intersects(e)}const wFe=new lt;async function bFe(t,e){if(t.type==="2d")return t.hitTest(e);const i=await t.hitTest(e);if(i.results.length===0)return i;const r=(i.results[0].distance??0)*(1+SFe),n=i.results.findIndex(s=>(s.distance??0)>r);return n!==-1&&(i.results=i.results.slice(0,n)),i}const SFe=.05;function Tre(t){return(t==null?void 0:t.type)==="graphic"}function xFe(t){return t.find(Tre)??null}function Ire(t){return t.filter(Tre)}function SI(t){const e=t.sourceLayer;if(!e||e.type!=="feature"||!IFe(e.renderer))return{rotation:null,size:null};let i=null,r=null;const n=e.renderer.getVisualVariablesForType("rotation").filter(o=>(!o.axis||o.axis==="heading")&&o.field&&!o.valueExpression&&Wj(o,t)!=null);n.length===1&&(i=$Fe(n[0],e));const s=e.renderer.getVisualVariablesForType("size").filter(o=>o.field&&!o.useSymbolValue&&!o.valueExpression&&rte(o)===tr.RealWorldSize&&aS(o,t)!=null);return s.length===1&&(r=TFe(s[0],e)),{rotation:i,size:r}}function $Fe(t,e){const i=(t.axis||"heading")==="heading"&&t.rotationType==="arithmetic"?-1:1,r=t.field,n=e.fields&&e.fields.filter(a=>a.name===r),s=n&&n.length===1?n[0].type:"double",o={initial:0,current:0};return{field:r,fieldType:s,getDefault:()=>Promise.resolve(0),getValue:a=>(o.current=o.initial-i*a,n3((o.current+360)%360,s)),initValue:a=>{o.initial=a??o.current,o.current=0},isUpdatingInteractively:!1,rotationType:t.rotationType??"geographic"}}function EFe(t,e){switch(e){case"width":return t[0];case"depth":return t[1];case"height":return t[2];default:return t[2]||t[1]||t[0]}}async function MFe(t,e,i){if(e==null)return 0;const{symbol:r}=ute(e);if(r==null||r.type==="web-style"||r.type==="cim")return 0;const n=r.symbolLayers.at(0);if(!n)return 0;switch(n.type){case"icon":{const{computeIconLayerResourceSize:s}=await O(()=>import("./symbolLayerUtils-86d61768.js"),[]);return n.size||Math.min(ad.icon,(await s(n,ad.icon))[0])||ad.icon}case"text":return n.size||ad.text;case"line":return n.size||ad.line;case"object":{const{computeObjectLayerResourceSize:s}=await O(()=>import("./symbolLayerUtils-86d61768.js"),[]);return EFe(await s(n,t.scale/ad.viewScaleSizeFactor),i)}case"path":return(n.width!=null?n.width:n.height)||t.scale/ad.viewScaleSizeFactor;case"extrude":return n.size||t.scale/ad.viewScaleSizeFactor;default:return 0}}function TFe(t,e){const i=t.field,r=t.axis,n=e.fields&&e.fields.filter(c=>c.name===i),s=n&&n.length===1?n[0].type:"double",o={updating:!1,initial:0,current:0},a=oS[t.valueUnit]??1;let l;return l=t.valueRepresentation==="area"?c=>(c*a/2)**2*Math.PI:t.valueRepresentation==="radius"||t.valueRepresentation==="distance"?c=>c*a/2:c=>c*a,{field:i,fieldType:s,getDefault:async(c,h)=>n3(l(await MFe(h,c,r)),s),getValue:(c,h)=>(o.initial||(o.initial=h.pixelSizeAt(h.center)),o.current=o.initial*c,n3(o.current,s)),initValue:c=>{o.initial=c??o.current,o.current=0},isUpdatingInteractively:!1,displayUnit:BFe(t.valueUnit),axis:t.axis}}function n3(t,e){switch(e){case"small-integer":case"integer":case"long":return Math.round(t);case"double":case"single":return t;default:return 0}}function IFe(t){switch(t==null?void 0:t.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":case"pie-chart":return!0;default:return!1}}async function rp(t,e){const i=await PM(t,{useSourceLayer:!0,ignoreGraphicSymbol:!0,webStyleCache:e});Ite(t.symbol,i)!=null&&(t.symbol=i)}function kFe(t){if(!t)throw new Error("no geometry type");return t==="multipatch"?"mesh":t}async function CFe(t,e,i,r){await s3(t,e,r);const n=t.on("create",async s=>{var o;if(s.state==="cancel")return s3(t,e,r);if(s.state==="complete"){const a=s.graphic;a.sourceLayer||(a.sourceLayer=e.layer),a.attributes||(a.attributes={...(o=e.template)==null?void 0:o.prototype.attributes}),await rp(a,r),i(a)}});return eo([n,Et(()=>t.cancel())])}async function s3(t,e,i){var s;const r=e.layer,n={...(s=e.template)==null?void 0:s.prototype.attributes};await PFe(t,r,n,i),t.layer.elevationInfo=r.elevationInfo,await t.create(kFe(r.geometryType),{graphicProperties:{attributes:n,sourceLayer:r},hasZ:r.capabilities.data.supportsZ,geometryToPlace:e.geometryToPlace??void 0})}async function PFe(t,e,i,r){const n=new fi({sourceLayer:e,attributes:i}),{rotation:s,size:o}=SI(n);let a=await PM(n,{useSourceLayer:!0,webStyleCache:r}),l=!1;for(const c of[o,s])c!=null&&i[c.field]==null&&(i[c.field]=await c.getDefault(a,t.view),l=!0);switch(l&&(a=await PM(n,{useSourceLayer:!0,webStyleCache:r})),a==null?void 0:a.type){case"simple-fill":case"polygon-3d":t.polygonSymbol=a;break;case"simple-line":case"line-3d":t.polylineSymbol=a;break;case"simple-marker":case"picture-marker":case"point-3d":case"cim":t.pointSymbol=a}kre(t.tooltipOptions,o,s)}function kre(t,e,i){t.visualVariables=e!=null||i!=null?{size:e!=null?{unit:e.displayUnit,axis:e.axis,valueType:e.fieldType}:null,rotation:i!=null?{valueType:i.fieldType,rotationType:i.rotationType??"geographic"}:null}:null}function E5(t,e){return t?t.find(i=>i.layer===e):void 0}async function AFe(t,e,i,r){if(t.length===0)return[];const{updatable:n,graphicsByLayer:s}=await i.async(async()=>{const{results:o}=await xm(bFe(e,i),r),a=new Map,l=h=>{const p=h.layer,f=a.get(p);if(!f){const y=new Array;return a.set(p,y),y}return f};Ire(o).forEach(({graphic:h})=>l(h).push(h));const c=t.filter(({supports:h,layer:p})=>h.includes("update")&&a.has(p));return c.length!==0&&i.stopPropagation(),{updatable:c,graphicsByLayer:a}});return xm(Di(n.map(async({layer:o})=>{const{objectIdField:a}=o,l="displayField"in o?o.displayField:null,c=[a];l!=null&&o.fieldsIndex.has(l)&&c.push(l);const h=s.get(o);if(h.some(p=>c.some(f=>!(f in p.attributes)))){const p=o.createQuery();return p.outFields=c,p.returnGeometry=!1,p.objectIds=h.map(f=>f.getObjectId()),o.queryFeatures(p,{signal:r}).then(({features:f})=>f)}return h})),r)}async function OFe(t,e,i,r){if(t.length===0)return[];let n=null;const s=await i.async(async()=>{const{results:o}=await xm(e.hitTest(i),r);if(o.length===0)return[];const a=new Set;n=Ire(o),n.forEach(({graphic:c})=>c&&a.add(c.layer));const l=t.items.filter(({layer:c,supports:h,attachmentsOnUpdateEnabled:p})=>a.has(c)&&(h.includes("update")||h.includes("delete")||p));return l.length>0&&i.stopPropagation(),l});return xm(Di(s.map(({layer:o})=>{const a=o.objectIdField,l="displayField"in o?o.displayField:null,c=lN({displayField:l,fields:o.fields}),h=[a];c!=null&&o.fieldsIndex.has(c)&&h.push(c);const p=o.createQuery();p.outFields=h,p.returnGeometry=!1;const f="renderer"in o?Ere({renderer:o.renderer,event:i}):0;return p.geometry=Mre(i.mapPoint,f,e),p.outSpatialReference=e.spatialReference,o.queryFeatures(p,{signal:r}).then(({features:y})=>(n==null||n.forEach(({graphic:g})=>{g.layer!==o||y.some(v=>v.getObjectId()===g.getObjectId())||y.push(g)}),y))})),r)}async function LFe(t,e,i,r){switch(e.type){case"3d":return AFe(t,e,i,r);case"2d":return OFe(t,e,i,r)}}async function RFe(t,e,i){const{sourceLayer:r}=t,n=r.createQuery();n.objectIds=[t.getAttribute(r.objectIdField)],n.outFields=["*"],n.outSpatialReference=e,n.returnM=r.capabilities.data.supportsM,n.returnZ=r.capabilities.data.supportsZ,Qj()&&Kj()&&r.type==="scene"&&r.infoFor3D!=null&&(n.returnGeometry=!0,n.formatOf3DObjects="3D_glb");const s=await r.queryFeatures(n,{signal:i});return Tt(i),s.features[0]}async function m1(t){const{graphic:e,sketchViewModel:i,sourceLayer:r,visualVariables:n,webStyleCache:s}=t;let o=!1;const{rotation:a,size:l}=n;[a,l].forEach(async h=>{if(h==null)return;const p=e.getAttribute(h.field);if(p!=null)h.initValue(p);else{const f=await h.getDefault(e.symbol,i.view);h.initValue(f),e.setAttribute(h.field,f),o=!0}}),o&&await rp(e,s);const c={multipleSelectionEnabled:!1};return r.geometryType==="point"&&(c.enableRotation=a!=null,c.enableScaling=l!=null),kre(i.tooltipOptions,l,a),i.layer.elevationInfo=r.elevationInfo,i.update(e,c)}function FFe(t){return t==null||t.type!=="rotate-start"&&t.type!=="rotate"&&t.type!=="rotate-stop"?null:t}function DFe(t){return t==null||t.type!=="scale-start"&&t.type!=="scale"&&t.type!=="scale-stop"?null:t}async function M5(t,e,i,r,n){var c;if(e.geometry==null||((c=e.geometry)==null?void 0:c.type)!=="point")return;const s=r.rotation,o=FFe(i.toolEventInfo);if(s!=null&&o!=null)if(o.type==="rotate-stop")s.isUpdatingInteractively=!1,s.initValue();else{s.isUpdatingInteractively=!0;const{field:h,getValue:p}=s;e.setAttribute(h,p(o.angle,t))}const a=r.size,l=DFe(i.toolEventInfo);if(a!=null&&l!=null)if(l.type==="scale-stop")a.isUpdatingInteractively=!1,a.initValue();else{a.isUpdatingInteractively=!0;const{field:h,getValue:p}=a;e.setAttribute(h,p(l.xScale,t))}await rp(e,n)}async function NFe(t,e,i,r,n,s){const o=KC(t);await rp(o,s),r.map.add(i.layer),i.layer.add(o);const a=t.sourceLayer,l=y1(r,a);await zFe(r,o),await m1({graphic:o,sketchViewModel:i,sourceLayer:a,visualVariables:e,webStyleCache:s});const c=jFe(i,t,o);let h=null;l.then(w=>h=w).catch(()=>{});const p=e.size,f=e.rotation,y=D(()=>t.attributes,async w=>{let S=!1;for(const b in w){const $=w[b];$!==o.getAttribute(b)&&(o.setAttribute(b,$),p==null||p.isUpdatingInteractively||p.field!==b||p.initValue($),f==null||f.isUpdatingInteractively||f.field!==b||f.initValue($),(h==null||h.requiredFields.includes(b))&&(S=!0))}S&&await rp(o,s)}),g=i.on("update",async w=>{const S=w.graphics[0];if(w.state==="complete")return m1({graphic:S,sketchViewModel:i,sourceLayer:a,visualVariables:e,webStyleCache:s});await M5(r,S,w,e,s),n(KC(S),w)}),v=i.on(["undo","redo"],async w=>{n(KC(w.graphics[0]),w)}),_=i.updateOnGraphicClick;return{visual:eo([c,Et(()=>{i.updateOnGraphicClick=_})]),interactive:eo([v,g,Et(()=>i.cancel()),y,Et(()=>{i.updateOnGraphicClick=!1})])}}function jFe(t,e,i){const r=t.view,n=e.sourceLayer,s=e.layer,o=e.getAttribute(s.objectIdField);let a=null;function l(c){a==null||a.abort(),a=Z1(async h=>{var f;const p=await y1(r,n);Tt(h),(f=p.setVisibility)==null||f.call(p,o,c)})}return l(!1),eo([VFe(r,i,c=>l(!c)),Et(async()=>{l(!0);const c=await y1(r,n);await Ci(()=>!c.updating),t.layer.remove(i)})])}function VFe(t,e,i){if(t.type==="3d"){const r=new ah({graphic:e});return eo([t.trackGraphicState(r),D(()=>r.displaying,i)])}return D(()=>e.visible,i)}async function zFe(t,e){if(t.type==="3d"){const i=new ah({graphic:e}),r=t.trackGraphicState(i);await Ci(()=>i.displaying),r.remove()}else await Ci(()=>e.visible)}const ad={icon:Js(24),text:Js(12),line:Js(1),viewScaleSizeFactor:100};function T5(t,e,i){let r=!1;return t.filter(n=>!!r||(r=n===e,r)).map(n=>i[n]())}function UFe(t){if(t.length!==1)return null;const e=t[0];if("items"in e){const i=e;return i.items.length===1?i.items[0]:null}return e}function Cre(t,e){if(t.viewModel.refreshCreationTemplates(),e[0].id==="awaiting-feature-creation-info"){const i=UFe(t.viewModel.featureTemplatesViewModel.items);i==null||i.supportsUpload||(t.creationInfo=i,e.shift())}return e}function BFe(t){switch(t){case"unknown":case"decimal-degrees":return null;default:return t}}function Pre(t){t.filesEnabled=!0,t.mode="view",t.capabilities={editing:!0,operations:{add:!0,update:!0,delete:!0}}}function Are(t){var a,l;const{creationInfo:e,viewModel:i}=t;if(!e)return!1;const{layer:r}=e,n=i.editableItems.find(c=>c.layer===r);if(n)return n.attachmentsOnCreateEnabled;const s=(a=r.capabilities)==null?void 0:a.data,o=(l=i.layerInfos)==null?void 0:l.find(c=>c.layer===r);return!(!(s&&"supportsAttachment"in s&&s.supportsAttachment)||o&&(o.allowAttachments===!1||o.attachmentsOnUpdateEnabled===!1))}const Ore=t=>/-stop/.test(t)||/vertex-/.test(t),y1=(t,e)=>{const i=e.type==="subtype-sublayer"?e.parent:e;return t.whenLayerView(i)};function GFe(t){return"createInteractiveEditSession"in t}function KC(t){var i;const e=t.geometry;if((e==null?void 0:e.type)==="mesh"){const r=t.cloneShallow();return r.attributes=F(t.attributes),r.geometry=e.cloneShallow(),r.geometry.transform=((i=e.transform)==null?void 0:i.clone())??null,r}return t.clone()}function o3(t){const e=t.cursor;return t.cursor="progress",Et(()=>t.cursor=e)}async function HFe({view:t,data:e,signal:i,next:r,cancel:n}){const{creationInfo:s}=e;if(!s||!AM(s))return;const{layer:o}=s,a=s.geometryToPlace!=null;if(s.geometryToPlace=null,a)return void n();const l=(await O(()=>import("./Upload-692c4712.js"),[])).Upload;Tt(i);const c=new l;e.upload=c;const h=o3(t),p=eo([h,D(()=>c.state,f=>{switch(f){case"success":s.maxFeatures=1,s.geometryToPlace=c.result,r();break;case"error":h.remove();break;case"canceled":n()}}),Et(()=>{e.upload=Ue(e.upload)})]);return c.uploadTo(o),p}function AM(t){const e=t==null?void 0:t.layer;return(e==null?void 0:e.type)==="scene"}let fr=class extends Xr(Vi.EventedAccessor){constructor(e){super(e),this._indexHistory=[],this._lastStepIndex=-1,this._stepIndex=-1,this._setupAbortController=null,this._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"},this.data=void 0,this.started=!1,this.steps=[],this.type=null}get hasNextStep(){const{steps:e}=this;return!!(e&&this._stepIndex<e.filter(i=>!i.parent).length-1)}get hasPreviousStep(){return this._stepIndex>0}get reliesOnOwnerAdminPrivileges(){return!1}get hasInvalidFormTemplate(){return!1}get hasUnsupportedFields(){return!1}get shouldShowAttachments(){return!1}get shouldAllowAttachmentEditing(){return!1}get stepId(){const{steps:e}=this,i=e&&e[this._stepIndex];return i&&i.id}get helpMessage(){}get hasPendingEdits(){return!1}get keyboardCancellationEnabled(){return!0}async back(e=()=>Promise.resolve(!0)){this.hasPendingEdits&&!await e()||(this.hasPreviousStep?await this.previous({cancelCurrentStep:!0}):await this.cancel({force:!0}))}async cancel(e={force:!0}){return e.force!==!1?this._cancel(e):new Promise((i,r)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel({...e,force:!0}).then(i)},deny:()=>r(new C("workflow:cancel-denied","Request to cancel workflow was denied."))}})})}async commit(){var e;this.handles.remove(this._handleKeys.beforeCommit),await((e=this.onCommit)==null?void 0:e.call(this,this.data)),this.handles.remove(this._handleKeys.afterCommit),this.emit("commit")}async go(e){const{steps:i}=this,r=i.findIndex(n=>n.id===e);this._indexHistory.push(this._stepIndex),await this._go(r)}async next(){this._indexHistory.push(this._stepIndex),await this._go(this._stepIndex+1)}async previous(e={cancelCurrentStep:!1}){await this._go(this._indexHistory.pop(),e.cancelCurrentStep)}async reset(){await this._cancel({notify:!1}),await this.start()}async save(){await this.commit(),await this.reset()}async start(){this._set("started",!0);const e=this._stepIndex===-1?0:this._stepIndex;await this._go(e)}async _cancel({notify:e=!0,error:i}={}){this.started&&(this._set("started",!1),await this.steps[this._stepIndex].tearDown({canceled:!0})),this.handles.remove([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]),this._resetIndexing(e),e&&this.emit("cancel",{error:i})}async _go(e=-1,i=!1){const{steps:r}=this;if(e<=-1||e>=r.length)return;if(!this.started)return this._stepIndex=e,void this._notifyStepProps();this._lastStepIndex>-1&&(this._setupAbortController=vs(this._setupAbortController),await r[this._lastStepIndex].tearDown({canceled:i})),this._setupAbortController=new AbortController;const n=this._setupAbortController.signal;try{await r[e].setUp(n)}catch(s){I2(s)}this._setupAbortController.signal===n&&(this._setupAbortController=null),n.aborted||(this._lastStepIndex=e,this._stepIndex=e,this._notifyStepProps())}_resetIndexing(e=!0){this._stepIndex=-1,this._lastStepIndex=-1,this._indexHistory.length=0,e&&this._notifyStepProps()}_notifyStepProps(){this.notifyChange("stepId"),this.notifyChange("hasPreviousStep"),this.notifyChange("hasNextStep")}};u([d()],fr.prototype,"data",void 0),u([d()],fr.prototype,"hasNextStep",null),u([d()],fr.prototype,"hasPreviousStep",null),u([d()],fr.prototype,"onCommit",void 0),u([d()],fr.prototype,"reliesOnOwnerAdminPrivileges",null),u([d()],fr.prototype,"hasInvalidFormTemplate",null),u([d()],fr.prototype,"hasUnsupportedFields",null),u([d()],fr.prototype,"shouldShowAttachments",null),u([d()],fr.prototype,"shouldAllowAttachmentEditing",null),u([d()],fr.prototype,"started",void 0),u([d({readOnly:!0})],fr.prototype,"stepId",null),u([d()],fr.prototype,"steps",void 0),u([d({readOnly:!0})],fr.prototype,"type",void 0),u([d()],fr.prototype,"helpMessage",null),u([d()],fr.prototype,"hasPendingEdits",null),u([d()],fr.prototype,"keyboardCancellationEnabled",null),fr=u([E("esri.widgets.Editor.Workflow")],fr);const xI=fr;var TE;const QC=Symbol(),dG=Symbol();let jl=TE=class extends xI{constructor(t){super(t),this.type="create-features",this.createFeatureState="create-new",this._featureFormHandle=null,this._visualVariableAttributes={rotation:null,size:null},this._attachmentFileInfos=new Map,this._highlightHandles=new Map,this._preventDefaultActionOnCancel=!1,this._lastActiveGraphics=[]}get hasPendingEdits(){var i;if(this.numPendingFeatures)return!0;const{data:t}=this,{upload:e}=t;return!(!e||e.error)||!!((i=t.creationInfo)!=null&&i.geometryToPlace)}get helpMessage(){var n;const{creationInfo:t,viewModel:e}=this.data;if(this.stepId!=="creating-features"||!t)return;const i=t.layer.geometryType,r=(n=e.sketchViewModel.createGraphic)==null?void 0:n.geometry;return $re(i,r,e.view)}get numPendingFeatures(){return this.pendingFeatures.length}get pendingFeatures(){return this.data.pendingFeatures}get keyboardCancellationEnabled(){return this.numPendingFeatures===0}get reliesOnOwnerAdminPrivileges(){var n,s;const{creationInfo:t}=this.data;if(!t)return!1;const{layer:e}=t,i=(n=e.capabilities)==null?void 0:n.operations.supportsAdd,r=(s=hu(e))==null?void 0:s.operations.supportsAdd;return ZT(e)&&!e.editingEnabled||!!r&&!i}get shouldShowAttachments(){return!!(this.data&&this.data.creationInfo&&this.data.viewModel)&&Are(this.data)}get shouldAllowAttachmentEditing(){return this.shouldShowAttachments}get updating(){return this.updatingHandles.updating}get test(){return{addAttachment:(t,e)=>{this._attachmentFileInfos.set(t,e)}}}async enter(){const{featureFormViewModel:t}=this.data.viewModel,e=t.relatedRecordCallbacks;t.relatedRecordCallbacks=null,this.addHandles(Et(()=>{t.relatedRecordCallbacks=e}),dG)}exit(){this.removeHandles(dG)}async updatePendingFeature(t,e){return this._preventDefaultActionOnCancel=!0,this.data.viewModel.sketchViewModel.cancel(),xA(this._lastActiveGraphics,t),this._startUpdating(t,e)}static create(t){const{addAttachmentsCallback:e,applyEditsCallback:i,creationInfo:r,startAt:n,viewModel:s}=t,o=new TE({data:new Xy({creationInfo:r,viewModel:s}),onCommit:async a=>{var g;const{creationInfo:l}=a;if(!l)return;l.geometryToPlace&&(a.creationInfo=null);const c=a.pendingFeatures.toArray(),{layer:h}=l,p=((g=h.capabilities)==null?void 0:g.editing.supportsGlobalId)&&"globalIdField"in h,f=o._attachmentFileInfos;if(p){const v=ZFe(c,h,f);return void await i(h,v,{globalIdUsed:!0})}const y=await i(h,{addFeatures:c});if(f.size>0){const v=(y==null?void 0:y.addFeatureResults)??[];await e(h,WFe(c,v,h,f))}}});return o._set("steps",this._createWorkflowSteps(o,n)),o}_fadeExistingFeatures(t){if("effect"in t){const i=t.effect;return t.effect="saturate(0.6) opacity(0.8)",Et(()=>t.effect=i)}const e=t.opacity;return t.opacity=.7,Et(()=>t.opacity=e)}_highlight(t){const e=this.data.viewModel.view;(e==null?void 0:e.type)==="3d"&&this._highlightHandles.set(t,e.highlight(t))}_removeHighlight(t){zt(this._highlightHandles.get(t)),this._highlightHandles.delete(t)}async _startCreating(t){const{data:e}=this,{creationInfo:i}=e;if(i)return this.createFeatureState="create-new",s3(e.viewModel.sketchViewModel,i,t)}async _startUpdating(t,e){const{pendingFeatures:i}=this;i.includes(t)||i.add(t);const{creationInfo:r,viewModel:n}=this.data,{featureFormViewModel:s,layerInfos:o,sketchViewModel:a,view:l}=n;if(!l||!r)return;const c=r.layer,h=E5(o,c),p=h==null?void 0:h.formTemplate,f=l.spatialReference;return s.set({arcadeEditType:"INSERT",feature:t,formTemplate:p,spatialReference:f,map:l.map}),this._removeHighlight(t),await rp(t,e),zt(this._featureFormHandle),this._featureFormHandle=eo([s.on("value-change",async()=>{t.attributes=s.getValues(),await rp(t,e)}),a.on(["update","undo","redo"],y=>{(y.type==="undo"||y.type==="redo"||y.type==="update"&&y.toolEventInfo!=null&&Ore(y.toolEventInfo.type))&&s.notifyFeatureGeometryChanged()})]),this.createFeatureState="update-pending",this._visualVariableAttributes=SI(t),L0(c)?void 0:m1({graphic:t,sketchViewModel:a,sourceLayer:c,visualVariables:this._visualVariableAttributes,webStyleCache:e})}static _createWorkflowSteps(t,e="awaiting-feature-creation-info"){const{data:i,handles:r}=t,n=T5(["awaiting-feature-creation-info","creating-features","adding-attachment","editing-attachment"],e,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(s){const{creationInfo:o,viewModel:a}=i,{view:l}=a;if(l)if(AM(o)){const c=await HFe({view:l,data:i,signal:s,next:()=>t.next(),cancel:()=>a.cancelWorkflow()});Tt(s),r.add(c,this.id)}else i.creationInfo=null,r.add(a.featureTemplatesViewModel.on("select",({item:c})=>{var h;c&&(i.creationInfo=c,(h=a.activeWorkflow)==null||h.next())}),this.id)},async tearDown(){r.remove(this.id)}}),"creating-features":()=>({id:"creating-features",async setUp(){var f,y;if(r.has(this.id))return;const{viewModel:s}=i,{view:o}=s;if(!o)return;const a=new Map,l=[],c=[];t._lastActiveGraphics=[],t._featureFormHandle=zt(t._featureFormHandle),t._visualVariableAttributes={rotation:null,size:null},Pre(s.attachmentsViewModel),l.push(D(()=>s.attachmentsViewModel.mode,g=>{switch(g){case"add":t.go("adding-attachment");break;case"edit":t.go("editing-attachment")}}));const h=o3(o);l.push(h);const p=L0((f=t.data.creationInfo)==null?void 0:f.layer);try{if(!p){const v=TE._configureSketchViewModel(t,a);l.push(v.beforeCommit),c.push(v.afterCommit)}const g=(y=i.creationInfo)==null?void 0:y.initialFeature;g?(p||s.sketchViewModel.layer.add(g),await t._startUpdating(g,a)):await t._startCreating(a)}finally{h.remove()}l.push(t._featureFormHandle),r.add(l,t._handleKeys.beforeCommit),r.add([...l,...c],this.id)},async tearDown(s){const{viewModel:o}=i;if(s.canceled){const{pendingFeatures:a}=t;a.drain(l=>o.sketchViewModel.layer.remove(l)),r.remove([this.id,QC]),o.attachmentsViewModel.fileInfos.removeAll(),t._attachmentFileInfos.clear()}}}),"adding-attachment":()=>({id:"adding-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{attachmentsViewModel:s}=i.viewModel,{graphic:o,fileInfos:a}=s;t._attachmentFileInfos.set(o,a.toArray()),s.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{attachmentsViewModel:s}=i.viewModel,{graphic:o,fileInfos:a}=s;t._attachmentFileInfos.set(o,a.toArray()),s.mode="view"}})});return Cre(i,n)}static _configureSketchViewModel(t,e){const{data:i,handles:r}=t,{viewModel:n}=i,{view:s}=n,o=n.sketchViewModel;let a=null;const l=[];if(!s)return{beforeCommit:Et(),afterCommit:Et()};const c=o.updateOnGraphicClick;return o.updateOnGraphicClick=!1,s.type==="2d"&&i.creationInfo&&l.push(t._fadeExistingFeatures(i.creationInfo.layer)),l.push(o.on("create",async h=>{if(h.state==="cancel"){if(t._preventDefaultActionOnCancel)return void(t._preventDefaultActionOnCancel=!1);if(t._lastActiveGraphics.length<1)return t._startCreating(e);const p=t._lastActiveGraphics.pop();return t._startUpdating(p,e)}if(h.state==="complete"&&h.graphic)return t._startUpdating(h.graphic,e)}),o.on("update",async h=>{var b,$,T;const{viewModel:p}=i,{attachmentsViewModel:f,featureFormViewModel:y}=p,g=h.graphics[0];if(h.state==="complete"){if(g!==a&&(t._lastActiveGraphics.push(g),t._highlight(g)),a=null,t.numPendingFeatures===((b=i.creationInfo)==null?void 0:b.maxFeatures)){const I=t._lastActiveGraphics.pop();return t._startUpdating(I,e)}if(f.mode!=="add"&&f.mode!=="edit"||(($=p.activeWorkflow)==null||$.previous()),h.aborted&&t._preventDefaultActionOnCancel)return void(t._preventDefaultActionOnCancel=!1);r.add([o3(s),s.on("click",I=>I.preventDefault())],QC),await Ci(()=>!y.updating),r.remove(QC),t._startCreating(e)}h.state==="start"&&(t._removeHighlight(g),f.mode!=="add"&&f.mode!=="edit"||((T=p.activeWorkflow)==null||T.previous()),f.fileInfos.removeAll(),f.graphic=g,f.mode="view",(t._attachmentFileInfos.get(g)||[]).forEach(({file:I,form:A})=>f.addFile(I,A)));const v=t._visualVariableAttributes;await M5(s,g,h,v,e);const _=g.attributes,{rotation:w,size:S}=v;if(w!=null){const{field:I}=w;y.setValue(I,_[I])}if(S!=null){const{field:I}=S;y.setValue(I,_[I])}}),o.on("delete",async h=>{const p=h.graphics[0];t.pendingFeatures.remove(p),xA(t._lastActiveGraphics,p),a=p}),s.on("immediate-click",async h=>{if(AM(i.creationInfo))return;const{results:p}=await s.hitTest(h,{include:o.layer}),f=p.find(g=>g.type==="graphic");if(!f)return;const y=f.graphic;if(o.activeTool==="transform"||o.activeTool==="reshape"){if(o.updateGraphics.at(0)===y)return;await t.updatePendingFeature(y,e)}}),Et(()=>o.cancel()),qFe(o,i)),{beforeCommit:eo(l),afterCommit:Et(()=>{o.updateOnGraphicClick=c})}}};function qFe(t,e){let i=null;const r=()=>t.snappingOptions.featureSources,n=()=>(i=new $5({layer:t.layer}),r().add(i),i),s=()=>{i!=null&&(r().remove(i),i=Ue(i))};return eo([D(()=>{var l;const o=(l=e.creationInfo)==null?void 0:l.layer,a=r().find(c=>c.layer===o);return{hasFeatureLayerSource:!!a,enabled:(a==null?void 0:a.enabled)??!1}},({hasFeatureLayerSource:o,enabled:a})=>{if(!o)return s();i??(i=n()),i.enabled=a},yn),Et(s)])}function WFe(t,e,i,r){const n=[];return e.forEach((s,o)=>{if(!s.error){const a=t[o],l=r.get(a)||[];a.attributes[i.objectIdField]=s.objectId,l.forEach(({form:c})=>n.push({feature:a,attachment:c}))}}),n}function ZFe(t,e,i){const r=[],n=e.globalIdField;return t.forEach((s,o)=>{var a;(a=t[o].attributes)[n]??(a[n]=M8()),((i==null?void 0:i.get(s))||[]).forEach(({file:l})=>r.push({feature:s,attachment:{globalId:M8(),data:l}}))}),r.length?{addFeatures:t,addAttachments:r}:{addFeatures:t}}u([d()],jl.prototype,"hasPendingEdits",null),u([d()],jl.prototype,"helpMessage",null),u([d()],jl.prototype,"keyboardCancellationEnabled",null),u([d()],jl.prototype,"reliesOnOwnerAdminPrivileges",null),u([d()],jl.prototype,"shouldShowAttachments",null),u([d()],jl.prototype,"shouldAllowAttachmentEditing",null),u([d()],jl.prototype,"updating",null),jl=TE=u([E("esri.widgets.Editor.CreateFeaturesWorkflow")],jl);const Lre=jl;let eg=class extends X{constructor(e){super(e),this.creationInfo=null,this.edits=null,this.viewModel=null}};u([d()],eg.prototype,"creationInfo",void 0),u([d()],eg.prototype,"edits",void 0),u([d()],eg.prototype,"viewModel",void 0),eg=u([E("esri.widgets.Editor.CreateWorkflowData")],eg);const YFe=eg;function hG(t){return t==null?null:JSON.stringify(t)}let nc=class extends Xr(X){constructor(e){super(e),this._baselineAttributesJSON=null,this._baselineGeometryJSON=null,this._stagedForDelete=!1,this.feature=null}get attributesModified(){var i;const e=(i=this.feature)==null?void 0:i.attributes;return e!=null&&this._baselineAttributesJSON!==this._stringifyAttributes(e)}get geometryModified(){var i;const e=(i=this.feature)==null?void 0:i.geometry;return e!=null&&this._baselineGeometryJSON!==this._stringifyGeometry(e)}get stagedForDelete(){return this._stagedForDelete}get modified(){return this.attributesModified||this.geometryModified||this._stagedForDelete}stageDelete(){this._stagedForDelete=!0}unstageDelete(){this._stagedForDelete=!1}trackChanges(){const{feature:e}=this;if(!e)return;const{attributes:i,geometry:r}=e;this._baselineAttributesJSON=this._stringifyAttributes(i),this._baselineGeometryJSON=this._stringifyGeometry(r),this.notifyChange("attributesModified"),this.notifyChange("geometryModified")}updateAttributes(e){const{feature:i}=this;i&&(i.attributes=e,this.notifyChange("attributesModified"))}updateGeometry(e){const{feature:i}=this;i&&(i.geometry=e,this.notifyChange("geometryModified"))}_stringifyAttributes(e){return hG(e)}_stringifyGeometry(e){return hG((e==null?void 0:e.type)==="mesh"?{transform:e.transform,vertexSpace:e.vertexSpace}:e)}};u([d()],nc.prototype,"_stagedForDelete",void 0),u([d()],nc.prototype,"attributesModified",null),u([d()],nc.prototype,"feature",void 0),u([d()],nc.prototype,"geometryModified",null),u([d()],nc.prototype,"modified",null),nc=u([E("esri.widgets.Editor.Edits")],nc);var a3;let Vd=a3=class extends xI{constructor(t){super(t),this.type="create"}get shouldShowAttachments(){return!!(this.data&&this.data.creationInfo&&this.data.viewModel)&&Are(this.data)}get shouldAllowAttachmentEditing(){return this.shouldShowAttachments}get hasPendingEdits(){return!0}get helpMessage(){var n;if(this.stepId!=="editing-new-feature")return;const{creationInfo:t,viewModel:e}=this.data,i=(n=e.sketchViewModel.createGraphic)==null?void 0:n.geometry,r=t.layer.geometryType;return $re(r,i,e.view)}get reliesOnOwnerAdminPrivileges(){var r,n;const{layer:t}=this.data.creationInfo,e=(r=t.capabilities)==null?void 0:r.operations.supportsAdd,i=(n=hu(t))==null?void 0:n.operations.supportsAdd;return ZT(t)&&!t.editingEnabled||!!i&&!e}static create(t,e,i){const r=new a3({data:new YFe({edits:new nc,viewModel:t}),onCommit:async n=>{await i(n.creationInfo.layer,{addFeatures:[n.edits.feature]})}});return r._set("steps",this._createWorkflowSteps(r,e)),r}static _createWorkflowSteps(t,e="awaiting-feature-creation-info"){const{data:i,handles:r}=t,n=new Map,s=T5(["awaiting-feature-creation-info","awaiting-feature-to-create","editing-new-feature","adding-attachment","editing-attachment"],e,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){i.creationInfo=null,i.edits.feature=null,i.viewModel.featureTemplatesViewModel.select(null),r.add(i.viewModel.featureTemplatesViewModel.on("select",({item:o})=>{var a;o&&(i.creationInfo=o,(a=i.viewModel.activeWorkflow)==null||a.next())}),this.id)},async tearDown(){r.remove(this.id)}}),"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",async setUp(){r.add(await CFe(i.viewModel.sketchViewModel,i.creationInfo,o=>{var a;i.edits.feature=o,(a=i.viewModel.activeWorkflow)==null||a.next()},n),this.id)},async tearDown(){r.remove(this.id)}}),"editing-new-feature":()=>({id:"editing-new-feature",async setUp(){const o=i.edits.feature,a=o.sourceLayer,l=i.viewModel,c=l.sketchViewModel,h=E5(l.layerInfos,a),p=h==null?void 0:h.formTemplate,{spatialReference:f}=l.view;l.featureFormViewModel.set({arcadeEditType:"INSERT",feature:o,formTemplate:p,spatialReference:f}),c.allowDeleteKey=!1,Pre(l.attachmentsViewModel);const y=SI(o);await m1({graphic:o,sketchViewModel:c,sourceLayer:a,visualVariables:y,webStyleCache:n});const g=c.on("update",async v=>{const _=v.graphics[0];if(v.state==="complete")return m1({graphic:_,sketchViewModel:c,sourceLayer:a,visualVariables:y,webStyleCache:n});await M5(c.view,_,v,y,n);const w=_.attributes;if(y.rotation!=null){const{field:S}=y.rotation;l.featureFormViewModel.setValue(S,w[S])}if(y.size!=null){const{field:S}=y.size;l.featureFormViewModel.setValue(S,w[S])}});r.add([i.viewModel.featureFormViewModel.on("value-change",async()=>{i.edits.updateAttributes(i.viewModel.featureFormViewModel.getValues()),o.attributes=i.edits.feature.attributes,c.view.type==="3d"&&await rp(o,n)}),g,D(()=>i.viewModel.attachmentsViewModel.mode,v=>{v==="add"&&i.viewModel.activeWorkflow.go("adding-attachment"),v==="edit"&&i.viewModel.activeWorkflow.go("editing-attachment")})],this.id)},async tearDown(o){o.canceled&&i.viewModel.sketchViewModel.layer.removeAll(),r.remove(this.id)}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-new-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-new-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}})});return Cre(i,s)}};u([d()],Vd.prototype,"shouldShowAttachments",null),u([d()],Vd.prototype,"shouldAllowAttachmentEditing",null),u([d()],Vd.prototype,"hasPendingEdits",null),u([d()],Vd.prototype,"helpMessage",null),u([d()],Vd.prototype,"reliesOnOwnerAdminPrivileges",null),Vd=a3=u([E("esri.widgets.Editor.CreateWorkflow")],Vd);const JFe=Vd;function g1(t){return t&&typeof t.highlight=="function"}function Mqe(t,e,i){return t==null||t>i&&(e===0||t<e)}var IE;let zd=IE=class extends X{constructor(t){super(t),this.attachmentsCapabilities=null,this.editableItem=null,this.edits=null,this.formTemplate=null,this.viewModel=null}static async create(t){const e=IE._makeConstructorProps(t);return new IE(e)}static _makeConstructorProps(t){const{feature:e,viewModel:i}=t,r=i.editableItems.find(l=>l.layer===e.layer);if(!r)throw new C("no-editableItem-found","The EditorViewModel provided did not have an EditableItem associated with the specified Graphic's layer");const n=E5(i.layerInfos,e.sourceLayer),s=r.supports,o=s.includes("create"),a=s.includes("update");return{attachmentsCapabilities:{editing:!0,operations:{add:o||a,update:a,delete:a}},editableItem:r,edits:new nc({feature:e}),formTemplate:n==null?void 0:n.formTemplate,viewModel:i}}};u([d()],zd.prototype,"attachmentsCapabilities",void 0),u([d()],zd.prototype,"editableItem",void 0),u([d()],zd.prototype,"edits",void 0),u([d()],zd.prototype,"formTemplate",void 0),u([d()],zd.prototype,"viewModel",void 0),zd=IE=u([E("esri.widgets.Editor.UpdateRecordWorkflowData")],zd);const Rre=zd;var kE;let CE=kE=class extends Rre{constructor(t){super(t)}static async create(t){const{feature:e,viewModel:i}=t,{view:r}=i;if(!r)throw new C("editor:cannot-create-workflow-data","The provided EditorViewModel does not have an associated view");const n=await y1(r,e.layer);return new kE({...kE._makeConstructorProps(t),layerView:n})}};u([d()],CE.prototype,"layerView",void 0),CE=kE=u([E("esri.widgets.Editor.UpdateFeatureWorkflowData")],CE);const KFe=CE;var l3;const PE={exit:Symbol()},QFe="esri.widgets.Editor.UpdateRecordWorkflow";let Mo=l3=class extends xI{constructor(t){super(t),this.fullFeature=null,this.type="update-table-record"}async initialize(){const{data:t}=this,{edits:e}=t,i=e.feature,r=new AbortController;this.addHandles(rce(r)),this.updatingHandles.addPromise(RFe(i,t.viewModel.view.spatialReference,r.signal).then(n=>{to(r)||this._onFullFeatureLoaded(n)},n=>this.cancel({force:!0,error:new C("editor:failed-to-fetch-full-feature","Failed to retrieve all information for this feature. The update cannot proceed.",{detail:{error:n}})})))}get editableItem(){return this.data.editableItem}get hasPendingEdits(){return this.data.edits.modified}get shouldShowAttachments(){return this.editableItem.attachmentsOnUpdateEnabled}get shouldAllowAttachmentEditing(){return this.editableItem.supports.includes("update")}get updating(){return this.updatingHandles.updating}get reliesOnOwnerAdminPrivileges(){var r,n;const{layer:t}=this.editableItem,e=(r=t.capabilities)==null?void 0:r.operations.supportsUpdate,i=(n=hu(t))==null?void 0:n.operations.supportsUpdate;return ZT(t)&&!t.editingEnabled||!!i&&!e}async deleteAndCommit(){return this.data.edits.stageDelete(),this.commit()}async enter(){this._configureAttachmentsViewModel(),this._configureFeatureFormViewModel()}exit(t){this.removeHandles(PE.exit)}_configureAttachmentsViewModel(){const{data:t,fullFeature:e}=this,{attachmentsCapabilities:i,viewModel:r}=t,{attachmentsViewModel:n}=r;n.set({capabilities:i,graphic:e,filesEnabled:!1,mode:"view"}),this.addHandles(D(()=>n.mode,s=>{switch(s){case"add":this.go("adding-attachment");break;case"edit":this.go("editing-attachment")}}),PE.exit)}_configureFeatureFormViewModel(){const{edits:t,formTemplate:e,viewModel:{featureFormViewModel:i,view:r}}=this.data;i.set({arcadeEditType:"UPDATE",feature:this.fullFeature,formTemplate:e,map:r==null?void 0:r.map,spatialReference:r.spatialReference}),this.addHandles(i.on("value-change",()=>{t.updateAttributes(i.getValues()),this.fullFeature.attributes=t.feature.attributes}),PE.exit)}_onFullFeatureLoaded(t){this.fullFeature=t;const{edits:e}=this.data;e.updateAttributes(t.attributes),e.trackChanges()}static async create(t){const e=new l3({data:await Rre.create(t),onCommit:this._onCommitFactory(t.applyEdits)});return e._set("steps",this._createWorkflowSteps(e)),e}static _createWorkflowSteps(t){const{attachmentsViewModel:e}=t.data.viewModel;return[{id:"editing-attributes",async setUp(){},async tearDown(){}},{id:"adding-attachment",async setUp(){},async tearDown(){e.mode="view"}},{id:"editing-attachment",async setUp(){},async tearDown(){e.mode="view"}}]}};Mo._onCommitFactory=t=>async e=>{var a;const{edits:i}=e,{feature:r}=i;if(!r)return;const n=r.sourceLayer,s=r.clone();if(!i.attributesModified||i.stagedForDelete){const l=n.objectIdField;if(s.attributes={[l]:r.getAttribute(l)},Qj()&&Kj()&&n.type==="scene"&&n.infoFor3D!=null){const c=(a=n.associatedLayer)==null?void 0:a.globalIdField;c!=null&&s.setAttribute(c,r.getAttribute(c))}}i.geometryModified&&!i.stagedForDelete||(s.geometry=null);const o=i.stagedForDelete?"deleteFeatures":"updateFeatures";await t(n,{[o]:[s]})},u([d()],Mo.prototype,"editableItem",null),u([d()],Mo.prototype,"fullFeature",void 0),u([d()],Mo.prototype,"hasPendingEdits",null),u([d()],Mo.prototype,"shouldShowAttachments",null),u([d()],Mo.prototype,"shouldAllowAttachmentEditing",null),u([d()],Mo.prototype,"updating",null),u([d()],Mo.prototype,"reliesOnOwnerAdminPrivileges",null),Mo=l3=u([E(QFe)],Mo);var u3;const Sl={...PE,highlights:Symbol(),interactiveGraphics:Symbol(),geometryGraphics:Symbol()};let AE=u3=class extends Mo{constructor(t){super(t),this.type="update-feature",this._layerViewEditSession=null,this._webStyleCache=new Map}async initialize(){const{edits:{feature:t},layerView:e}=this.data;GFe(e)&&(this._layerViewEditSession=e.createInteractiveEditSession(t))}destroy(){var t;(t=this._layerViewEditSession)==null||t.rollback()}async commit(){this.removeHandles(Sl.interactiveGraphics);try{const t=this.data.edits.stagedForDelete;await super.commit(),this.removeHandles(Sl.geometryGraphics);const e=this._layerViewEditSession;t?e==null||e.rollback():e==null||e.commit()}catch(t){throw this.removeHandles(Sl.geometryGraphics),await this._configureSketchViewModel(),new C("editor-workflow:failed-to-commit","An error occurred when sending the updates to the service",{error:t})}}async enter(){await super.enter(),this.data.editableItem.geometryUpdatesEnabled?this.hasHandles(Sl.interactiveGraphics)||await this._configureSketchViewModel():this._configureHighlight()}exit(t={removeSketchHandles:!0}){super.exit(t),t.removeSketchHandles&&this.removeHandles([Sl.geometryGraphics,Sl.interactiveGraphics])}_configureFeatureFormViewModel(){super._configureFeatureFormViewModel();const{_layerViewEditSession:t}=this,{viewModel:e}=this.data;this.addHandles(e.featureFormViewModel.on("value-change",i=>{t==null||t.setAttribute(i.fieldName,i.value)}),Sl.exit)}_configureHighlight(){const{edits:t,layerView:e}=this.data;g1(e)&&this.addHandles(e.highlight(t.feature),Sl.highlights)}async _configureSketchViewModel(){const{data:t,_layerViewEditSession:e}=this,{edits:i,viewModel:r}=t,n=i.feature,{featureFormViewModel:s,sketchViewModel:o,view:a}=r;o.allowDeleteKey=!1;const l=SI(n),{interactive:c,visual:h}=await NFe(n,l,o,a,({geometry:p,attributes:f},y)=>{if(i.updateAttributes(f),i.updateGeometry(p),s.feature.geometry=p,l.rotation!=null){const{field:v}=l.rotation;s.setValue(v,f[v])}if(l.size!=null){const{field:v}=l.size;s.setValue(v,f[v])}const{sourceLayer:g}=n;g!=null&&g.type==="scene"&&g.infoFor3D!=null&&Qj()&&Kj()&&e&&p!=null&&p.type==="mesh"&&e.setGeometry(p),(y.type==="undo"||y.type==="redo"||y.type==="update"&&y.toolEventInfo!=null&&Ore(y.toolEventInfo.type))&&s.notifyFeatureGeometryChanged()},this._webStyleCache);this.addHandles(c,Sl.interactiveGraphics),this.addHandles(h,Sl.geometryGraphics)}_onFullFeatureLoaded(t){super._onFullFeatureLoaded(t);const{edits:e}=this.data;e.updateGeometry(t.geometry),e.trackChanges()}static async create(t){const e=new u3({data:await KFe.create(t),onCommit:this._onCommitFactory(t.applyEdits)});return e._set("steps",this._createWorkflowSteps(e)),e}};u([d()],AE.prototype,"_layerViewEditSession",void 0),AE=u3=u([E("esri.widgets.Editor.UpdateFeatureWorkflow")],AE);let Ud=class extends X{constructor(e){super(e),this.addAttachmentsCallback=null,this.applyEditsCallback=null,this.candidates=null,this.rootFeature=null,this.viewModel=null}};u([d()],Ud.prototype,"addAttachmentsCallback",void 0),u([d()],Ud.prototype,"applyEditsCallback",void 0),u([d()],Ud.prototype,"candidates",void 0),u([d()],Ud.prototype,"rootFeature",void 0),u([d()],Ud.prototype,"viewModel",void 0),Ud=u([E("esri.widgets.Editor.UpdateWorkflowData")],Ud);const XFe=Ud;var c3;const pG="candidate-highlight",Fre="esri.widgets.Editor.UpdateWorkflow",e3e=U.getLogger(Fre);let ss=c3=class extends xI{constructor(t){super(t),this._workflowStack=new Kb(e=>{let i;for(i of e);return i}),this.type="update"}get activeEditableItem(){const{activeWorkflow:t}=this;return fG(t)?t.data.editableItem:void 0}get activeWorkflow(){return this._workflowStack.last()}get nestedWorkflowCount(){return this._workflowStack.length}get shouldShowAttachments(){var t;return!!((t=this.activeEditableItem)!=null&&t.attachmentsOnUpdateEnabled)}get shouldAllowAttachmentEditing(){var t;return!!((t=this.activeEditableItem)!=null&&t.supports.includes("update"))}get hasPendingEdits(){return Array.from(this._workflowStack).some(t=>t.hasPendingEdits)}get helpMessage(){return this.stepId==="awaiting-feature-to-update"?"select":void 0}get reliesOnOwnerAdminPrivileges(){var t;return((t=this.activeWorkflow)==null?void 0:t.reliesOnOwnerAdminPrivileges)??!1}get hasInvalidFormTemplate(){var t;return!!((t=this.activeEditableItem)!=null&&t.hasInvalidFormTemplate)}get hasUnsupportedFields(){var t;return!!((t=this.activeEditableItem)!=null&&t.hasUnsupportedFields)}get updating(){return this.updatingHandles.updating}async back(t=()=>Promise.resolve(!0)){const{featureFormViewModel:e}=this.data.viewModel;if(e.relationshipId==null)if(this.activeWorkflow){if(this.activeWorkflow.hasPendingEdits&&!await t())return;this.activeWorkflow.hasPreviousStep?await this.activeWorkflow.previous({cancelCurrentStep:!0}):await this.cancelActiveWorkflow({force:!0})}else this.hasPreviousStep?await this.previous({cancelCurrentStep:!0}):await this.cancel({force:!0});else e.relationshipId=null}async cancelActiveWorkflow(t){var e;await((e=this.activeWorkflow)==null?void 0:e.cancel(t)),await this._popWorkflow()}async commit(){await this._drainWorkflowStack(t=>t.commit()),await super.commit()}static create(t,e,i){const r=new c3({data:new XFe({applyEditsCallback:i,viewModel:t}),onCommit:async()=>{}});return r._set("steps",this._createWorkflowSteps(r,e)),r}async save(){var t;this.nestedWorkflowCount>1?(await((t=this.activeWorkflow)==null?void 0:t.commit()),await this._popWorkflow()):await this.commit()}async startCreatingRelatedRecord(t){try{const e=await this._createNestedCreateFeaturesWorkflow(t);await this._pushWorkflow(e)}catch(e){throw new C("editor:unable-to-start-creating","Could not begin updating the provided feature or table record.",{error:e})}}async startUpdating(t){try{const e=await this._createNestedUpdateWorkflow(t);await this._pushWorkflow(e)}catch(e){throw new C("editor:unable-to-start-updating","Could not begin updating the provided feature or table record.",{error:e})}}async deleteActiveFeature(){const{activeWorkflow:t}=this;if(!t)throw new C("editor:nothing-to-delete","There is no feature to delete");fG(t)?await t.deleteAndCommit():await t.cancel(),this.nestedWorkflowCount===1?await this.reset():await this._popWorkflow()}async cancelAll(){await this._drainWorkflowStack(t=>t.cancel({force:!0}))}async _createNestedCreateFeaturesWorkflow(t){const{relatedLayer:e}=t,{addAttachmentsCallback:i,applyEditsCallback:r,viewModel:n}=this.data;if(!YT(e))throw new C("editor:unsupported-layer","Editing is not supported on the provided layer");const s=new fi({sourceLayer:e,attributes:this._makeRelatedRecordAttributes(t)});return Lre.create({addAttachmentsCallback:i,applyEditsCallback:r,creationInfo:{layer:e,initialFeature:s,maxFeatures:1},startAt:"creating-features",viewModel:n})}async _createNestedUpdateWorkflow(t){const e=L0(t.sourceLayer)?Mo:AE,{applyEditsCallback:i,viewModel:r}=this.data,n=await e.create({feature:t,viewModel:r,applyEdits:i});return await Ci(()=>!n.updating),n}async _drainWorkflowStack(t){const e=this._workflowStack,i=[];for(;e.length>0;){const r=e.pop(),n=t(r).then(()=>r.destroy());this.updatingHandles.addPromise(n),i.push(n)}await Promise.all(i)}_highlight(t){this._removeHighlight();const e=this.data.viewModel.view;if(!e||!t)return;const i=t&&e.allLayerViews.items.find(({layer:r})=>{var n,s;return r===t.layer||((n=t.layer)==null?void 0:n.type)==="subtype-sublayer"&&((s=t.layer)==null?void 0:s.parent)===r});g1(i)&&this.handles.add(i.highlight(t),pG)}_makeRelatedRecordAttributes(t){var l,c;const{parentFeature:e,relatedLayer:i,relationshipId:r}=t;if(!gIe(e))return;const n=(l=i.relationships)==null?void 0:l.find(h=>h.id===r);if(!n)return void r_("relationship-not-found","Could not begin creating a related record because the relationship specified could not be found on the destination layer.");if(n.role==="origin")return void r_("unsupported-role","Creating new related records in the 'origin' table of a relationship is not yet supported");const s=e.sourceLayer;n.relatedTableId!==s.layerId&&r_("invalid-argument-combination","The given parent feature does not belong to the relationship designated by the given relationship ID.");const o=(c=s.relationships)==null?void 0:c.find(h=>h.id===r);if(!o)return void r_("relationship-not-found","Could not begin creating a related record because the relationship specified could not be found on the origin layer.");const a=e.getAttribute(o.keyField);return a||r_("no-key-on-origin-feature","The given parent feature does not have a value for the relationship's origin primary key field."),{[n.keyField]:a}}async _popWorkflow(){var e;(e=this._workflowStack.pop())==null||e.destroy();const t=await this._reconcileWorkflowStack();if(t.failureCount>0)throw new C("editor:next-workflow-failed","Popped the top workflow, but the next workflow in the stack failed to activate",t)}async _pushWorkflow(t){var r;const e=this._workflowRequiresSketchViewModel(t);(r=this.activeWorkflow)==null||r.exit({removeSketchHandles:e}),await t.start(),this._workflowStack.push(t);const i=await this._reconcileWorkflowStack();if(i.failureCount>0)throw new C("editor:failed-to-start-updating-feature","Failed to enter the provided workflow.",i)}async _reconcileWorkflowStack(){const t=this._workflowStack;try{const e=t.peek();return await(e==null?void 0:e.enter()),{activeWorkflow:e,failureCount:0}}catch{t.pop().destroy();const{activeWorkflow:i,failureCount:r}=await this._reconcileWorkflowStack();return{activeWorkflow:i,failureCount:r+1}}}_removeHighlight(){this.handles.remove(pG)}_workflowRequiresSketchViewModel(t){var i;const{type:e}=t;return e==="update-features"||e==="create-features"&&!L0((i=t.data.creationInfo)==null?void 0:i.layer)}static _createWorkflowSteps(t,e="awaiting-feature-to-update"){const{data:i,handles:r}=t;return T5(["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],e,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",async setUp(){const{spinnerViewModel:n}=i.viewModel,s=i.viewModel.view;let o=null;r.add(Et(()=>{o=vs(o)}),this.id),i.rootFeature=null,i.candidates=[];const a=s.on("immediate-click",async l=>{n.location=l.mapPoint,n.visible=!0,o==null||o.abort();const{editableItems:c}=i.viewModel;o=new AbortController;const h=await new Promise((p,f)=>{Ws(o==null?void 0:o.signal,()=>f(Ut())),p(LFe(c,s,l,o==null?void 0:o.signal))});Tt(o),i.candidates=h.reduce((p,f)=>f.error?p:[...p,...f.value],[]),n.visible=i.candidates.length===1,i.candidates.length!==0&&(i.candidates.length===1?(i.rootFeature=i.candidates[0],t.go("editing-existing-feature").catch(()=>{}).then(()=>n.visible=!1)):t.next())});s.focus(),r.add(a,this.id)},async tearDown(){r.remove(this.id)}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",async setUp(){i.rootFeature=null,r.add([D(()=>i.rootFeature,n=>t._highlight(n),ul),Et(()=>t._removeHighlight())],this.id)},async tearDown(){r.remove(this.id)}}),"editing-existing-feature":()=>({id:"editing-existing-feature",async setUp(){const{rootFeature:n,viewModel:s}=t.data;if(!n)throw new C("editor:no-feature-specified","Cannot setup the 'updating-existing-feature' step until the root feature is defined");await t.startUpdating(n),s.spinnerViewModel.visible=!1;const o=tm(async()=>{await Ci(()=>!t.updating),t.previous()}),{featureFormViewModel:a}=i.viewModel,l=a.relatedRecordCallbacks;a.relatedRecordCallbacks={addRelatedRecord:async c=>{await t.startCreatingRelatedRecord(c),a.relationshipId=null},editRelatedRecord:async({relatedFeature:c})=>{await t.startUpdating(c),a.relationshipId=null},showAllRelatedRecords:c=>a.relationshipId=c.relationshipId},r.add([Et(()=>a.relatedRecordCallbacks=l),D(()=>t.nestedWorkflowCount,(c,h)=>{c===0&&h!==0&&o()},ul)],this.id)},async tearDown(){await t.cancelAll(),r.remove(this.id)}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}})})}};u([d()],ss.prototype,"activeEditableItem",null),u([d()],ss.prototype,"activeWorkflow",null),u([d()],ss.prototype,"nestedWorkflowCount",null),u([d()],ss.prototype,"shouldShowAttachments",null),u([d()],ss.prototype,"shouldAllowAttachmentEditing",null),u([d()],ss.prototype,"hasPendingEdits",null),u([d()],ss.prototype,"helpMessage",null),u([d()],ss.prototype,"reliesOnOwnerAdminPrivileges",null),u([d()],ss.prototype,"hasInvalidFormTemplate",null),u([d()],ss.prototype,"hasUnsupportedFields",null),u([d()],ss.prototype,"updating",null),ss=c3=u([E(Fre)],ss);const r_=(t,e)=>e3e.warn(`editor:${t}`,e,"The create operation will be allowed to proceed, but the resulting feature may not be related to the given parent feature."),fG=t=>!!t&&/update-/.test(t.type),t3e=ss;function XC(t){switch(t){case St.SUPPORTED:break;case St.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case St.GEOMETRY_MISSING:return"no geometry";case St.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case St.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case St.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var St;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(St||(St={}));function Dre(t){return t?ji:a3e}function i3e(t,e){return e!=null&&e.mode?e.mode:Dre(t).mode}function r3e(t,e){return e??Dre(t)}function Nre(t,e){return i3e(t!=null&&t.hasZ,e)}function Iqe(t,e){return r3e(t!=null&&!!t.hasZ,e)}function $I(t){const e=k5(t);return Nre(t.geometry,e)}function kqe(t){const e=k5(t),i=Nre(t.geometry,e);return{mode:i,offset:e!=null&&i!=="on-the-ground"?(e.offset??0)*kPe(e.unit??"meters"):0}}function I5(t){if($I(t)==="on-the-ground")return!1;const e=k5(t),i=e!=null&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!i||i==="0")}function k5(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function Cqe(t,e,i){if(i==null||!i.mode)return;const r=t.hasZ?t.z:0,n=i.offset!=null?i.offset:0;switch(i.mode){case"absolute-height":return r-n;case"on-the-ground":return 0;case"relative-to-ground":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"ground")??0)+n);case"relative-to-scene":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"scene")??0)+n)}}function n3e(t,e,i,r=null){return Vre(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,r)}function jre(t,e,i,r,n=null){return Vre(t,e[0],e[1],e.length>2?e[2]:0,i,r,n)}function Vre(t,e,i,r,n,s,o=null){if(s==null)return;const a=o!=null?o.mode:"absolute-height";if(a==="on-the-ground")return 0;const{absoluteZ:l}=s3e(e,i,r,n,t,s);return o3e(l,e,i,r,n,t,o,a)}function s3e(t,e,i,r,n,s){const o=s.offset!=null?s.offset:0;switch(s.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const a=n.elevationProvider.getElevation(t,e,0,r,"ground")??0;return{absoluteZ:a,elevation:a}}case"relative-to-ground":{const a=n.elevationProvider.getElevation(t,e,i,r,"ground")??0;return{absoluteZ:i+a+o,elevation:a}}case"relative-to-scene":{const a=n.elevationProvider.getElevation(t,e,i,r,"scene")??0;return{absoluteZ:i+a+o,elevation:a}}}}function o3e(t,e,i,r,n,s,o,a){const l=o!=null&&o.offset!=null?o.offset:0;switch(a){case"absolute-height":return t-l;case"relative-to-ground":return t-((s.elevationProvider.getElevation(e,i,r,n,"ground")??0)+l);case"relative-to-scene":return t-((s.elevationProvider.getElevation(e,i,r,n,"scene")??0)+l)}}function Pqe(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}const ji={mode:"absolute-height",offset:0},a3e={mode:"on-the-ground",offset:null};function l3e(t){var e;if(((e=t.layer)==null?void 0:e.type)!=="graphics")return St.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return St.GEOMETRY_MISSING;switch(t.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return St.GEOMETRY_TYPE_UNSUPPORTED}return $I(t)!=="on-the-ground"&&I5(t)?St.ELEVATION_MODE_UNSUPPORTED:St.SUPPORTED}function zre(t){if(!t)return null;if(zD(t)&&t.wkid){const e=ywe[t.wkid];if(e)return e}if(t.wkt){const e=u3e(t.wkt);if(e)return e}return null}function u3e(t){const e=fwe.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),n=parseFloat(i[2]);return isNaN(r)||isNaN(n)?null:{a:r,f:n===0?0:1/n}}function EI(t){const e=zre(t??_e.WGS84);if(c3e(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function c3e(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function Nx(t,e,i){const{a:r,eSq:n}=EI(i),s=Math.sqrt(n),o=Math.sin(e[1]*ds),a=r*e[0]*ds;let l;return n>0?l=r*((1-n)*(o/(1-n*(o*o))-1/(2*s)*Math.log((1-s*o)/(1+s*o))))*.5:l=r*o,t[0]=a,t[1]=l,t}function C5(t){return zre(t)!==null}function Aqe(t,e="square-meters"){if(t.some(o=>!C5(o.spatialReference)))throw new C("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let o=0;o<t.length;o++){const a=t[o],l=a.spatialReference,{radius:c,densificationRatio:h}=EI(l),p=c*h;i.push(d3e(a,p))}const r=[],n=[0,0],s=[0,0];for(let o=0;o<i.length;o++){const{rings:a,spatialReference:l}=i[o];let c=0;for(let h=0;h<a.length;h++){const p=a[h];Nx(n,p[0],l),Nx(s,p[p.length-1],l);let f=s[0]*n[1]-n[0]*s[1];for(let y=0;y<p.length-1;y++)Nx(n,p[y+1],l),Nx(s,p[y],l),f+=s[0]*n[1]-n[0]*s[1];c+=f}c=ht(c,"square-meters",e),r.push(c/-2)}return r}function Oqe(t,e="meters"){if(!t)throw new C("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(r=>!C5(r.spatialReference)))throw new C("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<t.length;r++){const n=t[r],{spatialReference:s}=n,o=n.type==="polyline"?n.paths:n.rings;let a=0;for(let l=0;l<o.length;l++){const c=o[l];let h=0;for(let p=1;p<c.length;p++){const f=c[p-1][0],y=c[p][0],g=c[p-1][1],v=c[p][1];if(g!==v||f!==y){const _=new Ure;Bre(_,[f,g],[y,v],s),h+=_.distance}}a+=h}a=ht(a,"meters",e),i.push(a)}return i}function d3e(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new C("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!C5(i))throw new C("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=t.type==="polyline"?t.paths:t.rings,n=[],s=[0,0],o=new Ure;for(const a of r){const l=[];n.push(l),l.push([a[0][0],a[0][1]]);let c,h,p=a[0][0],f=a[0][1];for(let y=0;y<a.length-1;y++){if(c=a[y+1][0],h=a[y+1][1],p===c&&f===h)continue;const g=[p,f];Bre(o,[p,f],[c,h],i);const{azimuth:v,distance:_}=o,w=_/e;if(w>1){for(let S=1;S<=w-1;S++)OE(s,g,v,S*e,i),l.push(s.slice(0));OE(s,g,v,(_+Math.floor(w-1)*e)/2,i),l.push(s.slice(0))}OE(s,g,v,_,i),l.push(s.slice(0)),p=s[0],f=s[1]}}return t.type==="polyline"?new No({paths:n,spatialReference:i}):new Un({rings:n,spatialReference:i})}let Ure=class{constructor(e=0,i=void 0,r=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=r}};function OE(t,e,i,r,n){const s=e[0],o=e[1],a=s*ds,l=o*ds,c=(i??0)*ds,{a:h,b:p,f}=EI(n),y=Math.sin(c),g=Math.cos(c),v=(1-f)*Math.tan(l),_=1/Math.sqrt(1+v*v),w=v*_,S=Math.atan2(v,g),b=_*y,$=b*b,T=1-$,I=T*(h*h-p*p)/(p*p),A=1+I/16384*(4096+I*(I*(320-175*I)-768)),L=I/1024*(256+I*(I*(74-47*I)-128));let z,j,H,J,ue=r/(p*A),re=2*Math.PI;for(;Math.abs(ue-re)>1e-12;)H=Math.cos(2*S+ue),z=Math.sin(ue),j=Math.cos(ue),J=L*z*(H+L/4*(j*(2*H*H-1)-L/6*H*(4*z*z-3)*(4*H*H-3))),re=ue,ue=r/(p*A)+J;const pe=w*z-_*j*g,Dt=Math.atan2(w*j+_*z*g,(1-f)*Math.sqrt($+pe*pe)),we=Math.atan2(z*y,_*j-w*z*g),q=f/16*T*(4+f*(4-3*T)),le=Dt/ds,Ee=(a+(we-(1-q)*f*b*(ue+q*z*(H+q*j*(2*H*H-1)))))/ds;return t[0]=Ee,t[1]=le,t}function Bre(t,e,i,r){const n=e[0]*ds,s=e[1]*ds,o=i[0]*ds,a=i[1]*ds,{a:l,b:c,f:h,radius:p}=EI(r),f=o-n,y=Math.atan((1-h)*Math.tan(s)),g=Math.atan((1-h)*Math.tan(a)),v=Math.sin(y),_=Math.cos(y),w=Math.sin(g),S=Math.cos(g);let b,$,T,I,A,L,z,j,H,J,ue=1e3,re=f;do{if(z=Math.sin(re),j=Math.cos(re),T=Math.sqrt(S*z*(S*z)+(_*w-v*S*j)*(_*w-v*S*j)),T===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;A=v*w+_*S*j,L=Math.atan2(T,A),H=_*S*z/T,$=1-H*H,I=A-2*v*w/$,isNaN(I)&&(I=0),J=h/16*$*(4+h*(4-3*$)),b=re,re=f+(1-J)*h*H*(L+J*T*(I+J*A*(2*I*I-1)))}while(Math.abs(re-b)>1e-12&&--ue>0);if(ue===0){const Ee=p,ft=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-n))*Ee,mt=o-n,Dr=Math.sin(mt)*Math.cos(a),Wn=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(mt),yu=Math.atan2(Dr,Wn);return t.azimuth=yu/ds,t.distance=ft,t.reverseAzimuth=void 0,t}const pe=$*(l*l-c*c)/(c*c),Dt=pe/1024*(256+pe*(pe*(74-47*pe)-128)),we=c*(1+pe/16384*(4096+pe*(pe*(320-175*pe)-768)))*(L-Dt*T*(I+Dt/4*(A*(2*I*I-1)-Dt/6*I*(4*T*T-3)*(4*I*I-3)))),q=Math.atan2(S*Math.sin(re),_*w-v*S*Math.cos(re)),le=Math.atan2(_*Math.sin(re),_*w*Math.cos(re)-v*S);return t.azimuth=q/ds,t.distance=we,t.reverseAzimuth=le/ds,t}var d3;let Bd=d3=class extends Un{constructor(...t){super(...t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(t,e){let i;if(t&&t.center)i=t;else{if(t&&t.rings)return super.normalizeCtorArgs(t,e);i={center:t}}return{...super.normalizeCtorArgs(),...i,...e}}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=ht(this.radius,this.radiusUnit,"meters"),r=t.spatialReference;let n,s="geographic";if(r.isWebMercator?s="webMercator":((r.wkid&&M[r.wkid])!=null||r.wkt&&r.wkt.indexOf("PROJCS")===0)&&(s="projected"),this.geodesic){let o;switch(s){case"webMercator":o=Bf(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=t}n=this._createGeodesicCircle(o,i,e),s==="webMercator"&&(n=Xl(n))}else{let o;s==="webMercator"||s==="projected"?o=i/this._convert2Meters(1,t.spatialReference):s==="geographic"&&(o=gW(i,"meters",WD(t.spatialReference).radius)),n=this._createPlanarCircle(t,o,e)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:r,geodesic:n}=this;return new d3({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:r,geodesic:n})}_createGeodesicCircle(t,e,i){let r=0;const n=[];for(;r<360;){const s=[0,0],o=[t.x,t.y];OE(s,o,r,e),this.hasZ&&s.push(t.z),n.push(s),r+=360/i}return n.push(n[0]),new Un(n)}_createPlanarCircle(t,e,i){const r=[],n=2*Math.PI/i;for(let s=0;s<i;++s){const o=n*s,a=[t.x+Math.cos(-o)*e,t.y+Math.sin(-o)*e];this.hasZ&&a.push(t.z),r.push(a)}return r.push(r[0]),new Un({spatialReference:t.spatialReference,rings:[r]})}_convert2Meters(t,e){let i;if(e.wkid&&M[e.wkid]!=null)i=M.values[M[e.wkid]];else{const r=e.wkt,n=r.lastIndexOf(",")+1,s=r.lastIndexOf("]]");i=parseFloat(r.substring(n,s))}return t*i}};u([d({type:ce})],Bd.prototype,"center",void 0),u([d()],Bd.prototype,"geodesic",void 0),u([d()],Bd.prototype,"numberOfPoints",void 0),u([d()],Bd.prototype,"radius",void 0),u([d()],Bd.prototype,"radiusUnit",void 0),Bd=d3=u([E("esri.geometry.Circle")],Bd);const Gre=Bd;function jx(t){return Hre(t).result}function Rqe(t){return Hre(t).geometry}function Hre(t){var r;if(((r=t.layer)==null?void 0:r.type)!=="graphics")return{result:St.GRAPHICS_LAYER_MISSING,geometry:null};const{geometry:e}=t;if(e==null)return{result:St.GEOMETRY_MISSING,geometry:null};if($I(t)!=="on-the-ground"&&I5(t))return{result:St.ELEVATION_MODE_UNSUPPORTED,geometry:null};const i=e.type;return i!=="point"&&i!=="mesh"&&i!=="polyline"&&(i!=="polygon"||t.geometry instanceof Gre)?{result:St.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:St.SUPPORTED,geometry:e}}function h3e(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return St.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return St.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return St.SUPPORTED;default:return St.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return e&&e.length>0&&e.some(r=>r.type==="object")?$I(t)!=="on-the-ground"&&I5(t)?St.ELEVATION_MODE_UNSUPPORTED:St.SUPPORTED:St.SYMBOL_TYPE_UNSUPPORTED}function mG(t,e,i){if(!e||!t||!t.map)return;const{map:r}=t,n=r.layers.find(s=>s===e);n||r.add(e,i),n&&i!=null&&r.layers.reorder(n,i)}function Fqe(t,e){return t.allLayerViews.find(i=>{const r=i.layer;return r===e||"sublayers"in r&&r.sublayers!=null&&r.sublayers.includes(e)})}const Ui={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},yG={toggle:"Control"};let LE=class extends X{constructor(e){super(e),this.enabled=!1}};u([d({type:Boolean,nonNullable:!0})],LE.prototype,"enabled",void 0),LE=u([E("esri.views.interactive.sketch.SketchLabelOptions")],LE);const qre=LE;let sb=class extends X{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};u([d({type:String,nonNullable:!0})],sb.prototype,"mode",void 0),sb=u([E("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],sb);let ls=class extends X{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0,this.helpMessage=!1}toJSON(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}};u([d({type:Boolean,nonNullable:!0})],ls.prototype,"distance",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"elevation",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"size",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"scale",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"rotation",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"orientation",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"totalLength",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"area",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"radius",void 0),u([d({type:Boolean,nonNullable:!0})],ls.prototype,"helpMessage",void 0),ls=u([E("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],ls);let bf=class extends X{constructor(e){super(e),this.enabled=!1,this.elevation=new sb,this.visibleElements=new ls,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};u([d({type:Boolean,nonNullable:!0})],bf.prototype,"enabled",void 0),u([d({type:sb,nonNullable:!0})],bf.prototype,"elevation",void 0),u([d({type:ls,nonNullable:!0})],bf.prototype,"visibleElements",void 0),u([d()],bf.prototype,"visualVariables",void 0),bf=u([E("esri.widgets.Sketch.SketchTooltipOptions")],bf);const Wre=bf;let qa=class extends G{constructor(){super(...arguments),this.enabled=!0}};u([d({type:Boolean})],qa.prototype,"enabled",void 0),qa=u([E("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],qa);let qt=class extends G{constructor(e){super(e),this.lineSnapper=new qa,this.parallelLineSnapper=new qa,this.rightAngleSnapper=new qa,this.rightAngleTriangleSnapper=new qa,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThreshold=.1,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new ae([255,127,0]),this.orangeTransparent=new ae([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};u([d({type:qa,constructOnly:!0,nonNullable:!0,json:{write:!0}})],qt.prototype,"lineSnapper",void 0),u([d({type:qa,constructOnly:!0,nonNullable:!0,json:{write:!0}})],qt.prototype,"parallelLineSnapper",void 0),u([d({type:qa,constructOnly:!0,nonNullable:!0,json:{write:!0}})],qt.prototype,"rightAngleSnapper",void 0),u([d({type:qa,constructOnly:!0,nonNullable:!0,json:{write:!0}})],qt.prototype,"rightAngleTriangleSnapper",void 0),u([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],qt.prototype,"shortLineThreshold",void 0),u([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],qt.prototype,"distance",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],qt.prototype,"pointThreshold",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],qt.prototype,"intersectionParallelLineThreshold",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],qt.prototype,"parallelLineThreshold",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],qt.prototype,"verticalLineThreshold",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],qt.prototype,"touchSensitivityMultiplier",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],qt.prototype,"pointOnLineThreshold",void 0),u([d({type:ae,nonNullable:!0})],qt.prototype,"orange",void 0),u([d({type:ae,nonNullable:!0})],qt.prototype,"orangeTransparent",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],qt.prototype,"lineHintWidthReference",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],qt.prototype,"lineHintWidthTarget",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],qt.prototype,"lineHintFadedExtensions",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],qt.prototype,"parallelLineHintWidth",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],qt.prototype,"parallelLineHintLength",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],qt.prototype,"parallelLineHintOffset",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],qt.prototype,"rightAngleHintSize",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],qt.prototype,"rightAngleHintOutlineSize",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],qt.prototype,"satisfiesConstraintScreenThreshold",void 0),qt=u([E("esri.views.interactive.snapping.Settings.Defaults")],qt);const $c=new qt;var Lr;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(Lr||(Lr={}));let Bqe=class{constructor(e,i,r){this.uid=e,this.geometry=i,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null}};function Hqe(t){return t.geometry!=null}let qqe=class{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}};function pm(t,e,i,r){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:r,type:"point"}}function Zqe(t){if(t==null)return 0;switch(t.type){case"point":return 1;case"polyline":{let e=0;for(const i of t.paths)e+=i.length;return e}case"polygon":{let e=0;for(const i of t.rings)e+=i.length;return e}case"multipoint":return t.points.length;case"extent":return 2;case"mesh":{const e=t.vertexAttributes&&t.vertexAttributes.position;return e?e.length/3:0}default:return}}function Yqe(t,e){switch(Kge(e),t.type==="mesh"&&(t=t.extent),t.type){case"point":e[0]=e[3]=t.x,e[1]=e[4]=t.y,t.hasZ&&(e[2]=e[5]=t.z);break;case"polyline":for(let i=0;i<t.paths.length;i++)Nk(e,t.paths[i],!!t.hasZ);break;case"polygon":for(let i=0;i<t.rings.length;i++)Nk(e,t.rings[i],!!t.hasZ);break;case"multipoint":Nk(e,t.points,!!t.hasZ);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[3]=t.xmax,e[4]=t.ymax,t.zmin!=null&&(e[2]=t.zmin),t.zmax!=null&&(e[5]=t.zmax)}}function Jqe(t,e){switch(cfe(e),t.type==="mesh"&&(t=t.extent),t.type){case"point":e[0]=e[2]=t.x,e[1]=e[3]=t.y;break;case"polyline":for(let i=0;i<t.paths.length;i++)Sk(e,t.paths[i]);break;case"polygon":for(let i=0;i<t.rings.length;i++)Sk(e,t.rings[i]);break;case"multipoint":Sk(e,t.points);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax}}function Kqe(t,e){return t.objectId!=null?t.objectId:t.attributes&&e?t.attributes[e]:null}function Qqe(t){return t}function Zre(t){return Lc(t)}function Xqe(t,e,i){return _s(t,e,i)}function Kt(t,e,i){return t==null?null:gw(i.coordinateHelper.vectorToDehydratedPoint(t,p3e),e,i)}function gw(t,e,i){if(t==null)return null;if(e==null)return _s(t.x,t.y,t.z??0);if(e.type==="2d")return _s(t.x,t.y,0);const{elevationInfo:r}=i,n=n3e(e,t,r,ji)??0;return _s(t.x,t.y,n)}function gG(t,e,{z:i,m:r,spatialReference:n,elevationInfo:s}){if(i==null&&r==null){const l=pm(t[0],t[1],void 0,n);return r!=null&&(l.m=r,l.hasM=!0),l}if(e==null||e.type==="2d"){const l=pm(t[0],t[1],i,n);return r!=null&&(l.m=r,l.hasM=!0),l}const o=jre(e,t,n,ji,s)??0,a=pm(t[0],t[1],o,n);return r!=null&&(a.m=r,a.hasM=!0),a}function eWe(t,e){return pm(t[0],t[1],t[2],e)}const p3e=pm(0,0,0,null);function eP(t,e){return t[0]*e[1]-t[1]*e[0]}function f3e(t,e,i){const r=fp(i,e)/tp(i);return hv(t,i,r)}function tP(t,e,i,r,n=i){return or(a0,r,i),or(h3,e,n),f3e(OM,h3,a0),$j(t,n,OM)}function m3e(t,e,i,r){or(a0,e,i);const n=r/N0(a0);return bc(t,i,a0,n)}function tWe(t,e){const i=t.start,r=t.end,n=e.start,s=e.end,o=or(a0,r,i),a=or(g3e,s,n),l=eP(o,a);if(Math.abs(l)<=y3e)return[];const c=or(h3,i,n),h=eP(a,c)/l,p=eP(o,c)/l;if(h>=0){if(p>=0||e.type===ar.LINE)return[bc(OM,i,o,h)]}else if(t.type===ar.LINE&&(p>=0||e.type===ar.LINE))return[bc(OM,i,o,h)];return[]}var ar;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(ar||(ar={}));const y3e=1e-6,a0=at(),g3e=at(),h3=at(),OM=at();function p3({start:t,end:e,type:i},r,n){const s=[],o=or(Ym,e,t),a=or(bv,t,r),l=tp(o),c=2*fp(o,a),h=c*c-4*l*(tp(a)-n*n);if(h===0){const p=-c/(2*l);(i===tl.PLANE||p>=0)&&s.push(bc(at(),t,o,p))}else if(h>0){const p=Math.sqrt(h),f=(-c+p)/(2*l);(i===tl.PLANE||f>=0)&&s.push(bc(at(),t,o,f));const y=(-c-p)/(2*l);(i===tl.PLANE||y>=0)&&s.push(bc(at(),t,o,y))}return s}function f3(t,e){const i=t.start,r=t.end,n=or(Ym,r,i),s=nu(bv,-n[1],n[0],0),o=e.start,a=e.end,l=Bs(A5,a,o),c=Do(l,s),h=nu(Qre,i[0],i[1],0),p=Bs(Xre,h,o),f=Do(p,s);if(Math.abs(c)<Wa)return[];const y=jh(ene,o,l,f/c);if(e.type===ar.RAY){const g=Bs(RM,y,o);if(Do(g,l)<-Wa)return[]}if(t.type===tl.HALF_PLANE){const g=QT(RM,y,i);if(fp(g,n)<-Wa)return[]}return[Lc(y)]}function m3(t,e){return y3(LM(O5,e[2],t),e)}function Yre(t,e){const r=Kre(LM(O5,0,t),LM(w3e,0,e)),n=[];for(const s of r)n.push(AQ(s));return n}function Jre(t,e){return P5(t,LM(O5,t[2],e))}function v3e(t,e,i){const r=or(Ym,t,e),n=i/N0(r),s=bc(Je(),e,r,n);return s[2]=t[2],s}function P5(t,{start:e,end:i,type:r}){const n=Bs(Ym,t,e),s=Bs(bv,i,e),o=Do(n,s)/Do(s,s);return jh(Je(),e,s,r===ar.RAY?Math.max(o,0):o)}function vG({start:t,end:e,type:i},r,n){const s=[],o=O1(Ym,e,t),a=or(bv,t,r),l=tp(o),c=2*fp(o,a),h=c*c-4*l*(tp(a)-n*n);if(h===0){const p=-c/(2*l);(i===ar.LINE||p>=0)&&s.push(jh(Je(),t,o,p))}else if(h>0){const p=Math.sqrt(h),f=(-c+p)/(2*l);(i===ar.LINE||f>=0)&&s.push(jh(Je(),t,o,f));const y=(-c-p)/(2*l);(i===ar.LINE||y>=0)&&s.push(jh(Je(),t,o,y))}return s}function Kre(t,e){const i=t.start,r=t.end,n=e.start,s=e.end,o=Bs(Ym,r,i),a=Bs(bv,s,n),l=Bs(A5,n,i),c=F2(Qre,o,a),h=Do(l,c);if(!Yg(h,0,Wa))return[];const p=D2(c);if(Yg(p,0,Wa))return[];const f=F2(Xre,l,a),y=Do(f,c)/p,g=jh(ene,i,o,y);if(t.type===ar.RAY){const v=Bs(RM,g,i);if(Do(o,v)<-Wa)return[]}if(e.type===ar.RAY){const v=Bs(RM,g,n);if(Do(a,v)<-Wa)return[]}return[Lc(g)]}function y3({start:t,end:e,type:i},r){const n=Bs(Ym,r,t),s=Bs(bv,e,t),o=F2(A5,s,n);if(D2(o)/D2(s)<Wa)switch(i){case ar.LINE:return[Lc(r)];case ar.RAY:return Do(s,n)<-Wa?[]:[Lc(r)]}return[]}function _G(t,e,i){return Yg(dl(i,t),e*e,Wa)?[Lc(i)]:[]}function LM(t,e,{start:i,end:r,type:n}){return nu(t.start,i[0],i[1],e),nu(t.end,r[0],r[1],e),t.type=_3e[n],t}var tl;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(tl||(tl={}));const _3e={[tl.PLANE]:ar.LINE,[tl.HALF_PLANE]:ar.RAY},Wa=1e-6,Ym=Je(),bv=Je(),A5=Je(),Qre=Je(),Xre=Je(),ene=Je(),RM=Je(),O5={start:Je(),end:Je(),type:ar.LINE},w3e={start:Je(),end:Je(),type:ar.LINE};let Jm=class{intersect(e){return $3e(this,e)}},b3e=class extends Jm{constructor(e){super(),this.point=e}equals(e){return Og(e)&&sr(this.point,e.point)}closestTo(){return Zre(this.point)}},tne=class extends Jm{constructor(e,i,r){super(),this.start=e,this.end=i,this.type=r,this.lineLike={start:this.start,end:this.end,type:this.type}}equals(e){return Ff(e)&&this.type===e.type&&sr(this.start,e.start)&&sr(this.end,e.end)}closestTo(e){const i=P5(e,this.lineLike);return i}},S3e=class extends tne{constructor(e,i){super(e,i,ar.LINE)}},ine=class rne extends Jm{constructor(e,i,r){super(),this.intersection=e,this.first=i,this.second=r}equals(e){return e instanceof rne&&this.first.equals(e.first)&&this.second.equals(e.second)}closestTo(){return Zre(this.intersection)}},iP=class nne extends Jm{constructor(e,i,r){super(),this.basePoint=e,this.first=i,this.second=r}equals(e){return e instanceof nne&&this.first.equals(e.first)&&this.second.equals(e.second)}closestTo(e){const i=this.basePoint;return _s(i[0],i[1],e[2])}},sne=class extends Jm{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return Lg(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=v3e(e,this.center,this.radius);return i}},L5=class extends Jm{constructor(e,i,r){super(),this.start=e,this.end=i,this.type=r,this.planeLike={start:e,end:i,type:r}}equals(e){return Df(e)&&this.type===e.type&&sr(this.start,e.start)&&sr(this.end,e.end)}closestTo(e){return Jre(e,this.planeLike)}closestEndTo(e){const{start:i,end:r}=this;return Math.sign(fp(or(M3e,r,i),or(T3e,e,i)))>0?r:i}},one=class extends L5{constructor(e,i){super(e,i,tl.HALF_PLANE)}},ane=class extends L5{constructor(e,i){super(e,i,tl.PLANE)}},lne=class extends Jm{constructor(e,i,r){super(),this.start=e,this.end=i,this.getZ=r,this.planeLike={start:e,end:i,type:tl.PLANE}}equals(e){return Nf(e)&&sr(this.start,e.start)&&sr(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return x3e(this,e)}addIfOnTheGround(e,i){for(const r of i){const n=this.getZ(r[0],r[1],r[2])??0;Math.abs(r[2]-n)<Wa&&(r[2]=n,e.push(r))}}};function x3e(t,e){const i=Jre(e,t.planeLike);return i[2]=t.getZ(e[0],e[1],e[2])??une,i}function $3e(t,e){let i=[];if(Og(t)){const{point:r}=t;Ff(e)?i=y3(e.lineLike,r):Lg(e)?i=_G(e.center,e.radius,r):Df(e)?i=m3(e.planeLike,r):Nf(e)&&(i=n_(e,t))}else if(Ff(t)){const{lineLike:r}=t;Og(e)?i=y3(r,e.point):Ff(e)?i=Kre(r,e.lineLike):Lg(e)?i=vG(r,e.center,e.radius):Df(e)?i=f3(e.planeLike,r):Nf(e)&&(i=n_(e,t))}else if(Lg(t)){const{center:r,radius:n}=t;if(Ff(e))i=vG(e.lineLike,r,n);else if(Og(e))i=_G(r,n,e.point);else{if(Df(e))return p3(e.planeLike,r,n).map(s=>new iP(s,t,e));Nf(e)&&(i=n_(e,t))}}else if(Df(t)){const{planeLike:r}=t;if(Df(e))return Yre(r,e.planeLike).map(n=>new iP(n,t,e));if(Og(e))i=m3(r,e.point);else if(Ff(e))i=f3(r,e.lineLike);else{if(Lg(e))return p3(r,e.center,e.radius).map(n=>new iP(n,t,e));Nf(e)&&(i=n_(e,t))}}else Nf(t)&&(i=n_(t,e));return E3e(i,t,e)}function n_(t,e){const{planeLike:i,getZ:r}=t,n=[];if(Og(e))t.addIfOnTheGround(n,m3(i,e.point));else if(Ff(e))t.addIfOnTheGround(n,f3(i,e.lineLike));else if(Lg(e))for(const[s,o]of p3(i,e.center,e.radius)){const a=r(s,o,0);a!=null&&n.push(_s(s,o,a))}else if(Df(e)||Nf(e))for(const[s,o]of Yre(i,e.planeLike)){const a=r(s,o,0)??une;n.push(_s(s,o,a))}return n}function E3e(t,e,i){return t.map(r=>new ine(r,e,i))}function Og(t){return t instanceof b3e}function Ff(t){return t instanceof tne}function Lg(t){return t instanceof sne}function Df(t){return t instanceof L5}function Nf(t){return t instanceof lne}const M3e=at(),T3e=at(),une=0;function Km(t,e){const i=t.x-e.x,r=t.y-e.y;return i*i+r*r}function I3e(t,e){return Math.sqrt(Km(t,e))}function R5(t,e){e.sort((i,r)=>Vb(i.targetPoint,t)-Vb(r.targetPoint,t))}var Ko;function dWe({point:t,distance:e,returnEdge:i,returnVertex:r,coordinateHelper:{spatialReference:n}},s,o){return{point:pm(t[0],t[1],t[2],n.toJSON()),mode:s,distance:e,returnEdge:i,returnVertex:r,query:o!=null?o.toJSON():{where:"1=1"}}}function FM(t,e,i){return{left:Kt(t.leftVertex.pos,e,i),right:Kt(t.rightVertex.pos,e,i)}}function hWe(t){return t.createQuery()}function k3e(t,e=()=>{}){const i=D(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:r,snappingOptions:n})=>{const s="snapping-toggle",o=Rt.TOOL;if(t.removeHandles(s),r&&n!=null){const a=[r.on("key-down",l=>{l.key!==yG.toggle||l.repeat||(n.enabledToggled=!0,e())},o),r.on("key-up",l=>{l.key===yG.toggle&&(n.enabledToggled=!1,e())},o),r.on("pointer-move",l=>{const c=l.native.ctrlKey;n.enabledToggled!==c&&(n.enabledToggled=c,e())},o)];t.addHandles(a,s)}},yn);t.addHandles(i)}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(Ko||(Ko={}));let Sv=class{constructor(e,i,r,n){this.targetPoint=e,this.constraint=i,this.isDraped=r,this.domain=n}},F5=class extends Sv{constructor({targetPoint:e,objectId:i,constraint:r,isDraped:n}){super(e,r,n,Lr.FEATURE),this.objectId=i}},MI=class{constructor(e,i){this.isDraped=e,this.domain=i}},pu=class cne extends MI{constructor(e,i,r,n,s=Lr.ALL,o=!0,a=!0){super(n,s),this.type=e,this.lineStart=i,this.lineEnd=r,this.fadeLeft=o,this.fadeRight=a}equals(e){return e instanceof cne&&this.type===e.type&&sr(this.lineStart,e.lineStart)&&sr(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return KD(this.lineStart,this.lineEnd)}},C3e=class extends F5{constructor(e){super({...e,isDraped:!0,constraint:new lne(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new pu(Ko.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},P3e=class extends F5{constructor(e){super({...e,constraint:new S3e(e.edgeStart,e.edgeEnd)})}get hints(){return[new pu(Ko.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},dne=class hne extends MI{constructor(e,i,r,n,s=Lr.ALL){super(n,s),this.previousVertex=e,this.centerVertex=i,this.nextVertex=r}equals(e){return e instanceof hne&&sr(this.previousVertex,e.previousVertex)&&sr(this.centerVertex,e.centerVertex)&&sr(this.nextVertex,e.nextVertex)}},pne=class extends Sv{constructor({targetPoint:e,constraint:i,previousVertex:r,otherVertex:n,otherVertexType:s,objectId:o,isDraped:a}){super(e,i,a,Lr.SELF),this.previousVertex=r,this.otherVertex=n,this.otherVertexType=s,this.objectId=o}get hints(){const e=this.previousVertex,i=this.otherVertexType===U0.CENTER?this.otherVertex:this.targetPoint,r=this.otherVertexType===U0.CENTER?this.targetPoint:this.otherVertex;return[new pu(Ko.TARGET,i,r,this.isDraped,this.domain),new pu(Ko.REFERENCE,e,i,this.isDraped,this.domain),new dne(this.previousVertex,i,r,this.isDraped,this.domain)]}};var U0;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(U0||(U0={}));function A3e(t,e,i,r,n=Je()){const s=E0(g3,t);return s[2]=jre(r,s,e,i)||0,r.renderCoordsHelper.toRenderCoords(s,e,n),n}function wn(t,e,i,r){return r.type==="2d"?(Vx.x=t[0],Vx.y=t[1],Vx.spatialReference=e,r.toScreen(Vx)):(A3e(t,e,i,r,g3),r.state.camera.projectToScreen(g3,rP),_n(rP[0],rP[1]))}const Vx=pm(0,0,0,null),g3=Je(),rP=Lge();let Gd=class extends R0{get updating(){return M1(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){const e=this._get("snappingSources")||new Map,i=new Map;if(this.options!=null&&this.options.featureSources!=null)for(const r of this.options.featureSources.items){const n=r.layer.uid,s=e.get(n);if(s){e.delete(n),i.set(n,s);continue}if(!r.layer.loaded){this.updatingHandles.addPromise(r.layer.load());continue}const o=this._createSourceInfo(r);o!=null&&i.set(n,o)}for(const[,r]of e)r.destroy();return i}constructor(e){super(e),this.options=null,this._domain=Lr.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),ul),this.view!=null&&this.handles.add([this.view.on("layerview-create",e=>this._updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this._updateLayerView(e.layer,null))])}_updateLayerView(e,i){for(const[,r]of this.snappingSources)r.snappingSource.layerSource.layer===e&&(r.layerView=i)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,i,r,n){var c;if(!(i&this._domain&&this.options!=null&&this.options.effectiveFeatureEnabled))return[];const s=[],o=this._computeScreenSizeDistanceParameters(e,r),a={distance:o,mode:((c=this.view)==null?void 0:c.type)??"2d",point:e,coordinateHelper:r.coordinateHelper,...this._types};for(const[,{snappingSource:h,layerView:p}]of this.snappingSources)!h.layerSource.enabled||p!=null&&p.suspended||s.push(h.fetchCandidates(a,n).then(f=>f.filter(y=>!this._candidateIsExcluded(h,y,r.excludeFeature))));const l=(await Uq(s)).flat();return this._addRightAngleCandidates(l,e,o,r),Tt(n),R5(e,l),l}_addRightAngleCandidates(e,i,r,n){var p,f,y,g,v,_,w,S;const s=n.vertexHandle!=null?(f=(p=n.vertexHandle.rightEdge)==null?void 0:p.rightVertex)==null?void 0:f.pos:n.editGeometryOperations!=null&&n.editGeometryOperations.data.type==="polygon"?(g=(y=n.editGeometryOperations.data.components[0])==null?void 0:y.getFirstVertex())==null?void 0:g.pos:null,o=n.vertexHandle!=null?(_=(v=n.vertexHandle.leftEdge)==null?void 0:v.leftVertex)==null?void 0:_.pos:n.editGeometryOperations!=null?(S=(w=n.editGeometryOperations.data.components[0])==null?void 0:w.getLastVertex())==null?void 0:S.pos:null,{view:a}=this,l=Kt(s,a,n),c=Kt(o,a,n),h=e.length;for(let b=0;b<h;b++)this._addRightAngleCandidate(e[b],c,i,r,e),this._addRightAngleCandidate(e[b],l,i,r,e)}_addRightAngleCandidate(e,i,r,n,s){if(i==null||!L3e(e))return;const o=e.constraint.closestTo(i),a=(o[0]-r[0])/n.x,l=(o[1]-r[1])/n.y,{start:c,end:h}=e.constraint;if(a*a+l*l<=1){const p=new pne({targetPoint:o,otherVertex:i,otherVertexType:U0.NEXT,previousVertex:dl(o,c)>dl(o,h)?c:h,constraint:new one(i,o),objectId:e.objectId,isDraped:e.isDraped});s.push(p)}}_computeScreenSizeDistanceParameters(e,i){let r=this.options!=null?this.options.distance*(i.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return this.view==null?{x:r,y:r,z:r,distance:r}:this.view.type==="2d"?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,i)}_computeScreenSizeDistanceParameters3D(e,i,r,n){const{spatialReference:s}=n;r.renderCoordsHelper.toRenderCoords(e,s,wG);const o=r.state.camera.computeScreenPixelSizeAt(wG),a=o*r.renderCoordsHelper.unitInMeters/r.mapCoordsHelper.unitInMeters,l=i*a,c=wn(e,s,ji,r),h=c?nP(c,e,a,0,0,r,n):0,p=c?nP(c,e,0,a,0,r,n):0,f=c?nP(c,e,0,0,a,r,n):0;return{x:h===0?0:l/h,y:p===0?0:l/p,z:f===0?0:l/f,distance:o*i}}get _types(){return{returnEdge:!0,returnVertex:!0}}_candidateIsExcluded(e,i,r){if(r==null)return!1;const n=this._getCandidateObjectId(i);if(n==null)return!1;const s=e.layerSource.layer;return s.type==="graphics"?r.uid===n:r.sourceLayer===s&&!(!r.attributes||!("objectIdField"in s))&&r.attributes[s.objectIdField]===n}_getCandidateObjectId(e){return e instanceof F5?e.objectId:null}_createSourceInfo(e){const i=this._createFeatureSnappingSourceType(e);if(i==null)return null;if("loading"in i)return this.updatingHandles.addPromise(i.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const r=this.view!=null?this.view.allLayerViews.find(n=>n.layer===e.layer):null;return new O3e(i.source,r)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:i}=this;if(i==null||i.type!=="3d")return null;const r=this._getSourceModule("scene");return r.module!=null?{source:new r.module.SceneLayerSnappingSource({layerSource:e,view:i})}:{loading:r.loader}}_createFeatureSnappingSourceFeatureLayer(e){var i;switch((i=e.layer.source)==null?void 0:i.type){case"feature-layer":case"oriented-imagery":{const r=this._getSourceModule("featureService");return r.module!=null?{source:new r.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:r.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(e.layer.geometryType==="mesh")return null;const r=this._getSourceModule("featureCollection");return r.module!=null?{source:new r.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:r.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const i=this._getSourceModule("graphics");return i.module!=null?{source:new i.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:i.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const i=this._getSourceModule("notes");return i.module!=null?{source:new i.module.GraphicsSnappingSource({getGraphicsLayers:()=>e.layer.sublayers!=null?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:i.loader}}_getSourceModule(e){const i=this._sourceModules[e];if(i.loader==null){const r=this._loadSourceModule(e).then(n=>{i.module=n});return i.loader=r,{module:i.module,loader:r}}return{module:i.module,loader:i.loader}}_loadSourceModule(e){const i=this.updatingHandles;switch(e){case"featureService":return i.addPromise(O(()=>import("./FeatureServiceSnappingSource-a11f8a65.js"),["assets/FeatureServiceSnappingSource-a11f8a65.js","assets/boundedPlane-b5f6b528.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/lineSegment-360e478e.js","assets/plane-99ecee15.js","assets/queryEngineUtils-8485ca40.js","assets/VertexSnappingCandidate-b52d2c97.js","assets/PointSnappingHint-9a38ba16.js","assets/WorkerHandle-8a59c149.js"]));case"featureCollection":return i.addPromise(O(()=>import("./FeatureCollectionSnappingSource-8cdfc43b.js"),["assets/FeatureCollectionSnappingSource-8cdfc43b.js","assets/queryEngineUtils-8485ca40.js","assets/VertexSnappingCandidate-b52d2c97.js","assets/PointSnappingHint-9a38ba16.js","assets/symbologySnappingCandidates-0f2961c3.js"]));case"graphics":case"notes":return i.addPromise(O(()=>import("./GraphicsSnappingSource-cb59e2d2.js"),["assets/GraphicsSnappingSource-cb59e2d2.js","assets/normalizeUtilsSync-58d43129.js","assets/FeatureStore-da45cb34.js","assets/BoundsStore-89a62371.js","assets/PooledRBush-edcf14b8.js","assets/optimizedFeatureQueryEngineAdapter-c6b9424d.js","assets/centroid-8e8cfa47.js","assets/timeSupport-04d3e38f.js","assets/projectionSupport-a16ccfe8.js","assets/json-48e3ea08.js","assets/QueryEngine-004e63e1.js","assets/WhereClause-8e39ce65.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-1cbccb3f.js","assets/utils-f516956e.js","assets/generateRendererUtils-d504f994.js","assets/SnappingCandidate-970faec6.js","assets/queryEngineUtils-8485ca40.js","assets/VertexSnappingCandidate-b52d2c97.js","assets/PointSnappingHint-9a38ba16.js","assets/symbologySnappingCandidates-0f2961c3.js"]));case"scene":return i.addPromise(O(()=>import("./SceneLayerSnappingSource-e269732e.js"),["assets/SceneLayerSnappingSource-e269732e.js","assets/WorkerHandle-8a59c149.js","assets/workerHelper-3deb0a64.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/edgeProcessing-3074b4d7.js","assets/deduplicate-559f0110.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/glUtil-0b7ee6ea.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/VertexSnappingCandidate-b52d2c97.js","assets/PointSnappingHint-9a38ba16.js"]))}}};u([d({constructOnly:!0})],Gd.prototype,"spatialReference",void 0),u([d({constructOnly:!0})],Gd.prototype,"view",void 0),u([d()],Gd.prototype,"options",void 0),u([d({readOnly:!0})],Gd.prototype,"updating",null),u([d({readOnly:!0})],Gd.prototype,"snappingSources",null),Gd=u([E("esri.views.interactive.snapping.FeatureSnappingEngine")],Gd);let O3e=class{constructor(e,i){this.snappingSource=e,this.layerView=i,this.handles=new Kr;const r=this.snappingSource.layerSource.layer;if("refresh"in r){const n=r;this.handles.add(n.on("refresh",()=>e.refresh()))}this.handles.add([D(()=>e.updating,n=>e.layerSource.updating=n,yn),D(()=>e.availability,n=>e.layerSource.availability=n,yn)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}};function L3e(t){return(t instanceof P3e||t instanceof C3e)&&!R3e(t)}function R3e({constraint:{start:t,end:e}}){const i=Vb(t,e),r=dl(t,e);return i<so()||r/i<D3e}function nP(t,e,i,r,n,s,{spatialReference:o}){const a=E0(F3e,e);a[0]+=i,a[1]+=r,a[2]+=n;const l=wn(a,o,ji,s);return l?I3e(l,t):1/0}const wG=Je(),F3e=Je(),D3e=1e-4;let TI=class{constructor(e,i){this.view=e,this.options=i,this.squaredShortLineThreshold=$c.shortLineThreshold*$c.shortLineThreshold}snap(e,i){return i.vertexHandle!=null?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(e,i):this.snapNewVertex(e,i)}edgeExceedsShortLineThreshold(e,i){return this.exceedsShortLineThreshold(Kt(e.leftVertex.pos,this.view,i),Kt(e.rightVertex.pos,this.view,i),i)}exceedsShortLineThreshold(e,i,{spatialReference:r}){return this.squaredShortLineThreshold===0||Km(wn(i,r,ji,this.view),wn(e,r,ji,this.view))>this.squaredShortLineThreshold}isVertical(e,i){return dl(e,i)<$c.verticalLineThreshold}squaredProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,r=e*i;return r*r}},N3e=class extends Sv{constructor({lineStart:e,lineEnd:i,targetPoint:r,isDraped:n}){super(r,new ane(e,i),n,Lr.SELF),this._referenceLineHint=new pu(Ko.REFERENCE_EXTENSION,e,i,n,this.domain)}get hints(){return[this._referenceLineHint,new pu(Ko.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},j3e=class extends TI{snapNewVertex(e,i){const r=i.editGeometryOperations.data.components[0],n=r.edges.length,s=[];if(n<1)return s;const{spatialReference:o}=i,a=wn(e,o,ji,this.view),{view:l}=this,c=r.edges[n-1];let h=c;do{if(this.edgeExceedsShortLineThreshold(h,i)){const p=FM(h,l,i);this._processCandidateProposal(p.left,p.right,e,a,i,s)}h=h.leftVertex.leftEdge}while(h&&h!==c);return s}snapExistingVertex(e,i){const r=[],n=i.vertexHandle,s=n.component;if(s.edges.length<2)return r;const{view:o}=this,{spatialReference:a}=i,l=wn(e,a,ji,o),c=n.leftEdge,h=n.rightEdge;c&&h&&this.edgeExceedsShortLineThreshold(c,i)&&this.edgeExceedsShortLineThreshold(h,i)&&this._processCandidateProposal(Kt(c.leftVertex.pos,o,i),Kt(h.rightVertex.pos,o,i),e,l,i,r);const p=s.edges[0];let f=p;do{if(f!==n.leftEdge&&f!==n.rightEdge&&this.edgeExceedsShortLineThreshold(f,i)){const y=FM(f,o,i);this._processCandidateProposal(y.left,y.right,e,l,i,r)}f=f.rightVertex.rightEdge}while(f&&f!==p);return r}_processCandidateProposal(e,i,r,n,s,o){var h;const{spatialReference:a,pointer:l}=s,c=P5(r,{start:e,end:i,type:ar.LINE});Km(n,wn(c,a,ji,this.view))<this.squaredProximityThreshold(l)&&o.push(new N3e({lineStart:e,lineEnd:i,targetPoint:c,isDraped:((h=s.elevationInfo)==null?void 0:h.mode)==="on-the-ground"}))}},V3e=class fne extends MI{constructor(e,i,r,n=Lr.ALL){super(r,n),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof fne&&sr(this.lineStart,e.lineStart)&&sr(this.lineEnd,e.lineEnd)}},z3e=class extends Sv{constructor({referenceLine:e,lineStart:i,targetPoint:r,isDraped:n}){const s=Lc(i),{left:o,right:a}=e;O1(s,JD(s,s,a),o),super(r,new ane(i,s),n,Lr.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new pu(Ko.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new V3e(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new pu(Ko.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(r=>{sr(e.right,r.edge.left)&&(r.fadeLeft=!1,i.fadeRight=!1),sr(e.right,r.edge.right)&&(r.fadeRight=!1,i.fadeRight=!1),sr(e.left,r.edge.right)&&(r.fadeRight=!1,i.fadeLeft=!1),sr(e.left,r.edge.left)&&(r.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},U3e=class extends TI{snapNewVertex(e,i){const r=i.editGeometryOperations.data.components[0],n=r.edges.length,s=r.vertices.length,o=[];if(n<2)return o;const{view:a}=this,l=wn(e,i.spatialReference,ji,a),c=Kt(r.vertices[s-1].pos,a,i),h=Kt(r.vertices[0].pos,a,i),p=r.edges[n-1];let f=p;do{if(this.edgeExceedsShortLineThreshold(f,i)){const y=FM(f,a,i);this._checkEdgeForParallelLines(y,c,e,l,i,o),this._checkEdgeForParallelLines(y,h,e,l,i,o)}f=f.leftVertex.leftEdge}while(f&&f!==p);return o}snapExistingVertex(e,i){const r=[],n=i.vertexHandle,s=n.component;if(s.edges.length<3)return r;const{view:o}=this,a=wn(e,i.spatialReference,ji,o),l=n.leftEdge,c=n.rightEdge,h=s.vertices[0],p=Kt(h.pos,o,i),f=s.vertices.length,y=s.vertices[f-1],g=Kt(y.pos,o,i),v=s.edges[0];let _=v;do{if(_!==l&&_!==c&&this.edgeExceedsShortLineThreshold(_,i)){const w=FM(_,o,i);l&&this._checkEdgeForParallelLines(w,Kt(l.leftVertex.pos,o,i),e,a,i,r),c&&this._checkEdgeForParallelLines(w,Kt(c.rightVertex.pos,o,i),e,a,i,r),n===h?this._checkEdgeForParallelLines(w,g,e,a,i,r):n===y&&this._checkEdgeForParallelLines(w,p,e,a,i,r)}_=_.rightVertex.rightEdge}while(_&&_!==v);return r}_checkEdgeForParallelLines(e,i,r,n,s,o){var f;const a=e.left,l=e.right;if(tP(Tp,i,a,l),dl(Tp,i)<$c.parallelLineThreshold)return;tP(Tp,r,a,l,i);const{spatialReference:c,pointer:h}=s,p=_s(Tp[0],Tp[1],r[2]);if(Km(n,wn(p,c,ji,this.view))<this.squaredProximityThreshold(h)){if(this.isVertical(p,i)||this.isVertical(a,l)||this._parallelToPreviousCandidate(e,o))return;o.push(new z3e({referenceLine:e,lineStart:i,targetPoint:p,isDraped:((f=s.elevationInfo)==null?void 0:f.mode)==="on-the-ground"}))}}_parallelToPreviousCandidate(e,i){const r=e.left,n=e.right;for(const s of i)if(tP(Tp,n,s.constraint.start,s.constraint.end,r),dl(Tp,n)<$c.parallelLineThreshold)return s.addReferenceLine(e),!0;return!1}};const Tp=at();let B3e=class extends TI{snapNewVertex(e,i){const r=i.editGeometryOperations.data.components[0],n=r.vertices.length,s=[];if(n<2)return s;const{view:o}=this,a=wn(e,i.spatialReference,ji,o),l=r.vertices[n-1];if(this.edgeExceedsShortLineThreshold(l.leftEdge,i)){const h=Kt(l.pos,o,i),p=Kt(l.leftEdge.leftVertex.pos,o,i);this._checkForSnappingCandidate(s,p,h,e,a,i)}const c=r.vertices[0];if(this.edgeExceedsShortLineThreshold(c.rightEdge,i)){const h=Kt(c.pos,o,i),p=Kt(c.rightEdge.rightVertex.pos,o,i);this._checkForSnappingCandidate(s,p,h,e,a,i)}return s}snapExistingVertex(e,i){const r=[],n=i.vertexHandle;if(n.component.vertices.length<3)return r;const{view:s}=this,o=wn(e,i.spatialReference,ji,s),a=n.leftEdge,l=n.rightEdge;if(a&&a.leftVertex.leftEdge){const c=a.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(c,i)){const h=Kt(c.rightVertex.pos,s,i),p=Kt(c.leftVertex.pos,s,i);this._checkForSnappingCandidate(r,p,h,e,o,i)}}if(l&&l.rightVertex.rightEdge){const c=l.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(c,i)){const h=Kt(c.leftVertex.pos,s,i),p=Kt(c.rightVertex.pos,s,i);this._checkForSnappingCandidate(r,p,h,e,o,i)}}return r}_checkForSnappingCandidate(e,i,r,n,s,o){var f;const{spatialReference:a,pointer:l}=o;or(zx,r,i);const c=nu(G3e,zx[1],-zx[0],0),h=fp(c,or(zx,n,r))/tp(c),p=bc(Lc(n),r,c,h);if(Km(s,wn(p,a,ji,this.view))<this.squaredProximityThreshold(l)){if(this.isVertical(p,r)||this.isVertical(r,i))return;const y=jh(Je(),r,c,Math.sign(h));e.push(new pne({targetPoint:p,constraint:new one(r,y),previousVertex:i,otherVertex:r,otherVertexType:U0.CENTER,isDraped:((f=o.elevationInfo)==null?void 0:f.mode)==="on-the-ground"}))}}};const zx=at(),G3e=Je();let H3e=class extends Sv{constructor({targetPoint:e,point1:i,point2:r,isDraped:n}){super(e,new sne(UW(Je(),i,r,.5),.5*Zm(i,r)),n,Lr.SELF),this._p1=i,this._p2=r}get hints(){return[new pu(Ko.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new pu(Ko.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new dne(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}},q3e=class extends TI{snapNewVertex(e,i){const r=i.editGeometryOperations.data.components[0],n=[],s=r.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||s<2)return n;const{view:o}=this,a=r.vertices[0],l=r.vertices[s-1],c=Kt(a.pos,o,i),h=Kt(l.pos,o,i);return this._processCandidateProposal(c,h,e,i,n),n}snapExistingVertex(e,i){const r=[],n=i.vertexHandle,s=n.component;if(s.edges.length<2||i.editGeometryOperations.data.type==="polyline"&&(n.index===0||n.index===s.vertices.length-1))return r;const{view:o}=this,a=Kt(n.leftEdge.leftVertex.pos,o,i),l=Kt(n.rightEdge.rightVertex.pos,o,i);return this._processCandidateProposal(a,l,e,i,r),r}_processCandidateProposal(e,i,r,n,s){var y;if(!this.exceedsShortLineThreshold(e,i,n))return;const o=PQ(W3e,e,i,.5),a=.5*Zm(e,i),l=Je();m3e(l,r,o,a),l[2]=r[2];const c=l,{spatialReference:h,pointer:p}=n,f=wn(r,h,ji,this.view);if(Km(f,wn(c,h,ji,this.view))<this.squaredProximityThreshold(p)){if(this.isVertical(e,c)||this.isVertical(c,i))return;s.push(new H3e({targetPoint:c,point1:e,point2:i,isDraped:((y=n.elevationInfo)==null?void 0:y.mode)==="on-the-ground"}))}}};const W3e=at();let tg=class extends X{constructor(e){super(e),this.updating=!1,this._snappers=new se,this._domain=Lr.SELF}initialize(){this._snappers.push(new U3e(this.view,this.options),new j3e(this.view,this.options),new B3e(this.view,this.options),new q3e(this.view,this.options))}set options(e){this._set("options",e);for(const i of this._snappers)i.options=e}async fetchCandidates(e,i,r){if(!(i&this._domain&&this.options.effectiveSelfEnabled))return[];const n=[];for(const s of this._snappers.items)for(const o of s.snap(e,r))n.push(o);return R5(e,n),n}};u([d({readOnly:!0})],tg.prototype,"updating",void 0),u([d({constructOnly:!0})],tg.prototype,"view",void 0),u([d()],tg.prototype,"options",null),tg=u([E("esri.views.interactive.snapping.SelfSnappingEngine")],tg);function Z3e(t,e){return[new tg({view:t,options:e}),new Gd({view:t,options:e,spatialReference:t.spatialReference})]}let As=class extends X{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new se,this.distance=$c.distance,this.touchSensitivityMultiplier=$c.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};u([d()],As.prototype,"enabled",void 0),u([d()],As.prototype,"enabledToggled",void 0),u([d()],As.prototype,"selfEnabled",void 0),u([d()],As.prototype,"featureEnabled",void 0),u([d({type:se.ofType($5)})],As.prototype,"featureSources",void 0),u([d()],As.prototype,"distance",void 0),u([d()],As.prototype,"touchSensitivityMultiplier",void 0),u([d({readOnly:!0})],As.prototype,"effectiveEnabled",null),u([d({readOnly:!0})],As.prototype,"effectiveSelfEnabled",null),u([d({readOnly:!0})],As.prototype,"effectiveFeatureEnabled",null),As=u([E("esri.views.interactive.snapping.SnappingOptions")],As);const D5=As;let Y3e=class mne extends MI{constructor(e,i,r=Lr.ALL){super(i,r),this.intersectionPoint=e}equals(e){return e instanceof mne&&sr(this.intersectionPoint,e.intersectionPoint)}},Ux=class extends Sv{constructor(e,i,r,n){super(e,new ine(e,i.constraint,r.constraint),n,Lr.ALL),this.first=i,this.second=r}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new Y3e(this.targetPoint,this.isDraped,this.domain)]}},Ma=class extends Vi.EventedMixin(R0){constructor(e){super(e),this.options=new D5,this.snappingEnginesFactory=Z3e,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=sc.MAIN}initialize(){this.handles.add([D(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:i,touchSensitivityMultiplier:r,distance:n}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:i,touchSensitivityMultiplier:r,distance:n}},()=>{this.doneSnapping(),this.emit("changed")},ul),D(()=>this.options,e=>{for(const i of this._engines)i.options=e},ul),D(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:i})=>this._recreateEngines(e,i),yn)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,i){if(this._destroyEngines(),!e)return;const{view:r,options:n}=this;this._engines=i(r,n)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,r=e*i;return r*r}get _squaredSatisfiesConstraintThreshold(){return $c.satisfiesConstraintScreenThreshold*$c.satisfiesConstraintScreenThreshold}async snap(e){return J3e(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:r}=e;this._removeVisualization();const n=this._currentMainCandidate;if(n==null)return i;const s=this._selectUpdateInput(e);if(s==null)return i;const{spatialReference:o}=r,a=Jo(s,o);if(a==null)return i;const{view:l}=this,{elevationInfo:c,visualizer:h}=r,p=[],f=gw(a,l,r),y=n.constraint.closestTo(f);if(!this._arePointsWithinScreenThreshold(f,y,r))return this._resetSnappingState(),i;n.targetPoint=y,p.push(...n.hints);for(const g of this._currentOtherActiveCandidates)g.targetPoint=y,p.push(...g.hints);return h!=null&&this.handles.add(h.draw(p,{spatialReference:o,elevationInfo:K3e(r),view:l,selfSnappingZ:r.selfSnappingZ}),Bx),gG(y,l,{z:i.z,m:i.m,spatialReference:i.spatialReference,elevationInfo:c})}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case sc.MAIN:return e;case sc.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=sc.MAIN}_removeVisualization(){this.handles.remove(Bx)}async _snapSinglePoint({point:e,context:i,signal:r}){const{view:n}=this,s=gw(e,n,i),o=await this._fetchCandidates(s,Lr.ALL,i,r);return this._createSnapResult(s,sc.MAIN,o,n,i,{z:e.z,m:e.m,spatialReference:e.spatialReference,elevationInfo:i.elevationInfo},r)}async _snapMultiPoint({point:e,scenePoint:i,context:r,signal:n}){const{view:s}=this,{coordinateHelper:o,spatialReference:a}=r;await ij(i.spatialReference,a);const l=Jo(i,a),c=gw(l,s,r),h=await this._fetchCandidates(c,Lr.FEATURE,r,n);if(h.length>0){const y=await this._fetchCandidates(c,Lr.SELF,r,n);return this._createSnapResult(c,sc.SCENE,[...h,...y],s,r,{z:l.z,m:l.m,spatialReference:l.spatialReference,elevationInfo:r.elevationInfo},n)}const p=gw(e,s,r),f=await this._fetchCandidates(p,Lr.SELF,r,n);return this._createSnapResult(p,sc.MAIN,f,s,r,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0,spatialReference:e.spatialReference,elevationInfo:r.elevationInfo},n)}async _fetchCandidates(e,i,r,n){return(await Promise.all(this._engines.map(s=>s.fetchCandidates(e,i,r,n)))).flat()}_createSnapResult(e,i,r,n,s,o,a){return{get valid(){return!to(a)},apply:()=>{const{spatialReference:l}=s,{snappedPoint:c,hints:h}=this._processCandidates(e,i,r,s);return this._removeVisualization(),s.visualizer!=null&&this.handles.add(s.visualizer.draw(h,{spatialReference:l,elevationInfo:ji,view:n,selfSnappingZ:s.selfSnappingZ}),Bx),gG(c,n,o)}}}_processCandidates(e,i,r,n){if(r.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),R5(e,r);const s=this._currentMainCandidate;if(s!=null){const o=this._findOldConstraintInNewCandidates(s,r);if(o>=0){if(!(r[o]instanceof Ux))return this._intersectWithOtherCandidates(o,r,e,i,n);if(this._arePointsWithinScreenThreshold(e,s.targetPoint,n))return this._updateSnappingCandidate(s,i,r,n)}}return this._intersectWithOtherCandidates(0,r,e,i,n)}_findOldConstraintInNewCandidates(e,i){return e instanceof Ux?this._findOldCandidateIndex(i,e.first)>=0&&this._findOldCandidateIndex(i,e.second)>=0?0:-1:this._findOldCandidateIndex(i,e)}_intersectWithOtherCandidates(e,i,r,n,s){const{coordinateHelper:o}=s,a=i[e],l=[];for(let c=0;c<i.length;++c){if(c===e)continue;const h=i[c];for(const p of a.constraint.intersect(h.constraint)){const f=p.closestTo(a.targetPoint);l.push([new Ux(f,a,h,h.isDraped),this._squaredScreenDistance(r,f,o)])}}return l.length>0&&(l.sort((c,h)=>c[1]-h[1]),l[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(l[0][0],n,i,s):this._updateSnappingCandidate(a,n,i,s)}_updateSnappingCandidate(e,i,r,n){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const s=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const a of r){if(e instanceof Ux){if(a.constraint.equals(e.first.constraint)||a.constraint.equals(e.second.constraint))continue}else if(a.constraint.equals(e.constraint))continue;const l=a.constraint.closestTo(s);this._squaredScreenDistance(l,s,n.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(a.targetPoint=s,this._currentOtherActiveCandidates.push(a),o.push(...a.hints))}return{snappedPoint:s,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(e,i,r){return this._squaredScreenDistance(e,i,r.coordinateHelper)<this._squaredPointProximityThreshold(r.pointer)}_squaredScreenDistance(e,i,r){return Km(this._toScreen(e,r),this._toScreen(i,r))}_toScreen(e,i){return wn(e,i.spatialReference,ji,this.view)}_findOldCandidateIndex(e,i){let r=-1;for(let n=0;n<e.length;++n)if(i.constraint.equals(e[n].constraint)){r=n;break}return r}get test(){return{visualizationsActive:this.handles.has(Bx),engines:this._engines}}};var sc;u([d({constructOnly:!0})],Ma.prototype,"view",void 0),u([d()],Ma.prototype,"options",void 0),u([d({readOnly:!0})],Ma.prototype,"updating",null),u([d()],Ma.prototype,"snappingEnginesFactory",void 0),u([d()],Ma.prototype,"_engines",void 0),u([d()],Ma.prototype,"_squaredMouseProximityTreshold",null),u([d()],Ma.prototype,"_squaredTouchProximityThreshold",null),u([d()],Ma.prototype,"_squaredSatisfiesConstraintThreshold",null),Ma=u([E("esri.views.interactive.snapping.SnappingManager")],Ma),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(sc||(sc={}));const Bx="visualization-handle";function J3e(t){return t.scenePoint!=null}function K3e({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?ji:e}let Br=class extends Vi.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};u([d()],Br.prototype,"activeComponent",void 0),u([d()],Br.prototype,"cancelled",void 0),u([d()],Br.prototype,"history",void 0),u([d()],Br.prototype,"tool",null),u([d()],Br.prototype,"type",void 0),u([d()],Br.prototype,"canUndo",null),u([d()],Br.prototype,"canRedo",null),u([d()],Br.prototype,"onEnd",void 0),u([d()],Br.prototype,"undo",null),u([d()],Br.prototype,"redo",null),u([d()],Br.prototype,"toggleTool",void 0),u([d()],Br.prototype,"addToSelection",void 0),u([d()],Br.prototype,"removeFromSelection",void 0),Br=u([E("esri.widgets.Sketch.support.OperationHandle")],Br);let RE=class extends Br{};u([d()],RE.prototype,"activeComponent",void 0),RE=u([E("esri.widgets.Sketch.support.CreateOperationHandle")],RE);let uc=class extends Br{};u([d()],uc.prototype,"activeComponent",void 0),uc=u([E("esri.widgets.Sketch.support.UpdateOperationHandle")],uc);const bG={defaultZ:0},s_={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let Nt=class extends Vi.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._handles=new Kr,this._internalGraphicsLayer=new wre({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new Kr,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new qre,this.layer=null,this.pointSymbol=new ll({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Qo({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new En({color:[130,130,130,1],width:2}),this.meshSymbol=new H1({symbolLayers:[new av]}),this._snappingManager=null,this.tooltipOptions=new Wre,this.updateGraphics=new se,this.updateOnGraphicClick=!0,this.vertexSymbol=new ll({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=bG,this.defaultUpdateOptions=s_,this.snappingOptions=new D5}initialize(){this._handles.add([_i(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),_i(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(this._operationHandle!=null)for(const i of e.removed)this.updateGraphics.includes(i)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(i):this._operationHandle.cancel())}),D(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},yn),D(()=>this.view,e=>{Ue(this._snappingManager),e&&(this._snappingManager=new Ma({view:e,options:this.snappingOptions}),e.type==="2d"?O(()=>import("./editingTools-e50f3c3b.js"),["assets/editingTools-e50f3c3b.js","assets/SnappingVisualizer2D-7d805d85.js","assets/enums-f1a6a48a.js","assets/settings-b4d471ae.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/editPlaneUtils-fb7f1a7b.js","assets/quat-95b41819.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js"]):e.type==="3d"&&(O(()=>import("./editingTools-8e2beba1.js").then(i=>i.e),["assets/editingTools-8e2beba1.js","assets/editPlaneUtils-fb7f1a7b.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/quat-95b41819.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/sphere-8d57d872.js","assets/mat4f64-65d35099.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js","assets/vec4f32-0d1b2306.js","assets/Octree-c2a48348.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/NativeLineMaterial-68d92c19.js","assets/vec3f32-ad1dc57f.js","assets/DoubleArray-13ca8a2c.js","assets/VertexColor.glsl-49a4fe71.js","assets/requestImageUtils-9d04786e.js","assets/basicInterfaces-bb952591.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-e943c837.js","assets/floatRGBA-4b494040.js","assets/triangulationUtils-343d5f4a.js","assets/deduplicate-559f0110.js","assets/NestedMap-1b5db22e.js","assets/glUtil-0b7ee6ea.js","assets/TranslateTooltipInfos-3f78222c.js","assets/MeshTransform-32eaeb12.js","assets/persistable-07e5b008.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f5383d8f.js","assets/ExtentTooltipInfos-d1d7f937.js"]),O(()=>import("./GraphicsLayerView3D-247846fa.js").then(i=>i.G),["assets/GraphicsLayerView3D-247846fa.js","assets/NativeLineMaterial-68d92c19.js","assets/vec3f32-ad1dc57f.js","assets/DoubleArray-13ca8a2c.js","assets/VertexColor.glsl-49a4fe71.js","assets/requestImageUtils-9d04786e.js","assets/basicInterfaces-bb952591.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/mat4f64-65d35099.js","assets/Indices-dca2f98a.js","assets/triangle-9156e780.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/lineSegment-360e478e.js","assets/VertexAttribute-9f2e53ec.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/quat-95b41819.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-e943c837.js","assets/plane-99ecee15.js","assets/interfaces-3b2ddada.js","assets/floatRGBA-4b494040.js","assets/triangulationUtils-343d5f4a.js","assets/earcut-6c3a7c54.js","assets/deduplicate-559f0110.js","assets/NestedMap-1b5db22e.js","assets/Octree-c2a48348.js","assets/boundedPlane-b5f6b528.js","assets/glUtil-0b7ee6ea.js","assets/rendererConversion-604183b9.js","assets/optimizedFeatureQueryEngineAdapter-c6b9424d.js","assets/centroid-8e8cfa47.js","assets/edgeUtils-0e62a4ff.js","assets/byteSizeEstimations-7cf1c05d.js","assets/vec32-cc735301.js","assets/SnappingCandidate-970faec6.js","assets/objectResourceUtils-56dd2456.js","assets/DefaultMaterial_COLOR_GAMMA-e93f40c1.js","assets/resourceUtils-ebdc7923.js","assets/symbolColorUtils-fc80265f.js","assets/callExpressionWithFeature-21189de1.js","assets/quantizationUtils-1cbccb3f.js","assets/MeshComponent-9f625ccd.js","assets/imageUtils-c2d0d1ae.js","assets/projection-ad8c99c5.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/fontUtils-bfde2177.js","assets/PooledRBush-edcf14b8.js","assets/popupUtils-7d573183.js","assets/geometryServiceUtils-409cbe63.js","assets/LayerView-2d6bbbeb.js"])))},yn),D(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,i)=>{e&&i&&!e.equals(i)&&this.cancel()})]),k3e(this)}destroy(){this.cancel(),this._handles=Ue(this._handles),this._viewHandles=Ue(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=Ue(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?"move":"transform"}get updating(){return this._numUpdating>0||this._snappingManager!=null&&this._snappingManager.updating}get activeTool(){var e;return((e=this._operationHandle)==null?void 0:e.tool)??null}get activeComponent(){var e;return((e=this._operationHandle)==null?void 0:e.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...bG,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...s_,...e,reshapeOptions:{...s_.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...s_.highlightOptions,...e==null?void 0:e.highlightOptions}})}set snappingOptions(e){this._snappingManager!=null&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var r;const e=!(!((r=this.view)!=null&&r.ready)||!this.layer),i=this._operationHandle;return e&&i?"active":e?"ready":"disabled"}get view(){return this._get("view")}set view(e){const i=this._get("view");if(i){const{container:n,map:s}=i;n&&(i.cursor=null),s&&s.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const r="view-ready";this._handles.remove(r),e&&this._handles.add(Ai(()=>e.ready,n=>{this._viewHandles.removeAll(),n&&this._viewHandles.add(this._generateViewHandles(e))},yn),r),this._set("view",e)}cancel(){this._moduleLoaderAbortController=vs(this._moduleLoaderAbortController),this._viewReadyAbortController=vs(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:i}=this;if(e==="active"&&i.length){const{activeTool:r,layer:n}=this,s=i.toArray();n.removeMany(s),this.cancel(),this._emitDeleteEvent({graphics:s,tool:r})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(i=>i.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,i){this.cancel(),await this._waitViewReady();const{view:r,layer:n}=this;if(!r||this.state==="disabled")throw n||this._logMissingLayer(),Ut();if(r.activeTool!=null&&(r.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");mG(r,this._internalGraphicsLayer);const s=await this._setupCreateOperation(e,i);if(s==null||this.destroyed)return void r.map.remove(this._internalGraphicsLayer);const o=()=>{if(s===this._operationHandle){const a=this.createGraphic,l=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),s.cancelled||a==null||n.add(a),this.emit("create",{graphic:a,state:l?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};s.on("complete",o),this._operationHandle=s,r.ready&&r.focus()}async update(e,i){this.cancel(),await this._waitViewReady();const{layer:r,view:n,state:s}=this;if(!n||s==="disabled")throw r||this._logMissingLayer(),Ut();n.activeTool!=null&&(n.activeTool=null);const o=Array.isArray(e)?e:[e];if(e==null||!o||!o.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(o.some(l=>l.layer!==r?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):l.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const a=await this._setupUpdateOperation(o,i);this.destroyed||a==null||Bi(a)||(mG(n,this._internalGraphicsLayer),this._setUpdateOperationHandle(a,i),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:a.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const i=this.view;if(i){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const r of e)r.geometry==null||r.geometry.type==="mesh"||Si(r.geometry.spatialReference,i.spatialReference)||(cu(r.geometry.spatialReference,i.spatialReference)||zc()||await uu(),r.geometry=Jo(r.geometry,i.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const i=this.view;if(!i)return this._logMissingView(),null;if(i.type==="2d"){const s=[];i.map.allLayers.forEach(a=>{a.type!=="vector-tile"&&a.type!=="imagery"||s.push(a)});const o=await i.hitTest(e,{exclude:s});return xFe(o.results)}const r=[i.map.ground];i.map.allLayers.forEach(s=>{s.type==="integrated-mesh"&&r.push(s)});const n=await i.hitTest(e,{exclude:r});if(n.results.length>0){const s=n.results[0];if(s!=null&&s.type==="graphic"&&s.graphic&&(!n.ground.mapPoint||i.map.ground.opacity<1||n.ground.distance-(s.distance??0)>-Math.min(3*n.ground.distance,i.viewingMode==="global"?WD(i.renderCoordsHelper.spatialReference).radius/i.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return s}return null}_generateViewHandles(e){return[e.on("immediate-click",async i=>{var o;const r=this.state==="active"&&((o=this._operationHandle)==null?void 0:o.type)==="create";if(this.state==="disabled"||r||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const n=await i.async(()=>this._getFirstHit(Io(i)));let s=null;if(n!=null){const a=n.graphic;this.updateGraphics.includes(a)||a.layer===this.layer?(i.stopPropagation(),s=a):e.type!=="2d"||this._isComponentGraphic(a)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();s==null||this.updateGraphics.includes(s)||await this.update([s],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},Rt.WIDGET)]}async _setupCreateOperation(e,i){const r=this.view;if(!r)return this._logMissingView(),null;const n={hasZ:r.type==="3d",...this.defaultCreateOptions,...i},s=await this._setupDrawGraphicTool(e,r,n);return s==null?null:(r.tools.add(s),r.activeTool=s,this._setupCreateOperationHandle(s))}async _setupDrawGraphicTool(e,i,r){if(e==="multipoint"&&i.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!i)return this._logMissingView(),null;const n=e!=="rectangle",s=e!=="rectangle",o={view:i,mode:e==="rectangle"||e==="circle"?"hybrid":"click",...r,snapToScene:!1,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),snappingManager:this._snappingManager,forceUniformSize:s,centered:n};return i.type==="2d"?this._makeDrawGraphicTool2D(o):this._makeDrawGraphicTool3D(o)}async _makeDrawGraphicTool2D(e){const i=await this._requireModule(O(()=>import("./editingTools-e50f3c3b.js"),["assets/editingTools-e50f3c3b.js","assets/SnappingVisualizer2D-7d805d85.js","assets/enums-f1a6a48a.js","assets/settings-b4d471ae.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/editPlaneUtils-fb7f1a7b.js","assets/quat-95b41819.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js"]));return Bi(i)||this.destroyed?null:new i.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:X3e(e.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})}async _makeDrawGraphicTool3D(e){const i=await this._requireModule(O(()=>import("./editingTools-8e2beba1.js").then(n=>n.e),["assets/editingTools-8e2beba1.js","assets/editPlaneUtils-fb7f1a7b.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/quat-95b41819.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/sphere-8d57d872.js","assets/mat4f64-65d35099.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js","assets/vec4f32-0d1b2306.js","assets/Octree-c2a48348.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/NativeLineMaterial-68d92c19.js","assets/vec3f32-ad1dc57f.js","assets/DoubleArray-13ca8a2c.js","assets/VertexColor.glsl-49a4fe71.js","assets/requestImageUtils-9d04786e.js","assets/basicInterfaces-bb952591.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-e943c837.js","assets/floatRGBA-4b494040.js","assets/triangulationUtils-343d5f4a.js","assets/deduplicate-559f0110.js","assets/NestedMap-1b5db22e.js","assets/glUtil-0b7ee6ea.js","assets/TranslateTooltipInfos-3f78222c.js","assets/MeshTransform-32eaeb12.js","assets/persistable-07e5b008.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f5383d8f.js","assets/ExtentTooltipInfos-d1d7f937.js"]));if(Bi(i)||this.destroyed)return null;const{elevationInfo:r}=this.layer;return new i.module.DrawGraphicTool3D({...e,elevationInfo:r,snapToScene:r==null||r.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})}_setupCreateOperationHandle(e){const i=this.view;if(!i)return this._logMissingView(),null;let r=null;const n=e.forceUniformSize,s=e.centered,o=[i.on("key-down",l=>{if(l.key===Ui.pan)l.stopPropagation(),l.repeat||(e.enabled=!1);else if(l.key===Ui.complete)l.stopPropagation(),e.completeCreateOperation();else if(l.key!==Ui.vertexAdd||l.repeat)l.key===Ui.undo?(l.stopPropagation(),a.undo()):l.key===Ui.redo?(l.stopPropagation(),a.redo()):l.key!==Ui.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||l.repeat?l.key===Ui.center&&(l.repeat||(e.centered=!s,l.stopPropagation())):(e.forceUniformSize=!n,l.stopPropagation());else{const c=e.drawOperation.geometryType;c!=="polyline"&&c!=="polygon"&&c!=="multipoint"||(l.stopPropagation(),e.drawOperation.commitStagedVertex())}},Rt.WIDGET),i.on("key-up",l=>{l.key===Ui.pan?e.enabled=!0:l.key!==Ui.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?l.key===Ui.center&&(e.centered=s,l.stopPropagation()):(e.forceUniformSize=n,l.stopPropagation())},Rt.WIDGET),e.on("vertex-add",l=>{switch(r=r==null?"start":"active",l.operation){case"apply":this.emit("create",{graphic:e.graphic,state:r,tool:this.activeTool,toolEventInfo:l,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",l=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:l.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",l=>{switch(l.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:l,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",l=>{this._set("createGraphic",l.graphic),r="complete",l.aborted?a&&a.cancel():a&&a.complete()}),D(()=>this._getGraphicSymbolFromTool(e.geometryType),l=>{e.graphicSymbol=l})],a=new RE({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var l;o.forEach(c=>c.remove()),o.length=0,(l=i.tools)==null||l.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return a}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,i){var a;const{layer:r,view:n}=this;if(!n)return this._logMissingView(),null;const s={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...i,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...i==null?void 0:i.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...i==null?void 0:i.highlightOptions}};let o=s.tool;for(const l of e)r.remove(l),r.add(l);if(n.type==="3d"){if(e.length===0)return null;switch(o){case"move":return this._setupMove3DOperation(e,s,n,o);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const l=jx(e[0]);return l===St.SUPPORTED?this._setupReshape3DOperation(e[0],s,n):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${XC(l)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,s,n)}}switch(o){case"move":return this._setupMove2DOperation(e,s,n);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const l=jx(e[0]);return l===St.SUPPORTED?this._setupTransformOrReshape2DOperation(e,o,s,n):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${XC(l)}).`),null)}case"transform":if(e.length===1){const l=(a=e[0].geometry)==null?void 0:a.type;l!=="point"&&l!=="multipoint"||(o="reshape")}return this._setupTransformOrReshape2DOperation(e,o,s,n)}}async _setupMove3DOperation(e,i,r,n,s=!1){for(const h of e){const p=l3e(h);if(p!==St.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${XC(p)}).`),null}const o=await this._requireModule(O(()=>import("./editingTools-8e2beba1.js").then(h=>h.e),["assets/editingTools-8e2beba1.js","assets/editPlaneUtils-fb7f1a7b.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/quat-95b41819.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/sphere-8d57d872.js","assets/mat4f64-65d35099.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js","assets/vec4f32-0d1b2306.js","assets/Octree-c2a48348.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/NativeLineMaterial-68d92c19.js","assets/vec3f32-ad1dc57f.js","assets/DoubleArray-13ca8a2c.js","assets/VertexColor.glsl-49a4fe71.js","assets/requestImageUtils-9d04786e.js","assets/basicInterfaces-bb952591.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-e943c837.js","assets/floatRGBA-4b494040.js","assets/triangulationUtils-343d5f4a.js","assets/deduplicate-559f0110.js","assets/NestedMap-1b5db22e.js","assets/glUtil-0b7ee6ea.js","assets/TranslateTooltipInfos-3f78222c.js","assets/MeshTransform-32eaeb12.js","assets/persistable-07e5b008.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f5383d8f.js","assets/ExtentTooltipInfos-d1d7f937.js"]));if(Bi(o))return o;const a=new o.module.GraphicMoveTool({view:r,enableZ:i.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});r.tools.add(a),a.graphics.addMany(e),s||this.updateGraphics.addMany(e);const l=[],c=new uc({activeComponent:a,tool:n,type:"update",onEnd:()=>{var h;l.forEach(p=>p.remove()),l.length=0,(h=r.tools)==null||h.remove(a),a.destroyed||a.destroy()},undo:()=>{Gx(c,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{Hx(c,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:h=>{this.updateGraphics.push(h),a.graphics.push(h),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[h],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:h=>{const p=this.updateGraphics.indexOf(h);c.history.undo.forEach(f=>f.updates.splice(p,1)),c.history.redo.forEach(f=>f.updates.splice(p,1)),this.updateGraphics.remove(h),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[h],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?a.graphics.remove(h):c.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1||n!=="transform")return;const h=this.updateGraphics.at(0);if(jx(h)!==St.SUPPORTED)return;c.onEnd(),c.destroy();const p=await this._setupReshape3DOperation(h,i,r,!0);Bi(p)||this._setUpdateOperationHandle(p,i)}});return l.push(...this._getHandlesForComponent(c,i),r.on("immediate-click",h=>this._getCommonUpdateOperationClickHandlers(c,h,i),Rt.WIDGET),r.on("key-down",h=>{this._getCommonUpdateOperationKeyDownHandlers(c,h)},Rt.WIDGET)),c}_setupGraphicTransform3DOperation(e,i,r,n=!1){if(e.length===1&&h3e(e[0])===St.SUPPORTED){const s=e[0],o=s.geometry;if(o!=null&&(o.type==="point"||o.type==="mesh"))return this._setupPointTransform3DOperation(s,i,r);if(o!=null&&(o.type==="polygon"||o.type==="polyline"))return this._setupPolyTransform3DOperation(s,i,r,n)}return this._setupMove3DOperation(e,i,r,"transform",n)}async _setupPointTransform3DOperation(e,i,r){const n="transform",{enableRotation:s,enableScaling:o,enableZ:a}=i,l=await this._requireModule(O(()=>import("./editingTools-8e2beba1.js").then(f=>f.e),["assets/editingTools-8e2beba1.js","assets/editPlaneUtils-fb7f1a7b.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/quat-95b41819.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/sphere-8d57d872.js","assets/mat4f64-65d35099.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js","assets/vec4f32-0d1b2306.js","assets/Octree-c2a48348.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/NativeLineMaterial-68d92c19.js","assets/vec3f32-ad1dc57f.js","assets/DoubleArray-13ca8a2c.js","assets/VertexColor.glsl-49a4fe71.js","assets/requestImageUtils-9d04786e.js","assets/basicInterfaces-bb952591.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-e943c837.js","assets/floatRGBA-4b494040.js","assets/triangulationUtils-343d5f4a.js","assets/deduplicate-559f0110.js","assets/NestedMap-1b5db22e.js","assets/glUtil-0b7ee6ea.js","assets/TranslateTooltipInfos-3f78222c.js","assets/MeshTransform-32eaeb12.js","assets/persistable-07e5b008.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f5383d8f.js","assets/ExtentTooltipInfos-d1d7f937.js"]));if(Bi(l))return l;const c=new l.module.GraphicTransformTool({graphic:e,view:r,enableRotation:s,enableScaling:o,enableZ:a,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});r.tools.add(c),this.updateGraphics.add(e);const h=[],p=new uc({activeComponent:c,tool:n,type:"update",onEnd:()=>{var f;h.forEach(y=>y.remove()),h.length=0,(f=r.tools)==null||f.remove(c),c.destroyed||c.destroy()},undo:()=>{Gx(p,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{Hx(p,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:async f=>{this.updateGraphics.add(f),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"}),p.onEnd(),p.destroy();const y=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,r,"transform",!0);Bi(y)||this._setUpdateOperationHandle(y,i)},removeFromSelection:f=>{this.updateGraphics.remove(f),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"}),p.complete()},toggleTool:()=>{}});return h.push(...this._getHandlesForComponent(p,i),r.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(p,f,i),Rt.WIDGET),r.on("key-down",f=>{this._getCommonUpdateOperationKeyDownHandlers(p,f)},Rt.WIDGET)),p}async _setupPolyTransform3DOperation(e,i,r,n=!1){const s="transform",{enableRotation:o,enableScaling:a,enableZ:l,preserveAspectRatio:c}=i,h=await this._requireModule(O(()=>import("./editingTools-8e2beba1.js").then(g=>g.e),["assets/editingTools-8e2beba1.js","assets/editPlaneUtils-fb7f1a7b.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/quat-95b41819.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/sphere-8d57d872.js","assets/mat4f64-65d35099.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js","assets/vec4f32-0d1b2306.js","assets/Octree-c2a48348.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/NativeLineMaterial-68d92c19.js","assets/vec3f32-ad1dc57f.js","assets/DoubleArray-13ca8a2c.js","assets/VertexColor.glsl-49a4fe71.js","assets/requestImageUtils-9d04786e.js","assets/basicInterfaces-bb952591.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-e943c837.js","assets/floatRGBA-4b494040.js","assets/triangulationUtils-343d5f4a.js","assets/deduplicate-559f0110.js","assets/NestedMap-1b5db22e.js","assets/glUtil-0b7ee6ea.js","assets/TranslateTooltipInfos-3f78222c.js","assets/MeshTransform-32eaeb12.js","assets/persistable-07e5b008.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f5383d8f.js","assets/ExtentTooltipInfos-d1d7f937.js"]));if(Bi(h))return h;const p=new h.module.ExtentTransformTool({graphic:e,view:r,enableRotation:o,enableScaling:a,enableZ:l,preserveAspectRatio:c,tooltipOptions:this.tooltipOptions});r.tools.add(p),n||this.updateGraphics.add(e);const f=[],y=new uc({activeComponent:p,tool:s,type:"update",onEnd:()=>{var g;f.forEach(v=>v.remove()),f.length=0,(g=r.tools)==null||g.remove(p),p.destroyed||p.destroy()},canUndo:()=>p.canUndo,undo:()=>{p.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>p.canRedo,redo:()=>{p.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async g=>{this.updateGraphics.add(g),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[g],removed:[],type:"selection-change"},type:"update"}),y.onEnd(),y.destroy();const v=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,r,"transform",!0);Bi(v)||this._setUpdateOperationHandle(v,i)},removeFromSelection:g=>{this.updateGraphics.remove(g),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[g],type:"selection-change"},type:"update"}),y.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1)return;const g=this.updateGraphics.at(0);if(jx(g)!==St.SUPPORTED)return;y.onEnd(),y.destroy();const v=await this._setupReshape3DOperation(g,i,r,!0);Bi(v)||this._setUpdateOperationHandle(v,i)}});return f.push(...this._getHandlesForComponent(y,i),r.on("immediate-click",g=>this._getCommonUpdateOperationClickHandlers(y,g,i),Rt.WIDGET),r.on("key-down",g=>this._getCommonUpdateOperationKeyDownHandlers(y,g),Rt.WIDGET),r.on("key-down",g=>{g.key!==Ui.constraint||g.repeat||(p.preserveAspectRatio=!p.preserveAspectRatio,g.stopPropagation())},Rt.WIDGET),r.on("key-up",g=>{g.key===Ui.constraint&&(p.preserveAspectRatio=!p.preserveAspectRatio,g.stopPropagation())},Rt.WIDGET)),y}async _setupMove2DOperation(e,i,r){const n="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=await this._getGraphicMover(e,i,r);if(Bi(s))return s;const o=new uc({activeComponent:s,tool:n,type:"update",onEnd:()=>{var h;this._displayDefaultCursor(),c.forEach(p=>p.remove()),l.forEach(p=>p.remove()),c=[],l=[],s.destroy(),(h=this._internalGraphicsLayer)==null||h.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const h=this.updateGraphics.toArray();Gx(o,h),o.refreshComponent(),this._emitUndoEvent({graphics:h,tool:n})},redo:()=>{const h=this.updateGraphics.toArray();Hx(o,h),o.refreshComponent(),this._emitRedoEvent({graphics:h,tool:n})},addToSelection:async h=>{await this._updateSpatialReference(h),this.updateGraphics.push(h),s.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[h],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:h=>{const p=this.updateGraphics.indexOf(h);o.history.undo.forEach(y=>y.updates.splice(p,1)),o.history.redo.forEach(y=>y.updates.splice(p,1)),this.updateGraphics.remove(h);const f=this.updateGraphics.toArray();this.emit("update",{graphics:f,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[h],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?s.graphics=f:o.complete()}});let a=!1,l=[r.on("immediate-click",h=>this._getCommonUpdateOperationClickHandlers(o,h,i),Rt.WIDGET),r.on("key-down",h=>{this._getCommonUpdateOperationKeyDownHandlers(o,h),h.key!==Ui.constraint||h.repeat||(a=!0,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},Rt.WIDGET),r.on("key-up",h=>{h.key===Ui.constraint&&a&&(a=!1,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},Rt.WIDGET)],c=this._getHandlesForComponent(o,i);return o}async _setupReshape3DOperation(e,i,r,n=!1){const s="reshape",o=await this._requireModule(O(()=>import("./editingTools-8e2beba1.js").then(p=>p.e),["assets/editingTools-8e2beba1.js","assets/editPlaneUtils-fb7f1a7b.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/quat-95b41819.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/sphere-8d57d872.js","assets/mat4f64-65d35099.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/interfaces-3b2ddada.js","assets/GraphicManipulator-2ea688b3.js","assets/colorUtils-46453684.js","assets/boundedPlane-b5f6b528.js","assets/vec4f32-0d1b2306.js","assets/Octree-c2a48348.js","assets/InterleavedLayout-93f1345d.js","assets/BufferView-bba8d347.js","assets/types-1305598a.js","assets/NativeLineMaterial-68d92c19.js","assets/vec3f32-ad1dc57f.js","assets/DoubleArray-13ca8a2c.js","assets/VertexColor.glsl-49a4fe71.js","assets/requestImageUtils-9d04786e.js","assets/basicInterfaces-bb952591.js","assets/enums-b14466b3.js","assets/Texture-49e8f2d7.js","assets/Indices-dca2f98a.js","assets/VertexAttribute-9f2e53ec.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-0ab46cc4.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-e943c837.js","assets/floatRGBA-4b494040.js","assets/triangulationUtils-343d5f4a.js","assets/deduplicate-559f0110.js","assets/NestedMap-1b5db22e.js","assets/glUtil-0b7ee6ea.js","assets/TranslateTooltipInfos-3f78222c.js","assets/MeshTransform-32eaeb12.js","assets/persistable-07e5b008.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f5383d8f.js","assets/ExtentTooltipInfos-d1d7f937.js"]));if(Bi(o))return o;const a=i.reshapeOptions,l=new o.module.GraphicReshapeTool({view:r,graphic:e,enableZVertex:i.enableZ&&(a==null?void 0:a.vertexOperation)==="move",enableZShape:i.enableZ&&(a==null?void 0:a.shapeOperation)==="move",enableMoveGraphic:(a==null?void 0:a.shapeOperation)==="move"||(a==null?void 0:a.shapeOperation)==="move-xy",enableMidpoints:(a==null?void 0:a.edgeOperation)==="split",enableEdgeOffset:(a==null?void 0:a.edgeOperation)==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});r.tools.add(l),n||this.updateGraphics.add(e);const c=[],h=new uc({activeComponent:l,tool:s,type:"update",onEnd:()=>{var p;c.forEach(f=>f.remove()),c.length=0,(p=r.tools)==null||p.remove(l),l.destroyed||l.destroy()},canUndo:()=>l.canUndo,undo:()=>{l.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>l.canRedo,redo:()=>{l.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async p=>{this.updateGraphics.add(p),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[p],removed:[],type:"selection-change"},type:"update"}),h.onEnd(),h.destroy();const f=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,r,"transform",!0);Bi(f)||this._setUpdateOperationHandle(f,i)},removeFromSelection:p=>{this.updateGraphics.remove(p),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[p],type:"selection-change"},type:"update"}),h.complete()},toggleTool:async()=>{if(i.toggleToolOnClick===!1)return;h.onEnd(),h.destroy();const p=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),i,r,!0);Bi(p)||this._setUpdateOperationHandle(p,i)}});return c.push(...this._getHandlesForComponent(h,i),r.on("immediate-click",p=>this._getCommonUpdateOperationClickHandlers(h,p,i),Rt.WIDGET),r.on("key-down",p=>{this._getCommonUpdateOperationKeyDownHandlers(h,p)},Rt.WIDGET)),h}async _setupTransformOrReshape2DOperation(e,i,r,n){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=i==="transform"?await this._getBox(e,r,n):await this._getReshape(e,r,n);if(Bi(s))return s;const o=new uc({activeComponent:s,type:"update",onEnd:()=>{l.forEach(c=>c.remove()),a.forEach(c=>c.remove()),l=[],a=[],o.activeComponent&&!o.activeComponent.destroyed&&o.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Gx(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},redo:()=>{Hx(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},addToSelection:async c=>{let h=o.activeComponent;if((h==null?void 0:h.type)==="reshape"){const p=[...this.updateGraphics,c];this.updateGraphics.removeAll(),o.onEnd(),o.destroy();const f=await this._setupMove2DOperation(p,r,n);if(Bi(f))return;this._setUpdateOperationHandle(f,r)}else this.updateGraphics.add(c),h.graphics=this.updateGraphics.toArray(),h.refresh(),o.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[c],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async c=>{const h=this.updateGraphics.indexOf(c);o.history.undo.forEach(f=>f.updates.splice(h,1)),o.history.redo.forEach(f=>f.updates.splice(h,1)),this.updateGraphics.remove(c);const p=this.updateGraphics.toArray();if(p.length===0)o.complete();else{const f=p[0].geometry;p.length!==1||f==null||f.type!=="point"&&f.type!=="multipoint"?o.activeComponent.graphics=p:o.toggleTool()}this.emit("update",{graphics:p,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[c],type:"selection-change"},type:"update"})},toggleTool:async()=>{var f;if(this.updateGraphics.length>1)return;const c=this.updateGraphics.at(0),h=c.geometry;if(h!=null&&(o.tool==="reshape"&&(h.type==="point"||h.type==="multipoint")||o.tool==="transform"&&h.type==="extent"))return;let p=null;o.tool==="transform"?p=await this._getReshape([c],r,n):o.tool==="reshape"&&(p=await this._getBox([c],r,n)),Bi(p)||((f=o.activeComponent)==null||f.destroy(),o.activeComponent=p,o.activeComponent&&(l.forEach(y=>y.remove()),l=this._getHandlesForComponent(o,r)))}});let a=[n.on("immediate-click",c=>this._getCommonUpdateOperationClickHandlers(o,c,r),Rt.WIDGET),n.on("key-down",c=>{if(this._getCommonUpdateOperationKeyDownHandlers(o,c),c.key===Ui.constraint&&!c.repeat&&o){const h=o.activeComponent;h&&h.type==="box"&&(h.preserveAspectRatio=!h.preserveAspectRatio)}},Rt.WIDGET),n.on("key-up",c=>{if(c.key===Ui.constraint&&o){const h=o.activeComponent;h&&h.type==="box"&&(h.preserveAspectRatio=!h.preserveAspectRatio)}},Rt.WIDGET)],l=this._getHandlesForComponent(o,r);return o}async _getGraphicMover(e,i,r){const{enableMoveAllGraphics:n,highlightOptions:s}=i,o=await this._requireModule(O(()=>import("./GraphicMover-0a7ac317.js").then(a=>a.G),["assets/GraphicMover-0a7ac317.js","assets/GraphicManipulator-2ea688b3.js"]));return Bi(o)?o:new o.module.default({enableMoveAllGraphics:n,highlightsEnabled:!!(s!=null&&s.enabled),indicatorsEnabled:!1,graphics:e,view:r,callbacks:{onGraphicMoveStart:({dx:a,dy:l,graphic:c})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:l,mover:c,type:"move-start"},type:"update"})},onGraphicMove:({dx:a,dy:l,graphic:c})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:l,mover:c,type:"move"},type:"update"}),onGraphicMoveStop:({dx:a,dy:l,graphic:c})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:l,mover:c,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,i,r){const{enableRotation:n,enableScaling:s,highlightOptions:o,preserveAspectRatio:a}=i,l=await this._requireModule(O(()=>import("./Box-35e6c075.js"),["assets/Box-35e6c075.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/GraphicManipulator-2ea688b3.js","assets/GraphicMover-0a7ac317.js","assets/settings-b4d471ae.js","assets/ExtentTooltipInfos-d1d7f937.js","assets/TranslateTooltipInfos-3f78222c.js"]));return Bi(l)?l:new l.module.default({graphics:e,enableRotation:n,enableScaling:s,highlightsEnabled:!!(o!=null&&o.enabled),preserveAspectRatio:a,layer:this._internalGraphicsLayer,view:r,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onMove:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onMoveStop:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onScaleStart:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onScale:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onScaleStop:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onRotateStart:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onRotate:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onRotateStop:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"})}})}async _getReshape(e,i,r){var l,c,h;const n=((l=i.reshapeOptions)==null?void 0:l.edgeOperation)==="split",s=((c=i.reshapeOptions)==null?void 0:c.shapeOperation)==="move",o=!!((h=i.highlightOptions)!=null&&h.enabled),a=await this._requireModule(O(()=>import("./Reshape-3147b428.js"),["assets/Reshape-3147b428.js","assets/automaticLengthMeasurementUtils-c72c5077.js","assets/spatialReferenceEllipsoidUtils-a35b716b.js","assets/geometryEngine-5925e455.js","assets/geometryEngineBase-9014f2fe.js","assets/hydrated-4d21b56a.js","assets/SnappingVisualizer2D-7d805d85.js","assets/enums-f1a6a48a.js","assets/settings-b4d471ae.js","assets/SnappingContext-b5c517d5.js","assets/PointSnappingHint-9a38ba16.js","assets/earcut-6c3a7c54.js","assets/plane-99ecee15.js","assets/sphere-8d57d872.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/triangle-9156e780.js","assets/lineSegment-360e478e.js","assets/GraphicManipulator-2ea688b3.js","assets/GraphicMover-0a7ac317.js","assets/TranslateTooltipInfos-3f78222c.js"]));return Bi(a)?a:new a.module.default({enableMidpoints:n,enableMovement:s,graphic:e[0],highlightsEnabled:o,layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:r,callbacks:{onReshapeStart:p=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...p},type:"update"}),onReshape:p=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...p},type:"update"}),onReshapeStop:({mover:p,type:f})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:p,type:f},type:"update"}),onMoveStart:({dx:p,dy:f,mover:y,type:g})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:p,dy:f,mover:y,type:g},type:"update"}),onMove:({dx:p,dy:f,mover:y,type:g})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:p,dy:f,mover:y,type:g},type:"update"}),onMoveStop:({dx:p,dy:f,mover:y,type:g})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:p,dy:f,mover:y,type:g},type:"update"}),onVertexAdd:({added:p,type:f,vertices:y})=>{const g=p.map(v=>K4(v.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:g,vertices:y,type:f},type:"update"})},onVertexRemove:({removed:p,type:f,vertices:y})=>{const g=p.map(v=>K4(v.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:g,vertices:y,type:f},type:"update"})}}})}_getHandlesForComponent(e,i){const r=e.activeComponent;if(!r)return[];switch(r.type){case"graphic-mover":return[r.on("graphic-click",({graphic:n,viewEvent:s})=>{var o;(o=s.native)!=null&&o.shiftKey&&(s.stopPropagation(),e.removeFromSelection(n))}),r.on("graphic-move-start",n=>e.addToHistory(xu(n.allGraphics)))];case"box":return[r.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(e,i,n)),r.on("move-start",n=>e.addToHistory(xu(n.graphics))),r.on("rotate-start",n=>e.addToHistory(xu(n.graphics))),r.on("scale-start",n=>e.addToHistory(xu(n.graphics)))];case"reshape":return[r.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(e,i,n)),r.on("move-start",n=>e.addToHistory(xu([n.mover]))),r.on("reshape-start",n=>e.addToHistory(xu([n.graphic]))),r.on("vertex-add",n=>e.addToHistory(xu([n.oldGraphic]))),r.on("vertex-remove",n=>e.addToHistory(xu([n.oldGraphic])))];case"move-3d":return[r.on("graphic-move-start",n=>{e.addToHistory(xu(n.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move-start"},type:"update"})}),r.on("graphic-move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:n.dx,dy:n.dy,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move"},type:"update"})}),r.on("graphic-move-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move-stop"},type:"update"})}),r.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],e,i):e.toggleTool()})];case"transform-3d":return[r.on("record-undo",({record:n})=>{e.addToHistory({updates:[n]})}),r.on("graphic-translate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-start"},type:"update"})}),r.on("graphic-translate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-stop"},type:"update"})}),r.on("graphic-rotate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate-start"},type:"update"})}),r.on("graphic-rotate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate-stop"},type:"update"})}),r.on("graphic-scale-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-start"},type:"update"})}),r.on("graphic-scale-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-stop"},type:"update"})}),r.on("graphic-translate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move"},type:"update"})}),r.on("graphic-rotate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate"},type:"update"})}),r.on("graphic-scale",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale"},type:"update"})}),r.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],e,i):e.toggleTool()})];case"reshape-3d":return[r.on("reshape",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),r.on("move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),r.on("vertex-add",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),r.on("vertex-remove",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),r.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],e,i):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,i,r){var o;const{graphic:n,viewEvent:s}=r;return(o=s.native)!=null&&o.shiftKey&&n.layer===this.layer?(s.stopPropagation(),e.removeFromSelection(n)):i.toggleToolOnClick?(s.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,i){var s;this._operationHandle=e;const r=(s=this.view)==null?void 0:s.map;this._disablePopup(i);const n=()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),a=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),r&&r.remove(this._internalGraphicsLayer),this._restorePopup(i),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}};e.on("complete",n)}async _getCommonUpdateOperationClickHandlers(e,i,r){const n=Io(i),s=await i.async(()=>this._getFirstHit(n));if(s==null)return void e.complete();if(i.native.shiftKey&&this._toggleSelection([s.graphic],e,r))return void i.stopPropagation();this.updateGraphics.includes(s.graphic)?i.stopPropagation():e.complete()}_toggleSelection(e,i,r){const n=!!r.multipleSelectionEnabled;return e.some(s=>s!=null&&!(!n||s.layer!==this.layer)&&(this.updateGraphics.includes(s)?i.removeFromSelection(s):i.addToSelection(s),!0))}_getCommonUpdateOperationKeyDownHandlers(e,i){if(!e)return;const r=i.key;r===Ui.undo&&e.canUndo()?(i.stopPropagation(),e.undo()):r===Ui.redo&&e.canRedo()?(i.stopPropagation(),e.redo()):r===Ui.cancel?(i.stopPropagation(),e.cancel()):this.allowDeleteKey&&Ui.delete.includes(r)&&this._onDeleteKey(i)}_onDeleteKey(e){var n;if(!this._operationHandle||this._operationHandle.type!=="update")return;const i=this.activeComponent,r=this.updateGraphics.toArray();i!=null&&i.type!=="reshape-3d"&&(i.type!=="reshape"||r.length===1&&((n=r[0].geometry)==null?void 0:n.type)==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,i;this._internalGraphicsLayer&&((i=(e=this.view)==null?void 0:e.map)==null||i.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=Ue(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:i}=this;return!(!e||i==null)&&(e.attributes&&e.attributes.esriSketchTool||i.type==="draw-2d"&&i.graphic===e||(i.type==="box"||i.type==="reshape")&&i.isUIGraphic(e))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,i,r){U.getLogger(this).error(new C(e,i,r))}async _requireModule(e){const i=new AbortController;this._moduleLoaderAbortController=i;const r=await e;return this._moduleLoaderAbortController!==i||i.signal.aborted?{requireError:"aborted"}:{module:r}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:s_}}wait(){return Ci(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var i;return((i=this.view)==null?void 0:i.type)!=="3d"||this.updateOnGraphicClick||((e==null?void 0:e.toggleToolOnClick)??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?(vs(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await xm(Ci(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",SG("view"))}_logMissingLayer(){this._logError(Q3e,SG("layer"))}};u([d()],Nt.prototype,"updating",null),u([d()],Nt.prototype,"_operationHandle",void 0),u([d({readOnly:!0})],Nt.prototype,"activeTool",null),u([d()],Nt.prototype,"activeFillSymbol",void 0),u([d()],Nt.prototype,"activeLineSymbol",void 0),u([d()],Nt.prototype,"activeVertexSymbol",void 0),u([d()],Nt.prototype,"allowDeleteKey",void 0),u([d({readOnly:!0})],Nt.prototype,"createGraphic",null),u([d()],Nt.prototype,"defaultCreateOptions",null),u([d()],Nt.prototype,"defaultUpdateOptions",null),u([d({type:qre,nonNullable:!0})],Nt.prototype,"labelOptions",void 0),u([d()],Nt.prototype,"layer",void 0),u([d({types:Ba})],Nt.prototype,"pointSymbol",void 0),u([d({types:Ba})],Nt.prototype,"polygonSymbol",void 0),u([d({types:Ba})],Nt.prototype,"polylineSymbol",void 0),u([d()],Nt.prototype,"meshSymbol",void 0),u([d({type:D5,nonNullable:!0})],Nt.prototype,"snappingOptions",null),u([d()],Nt.prototype,"_snappingManager",void 0),u([d({readOnly:!0})],Nt.prototype,"state",null),u([d({type:Wre,nonNullable:!0})],Nt.prototype,"tooltipOptions",void 0),u([d({readOnly:!0})],Nt.prototype,"updateGraphics",void 0),u([d()],Nt.prototype,"updateOnGraphicClick",void 0),u([d({types:Ba})],Nt.prototype,"vertexSymbol",void 0),u([d({value:null})],Nt.prototype,"view",null),Nt=u([E("esri.widgets.Sketch.SketchViewModel")],Nt);const Q3e="sketch:missing-property",SG=t=>`Property '${t}' is missing on SketchViewModel.`;function X3e(t){return t==="polygon"||t==="rectangle"||t==="circle"}function Gx(t,e){yne("undo",t.history.undo,t.history.redo,e)}function Hx(t,e){yne("redo",t.history.redo,t.history.undo,e)}function yne(t,e,i,r){const n=e.pop();if(!n)return;const s=n.updates,o=[];r.forEach((a,l)=>{const c=s[l];c!=null&&("geometry"in c&&c.geometry!=null&&(o.push({geometry:a.geometry}),a.geometry=c.geometry),"symbol"in c&&c.symbol!=null&&(o.push({symbol:a.symbol}),a.symbol=c.symbol),"undo"in c&&(o.push(c),c[t](a)))}),i.push({updates:o})}function xu(t){return{updates:t.map(e=>({geometry:e.geometry}))}}function Bi(t){return"requireError"in t&&t.requireError==="aborted"}const eDe=Nt,gne="esri.widgets.Editor.EditorViewModel",vw=U.getLogger(gne),vne=["create","create-features","update"];function $u(t,e,i){vw.error(new C(t,e,i))}function tDe(t,e){return t?t.find(i=>i.layer===e):void 0}let nt=class extends Xr(Vi.EventedAccessor){constructor(e){super(e),this._editableItems=new se,this._sketchGraphicsLayer=new wre({listMode:"hide",internal:!0}),this._updateEditableItemsTask=null,this.activeWorkflow=null,this._activityQueue=[],this.failures=[],this.attachmentsViewModel=new rI({capabilities:{editing:!0}}),this.featureFormViewModel=new Lie,this.featureTemplatesViewModel=new r3,this.sketchViewModel=new eDe({layer:this._sketchGraphicsLayer}),this.spinnerViewModel=new x5,this.pageStack=[],this.showDiscardEditsPrompt=()=>Promise.resolve(!0),this._candidateCommitted=!1,this.useDeprecatedCreateWorkflow=!1,this.back=async()=>{var i;this.canGoBack&&((i=this.activeWorkflow)!=null&&i.hasPreviousStep?await this.activeWorkflow.back(this.showDiscardEditsPrompt):await this._cancelWorkflow({force:!this.hasPendingEdits}))},this.saveWorkflow=async()=>{var n;const{featureFormViewModel:i}=this;if(i.submit(),!i.submittable)return;const r=i.getValues();i.validateContingencyConstraints(r,{includeIncompleteViolations:!0}).length>0||await((n=this.activeWorkflow)==null?void 0:n.save())},this.selectFeature=(i,r=!1)=>{const n=this.activeWorkflow;this._candidateCommitted||(n==null?void 0:n.type)!=="update"||(n.data.rootFeature=i,r&&(n.next(),this._candidateCommitted=!0))}}initialize(){this.addHandles([D(()=>{var n,s,o;const e=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.editableLayers.filter(({parent:a,visible:l})=>a&&"visible"in a?l&&a.visible:l),i=(o=this.view)==null?void 0:o.allLayerViews,r=i==null?void 0:i.filter(a=>!!(e!=null&&e.includes(a.layer))&&!a.suspended);return[e,r,this.layerInfos,this.allowedWorkflows]},()=>this._updateEditableItems(),me),_i(()=>this.activeWorkflow,"cancel",()=>this.emit("workflow-cancel")),_i(()=>this.activeWorkflow,"commit",()=>this.emit("workflow-commit")),_i(()=>this.activeWorkflow,"complete",()=>{this.emit("workflow-commit"),this._set("activeWorkflow",null)}),Ai(()=>{var e;return(e=this.view)==null?void 0:e.map},e=>e.add(this._sketchGraphicsLayer),me),D(()=>this._editableItems.toArray(),()=>{const{activeWorkflow:e}=this;if(this.refreshCreationTemplates(),!e)return;const{stepId:i}=e;e.type!=="create"?e.type==="update"&&(i==="awaiting-feature-to-update"&&!this.canUpdate||i==="awaiting-update-feature-candidate"&&!e.data.candidates.some(r=>{const n=this._editableItems.find(s=>s.layer===r.layer);return n&&n.supports.includes("update")}))&&this._cancelWorkflow():i!=="awaiting-feature-creation-info"||this.canCreate||this._cancelWorkflow()}),D(()=>this.page,(e,i)=>{const r=this.pageStack.slice(),n=r.indexOf(e);n===-1&&i?r.push(i):r.splice(n),this.pageStack=r}),Ai(()=>this.state==="awaiting-update-feature-candidate",()=>this._candidateCommitted=!1),_i(()=>this.featureTemplatesViewModel,"select",async({item:e,oldItem:i})=>{var a;const{activeWorkflow:r}=this,n=!!e&&e.id===(i==null?void 0:i.id),s=(r==null?void 0:r.type)==="create-features"&&((a=r.data.upload)==null?void 0:a.error);if(r)try{await this.cancelWorkflow({force:!this.hasPendingEdits})}catch{return this.featureTemplatesViewModel.select(i,{emit:!1})}if(!e||n&&!s)return;const o={layer:e.layer,template:e.template};if(e.supportsUpload)return this.startCreateFeaturesWorkflow(o);this.useDeprecatedCreateWorkflow?this.startCreateWorkflowAtFeatureCreation(o):this.startCreateFeaturesWorkflowAtFeatureCreation(o)}),_i(()=>this.view,"key-down",e=>{var i;e.key==="Escape"&&((i=this.activeWorkflow)!=null&&i.keyboardCancellationEnabled)&&this.back()})])}destroy(){this._cancelWorkflow().then(()=>{var e;(e=this.view)!=null&&e.map&&this.view.map.remove(this._sketchGraphicsLayer),this.view=null}),this._updateEditableItemsTask=vs(this._updateEditableItemsTask)}get allowedWorkflows(){return this._get("allowedWorkflows")}set allowedWorkflows(e){e&&e.length!==0||(e=[...vne]),this._set("allowedWorkflows",e)}get canCreate(){return this._editableItems.some(e=>e.supports.includes("create"))}get canUpdate(){return this._editableItems.some(({attachmentsOnUpdateEnabled:e,layer:i,supports:r})=>{const n=r.includes("update")||r.includes("delete")||e,s=i.parent,o=!(s&&"visible"in s)||!!s.visible;return i.visible&&o&&n})}get editableItems(){return this._editableItems}get labelOptions(){return this.sketchViewModel.labelOptions}set labelOptions(e){this.sketchViewModel.labelOptions=e}set layerInfos(e){e==null||e.some(i=>("allowAttachments"in i&&ep(vw,"Property: layerInfo.allowAttachments",{replacement:"layerInfo.attachmentsOnCreateEnabled or layerInfo.attachmentsOnUpdateEnabled",version:"4.26"}),!0)),this._set("layerInfos",e)}get snappingOptions(){return this.sketchViewModel.snappingOptions}set snappingOptions(e){this.sketchViewModel.snappingOptions=e}get state(){if(!this.get("view.ready")||this._editableItems.length===0)return"disabled";const e=this.attachmentsViewModel.mode;if(e==="add")return"adding-attachment";if(e==="edit")return"editing-attachment";const{activeWorkflow:i}=this;return i?i.stepId:"ready"}get syncing(){return this._activityQueue.length>0}get updating(){return this.updatingHandles.updating}get tooltipOptions(){return this.sketchViewModel.tooltipOptions}set tooltipOptions(e){this.sketchViewModel.tooltipOptions=e}set view(e){this.sketchViewModel.view=e,this.spinnerViewModel.view=e,this._set("view",e)}get page(){const{activeWorkflow:e,state:i}=this;return i==="awaiting-feature-to-update"||i==="awaiting-feature-to-create"||(e==null?void 0:e.type)==="create-features"&&e.numPendingFeatures===0?"ready":i??"disabled"}get selectedTemplateItem(){var i;const{activeWorkflow:e}=this;if((e==null?void 0:e.type)==="create-features"&&e.numPendingFeatures===0){const r=(i=e.data.creationInfo)==null?void 0:i.template;if(!r)return;for(const n of this.featureTemplatesViewModel.items)if("findByTemplate"in n){const s=n.findByTemplate(r);if(s)return s}else if(n.template===r)return n}}get featureFormDisabled(){var i;const{activeWorkflow:e}=this;return(e==null?void 0:e.type)==="update"&&((i=e.activeEditableItem)==null?void 0:i.attributeUpdatesEnabled)===!1}get canGoBack(){return this.activeWorkflow!=null&&!this.syncing}get shouldShowDeleteButton(){var i;const{activeWorkflow:e}=this;return!!e&&e.type==="update"&&!!((i=e.activeEditableItem)!=null&&i.supports.includes("delete"))}get hasPendingEdits(){var e;return((e=this.activeWorkflow)==null?void 0:e.hasPendingEdits)??!1}async startCreateWorkflowAtFeatureTypeSelection(){if(o0(vw,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),await Ci(()=>!this.updating),!this.canCreate)return void $u("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const e=this._createCreateWorkflow();await e.start(),this._set("activeWorkflow",e)}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.startCreateFeaturesWorkflow()}async startCreateWorkflowAtFeatureCreation(e){if(o0(vw,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),await Ci(()=>!this.updating),!this.canCreate)return void $u("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const i=this._createCreateWorkflow("awaiting-feature-to-create");i.data.creationInfo=e,await i.start(),this._set("activeWorkflow",i)}async startCreateFeaturesWorkflowAtFeatureCreation(e){return this.startCreateFeaturesWorkflow(e,"creating-features")}async startCreateFeaturesWorkflow(e,i="awaiting-feature-creation-info"){if(await Ci(()=>!this.updating),!this.canCreate)throw new C("editing:unsupported-workflow","Creating features is unsupported or disabled.");await this._cancelWorkflow();const r=this._createCreateFeaturesWorkflow(e,i);await r.start(),this._set("activeWorkflow",r)}async startCreateWorkflowAtFeatureEdit(e){if(o0(vw,"startCreateWorkflowAtFeatureEdit"),await Ci(()=>!this.updating),!this.canCreate)return void $u("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const i=this._createCreateWorkflow("editing-new-feature");i.data.edits.feature=e,await i.start(),this._set("activeWorkflow",i)}async startUpdateWorkflowAtFeatureSelection(){if(await Ci(()=>!this.updating),!this.canUpdate)return void $u("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const e=this._createUpdateWorkflow();await e.start(),this._set("activeWorkflow",e)}async startUpdateWorkflowAtMultipleFeatureSelection(e){if(await Ci(()=>!this.updating),!this.canUpdate)return void $u("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const i=this._createUpdateWorkflow("awaiting-update-feature-candidate");i.data.candidates=e,await i.start(),this._set("activeWorkflow",i)}async startUpdateWorkflowAtFeatureEdit(e){if(await Ci(()=>!this.updating),!this.canUpdate)return void $u("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const i=this._createUpdateWorkflow("editing-existing-feature");i.data.rootFeature=e,await i.start(),this._set("activeWorkflow",i)}async deleteFeatureFromWorkflow(){const{activeWorkflow:e}=this;e&&e.type==="update"?await e.deleteActiveFeature():$u("editing:unsupported-workflow","Deleting requires an active update workflow.")}async cancelWorkflow(e){return this._cancelWorkflow({warn:!0,...e})}findEditableItemForLayer(e){const i=e.type==="subtype-sublayer"?e.parent:e;return this._editableItems.find(r=>r.layer===i)}itemHasInvalidFormTemplate(e){var i;return!!e&&(((i=this.findEditableItemForLayer(e.layer))==null?void 0:i.hasInvalidFormTemplate)??!1)}itemHasUnsupportedFields(e){var i;return!!e&&(((i=this.findEditableItemForLayer(e.layer))==null?void 0:i.hasUnsupportedFields)??!1)}refreshCreationTemplates(){const e=[];for(const{layer:i,supports:r}of this._editableItems)i.loaded&&r.includes("create")&&e.push(i);this.featureTemplatesViewModel.layers=e}async toggleUpdateWorkflow(){this.canUpdate&&(this.hasPendingEdits&&!await this.showDiscardEditsPrompt()||(this.activeWorkflow&&this.state==="awaiting-feature-to-update"?await this.cancelWorkflow({force:!0}):await this.startUpdateWorkflowAtFeatureSelection()))}async _updateEditableItems(){vs(this._updateEditableItemsTask);const e=Z1(async i=>{var f,y;const r=(f=this.view)==null?void 0:f.allLayerViews,n=(y=this.view)==null?void 0:y.map,s=(n==null?void 0:n.editableLayers.toArray())??[],o=(n==null?void 0:n.allTables.toArray().filter(tQ))??[];await Promise.all(o.map(g=>g.load()));const a=o.filter(g=>YT(g)),l=[...s.reverse(),...a.reverse()].filter(g=>{var v;return g.geometryType!=="mesh"||((v=this.view)==null?void 0:v.type)==="3d"});if(!r||!s)return;const c=[],h=[];for(const g of l){const v=r.find(w=>w.layer===g),_=v?c:h;if(g.type==="subtype-group"){await g.loadAll(),Tt(i);for(let w=g.sublayers.length-1;w>=0;--w)_.push(this._makeEditableItemForLayer(g.sublayers.at(w),!!(v!=null&&v.suspended)))}else _.push(this._makeEditableItemForLayer(g,!!(v!=null&&v.suspended)))}if(i.aborted)return;const p=this._editableItems;this._editableItems=new se(c.concat(h)),p.destroy()});this.updatingHandles.addPromise(e.promise),this._updateEditableItemsTask=e}async _cancelWorkflow(e){const i=this.activeWorkflow;if(!i)return void(e&&e.warn&&$u("editing:no-active-workflow","There is no active workflow to cancel."));if(!e||e.force!==!1)return this.emit("workflow-cancel"),this._set("activeWorkflow",null),void await i.cancel(e);await i.cancel(e),this._set("activeWorkflow",null)}_createCreateFeaturesWorkflow(e,i){return Lre.create({viewModel:this,creationInfo:e,startAt:i,applyEditsCallback:(r,n,s)=>this._applyEdits(r,n,s),addAttachmentsCallback:(r,n)=>this._addAttachments(r,n)})}_createCreateWorkflow(e){return JFe.create(this,e,(i,r,n)=>this._applyEdits(i,r,n))}_createUpdateWorkflow(e){return t3e.create(this,e,(i,r)=>this._applyEdits(i,r))}_addAttachments(e,i){const r=i.map(n=>this._addAttachment(e,n.feature,n.attachment))??[];return Promise.all(r)}async _addAttachment(e,i,r){let n=null;if(e.type==="geojson"||e.type==="scene"||e.type==="oriented-imagery")throw new C("editor:attachments-not-supported","Adding attachments is not supported for this layer type");return await this._queueOperation(async()=>{var s;return n=await((s=e.addAttachment)==null?void 0:s.call(e,i,r).catch(o=>{throw(o==null?void 0:o.error)||o}))??null,n}),n}async _applyEdits(e,i,r){let n=null;const s=e.url?await yj(e.url):null,o={returnServiceEditsOption:(!s||!jO(s))&&!RegExp("/hosted/","i").test(e.url)?"original-and-current-features":void 0,...r};return await this._queueOperation(async()=>{const a=await y1(this.view,e).catch(()=>null);return n=await e.applyEdits(i,o),a&&await Ci(()=>!a.updating),n}),n}_queueOperation(e){this._activityQueue.push(e),this.notifyChange("syncing");const i=(r,n)=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)};return e().then(r=>{if("error"in r&&r.error)throw r.error;if("addFeatureResults"in r){const{addFeatureResults:n,deleteFeatureResults:s,updateFeatureResults:o}=r,a=n.find(l=>!!l.error)||o.find(l=>!!l.error)||s.find(l=>!!l.error);if(a)throw a.error}return r}).catch(r=>{$u("editing:operation-error","An error occurred.",{error:r});const n={error:r,retry:()=>(i(n,this.failures),this._queueOperation(e)),cancel:()=>{i(n,this.failures)}};this._set("failures",[...this.failures,n])}).then(()=>{i(e,this._activityQueue),this.notifyChange("syncing")})}_makeEditableItemForLayer(e,i=!0){var $,T;const r=hu(e),n=r==null?void 0:r.operations,s=tDe(this.layerInfos,e),o=NIe(e),a=e.fields.some(({type:I})=>AIe.has(I)),l=o||a,{allowedWorkflows:c}=this,h=c.includes("create")||c.includes("create-features"),p=c.includes("update"),f=I=>!s||s.enabled!==!1&&s[I]!==!1,y=h&&!!(n!=null&&n.supportsAdd)&&f("addEnabled"),g=p&&!!(n!=null&&n.supportsUpdate)&&f("updateEnabled"),v=!l&&p&&!!(n!=null&&n.supportsDelete)&&f("deleteEnabled"),_=[];i||(y&&_.push("create"),g&&_.push("update"),v&&_.push("delete"));const w=g&&!l&&(!s||s.attributeUpdatesEnabled!==!1),S=g&&!l&&!!(($=r==null?void 0:r.editing)!=null&&$.supportsGeometryUpdate)&&(!s||s.geometryUpdatesEnabled!==!1),b=!(!((T=r==null?void 0:r.data)!=null&&T.supportsAttachment)||s&&s.allowAttachments===!1);return{layer:e,supports:_,attributeUpdatesEnabled:w,geometryUpdatesEnabled:S,hasAttachments:b,attachmentsOnCreateEnabled:b&&h&&(!s||s.attachmentsOnCreateEnabled!==!1),attachmentsOnUpdateEnabled:!l&&b&&(!s||s.attachmentsOnUpdateEnabled!==!1),hasInvalidFormTemplate:o,hasUnsupportedFields:a}}};u([d()],nt.prototype,"_editableItems",void 0),u([d({readOnly:!0})],nt.prototype,"activeWorkflow",void 0),u([d({readOnly:!0})],nt.prototype,"_activityQueue",void 0),u([d({value:[...vne]})],nt.prototype,"allowedWorkflows",null),u([d({readOnly:!0})],nt.prototype,"canCreate",null),u([d({readOnly:!0})],nt.prototype,"canUpdate",null),u([d()],nt.prototype,"editableItems",null),u([d({readOnly:!0})],nt.prototype,"failures",void 0),u([d()],nt.prototype,"attachmentsViewModel",void 0),u([d()],nt.prototype,"featureFormViewModel",void 0),u([d()],nt.prototype,"featureTemplatesViewModel",void 0),u([d()],nt.prototype,"labelOptions",null),u([d()],nt.prototype,"layerInfos",null),u([d()],nt.prototype,"sketchViewModel",void 0),u([d()],nt.prototype,"snappingOptions",null),u([d()],nt.prototype,"spinnerViewModel",void 0),u([d()],nt.prototype,"state",null),u([d({readOnly:!0})],nt.prototype,"syncing",null),u([d()],nt.prototype,"updating",null),u([d()],nt.prototype,"tooltipOptions",null),u([d()],nt.prototype,"view",null),u([d()],nt.prototype,"pageStack",void 0),u([d()],nt.prototype,"showDiscardEditsPrompt",void 0),u([d()],nt.prototype,"_candidateCommitted",void 0),u([d()],nt.prototype,"page",null),u([d()],nt.prototype,"selectedTemplateItem",null),u([d()],nt.prototype,"featureFormDisabled",null),u([d()],nt.prototype,"canGoBack",null),u([d()],nt.prototype,"shouldShowDeleteButton",null),u([d()],nt.prototype,"hasPendingEdits",null),u([d()],nt.prototype,"useDeprecatedCreateWorkflow",void 0),nt=u([E(gne)],nt);const iDe=nt,_ne={hide:"hide",hideChildren:"hide-children"};function DM(t){if(t)return t.listMode!=null?t.listMode:void 0}function rDe(t){if(t)return t.minScale!=null?t.minScale:void 0}function nDe(t){if(t)return t.maxScale!=null?t.maxScale:void 0}function sDe(t){if(!t)return"inherited";const e=t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const i=t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":t.visibilityMode!=null?t.visibilityMode:"independent"}function wne(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==_ne.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function N5(t){return DM(t)!==_ne.hide}function oDe(t,e){if(!t||isNaN(e))return!1;const i=rDe(t),r=nDe(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,s=r!=null&&!isNaN(r)&&r>0&&e<r;return n||s}function xG(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function aDe(t){const e=lDe(t)?t:null,i=t==null?void 0:t.parent,r=(i==null?void 0:i.type)==="map-image"?e==null?void 0:e.source:null,n="";return r&&i?{layer:i,title:n,sublayerIds:[r.mapLayerId]}:{layer:t,title:n}}function lDe(t){return!!(t!=null&&t.layer)}var v3;let Hd=v3=class extends sv{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new v3({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};u([d()],Hd.prototype,"displayValueEnabled",void 0),u([d()],Hd.prototype,"max",void 0),u([d()],Hd.prototype,"min",void 0),u([d()],Hd.prototype,"step",void 0),u([d()],Hd.prototype,"value",void 0),Hd=v3=u([E("esri.support.Action.ActionSlider")],Hd);const uDe=Hd;function fm(t){return t&&typeof t.render=="function"}function bne(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const Sne="esri-layer-list-panel",o_=`${Sne}__content`,Eu={base:Sne,content:o_,contentLegend:`${o_}--legend`,contentString:`${o_}--string`,contentElement:`${o_}--html-element`,contentWidget:`${o_}--widget`},cDe="legends";let $o=class extends jc(Bt){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(D(()=>this.content,e=>this._createLegend(e),me))}destroy(){this._legend=Ue(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var n;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return x("div",{class:Eu.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r}=this;return!e||r?null:e==="legend"&&i?x("div",{class:this.classes(Eu.content,Eu.contentLegend),key:i},i.render()):typeof e=="string"?x("div",{class:this.classes(Eu.content,Eu.contentString),key:e,innerHTML:e}):fm(e)?x("div",{class:this.classes(Eu.content,Eu.contentWidget),key:e},e.render()):e instanceof HTMLElement?x("div",{class:this.classes(Eu.content,Eu.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:r}=e;return i&&r?{view:r,layerInfos:[aDe(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await O(()=>import("./Legend-00a0ef7d.js"),["assets/Legend-00a0ef7d.js","assets/EffectView-88fc1232.js","assets/ExportImageParameters-a24b65b0.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-6504af6e.js","assets/pixelRangeUtils-cc28ceb4.js","assets/rendererConversion-604183b9.js"]),{listItem:r}=this,n=new i(this._getLegendOptions());this._legend=n,this.notifyChange("className"),this.notifyChange("title");const s=D(()=>{var o,a;return[r==null?void 0:r.view,r==null?void 0:r.layer,(o=r==null?void 0:r.layer)==null?void 0:o.source,(a=r==null?void 0:r.layer)==null?void 0:a.parent]},()=>this._updateLegend(n),me);this.addHandles(s,cDe),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:fm(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(r=>{const n=this._getWidget(r);return n&&(i=n),!!n}),i}return this._getWidget(e)}};u([d()],$o.prototype,"_legend",void 0),u([d()],$o.prototype,"className",null),u([d()],$o.prototype,"content",void 0),u([d()],$o.prototype,"disabled",null),u([d()],$o.prototype,"image",void 0),u([d()],$o.prototype,"listItem",void 0),u([d()],$o.prototype,"title",null),u([d()],$o.prototype,"open",void 0),u([d()],$o.prototype,"visible",void 0),$o=u([E("esri.widgets.LayerList.ListItemPanel")],$o);const xne=$o;var _w;const dDe=se.ofType({key:"type",defaultKeyValue:"button",base:sv,typeMap:{button:ov,toggle:AT,slider:uDe}}),$ne=se.ofType(dDe),qx="layer",sP="child-list-mode",hDe="hide",pDe="esri.widgets.LayerList.ListItem";let jt=_w=class extends jc(Xr(X)){constructor(t){super(t),this.actionsSections=new $ne,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(se.ofType(_w)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([D(()=>this.layer,t=>this._watchLayerProperties(t),me),D(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),me),D(()=>this.view,t=>this._updateChildrenView(t),me),D(()=>this.panel,t=>this._setListItemOnPanel(t),me),D(()=>[this.layer,this.view],()=>this._getLayerView(),me)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){return this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0),t?new xne(t):null}get title(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return!oDe(this.layer,this.get("view.scale"))}get visibilityMode(){return sDe(this.layer)}clone(){return new _w({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.handles.remove(sP),this.children.removeAll(),!t)return;t.forEach(i=>{this.handles.add(D(()=>i.listMode,()=>this._addChildren(t)),sP)});const e=t.filter(i=>DM(i)!==hDe);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),qx)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>N5(e)?new _w({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(Pi).reverse()}_watchLayerProperties(t){if(!this.handles||(this.handles.remove(qx),this.handles.remove(sP),!t))return;if(this.handles.add(D(()=>t.listMode,()=>this._watchLayerProperties(t)),qx),DM(t)==="hide-children")return void this.children.removeAll();const e=wne(t);e&&this.handles.add(D(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},me),qx)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};u([d({type:$ne})],jt.prototype,"actionsSections",void 0),u([d()],jt.prototype,"actionsOpen",void 0),u([d()],jt.prototype,"checkPublishStatusEnabled",void 0),u([d({type:se})],jt.prototype,"children",void 0),u([d()],jt.prototype,"childrenSortable",void 0),u([d({readOnly:!0})],jt.prototype,"connectionStatus",null),u([d({readOnly:!0})],jt.prototype,"error",null),u([d()],jt.prototype,"hidden",void 0),u([d({readOnly:!0})],jt.prototype,"incompatible",null),u([d()],jt.prototype,"layer",void 0),u([d({readOnly:!0})],jt.prototype,"layerView",void 0),u([d()],jt.prototype,"listItemCreatedFunction",void 0),u([d()],jt.prototype,"open",void 0),u([d({type:xne})],jt.prototype,"panel",void 0),u([Re("panel")],jt.prototype,"castPanel",null),u([d()],jt.prototype,"parent",void 0),u([d()],jt.prototype,"sortable",void 0),u([d()],jt.prototype,"title",null),u([d({readOnly:!0})],jt.prototype,"publishing",null),u([d({readOnly:!0})],jt.prototype,"updating",null),u([d()],jt.prototype,"view",void 0),u([d()],jt.prototype,"visible",null),u([d({readOnly:!0})],jt.prototype,"visibleAtCurrentScale",null),u([d({readOnly:!0})],jt.prototype,"visibilityMode",null),jt=_w=u([E(pDe)],jt);const j5=jt,ua={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},fDe="hide",Ene=se.ofType(j5);let qd=class extends Vi.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new Ene,this.view=null}initialize(){this.addHandles([D(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),me),D(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],ua.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,n){var y,g;const s=e==null?void 0:e.layer;if(!s)return;const o=(g=(y=this.view)==null?void 0:y.map)==null?void 0:g.layers,a=i?xG(i):o,l=r?xG(r):o;if(!a||!l)return;const{operationalItems:c}=this,h=(i==null?void 0:i.children)||c,p=(r==null?void 0:r.children)||c,f=l.length-n;e.parent=r||null,h.includes(e)&&h.remove(e),a.includes(s)&&a.remove(s),p.includes(e)||p.add(e,f),l.includes(s)||l.add(s,f)}_createLayerViewHandles(e){this.removeHandles(ua.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),ua.layerViews)}_createMapLayerHandles(e){this.removeHandles(ua.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),ua.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n}=this;return new j5({checkPublishStatusEnabled:n,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>DM(i)!==fDe)}_watchLayersListMode(e){this.removeHandles(ua.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(D(()=>i.listMode,()=>this._compileList()),ua.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const i=this._getViewableLayers(e);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.find(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||r.push(n)}),i.removeMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,n)=>{const s=e.indexOf(r.layer),o=e.indexOf(n.layer);return s>o?-1:s<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([ua.mapLayers,ua.layerViews,ua.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([D(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),me),D(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),me)],ua.viewLayers)}};u([d()],qd.prototype,"checkPublishStatusEnabled",void 0),u([d()],qd.prototype,"listItemCreatedFunction",void 0),u([d({type:Ene})],qd.prototype,"operationalItems",void 0),u([d({readOnly:!0})],qd.prototype,"state",null),u([d()],qd.prototype,"view",void 0),qd=u([E("esri.widgets.LayerList.LayerListViewModel")],qd);const mDe=qd,V5=t=>yDe(t)||gDe(t),yDe=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":return!0;default:return!1}},gDe=t=>{const e=wne(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(V5(i))return!0}return!1};var _3;let Ta=_3=class extends j5{constructor(t){super(t),this.children=new se,this.parent=null}get allChildrenEnabled(){return this.children.every(t=>t.enabled)??!1}get childLayerIds(){return this.children.map(t=>t.layer.id).toArray()}get enabled(){return this.featureSource!=null&&this.featureSource.enabled}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}get hasChildrenEnabled(){return this.children.some(t=>t.enabled)}_initializeChildLayers(t){if(!t)return;const e=t.filter(V5);super._initializeChildLayers(e)}_makeChildren(t){return t.map(e=>N5(e)?new _3({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(Pi).reverse()}};u([d()],Ta.prototype,"allChildrenEnabled",null),u([d()],Ta.prototype,"children",void 0),u([d()],Ta.prototype,"childLayerIds",null),u([d()],Ta.prototype,"enabled",null),u([d()],Ta.prototype,"featureSource",null),u([d({constructOnly:!0})],Ta.prototype,"getFeatureSnappingSources",void 0),u([d()],Ta.prototype,"hasChildrenEnabled",null),u([d()],Ta.prototype,"parent",void 0),Ta=_3=u([E("esri.widgets.support.SnappingControls.SnappingListItem")],Ta);let Sf=class extends mDe{constructor(){super(...arguments),this.featureSnappingSources=new se}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var i;return!((i=e.children)!=null&&i.length)})}_compileList(){const e=this.get("view.map.layers");if(!e)return;const i=e.filter(V5);this._watchLayersListMode(i);const r=this._getViewableLayers(i);r&&r.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createListItem(e){return new Ta({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};u([d()],Sf.prototype,"featureSnappingSources",void 0),u([d()],Sf.prototype,"operationalItems",void 0),u([d()],Sf.prototype,"operationalItemsFlat",null),u([d()],Sf.prototype,"selectableItems",null),Sf=u([E("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Sf);const vDe="esri.widgets.support.SnappingControls.SnappingControlsViewModel";let Vl=class extends Xr(X){constructor(e){super(e),this.layerListViewModel=new Sf,this.snappingOptions=null,this.view=null}initialize(){this.handles.add([D(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:i})=>{e.view=i},me),D(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:i})=>{e.featureSnappingSources=i},me)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>i.enabled)}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>!i.enabled)}get layersEnabledCount(){var e,i;return((i=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:i.filter(r=>r.enabled).length)??0}get state(){return this.get("snappingOptions")?"ready":"disabled"}toggleSnappingForLayers(e,i){e==null||e.forEach(r=>i?this.enableSnappingForLayer(r):this.disableSnappingForLayer(r))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:i}})=>{e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(e){(this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e)).enabled=!0}disableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e);i&&(i.enabled=!1)}updateEnabledFeatureSources(e){for(const i of this.snappingOptions.featureSources)N5(i.layer)&&(i.enabled=e.includes(i.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(i=>i.layer.id===e)}_makeSnappingSourceForLayer(e){var n;const i=(n=this.layerListViewModel.operationalItemsFlat.find(s=>s.layer.id===e))==null?void 0:n.layer;if(!i)throw new C("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);const r=new $5({layer:i});return this.snappingOptions.featureSources.add(r),r}};u([d()],Vl.prototype,"allLayersEnabled",null),u([d()],Vl.prototype,"allLayersDisabled",null),u([d({constructOnly:!0})],Vl.prototype,"layerListViewModel",void 0),u([d()],Vl.prototype,"layersEnabledCount",null),u([d()],Vl.prototype,"snappingOptions",void 0),u([d()],Vl.prototype,"state",null),u([d()],Vl.prototype,"view",void 0),Vl=u([E(vDe)],Vl);const _De=Vl,$G={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0,layerListToggleLayersButton:!0},ho="esri-snapping-controls",Yn={base:ho,container:`${ho}__container`,panel:`${ho}__panel`,item:`${ho}__item`,toggleBlock:`${ho}__toggle-block`,layerListBlock:`${ho}__layer-list-block`,layerList:`${ho}__layer-list`,layerListFilter:`${ho}__layer-list__filter`,layerListButton:`${ho}__layer-list__button`,layerListItem:`${ho}__layer-list__item`,layerListGroup:`${ho}__layer-list__group`,nestedContainer:`${ho}__nested-container`,disabled:"esri-disabled",esriWidget:"esri-widget",widgetIcon:"esri-icon-vertex-gps"},a_={checked:"check-square-f",unchecked:"square",indeterminate:"minus-square"};let Ln=class extends Bt{constructor(e,i){super((()=>{const{view:r,viewModel:n,snappingOptions:s,...o}=e;return o})(),i),this._defaultViewModel=null,this._layerListFilter=null,this.iconClass=Yn.widgetIcon,this.icon=null,this.layerListOpen=!0,this.messages=null,this.visibleElements={...$G},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),requestAnimationFrame(()=>r.target.setFocus())},e!=null&&e.viewModel?this.viewModel=e.viewModel:(this._defaultViewModel=new _De({snappingOptions:e.snappingOptions,view:e.view}),this.viewModel=this._defaultViewModel)}destroy(){this._defaultViewModel=Ue(this._defaultViewModel)}loadDependencies(){return ml({accordion:()=>O(()=>import("./calcite-accordion-a8e740cd.js"),["assets/calcite-accordion-a8e740cd.js","assets/observers-d8508c63.js"]),"accordion-item":()=>O(()=>import("./calcite-accordion-item-d4caab25.js"),["assets/calcite-accordion-item-d4caab25.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/icon-001847d5.js"]),action:()=>O(()=>import("./calcite-action-f987d5e3.js"),["assets/calcite-action-f987d5e3.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/interactive-c63d961a.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/icon-001847d5.js","assets/loader-6e51c251.js"]),block:()=>O(()=>import("./calcite-block-859c61f0.js"),["assets/calcite-block-859c61f0.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/interactive-c63d961a.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/focusTrapComponent-67860a68.js","assets/loadable-2a2d3905.js","assets/openCloseComponent-ad0ec359.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/action-menu-f113beb5.js","assets/popover-26a7b513.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/FloatingArrow-3cfbf1c2.js","assets/handle-db6dd90b.js","assets/scrim-6c563638.js"]),button:()=>O(()=>import("./calcite-button-ed004c4c.js"),["assets/calcite-button-ed004c4c.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js"]),icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"]),input:()=>O(()=>import("./calcite-input-d3660bcd.js"),["assets/calcite-input-d3660bcd.js","assets/input-137231d2.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/key-bcbe3efc.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/observers-d8508c63.js","assets/icon-001847d5.js","assets/progress-a78ebc6f.js"]),label:()=>O(()=>import("./calcite-label-7763627c.js"),["assets/calcite-label-7763627c.js","assets/label2-5308b85f.js"]),list:()=>O(()=>import("./calcite-list-fa432183.js"),["assets/calcite-list-fa432183.js","assets/interactive-c63d961a.js","assets/observers-d8508c63.js","assets/utils3-72f50212.js","assets/loadable-2a2d3905.js","assets/filter2-77b3a64c.js","assets/debounce-fe65f68f.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/icon-001847d5.js","assets/input-137231d2.js","assets/form-5cdb3d6c.js","assets/label2-5308b85f.js","assets/progress-a78ebc6f.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js","assets/scrim-6c563638.js"]),"list-item":()=>O(()=>import("./calcite-list-item-941d6637.js"),["assets/calcite-list-item-941d6637.js","assets/interactive-c63d961a.js","assets/utils3-72f50212.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/handle-db6dd90b.js"]),panel:()=>O(()=>import("./calcite-panel-b4d30cec.js"),["assets/calcite-panel-b4d30cec.js","assets/panel-7f56d54a.js","assets/interactive-c63d961a.js","assets/loadable-2a2d3905.js","assets/observers-d8508c63.js","assets/action-menu-f113beb5.js","assets/guid-0d265cb2.js","assets/key-bcbe3efc.js","assets/action-7e59ed9f.js","assets/t9n-58647fac.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/popover-26a7b513.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/focusTrapComponent-67860a68.js","assets/openCloseComponent-ad0ec359.js","assets/FloatingArrow-3cfbf1c2.js","assets/scrim-6c563638.js"]),switch:()=>O(()=>import("./calcite-switch-5055a31e.js"),["assets/calcite-switch-5055a31e.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/key-bcbe3efc.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js"])})}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=Ue(this._defaultViewModel)),this._set("viewModel",e))}castVisibleElements(e){return{...$G,...e}}render(){const{label:e,visibleElements:{header:i}}=this;return x("div",{"aria-label":e,class:this.classes(Yn.base,Yn.esriWidget)},x("div",{class:Yn.container},i?this._renderHeaderView():this._renderContent()))}_renderHeaderView(){return x("calcite-panel",{heading:this.label,class:Yn.panel},this._renderContent())}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){const{visibleElements:{enabledToggle:e,selfEnabledToggle:i,featureEnabledToggle:r}}=this;return e||i||r?x("calcite-block",{class:Yn.toggleBlock,key:"toggle-block",heading:"",open:!0},this._renderEnabledToggle(),x("div",{class:Yn.nestedContainer},this._renderSelfEnabledToggle(),this._renderFeatureEnabledToggle())):null}_renderEnabledToggle(){if(!this.visibleElements.enabledToggle)return null;const{messages:{enableSnapping:e},viewModel:{snappingOptions:{enabled:i,enabledToggled:r}}}=this;return x("calcite-label",{layout:"inline-space-between"},e,x("calcite-switch",{checked:i,disabled:r,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}_renderSelfEnabledToggle(){if(!this.visibleElements.selfEnabledToggle)return null;const{messages:{geometryGuides:e},viewModel:{snappingOptions:{enabled:i,selfEnabled:r,enabledToggled:n}}}=this;return x("calcite-label",{layout:"inline-space-between",key:"self-enabled-toggle"},e,x("calcite-switch",{checked:r,disabled:n||!i,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}_renderFeatureEnabledToggle(){if(!this.visibleElements.featureEnabledToggle)return null;const{messages:{featureToFeature:e},viewModel:{snappingOptions:{enabled:i,featureEnabled:r,enabledToggled:n}}}=this;return x("calcite-label",{layout:"inline-space-between",key:"feature-enabled-toggle"},e,x("calcite-switch",{checked:r,disabled:n||!i,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:i}=this,{snappingOptions:{enabled:r,enabledToggled:n}}=i,s=({target:{value:c}})=>this._layerListFilter=c===""?null:new RegExp(c,"i"),o=i.layerListViewModel.operationalItems.length>9?x("calcite-input",{class:Yn.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:s}):null,a=n||!r,l=this.layerListOpen&&!a;return x("calcite-block",{key:"list-block",heading:e.snappingLayers,disabled:a,class:Yn.layerListBlock,collapsible:!0,open:l,onCalciteBlockToggle:c=>this.layerListOpen=c.target.open},o,this._renderToggleLayersButton(),x("calcite-list",{class:Yn.layerList},this._renderLayerListItemCollection(i.layerListViewModel.operationalItems,this._layerListFilter)))}_renderLayerListItemCollection(e,i){return e.map(r=>{if(!i||this._itemTitleMatchesFilter(r,i))return r.children.length>0?this._renderLayerListItemGroup(r):this._renderLayerListItem(r);const n=r.children.filter(s=>this._itemTitleMatchesFilter(s,i));return n.length>0?this._renderLayerListItemGroup(r,n):null}).toArray().filter(Pi)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:i}=this,r=e?i.disableAllLayers:i.enableAllLayers;return x("calcite-button",{appearance:"transparent",class:Yn.layerListButton,label:r,name:"layer-toggle",scale:"m",onclick:this._onToggleLayersButtonClick},r)}_renderLayerListItem(e){const{messages:{untitledLayer:i}}=this,r=e.title||i,n=e.enabled,s=()=>{this._handleLayerListItemChange({checked:!n,value:e.layer.id})};return x("calcite-list-item",{class:Yn.layerListItem,label:r,key:`${this.id}-list-item-${e.uid}`,onCalciteListItemSelect:s},x("calcite-icon",{icon:n?a_.checked:a_.unchecked,slot:"content-start",scale:"s"}))}_renderLayerListItemGroup(e,i){const{allChildrenEnabled:r,children:n,hasChildrenEnabled:s,title:o}=e,a=this.messages,l=o||a.untitledLayer,c=o&&o!==""?o:Wg(),h=!!i,p=i??n,f=r?a_.checked:s?a_.indeterminate:a_.unchecked,y=r?a.disableAllLayers:a.enableAllLayers,g=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,!r)};return x("calcite-list-item",{class:Yn.layerListItem,key:c},x("calcite-accordion",{class:Yn.layerListGroup,appearance:"transparent"},x("calcite-accordion-item",{expanded:h,heading:l,key:e.uid},x("calcite-action",{scale:"m",slot:"actions-start",text:y,textEnabled:!1,onclick:g},x("calcite-icon",{icon:f,scale:"s"})),x("calcite-list",null,[...this._renderLayerListItemCollection(p)]))))}_enableSnappingSwitchChange(e){this.snappingOptions.enabled=e.target.checked}_featureEnabledSwitchChange(e){this.snappingOptions.featureEnabled=e.target.checked}_itemTitleMatchesFilter(e,i){return i!=null&&i.test(e.title)}_selfEnabledSwitchChange(e){this.snappingOptions.selfEnabled=e.target.checked}async _handleLayerListItemChange(e){e.checked?this.viewModel.enableSnappingForLayer(e.value):this.viewModel.disableSnappingForLayer(e.value)}};u([d()],Ln.prototype,"_defaultViewModel",void 0),u([d()],Ln.prototype,"_layerListFilter",void 0),u([d()],Ln.prototype,"iconClass",void 0),u([d()],Ln.prototype,"icon",void 0),u([d()],Ln.prototype,"label",null),u([d()],Ln.prototype,"layerListOpen",void 0),u([d(),rt("esri/widgets/support/SnappingControls/t9n/SnappingControls")],Ln.prototype,"messages",void 0),u([d()],Ln.prototype,"snappingOptions",null),u([d()],Ln.prototype,"view",null),u([d()],Ln.prototype,"viewModel",null),u([d()],Ln.prototype,"visibleElements",void 0),u([Re("visibleElements")],Ln.prototype,"castVisibleElements",null),Ln=u([E("esri.widgets.support.SnappingControls")],Ln);const wDe=Ln,EG={base:"esri-sketch-tooltip-controls",esriWidget:"esri-widget",widgetIcon:"esri-icon-gear"};let Qu=class extends Bt{constructor(e){super(e),this.viewModel=null,this.iconClass=EG.widgetIcon,this.icon=null,this._onEnabledChange=i=>{const r=i.target;this.tooltipOptions.enabled=r.checked}}loadDependencies(){return ml({block:()=>O(()=>import("./calcite-block-859c61f0.js"),["assets/calcite-block-859c61f0.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/interactive-c63d961a.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/focusTrapComponent-67860a68.js","assets/loadable-2a2d3905.js","assets/openCloseComponent-ad0ec359.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/action-menu-f113beb5.js","assets/popover-26a7b513.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/FloatingArrow-3cfbf1c2.js","assets/handle-db6dd90b.js","assets/scrim-6c563638.js"]),label:()=>O(()=>import("./calcite-label-7763627c.js"),["assets/calcite-label-7763627c.js","assets/label2-5308b85f.js"]),switch:()=>O(()=>import("./calcite-switch-5055a31e.js"),["assets/calcite-switch-5055a31e.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/key-bcbe3efc.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js"])})}render(){var e;return x("div",{class:EG.base},x("calcite-block",{heading:"",open:!0},x("calcite-label",{layout:"inline-space-between"},(e=this.messages)==null?void 0:e.enabledToggle,x("calcite-switch",{checked:this.tooltipOptions.enabled,onCalciteSwitchChange:this._onEnabledChange}))))}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}};u([d()],Qu.prototype,"viewModel",void 0),u([d()],Qu.prototype,"iconClass",void 0),u([d()],Qu.prototype,"icon",void 0),u([d()],Qu.prototype,"label",null),u([d(),rt("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Qu.prototype,"messages",void 0),u([d()],Qu.prototype,"tooltipOptions",void 0),Qu=u([E("esri.widgets.Editor.components.SketchTooltipControls")],Qu);const To="esri-editor",hy=`${To}__panel`,py=`${To}__prompt`,Xe={base:`${To} esri-widget esri-widget--panel`,actions:`${To}__actions`,helpMessage:`${To}__help-message`,panelToolbar:`${hy}-toolbar`,panelContent:`${hy}-content`,panelContentMessage:`${hy}-content__message`,panelContentSection:`${hy}-content__section`,panelContentSectionGroup:`${hy}-content__section__group`,panelContentScrimContainer:`${hy}-content__scrim-container`,settingsContainer:`${To}__settings`,featureTemplatesContainer:`${To}__feature-templates-container`,notice:`${To}__notice`,templateItemContentEnd:`${To}__template-item-content-end`,templateItemContentEndSuccess:`${To}__template-item-content-end--success`,templateItemContentEndError:`${To}__template-item-content-end--error`,templateItemLoader:`${To}__template-item-loader`,promptContainer:py,promptHeader:`${py}__header`,promptHeading:`${py}__header__heading`,promptMessage:`${py}__message`,promptDivider:`${py}__divider`,promptActions:`${py}__actions`,widgetIcon:"esri-icon-edit"},oP={undoRedoButtons:!1,snappingControls:!0,snappingControlsElements:{header:!1,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0},sketchTooltipControls:!0};function bDe(t){requestAnimationFrame(()=>t.setFocus())}const Wx="exclamation-mark-triangle",Mne="esri.widgets.Editor",aP=U.getLogger(Mne);let st=class extends Xr(Bt){constructor(e,i){super(e,i),this._featureForm=new uLe,this._attachments=new Tee({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),this._featureTemplates=new aFe({enableListScroll:!1,renderItemContentEnd:r=>this._renderTemplateContentEnd(r),renderItemDescription:r=>this._renderTemplateDescription(r),renderItemLabel:r=>this._renderTemplateLabel(r),renderCustomGroupContent:r=>this._renderCustomTemplateGroupContent(r)}),this._filterText="",this._prompt=null,this._spinner=new _re,this.headingLevel=4,this.iconClass=Xe.widgetIcon,this.messages=null,this.messagesCommon=null,this.messagesTemplates=null,this.supportingWidgetDefaults=null,this.viewModel=new iDe,this.visibleElements={...oP},this._renderSelectIcon=()=>x("calcite-icon",{icon:"cursor",slot:"content-start"}),this.EditorPanel=({handleBack:r,heading:n,headingLevel:s,key:o},...a)=>{const{messagesCommon:l,viewModel:c,visibleElements:h}=this,p=c.sketchViewModel,f=c.syncing||this._attachments.submitting;return x("calcite-flow-item",{closable:!1,heading:n,headingLevel:s,key:o,loading:f,onCalciteFlowItemBack:r??void 0},x("div",{key:"panel-toolbar",class:Xe.panelToolbar},this._renderSettings(),h.undoRedoButtons&&[x("calcite-button",{key:"undo-button",label:l.undo,appearance:"transparent",kind:"neutral",alignment:"center",iconStart:"undo",scale:"l",disabled:!p.canUndo(),onclick:p.undo.bind(p)},l.undo),x("calcite-button",{key:"redo-button",label:l.redo,appearance:"transparent",kind:"neutral",alignment:"center",iconStart:"redo",scale:"l",disabled:!p.canRedo(),onclick:p.redo.bind(p)},l.redo)]),...a)},this._showDiscardEditsPrompt=()=>{const{messages:r,activeWorkflow:n}=this;if((n==null?void 0:n.type)==="create-features"&&AM(n.data.creationInfo))return this._showPrompt({title:r.cancelUploadTitle,message:r.cancelUploadWarningMessage,yesLabel:r.discardUpload,noLabel:r.continueUpload});const s=(n==null?void 0:n.type)==="create";return this._showPrompt({title:r[s?"cancelAddTitle":"cancelEditTitle"],message:r[s?"cancelAddWarningMessage":"cancelEditWarningMessage"],yesLabel:r[s?"discardFeature":"discardEdits"],noLabel:r[s?"continueAdding":"continueEditing"]})},this._showGenericCancelPrompt=()=>{const{messages:r,messagesCommon:n}=this;return this._showPrompt({title:r.cancelRequestTitle,message:r.cancelRequestWarningMessage,yesLabel:n.form.yes,noLabel:n.form.no})},this._onToggleUpdateWorkflow=()=>this.viewModel.toggleUpdateWorkflow(),this._onAttachmentDeleteConfirm=async()=>{const r=this._attachments,{activeWorkflow:n}=this.viewModel;n&&(n.type==="create-features"?r.deleteFile():(await r.deleteAttachment(r.viewModel.activeAttachmentInfo),this._clearPrompt()),await n.back(),this._clearPrompt())},this._onAttachmentsError=r=>{this._prompt={title:this.messages.errorWarningTitle,message:r.message,context:"warning",actions:{primary:{label:this.messagesCommon.form.ok,action:this._clearPrompt}}}},this._clearPrompt=()=>{this._prompt=null},this._onBack=this._onBack.bind(this),this._onSave=this._onSave.bind(this),this._onDelete=this._onDelete.bind(this),this._onToggleUpdateWorkflow=this._onToggleUpdateWorkflow.bind(this),this._onAttachmentAdd=this._onAttachmentAdd.bind(this),this._onAttachmentUpdate=this._onAttachmentUpdate.bind(this),this._onAttachmentDelete=this._onAttachmentDelete.bind(this)}initialize(){this.addHandles([D(()=>fw(this.headingLevel),e=>{this._featureForm.headingLevel=e,this._featureTemplates.headingLevel=e},me),D(()=>this.viewModel.selectedTemplateItem,e=>this._featureTemplates.select(e,{emit:!1})),_i(()=>this.viewModel.activeWorkflow,"cancel-request",({controller:e})=>{(this.viewModel.hasPendingEdits?this._showDiscardEditsPrompt():this._showGenericCancelPrompt()).then(i=>i?e.allow():e.deny())}),D(()=>this.viewModel,e=>{this._featureForm.viewModel=(e==null?void 0:e.featureFormViewModel)??null,this._attachments.viewModel=(e==null?void 0:e.attachmentsViewModel)??null,this._featureTemplates.viewModel=(e==null?void 0:e.featureTemplatesViewModel)??null,this._spinner.viewModel=(e==null?void 0:e.spinnerViewModel)??null,e.showDiscardEditsPrompt=this._showDiscardEditsPrompt},me),D(()=>this.view,(e,i)=>{const r=`editor-${this.id}-spinner`;i==null||i.ui.remove(this._spinner,r),e==null||e.ui.add(this._spinner,{key:r,position:"manual"})},me),Ai(()=>this.supportingWidgetDefaults,e=>{this._featureForm.set(e.featureForm),this._attachments.set(e.attachments),this._featureTemplates.set(e.featureTemplates),this.viewModel.sketchViewModel.set(e.sketch)},me),Ai(()=>{var e;return(e=this._attachments)==null?void 0:e.error},e=>this._onAttachmentsError(e)),Ai(()=>{var e;return(e=this.viewModel)==null?void 0:e.failures},e=>{const{messages:i}=this,[{error:r,retry:n,cancel:s}]=e;this._prompt={title:i.errorWarningTitle,message:er(i.errorWarningMessageTemplate,{errorMessage:r.message}),context:"warning",actions:{primary:{label:i.retry,action:()=>{n(),this._clearPrompt()}},secondary:{label:i.ignore,action:()=>{s(),this._clearPrompt()}}}}}),D(()=>{var e;return(e=this.viewModel)==null?void 0:e.state},e=>{switch(e){case"awaiting-feature-to-update":case"ready":case"disabled":this._filterText="",this._featureTemplates.filterText=""}}),D(()=>this.viewModel.featureFormDisabled,e=>this._featureForm.disabled=e)])}destroy(){this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy()}loadDependencies(){return ml({accordion:()=>O(()=>import("./calcite-accordion-a8e740cd.js"),["assets/calcite-accordion-a8e740cd.js","assets/observers-d8508c63.js"]),"accordion-item":()=>O(()=>import("./calcite-accordion-item-d4caab25.js"),["assets/calcite-accordion-item-d4caab25.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/icon-001847d5.js"]),button:()=>O(()=>import("./calcite-button-ed004c4c.js"),["assets/calcite-button-ed004c4c.js","assets/form-5cdb3d6c.js","assets/interactive-c63d961a.js","assets/label2-5308b85f.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js"]),"flow-item":()=>O(()=>import("./calcite-flow-item-8d910728.js"),["assets/calcite-flow-item-8d910728.js","assets/interactive-c63d961a.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/panel-7f56d54a.js","assets/action-menu-f113beb5.js","assets/guid-0d265cb2.js","assets/action-7e59ed9f.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/popover-26a7b513.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/focusTrapComponent-67860a68.js","assets/openCloseComponent-ad0ec359.js","assets/FloatingArrow-3cfbf1c2.js","assets/scrim-6c563638.js"]),flow:()=>O(()=>import("./calcite-flow-5373e5c7.js"),["assets/calcite-flow-5373e5c7.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js"]),icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"]),list:()=>O(()=>import("./calcite-list-fa432183.js"),["assets/calcite-list-fa432183.js","assets/interactive-c63d961a.js","assets/observers-d8508c63.js","assets/utils3-72f50212.js","assets/loadable-2a2d3905.js","assets/filter2-77b3a64c.js","assets/debounce-fe65f68f.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/icon-001847d5.js","assets/input-137231d2.js","assets/form-5cdb3d6c.js","assets/label2-5308b85f.js","assets/progress-a78ebc6f.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js","assets/scrim-6c563638.js"]),loader:()=>O(()=>import("./calcite-loader-420257c5.js"),["assets/calcite-loader-420257c5.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js"]),notice:()=>O(()=>import("./calcite-notice-e9826fd0.js"),["assets/calcite-notice-e9826fd0.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/openCloseComponent-ad0ec359.js","assets/icon-001847d5.js"]),scrim:()=>O(()=>import("./calcite-scrim-317d14a1.js"),["assets/calcite-scrim-317d14a1.js","assets/scrim-6c563638.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js"])})}get _deleteButtonCommonInfo(){return{appearance:"outline",kind:"danger",type:"primary"}}get activeWorkflow(){return this.viewModel.activeWorkflow}get allowedWorkflows(){return this.viewModel.allowedWorkflows}set allowedWorkflows(e){this.viewModel.allowedWorkflows=e}get useDeprecatedCreateWorkflow(){return this.viewModel.useDeprecatedCreateWorkflow}set useDeprecatedCreateWorkflow(e){this.viewModel.useDeprecatedCreateWorkflow=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...oP,...e,snappingControlsElements:{...oP.snappingControlsElements,...e==null?void 0:e.snappingControlsElements}}}startCreateWorkflowAtFeatureTypeSelection(){return o0(aP,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),this.viewModel.startCreateWorkflowAtFeatureTypeSelection()}startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()}startCreateWorkflowAtFeatureCreation(e){return o0(aP,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),this.viewModel.startCreateWorkflowAtFeatureCreation(e)}startCreateFeaturesWorkflowAtFeatureCreation(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(e)}startCreateWorkflowAtFeatureEdit(e){return o0(aP,"startCreateWorkflowAtFeatureEdit"),this.viewModel.startCreateWorkflowAtFeatureEdit(e)}startUpdateWorkflowAtFeatureSelection(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}startUpdateWorkflowAtMultipleFeatureSelection(e){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e)}startUpdateWorkflowAtFeatureEdit(e){return this.viewModel.startUpdateWorkflowAtFeatureEdit(e)}deleteFeatureFromWorkflow(){return this.viewModel.deleteFeatureFromWorkflow()}cancelWorkflow(e){return this.viewModel.cancelWorkflow(e)}render(){const{viewModel:e}=this;if(!e)return x("div",{key:"empty",class:Xe.base});const{state:i}=e;return x("div",{key:"base",class:Xe.base},x("calcite-flow",{key:"flow"},e.pageStack.map(r=>this._renderPage(r,i)),this._renderPage(e.page,i)),this._renderPrompt())}_renderPage(e,i){switch(e){case"disabled":break;case"ready":return this._renderLanding(i);case"awaiting-feature-creation-info":return this._renderTemplates(i);case"creating-features":case"editing-new-feature":case"editing-existing-feature":return this._renderAttributeEditing(i);case"awaiting-update-feature-candidate":return this._renderFeatureList(i);case"adding-attachment":return this._renderAttachmentAdding(i);case"editing-attachment":return this._renderAttachmentEditing(i)}return x("div",null)}_renderTemplates(e){const{EditorPanel:i,headingLevel:r,messages:n,_onBack:s}=this;return x(i,{active:this._isPanelActive(e),key:"templates-panel",handleBack:s,heading:n.selectTemplate,headingLevel:r},x("div",{key:"feature-templates",class:Xe.panelContent},this._featureTemplates.render()))}_renderAttributeEditing(e){const{activeWorkflow:i,EditorPanel:r,messages:n,messagesCommon:s,headingLevel:o,_onBack:a,viewModel:l}=this;if(!i)return null;const c=i.type,h="activeWorkflow"in i&&i.activeWorkflow,p=h?h.type:null,f=l.featureFormViewModel,y=h&&!h.hasPendingEdits||c==="update"&&!i.hasPendingEdits||l.syncing||f.updating,g=c==="update"?n.editFeature:n.createFeatures,v=c==="update"&&p!=="create-features"?s.update:s.create,_=c==="create-features"&&i.createFeatureState==="create-new",w=c==="create-features"?i.numPendingFeatures:0,S=w>1?er(n.createFeaturesTemplate,{numFeatures:w}):v,b=i.shouldShowAttachments&&!l.featureFormViewModel.activeRelationshipInput,$=f.inputs.every(T=>!T.visible)&&!b?this._renderMessage(er(n.clickToFinishTemplate,{button:v})):x("div",{key:"panel-content-section",class:Xe.panelContentSection},this._renderNotices(i),x("div",{class:Xe.panelContentSectionGroup},this._featureForm.render(),b&&x("div",{key:"attachments"},x(Uo,{level:fw(o)},n.attachments),this._attachments.render())));return x(r,{active:this._isPanelActive(e),key:"attribute-editing-panel",heading:g,headingLevel:o,handleBack:a},x("div",{key:"panel-content",class:this.classes(Xe.panelContent,{[Xe.panelContentScrimContainer]:_})},$,_&&x("calcite-scrim",null)),this._renderFooterActions([{clickHandler:this._onSave,disabled:y,label:S,type:"primary"},l.shouldShowDeleteButton?{...this._deleteButtonCommonInfo,clickHandler:this._onDelete,disabled:l.syncing,label:s.delete}:null]))}_renderNotices(e){return[this._renderOwnerAdminNotice(e),this._renderInvalidFormTemplateNotice(e),this._renderInvalidDateFieldNotice(e)]}_renderOwnerAdminNotice(e){return(e==null?void 0:e.reliesOnOwnerAdminPrivileges)&&this._renderNotice(this.messages.ownerAdminNotice)}_renderInvalidFormTemplateNotice(e){return(e==null?void 0:e.hasInvalidFormTemplate)&&this._renderNotice(this.messages.formFieldUpdateError,{icon:Wx})}_renderInvalidDateFieldNotice(e){return(e==null?void 0:e.hasUnsupportedFields)&&this._renderNotice(this.messages.formFieldUnsupportedUpdateError,{icon:Wx})}_renderNotice(e,i){return x("calcite-notice",{open:!0,scale:"s",class:Xe.notice,...i},x("div",{slot:"message"},e))}_renderCustomTemplateGroupContent(e){const{messages:i,viewModel:r}=this;let n=null;return e.group.items.some(s=>(r.itemHasUnsupportedFields(s)?n=i.formFieldUnsupportedCreateError:r.itemHasInvalidFormTemplate(s)&&(n=i.formFieldCreateError),n)),n?this._renderNotice(n,{icon:Wx}):null}_renderAttachmentAdding(e){const{_attachments:i,EditorPanel:r,_onBack:n,headingLevel:s,messages:o,messagesCommon:a}=this;return x(r,{active:this._isPanelActive(e),key:"attachment-adding-panel",heading:o.addAttachment,headingLevel:s,handleBack:n},x("div",{key:"attachments",class:Xe.panelContent},i.render()),this._renderFooterActions([{label:i.submitting?a.cancel:a.add,disabled:i.submitting||!i.selectedFile,type:"primary",clickHandler:this._onAttachmentAdd}]))}_renderAttachmentEditing(e){const{_attachments:i,EditorPanel:r,_onBack:n,activeWorkflow:s,headingLevel:o,messages:a,messagesCommon:l}=this;return s?x(r,{active:this._isPanelActive(e),key:"attachment-editing-panel",heading:a.editAttachment,headingLevel:o,handleBack:n},x("div",{key:"attachments",class:Xe.panelContent},i.render()),s.shouldAllowAttachmentEditing?this._renderFooterActions([{label:l.update,disabled:i.submitting||!i.selectedFile,type:"primary",clickHandler:this._onAttachmentUpdate},{...this._deleteButtonCommonInfo,clickHandler:this._onAttachmentDelete,disabled:i.submitting,label:l.delete}]):void 0):null}_renderMessage(e){return x("div",{key:"panel-content-message",class:Xe.panelContentMessage},e)}_renderFooterActions(e){return x("div",{key:"footer-actions",slot:"footer",class:Xe.actions},e.filter(Pi).map(({type:i,disabled:r,class:n,clickHandler:s,label:o,...a},l)=>x("calcite-button",{key:`action-${l}`,slot:"footer-actions",class:n,disabled:r??!1,onclick:s,width:"full",...a},o)))}_renderPrompt(){const e=this._prompt;if(!e)return null;const{title:i,message:r,context:n,actions:s}=e,o=s.secondary;let a;switch(n){case"danger":a="danger";break;case"info":a="brand";break;default:a="neutral"}const l=x("calcite-button",{afterCreate:bDe,appearance:"solid",key:"prompt-primary-button",kind:a,onclick:s.primary.action,scale:"m",width:o?"half":"full"},s.primary.label),c=o&&x("calcite-button",{appearance:"outline",key:"prompt-secondary-button",kind:a,onclick:o.action,scale:"m",width:"half"},o.label);return x("calcite-scrim",{key:"prompt"},x("div",{class:`${Xe.promptContainer}--${n}`},x("div",{class:Xe.promptHeader},x("calcite-icon",{icon:Wx}),x(Uo,{class:Xe.promptHeading,level:this.headingLevel},i)),x("div",{class:Xe.promptMessage},r),x("div",{class:Xe.promptDivider}),x("div",{class:Xe.promptActions},c,l)))}_renderLanding(e){const{EditorPanel:i,headingLevel:r,messages:n,viewModel:s}=this,{canUpdate:o}=s,a=this._featureTemplates.viewModel.numberOfFeatureTemplates,l=!o&&a===0;return x(i,{active:this._isPanelActive(e),key:"landing-panel",heading:n.widgetLabel,headingLevel:r},x("div",{key:"landing-content",class:Xe.panelContent},o&&x("div",{key:"edit-actions",class:Xe.panelContentSection},this._renderUpdateActions(e)),a>0&&x("div",{key:"create-actions",class:Xe.panelContentSection},this._renderCreateActions()),l&&x("div",{key:"no-content",class:Xe.panelContentMessage},n.noEditableLayers)),this._renderFooterHelpMessages())}_renderFooterHelpMessages(){var o;const{activeWorkflow:e,messages:i,view:r}=this,n=e==null?void 0:e.helpMessage,s=n?(o=i[(r==null?void 0:r.type)==="3d"?"helpMessages3d":"helpMessages2d"])==null?void 0:o[n]:null;return s?x("div",{key:"footer-actions",slot:"footer",class:Xe.helpMessage},s):null}_renderUpdateActions(e){const{messages:i,messagesCommon:r}=this,n={id:"select",label:r.select};return x("div",{key:"update-actions"},x(Uo,{level:fw(this.headingLevel)},i.editFeatures),x("calcite-list",{selectionMode:"single",selectionAppearance:"border"},S5({grouped:!1,item:n,selectedItem:e==="awaiting-feature-to-update"?n:void 0,renderIcon:this._renderSelectIcon,onItemSelect:this._onToggleUpdateWorkflow})))}_renderCreateActions(){const{_featureTemplates:e,headingLevel:i,messages:r}=this;return x("div",{key:"create-actions"},x(Uo,{level:fw(i)},r.createFeatures),x("div",{key:"templates",class:Xe.featureTemplatesContainer},e.render()))}_renderTemplateLabel(e){return e.label}_renderTemplateDescription(e){const i=this._getUploadForTemplateItem(e);if(!i)return null;const{messages:r}=this;switch(i.state){case"pending":return r==null?void 0:r.uploadPending;case"error":return r==null?void 0:r.uploadError;default:return null}}_renderTemplateContentEnd(e){const i=this._getUploadForTemplateItem(e),r=x("calcite-icon",{key:"upload-icon",class:Xe.templateItemContentEnd,icon:"upload-to"});if(!i)return e.supportsUpload?r:null;switch(i.state){case"success":return x("calcite-icon",{key:"success-icon",class:this.classes(Xe.templateItemContentEnd,Xe.templateItemContentEndSuccess),icon:"check"});case"error":return x("calcite-icon",{key:"error-icon",class:this.classes(Xe.templateItemContentEnd,Xe.templateItemContentEndError),icon:"exclamation-mark-circle-f"});case"pending":return x("calcite-loader",{class:Xe.templateItemLoader,inline:!0,key:"loader",label:"",scale:"s",type:"indeterminate"});case"canceled":case"default":return r}}_getUploadForTemplateItem(e){const i=this.activeWorkflow;if((i==null?void 0:i.type)!=="create-features")return null;const{data:r}=i,{creationInfo:n,upload:s}=r;return(n==null?void 0:n.template)===e.template&&(n==null?void 0:n.layer)===e.layer?s:null}_renderFeatureList(e){const{EditorPanel:i,_onBack:r,headingLevel:n,messages:s,messagesTemplates:o,viewModel:{activeWorkflow:a,editableItems:l}}=this;if((a==null?void 0:a.type)!=="update")return null;const c=a.data.candidates,h=er(s.multipleFeaturesTemplate,{total:c.length}),p=new Map;let f=0;c.map(v=>({label:this._getLabel(v),id:v.attributes[v.layer.objectIdField],data:v})).filter(v=>{const{label:_,data:w}=v,S=this._filterText.toLowerCase(),{title:b}=w.layer,$=l.find(A=>A.layer===w.layer);if(!$)return null;const{attachmentsOnUpdateEnabled:T,supports:I}=$;return(I.includes("update")||I.includes("delete")||T)&&(!S||(_==null?void 0:_.toLowerCase().includes(S))||(b==null?void 0:b.toLowerCase().includes(S)))}).filter(Pi).forEach(v=>{var w;f++;const _=v.data.layer;p.has(_)?(w=p.get(_))==null||w.items.push(v):p.set(_,{id:`${_.id}`,label:_.title??"",items:[v]})});const y=l.toArray().map(({layer:v})=>p.get(v)).filter(Pi),g=f>10||this._filterText.length>0;return x(i,{active:this._isPanelActive(e),key:"feature-list",heading:h,headingLevel:n,handleBack:r},x("div",{key:"feature-list",class:Xe.panelContent},x("div",{class:Xe.panelContentSection},yre({enableListScroll:!1,filterEnabled:g,filterText:this._filterText,id:this.id,items:y,messages:{filterPlaceholder:o.filterPlaceholder,noItems:o.noItems,noMatches:o.noMatches},onFilterChange:v=>this._filterText=v,onItemMouseEnter:v=>this.viewModel.selectFeature(v.data),onItemMouseLeave:()=>this.viewModel.selectFeature(null),onItemSelect:v=>this.viewModel.selectFeature(v.data,!0)}))))}_isPanelActive(e){return this.viewModel.state===e}_renderSettings(){var n;const e=this.visibleElements,i=e.snappingControls,r=e.sketchTooltipControls;return i||r?x("calcite-accordion",{key:"settings",class:Xe.settingsContainer,appearance:"transparent"},x("calcite-accordion-item",{heading:(n=this.messagesCommon)==null?void 0:n.settings,iconStart:"gear"},r&&x(Qu,{tooltipOptions:this.tooltipOptions}),i&&x(wDe,{snappingOptions:this.snappingOptions,view:this.view,visibleElements:e.snappingControlsElements,afterCreate:s=>s.layerListOpen=!1}))):null}_getLabel(e){const i=e.layer;if(!i)return null;const r=i.fieldsIndex.get(i.objectIdField),n=r.alias||r.name,{attributes:s}=e,o=lN(i);return o&&s[o]&&`${s[o]}`||`${n}: ${s[r.name]}`}_showPrompt({title:e,message:i,yesLabel:r,noLabel:n}){const s=bs(),{view:o}=this,a=o==null?void 0:o.focused;return this._prompt={title:e,message:i,context:"danger",actions:{primary:{label:r,action:()=>s.resolve(!0)},secondary:{label:n,action:()=>s.resolve(!1)}}},s.promise.finally(()=>{this._clearPrompt(),a&&(o==null||o.focus())})}_onSave(){this.viewModel.saveWorkflow()}_onDelete(){const{messages:e,messagesCommon:i}=this;this._prompt={title:e.deleteWarningTitle,message:e.deleteWarningMessage,context:"danger",actions:{primary:{label:i.delete,action:()=>{this.deleteFeatureFromWorkflow(),this._clearPrompt()}},secondary:{label:e.keepFeature,action:this._clearPrompt}}}}async _onBack(e){return e==null||e.stopPropagation(),this.viewModel.back()}_onAttachmentAdd(){const{activeWorkflow:e}=this.viewModel;e&&(e.type==="create-features"?(this._attachments.addFile(),e.back()):this._attachments.addAttachment().then(()=>e.back()))}_onAttachmentUpdate(){const{activeWorkflow:e}=this.viewModel;e&&(e.type==="create-features"?(this._attachments.updateFile(),e.back()):this._attachments.updateAttachment().then(()=>e.back()))}_onAttachmentDelete(){const{messages:e,messagesCommon:i}=this;this._prompt={title:e.deleteAttachmentWarningTitle,message:e.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:i.delete,action:this._onAttachmentDeleteConfirm},secondary:{label:e.keepAttachment,action:this._clearPrompt}}}}};u([d()],st.prototype,"_featureForm",void 0),u([d()],st.prototype,"_attachments",void 0),u([d()],st.prototype,"_featureTemplates",void 0),u([d()],st.prototype,"_filterText",void 0),u([d()],st.prototype,"_prompt",void 0),u([d()],st.prototype,"_spinner",void 0),u([d()],st.prototype,"_deleteButtonCommonInfo",null),u([d({readOnly:!0})],st.prototype,"activeWorkflow",null),u([d()],st.prototype,"allowedWorkflows",null),u([d()],st.prototype,"useDeprecatedCreateWorkflow",null),u([d()],st.prototype,"headingLevel",void 0),u([d()],st.prototype,"iconClass",void 0),u([d()],st.prototype,"label",null),u([d()],st.prototype,"labelOptions",null),u([d()],st.prototype,"layerInfos",null),u([d(),rt("esri/widgets/Editor/t9n/Editor")],st.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],st.prototype,"messagesCommon",void 0),u([d(),rt("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],st.prototype,"messagesTemplates",void 0),u([d()],st.prototype,"snappingOptions",null),u([d()],st.prototype,"tooltipOptions",null),u([d()],st.prototype,"supportingWidgetDefaults",void 0),u([d()],st.prototype,"view",null),u([d(),wv(["workflow-cancel","workflow-commit"])],st.prototype,"viewModel",void 0),u([d()],st.prototype,"visibleElements",void 0),u([Re("visibleElements")],st.prototype,"castVisibleElements",null),u([At()],st.prototype,"_onSave",null),u([At()],st.prototype,"_onDelete",null),u([At()],st.prototype,"_onBack",null),u([At()],st.prototype,"_onAttachmentAdd",null),u([At()],st.prototype,"_onAttachmentUpdate",null),u([At()],st.prototype,"_onAttachmentDelete",null),st=u([E(Mne)],st);const SDe=st;function xDe(){const t=new Jh({url:"https://nezlamnist.gov.ua/img/bs_icon.svg",width:"40px",height:"40px"}),e=new Jh({url:"https://nezlamnist.gov.ua/img/pn_icon.svg",width:"40px",height:"40px"}),i=new dp({title:"{typeOfPoint}",content:[{type:"fields",fieldInfos:[{fieldName:"typeOfPoint",label:"Тип"},{fieldName:"radius",label:"Радіус обслуговування"},{fieldName:"region",label:"Регіон"},{fieldName:"city",label:"Місто"},{fieldName:"street",label:"Вулиця"}]}]}),r=new dI({legendOptions:{title:"Route type"},defaultSymbol:t,defaultLabel:"Other",field:"typeOfPoint",uniqueValueInfos:[{value:"goverment",symbol:t,label:"Interstate"},{value:"business",symbol:e,label:"US Highway"}]});return new cS({url:"https://services1.arcgis.com/J4KEg3K5KfnHwu4N/arcgis/rest/services/dddd/FeatureServer/0",renderer:r,title:"Пункт незламності",popupTemplate:i})}async function $De(t,e){const i=t.createQuery();i.where=`OBJECTID = ${e}`,i.outFields=["radius"];const r=await t.queryFeatures(i);if(r.features.length>0){const{radius:n}=r.features[0].attributes;return n}return null}function EDe(t,e,i){return t.on("click",async r=>{const n={include:e,outFields:["*"]};t.graphics.removeAll();const s=await t.hitTest(r,n);if(s.results.length&&"graphic"in s.results[0]){const{geometry:o,attributes:a,layer:l}=s.results[0].graphic;if("OBJECTID"in a){const c=await $De(l,a.OBJECTID)??0,h=new Gre({center:o,geodesic:!0,numberOfPoints:100,radius:c,radiusUnit:"meters"}),p=new Qo({color:[226,119,40,.2],outline:{color:[0,0,0,1],width:1}}),f=new fi({geometry:h,symbol:p});i.filter=new h1({geometry:h,spatialRelationship:"intersects"}),t.graphics.add(f)}}else i.filter=new h1})}function MDe(){return new cS({url:"https://services1.arcgis.com/J4KEg3K5KfnHwu4N/arcgis/rest/services/areas/FeatureServer/0",title:"Область проживання"})}let Xu=class extends iS(Vi.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){var i;if(!this.get("view.ready"))throw new C("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await((i=this.view)==null?void 0:i.when()),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};u([d()],Xu.prototype,"_goingHomeController",void 0),u([d({readOnly:!0})],Xu.prototype,"state",null),u([d()],Xu.prototype,"view",null),u([d({type:Qa})],Xu.prototype,"viewpoint",null),u([d()],Xu.prototype,"go",null),u([d()],Xu.prototype,"cancelGo",null),Xu=u([E("esri.widgets.Home.HomeViewModel")],Xu);const Tne=Xu,fy={base:"esri-home esri-widget--button esri-widget",esriIcon:"esri-icon",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let os=class extends Bt{constructor(e,i){super(e,i),this.iconClass=fy.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.uiStrings=void 0,this.viewModel=new Tne}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(e){this.viewModel.viewpoint=e}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var s;const e=(s=this.viewModel)==null?void 0:s.state,{messagesCommon:i,messages:r}=this,n={[fy.disabled]:e==="disabled"};return x("div",{bind:this,class:this.classes(fy.base,n),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":r.widgetLabel,title:e==="going-home"?i.cancel:r.title},this.renderIcon())}renderIcon(){var r;const e=(r=this.viewModel)==null?void 0:r.state,i={[fy.esriIcon]:!0,[fy.loadingIcon]:e==="going-home",[fy.rotatingIcon]:e==="going-home"};return this.iconClass!=null&&(i[this.iconClass]=e!=="going-home"),x("span",{"aria-hidden":"true",class:this.classes(i)})}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}};u([d()],os.prototype,"goToOverride",null),u([d()],os.prototype,"iconClass",void 0),u([d()],os.prototype,"icon",void 0),u([d()],os.prototype,"label",null),u([d(),rt("esri/widgets/Home/t9n/Home")],os.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],os.prototype,"messagesCommon",void 0),u([d()],os.prototype,"uiStrings",void 0),u([d()],os.prototype,"view",null),u([d({type:Tne}),wv("go")],os.prototype,"viewModel",void 0),u([d()],os.prototype,"viewpoint",null),u([At()],os.prototype,"_go",null),os=u([E("esri.widgets.Home")],os);const TDe=os,ti="esri-search",ge={base:`${ti} esri-widget`,loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:`${ti}--multiple-sources`,isLoading:`${ti}--loading`,isSearching:`${ti}--searching`,showSuggestions:`${ti}--show-suggestions`,showSources:`${ti}--sources`,showWarning:`${ti}--warning`,container:`${ti}__container`,input:`${ti}__input`,inputContainer:`${ti}__input-container`,form:`${ti}__form`,submitButton:`${ti}__submit-button`,sourcesButton:`${ti}__sources-button`,clearButton:`${ti}__clear-button`,sourceName:`${ti}__source-name`,suggestionsMenu:`${ti}__suggestions-menu`,suggestionList:`${ti}__suggestions-list`,suggestionListCurrentLocation:`${ti}__suggestions-list--current-location`,sourcesMenu:`${ti}__sources-menu`,source:`${ti}__source`,warningMenu:`${ti}__warning-menu`,warningMenuBody:`${ti}__warning-body`,warningMenuHeader:`${ti}__warning-header`,warningMenuText:`${ti}__warning-text`,noValueText:`${ti}__no-value-text`,esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},Ip="esri-search-result-renderer",Mu={base:`${Ip} esri-widget`,anchor:"esri-widget__anchor",showMoreResults:`${Ip}__more-results--show-more-results`,moreResults:`${Ip}__more-results`,moreResultsList:`${Ip}__more-results-list`,moreResultsHeader:`${Ip}__more-results-header`,moreResultsItem:`${Ip}__more-results-item`,moreResultsListHeader:`${Ip}__more-results-list-header`};let Li=class extends jc(G){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};u([d()],Li.prototype,"autoNavigate",void 0),u([d()],Li.prototype,"filter",void 0),u([d()],Li.prototype,"getResults",void 0),u([d()],Li.prototype,"getSuggestions",void 0),u([d()],Li.prototype,"maxResults",void 0),u([d()],Li.prototype,"maxSuggestions",void 0),u([d()],Li.prototype,"minSuggestCharacters",void 0),u([d()],Li.prototype,"outFields",void 0),u([d()],Li.prototype,"placeholder",void 0),u([d()],Li.prototype,"popupEnabled",void 0),u([d()],Li.prototype,"popupTemplate",void 0),u([d()],Li.prototype,"prefix",void 0),u([d()],Li.prototype,"resultGraphicEnabled",void 0),u([d()],Li.prototype,"resultSymbol",void 0),u([d()],Li.prototype,"suggestionsEnabled",void 0),u([d()],Li.prototype,"suffix",void 0),u([d()],Li.prototype,"withinViewEnabled",void 0),u([d()],Li.prototype,"zoomScale",void 0),Li=u([E("esri.widgets.Search.SearchSource")],Li);const z5=Li,Ine=96;function ZWe(t,e){const i=e||t.extent,r=t.width,n=Ss(i&&i.spatialReference);return i&&r?i.width/r*n*uW*Ine:0}function IDe(t,e){return t/(Ss(e)*uW*Ine)}function kDe(t,e){const i=t.extent,r=t.width-(t.padding?t.padding.left+t.padding.right:0),n=IDe(e,i.spatialReference);return i.clone().expand(n*r/i.width)}const MG=U.getLogger("esri.widgets.Search.support.geometryUtils");function CDe(t,e){var r,n;if(!e)return MG.error("missing-parameter: view is missing."),Promise.reject(new C("searchgeometryutils:missing-parameter","view is missing."));if(!t)return MG.error("missing-parameter: point is missing."),Promise.reject(new C("searchgeometryutils:missing-parameter","point is missing."));if(t.hasZ||e.type==="2d")return Promise.resolve(t);const i=(r=e==null?void 0:e.map)==null?void 0:r.ground;return i&&i.layers.length?i.queryElevation(t,{cache:(n=e.basemapTerrain)==null?void 0:n.elevationQueryCache}).then(s=>s.geometry):Promise.resolve(t)}function TG(t){if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":return t.getPoint(0);case"polyline":return t.getPoint(0,0)}return null}function U5(t,e,i){return t==null?null:t.type==="extent"?t:t.type==="multipoint"||t.type==="polygon"||t.type==="polyline"?t.extent:t.type==="point"?kne(t,e,i):void 0}function w3(t,e,i){return t==null||e==null?null:kne(t.center,e,i)}function kne(t,e,i){const r=t.hasZ?t.z:void 0;return e!=null&&e.map?(i!=null?kDe(e,i):e.extent).clone().centerAt(t).set({zmax:r,zmin:r}):new lt({xmin:t.x-.25,ymin:t.y-.25,xmax:t.x+.25,ymax:t.y+.25,spatialReference:t.spatialReference,zmin:r,zmax:r})}const PDe=/https?:\/\/services.*\.arcgis\.com/i,ADe=/(?:\{([^}]+)\})/g,l0=U.getLogger("esri.widgets.Search.support.layerSearchUtils");function ODe(t,e){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:s,source:o,sourceIndex:a,suggestResult:l,view:c}=t,{layer:h,filter:p,zoomScale:f}=o,y=c==null?void 0:c.scale,g=Cne(o,c),v=e&&e.signal;return Ane(h).then(()=>{const _=h.popupTemplate;return _?_.getRequiredFields(h.fieldsIndex):null}).then(_=>{var H,J,ue,re;const{objectIdField:w,returnZ:S}=h,b=Nne(o);if(!B5(h,b))throw l0.error("invalid-field: displayField is invalid."),new C("getResults():invalid-field","displayField is invalid.");const $=_&&_.length?_:[b],T=o.outFields||$,I=Pne(T);if(T.includes(w)||I||T.push(w),(H=h.floorInfo)!=null&&H.floorField&&T.push(h.floorInfo.floorField),!(I||NM(h,T)))throw l0.error("invalid-field: outField is invalid."),new C("getResults():invalid-field","outField is invalid.");const A=h.createQuery(),{orderByFields:L}=o;if(L&&(A.orderByFields=L),s){A.outSpatialReference=s;const pe=1/Ss(s);pe&&(A.maxAllowableOffset=pe)}const z=h.geometryType==="mesh"||h.geometryType==="multipatch",j=((ue=(J=h.capabilities)==null?void 0:J.data)==null?void 0:ue.supportsZ)&&!z;if(A.returnZ=j&&S!==!1,A.returnGeometry=!0,A.multipatchOption=z?"xyFootprint":null,T&&(A.outFields=T),r)A.geometry=r;else if(l.key)A.objectIds=[l.key];else{const pe=o.searchFields||[b];if(!NM(h,pe))throw l0.error("invalid-field: search field is invalid."),new C("getResults():invalid-field","search field is invalid.");if(Dne(h)&&(A.num=n),g&&(A.geometry=g),!((re=l.text)==null?void 0:re.trim()))return[];const we=l.text,{prefix:q="",suffix:le=""}=o,Ee=jne(`${q}${we}${le}`);Fne(h)&&Lne(h,pe)&&!i&&we&&(A.fullText=Rne({text:we,searchFields:pe}));const ft=Vne({searchTerm:Ee,layer:h,searchFields:pe,filter:p,exactMatch:i,query:A,type:"search"});if(A.where=ft,!One(A))return[]}return h.queryFeatures(A,{signal:v}).then(pe=>HDe(pe,c,o,a,b,y,f))})}function LDe(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:l}=t,{layer:c,filter:h}=i,p=e&&e.signal,f=Cne(i,n);return Ane(c).then(()=>{if(!Dne(c))return[];const y=Nne(i),g=i.searchFields||[y],v=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(ADe,(j,H)=>(v.push(H),j)):v.push(y);const _=Pne(v);v.includes(c.objectIdField)||_||v.push(c.objectIdField);const w=B5(c,y),S=_||NM(c,v),b=NM(c,g);if(!w)throw l0.error("invalid-field: displayField is invalid."),new C("getSuggestions():invalid-field","displayField is invalid.");if(!S)throw l0.error("invalid-field: outField is invalid."),new C("getSuggestions():invalid-field","outField is invalid.");if(!b)throw l0.error("invalid-field: search field is invalid."),new C("getSuggestions():invalid-field","search field is invalid.");const $=c.createQuery(),{orderByFields:T}=i;if(T&&($.orderByFields=T),$.outSpatialReference=r,$.returnGeometry=!1,$.num=o,$.outFields=v,f&&($.geometry=f),!s.trim())return[];const{prefix:I="",suffix:A=""}=i,L=jne(`${I}${s}${A}`);Fne(c)&&Lne(c,g)&&!l&&s&&($.fullText=Rne({text:s,searchFields:g}));const z=Vne({searchTerm:L,layer:c,searchFields:g,filter:h,exactMatch:l,query:$,type:"suggest"});return $.where=z,One($)?c.queryFeatures($,{signal:p}).then(j=>BDe(j,i,a,y)):[]})}function Cne(t,e){const{filter:i,withinViewEnabled:r}=t,n=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(r&&n?n:void 0)}function Pne(t){return t&&t.includes("*")}async function Ane(t){t&&await t.load()}function One(t){return!(!t.fullText&&!t.where)}function Lne(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(r=>r.indexType==="FullText").some(r=>{var s;const n=((s=r.fields)==null?void 0:s.split(",").map(o=>o.trim().toLowerCase()))||[];return e.every(o=>n.includes(o.toLowerCase()))})}function Rne({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new eie({onFields:e,searchTerm:i,searchType:"prefix"}))}function Fne(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function Dne(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function RDe(t){var e,i,r;return((r=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(n=>n.type==="string"))==null?void 0:r.name)??""}function Nne(t){return t.displayField||t.layer.displayField||RDe(t.layer)}function NM(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>B5(t,i))}function B5(t,e){return!!t.getField(e)}function FDe(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function DDe(t,e,i){let r=null;const{codedValues:n}=t;return n&&n.some(s=>{const o=s.name,a=i?o:o.toLowerCase();return(i?e:e.toLowerCase())===a&&(r=s.code.toString(),!0)}),r}function jne(t){return t.replaceAll("'","''")}function l_(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function NDe({currentTerm:t,field:e,filter:i,exactMatch:r,url:n,type:s}){const o=e==null?void 0:e.type,a=e==null?void 0:e.name;if(o==="string"||o==="date"||o==="global-id"){const l=PDe.test(n??""),c=l&&FDe(t)?"N":"";return l_(r&&s==="search"?`${a} = ${c}'${t}'`:l?`${a} LIKE ${c}${`'${t}%'`}`:`${`LOWER(${a})`} LIKE ${c}${`'${t.toLowerCase()}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(t);return isNaN(l)?null:l_(`${a} = ${l}`,i)}return l_(`${a} = ${t}`,i)}function jDe(t,e){return t?` OR (${e})`:`(${e})`}function Vne({searchTerm:t,layer:e,searchFields:i,filter:r,exactMatch:n,query:s,type:o}){const{definitionExpression:a,url:l}=e;let c="";return!s.fullText&&t&&i&&i.forEach(h=>{const p=e.getField(h),f=typeof e.getFieldDomain=="function"&&e.getFieldDomain(h),y=(f&&f.type==="coded-value"?DDe(f,t,n):null)||t||null;if(y!==null){const g=NDe({currentTerm:y,field:p,filter:r,exactMatch:n,url:l,type:o});g&&(c+=jDe(c,g))}}),a&&c?`(${a}) AND (${c})`:a||c}function VDe(t,e){let i=null;const{codedValues:r}=t;return r&&r.length&&r.some(n=>n.code===e&&(i=n.name,!0)),i}function zDe(t,e){return t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function zne(t,e,i){const r=t.sourceLayer,{attributes:n}=t,s=typeof r.getFieldDomain=="function"&&r.getFieldDomain(i);if(e)return er(e,n);if(i&&n){const o=r.getField(i),a=zDe(n,i);return a==null?"":s&&s.type==="coded-value"?VDe(s,a)??"":(o==null?void 0:o.type)==="date"?io(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function UDe(t,e,i,r){const n=t.sourceLayer,{attributes:s}=t,{objectIdField:o}=n,a=o?s[o]:null;return{text:zne(t,e.suggestionTemplate,r),key:a,sourceIndex:i}}function BDe(t,e,i,r){return t.features.map(n=>UDe(n,e,i,r))}function GDe(t,e,i,r,n,s,o){const a=t.clone(),l=t.sourceLayer,c=l==null?void 0:l.objectIdField,h=c?t.attributes[c]:null,p=zne(t,i.searchTemplate,n),f=U5(a.geometry,e,s),y=typeof o=="number"?w3(F(f),e,o):f,g=t.clone();return y!=null&&(g.geometry=Un.fromExtent(y)),{extent:y,target:g,feature:a,key:h,name:p,sourceIndex:r}}function HDe(t,e,i,r,n,s,o){return t.features.map(a=>GDe(a,e,i,r,n,s,o))}var b3;let Ia=b3=class extends z5{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>ODe({source:this,...e},i),this.getSuggestions=(e,i)=>LDe({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new b3({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?F(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?F(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find(i=>i.type==="string"))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const r=t.getField(i);return r&&r.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};u([d({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Ia.prototype,"displayField",void 0),u([d({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Ia.prototype,"exactMatch",void 0),u([d({value:null})],Ia.prototype,"layer",null),u([d()],Ia.prototype,"name",null),u([d({type:[String],json:{write:!0}})],Ia.prototype,"orderByFields",void 0),u([d()],Ia.prototype,"searchFields",void 0),u([d()],Ia.prototype,"searchTemplate",void 0),u([d()],Ia.prototype,"suggestionTemplate",void 0),Ia=b3=u([E("esri.widgets.Search.LayerSearchSource")],Ia);const ig=Ia;function II(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function xv(t){return typeof t=="string"?_r(t):F(t)}function kI(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){r[n]=[];for(let o=0;o<s.length;o++)r[n][o]=kI(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i&&i[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function qDe(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function WDe(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let Wd=class extends G{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};u([d({type:String,json:{write:!0}})],Wd.prototype,"address",void 0),u([d({type:Object,json:{write:!0}})],Wd.prototype,"attributes",void 0),u([d({type:lt,json:{write:!0}})],Wd.prototype,"extent",void 0),u([d({type:ce,json:{write:!0}})],Wd.prototype,"location",void 0),u([d({type:Number,json:{write:!0}})],Wd.prototype,"score",void 0),Wd=u([E("esri.rest.support.AddressCandidate")],Wd);const Une=Wd,G5={type:String,json:{read:{source:"token"},write:{target:"token"}}};let zr=class extends G{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};u([d({type:Object,json:{write:!0}})],zr.prototype,"address",void 0),u([d(G5)],zr.prototype,"apiKey",void 0),u([d({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],zr.prototype,"categories",void 0),u([d({type:String,json:{write:!0}})],zr.prototype,"countryCode",void 0),u([d({type:Boolean,json:{write:!0}})],zr.prototype,"forStorage",void 0),u([d({type:ce,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],zr.prototype,"location",void 0),u([d({type:String,json:{write:!0}})],zr.prototype,"locationType",void 0),u([d({type:String,json:{write:!0}})],zr.prototype,"magicKey",void 0),u([d({type:Number,json:{write:!0}})],zr.prototype,"maxLocations",void 0),u([d({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],zr.prototype,"outFields",void 0),u([d({type:_e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],zr.prototype,"outSpatialReference",void 0),u([d({type:lt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],zr.prototype,"searchExtent",void 0),zr=u([E("esri.rest.support.AddressToLocationsParameters")],zr),zr.from=Xt(zr);const Bne=zr;async function ZDe(t,e,i){e=Bne.from(e);const r=xv(t),{address:n,...s}=e.toJSON(),o={...n,...s,f:"json"},a=kI({...r.query,...o}),l=II(a,i),c=`${r.path}/findAddressCandidates`;return tt(c,l).then(YDe)}function YDe({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(r=>{if(!r)return;const{extent:n,location:s}=r,o=!n||WDe(n);return qDe(s)&&o?(n&&(n.spatialReference=i),s&&(s.spatialReference=i),Une.fromJSON(r)):void 0}):[]}let ec=class extends G{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};u([d(G5)],ec.prototype,"apiKey",void 0),u([d({type:ce,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,r=i!==void 0;e.location=r?i:null}}}})],ec.prototype,"location",void 0),u([d({type:String,json:{write:!0}})],ec.prototype,"locationType",void 0),u([d({type:_e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ec.prototype,"outSpatialReference",void 0),ec=u([E("esri.rest.support.LocationToAddressParameters")],ec),ec.from=Xt(ec);const Gne=ec;async function Hne(t,e,i){e=Gne.from(e);const r=xv(t),n={...e.toJSON(),f:"json"},s=kI({...r.query,...n}),o=II(s,i),a=`${r.path}/reverseGeocode`;return tt(a,o).then(JDe)}function JDe({data:t}){if(!t)return;const{address:e,location:i}=t,r=e&&e.Match_addr||"";return Une.fromJSON({address:r,attributes:e||{},location:i,score:100})}let rg=class extends G{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};u([d({type:Boolean,json:{write:!0}})],rg.prototype,"isCollection",void 0),u([d({type:String,json:{write:!0}})],rg.prototype,"magicKey",void 0),u([d({type:String,json:{write:!0}})],rg.prototype,"text",void 0),rg=u([E("esri.rest.support.SuggestionCandidate")],rg);const KDe=rg;let Os=class extends G{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};u([d(G5)],Os.prototype,"apiKey",void 0),u([d({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],Os.prototype,"categories",void 0),u([d({type:String,json:{write:!0}})],Os.prototype,"countryCode",void 0),u([d({type:ce,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],Os.prototype,"location",void 0),u([d({type:Number,json:{write:!0}})],Os.prototype,"maxSuggestions",void 0),u([d({type:_e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Os.prototype,"outSpatialReference",void 0),u([d({type:lt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],Os.prototype,"searchExtent",void 0),u([d({type:String,json:{write:!0}})],Os.prototype,"text",void 0),Os=u([E("esri.rest.support.SuggestLocationsParameters")],Os),Os.from=Xt(Os);const qne=Os;async function QDe(t,e,i){const r=xv(t),n={...(e=qne.from(e)).toJSON(),f:"json"},s=kI({...r.query,...n}),o=II(s,i),a=`${r.path}/suggest`;return tt(a,o).then(XDe)}function XDe(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(r=>new KDe(r)):[]}const eNe="Single Line Input",tNe=3e5;function iNe(t,e){return t.location?aNe(t,e):lNe(t,e)}function Wne(t,e){var r;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=tNe?(r=t==null?void 0:t.extent)==null?void 0:r.center:null}async function rNe(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=t,l=new qne,{apiKey:c,url:h}=i,p=Zne(i,n),f=e&&e.signal;if(!h)return null;c&&(l.apiKey=c),i.categories&&(l.categories=i.categories),r&&(l.outSpatialReference=r);const y=Wne(n,i);if(y&&(l.location=y),!s.trim())return null;const{prefix:g="",suffix:v=""}=i,_=`${g}${s}${v}`;return l.text=_,p&&(l.searchExtent=p),l.maxSuggestions=o,i.countryCode&&(l.countryCode=i.countryCode),QDe(h,l,{signal:f}).then(w=>cNe(w,a))}function nNe(t){return!!t&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function sNe(t){return!!t&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function IG(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const oNe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function aNe(t,e){const{source:i,spatialReference:r,location:n,sourceIndex:s,view:o}=t,{apiKey:a,url:l,zoomScale:c,defaultZoomScale:h}=i;if(l==null)return[];const p=o==null?void 0:o.scale,f=e==null?void 0:e.signal,y=new Gne;y.location=n,a&&(y.apiKey=a),r&&(y.outSpatialReference=r);try{return Yne([await Hne(l,y,{signal:f})],{sourceIndex:s,scale:p,view:o,zoomScale:c,defaultZoomScale:h})}catch{return[]}}function Zne(t,e){const{filter:i,withinViewEnabled:r}=t,n=e&&e.scale,s=e&&e.extent,o=i&&i.geometry;return U5(o,e,n)||(r&&s?s:void 0)}async function lNe(t,e){var A;const{source:i,suggestResult:r,spatialReference:n,view:s,maxResults:o,sourceIndex:a}=t,l=i&&i.zoomScale,c=i&&i.defaultZoomScale;if(!((A=r.text)==null?void 0:A.trim()))return null;const p=!r.key&&i.prefix?i.prefix:"",f=!r.key&&i.suffix?i.suffix:"",y=`${p}${r.text}${f}`,g=new Bne,{apiKey:v,url:_}=i,w=s&&s.scale,S=Zne(i,s),b=e&&e.signal;if(v&&(g.apiKey=v),!_)return null;i.categories&&(g.categories=i.categories),i.locationType&&(g.locationType=i.locationType),n&&(g.outSpatialReference=n);const $=Wne(s,i);$&&(g.location=$),g.maxLocations=o,S&&(g.searchExtent=S),i.countryCode&&(g.countryCode=i.countryCode);const{key:T}=r,I=`${T}`;return T&&(g.magicKey=I),g.address={},g.address[i.singleLineFieldName||eNe]=y,i.outFields&&(g.outFields=i.outFields),ZDe(_,g,{signal:b}).then(L=>Yne(L,{key:I,scale:w,sourceIndex:a,view:s,zoomScale:l,defaultZoomScale:c}))}function uNe(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function cNe(t,e){return t.map(i=>uNe(i,e))}function dNe(t,e){const{key:i,scale:r,sourceIndex:n,view:s,zoomScale:o,defaultZoomScale:a}=e,{attributes:l,extent:c,location:h,address:p}=t,f=new fi({geometry:h,attributes:l}),y=c||h,g=U5(y,s,r),v=typeof o=="number"?w3(g,s,o):typeof a=="number"&&(y==null?void 0:y.type)==="point"?w3(g,s,a):g,_=h?`${h.x},${h.y}`:"",w=p||_,S=f.clone();return v!=null&&(S.geometry=Un.fromExtent(v)),{extent:v,feature:f,target:S,key:i,name:w,sourceIndex:n}}function Yne(t,e){return t.filter(Boolean).map(i=>dNe(i,e))}var S3;const hNe="esri.widgets.Search.LocatorSearchSource";let fn=S3=class extends z5{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>iNe({source:this,...e},i),this.getSuggestions=(e,i)=>rNe({source:this,...e},i)}clone(){return new S3({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?F(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?F(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};u([d()],fn.prototype,"apiKey",void 0),u([d()],fn.prototype,"categories",void 0),u([d()],fn.prototype,"countryCode",void 0),u([d({json:{write:!0}})],fn.prototype,"defaultZoomScale",void 0),u([d()],fn.prototype,"localSearchDisabled",void 0),u([d()],fn.prototype,"locationType",void 0),u([d({json:{write:!0}})],fn.prototype,"name",void 0),u([d({json:{write:!0}})],fn.prototype,"placeholder",void 0),u([d()],fn.prototype,"searchTemplate",void 0),u([d({json:{write:!0}})],fn.prototype,"singleLineFieldName",void 0),u([d({json:{read:{source:"suggest"},write:{target:"suggest"}}})],fn.prototype,"suggestionsEnabled",void 0),u([d({json:{write:!0}})],fn.prototype,"url",void 0),u([d({json:{write:!0}})],fn.prototype,"zoomScale",void 0),fn=S3=u([E(hNe)],fn);const Jne=fn;function pNe(t){return{geometryType:Q0(t[0]),geometries:t.map(e=>e.toJSON())}}function Kne(t,e,i){const r=xfe(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}let xf=class extends G{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Q0(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};u([d()],xf.prototype,"geometries",void 0),u([d({json:{read:{source:"outSR"}}})],xf.prototype,"outSpatialReference",void 0),u([d()],xf.prototype,"transformation",void 0),u([d()],xf.prototype,"transformForward",void 0),xf=u([E("esri.rest.support.ProjectParameters")],xf);const Qne=xf,fNe=Xt(Qne);async function mNe(t,e,i){e=fNe(e);const r=xv(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=Q0(e.geometries[0]),a=II(n,i);return tt(r.path+"/project",a).then(({data:{geometries:l}})=>Kne(l,o,s))}const Xne=U.getLogger("esri.widgets.support.geolocationUtils"),yNe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function gNe(){const t=V("esri-geolocation");return t||Xne.warn("geolocation-unsupported","Geolocation unsupported."),t}function vNe(){const t=window.isSecureContext;return t||Xne.warn("insecure-context","Geolocation requires a secure origin."),t}function kG(){return gNe()&&vNe()}function _Ne(t){return t||(t=yNe),new Promise((i,r)=>{setTimeout(()=>r(new C("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,t??void 0)})}function wNe(t,e){const{position:i,view:r}=t,n=bNe(i),s=n==null?void 0:n.coords;if(!s)throw new C("geometry-service:no-coords","Geolocation has no coordinates");return xNe(SNe(s),r,e)}function bNe(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function SNe({longitude:t,latitude:e,altitude:i}){return new ce({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function xNe(t,e,i){if(!e)return Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?Promise.resolve(t):r.isWebMercator?Promise.resolve(Xl(t)):$Ne(i).then(n=>{if(!n)throw new C("geometry-service:missing-url","Geometry service URL is missing");const s=new Qne({geometries:[t],outSpatialReference:r});return mNe(n,s,i).then(o=>o[0])})}function $Ne(t){if(Ye.geometryServiceUrl)return Promise.resolve(Ye.geometryServiceUrl);const e=lr.getDefault();return e.load(t).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}function an(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const ENe=()=>VT("esri/widgets/Search/t9n/Search"),ese="esri.widgets.Search.SearchViewModel",Tu=U.getLogger(ese),CG="highlight",FE=se.ofType({key:t=>t.layer?"layer":"locator",base:z5,typeMap:{layer:ig,locator:Jne}}),PG=_e.WGS84,MNe="esri/images/search/search-symbol-32.png",TNe=/<(?:.|\s)*?>/g,ng=-1;let Oe=class extends iS(Vi.EventedMixin(X)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new FE,this.defaultSymbols={point:new Jh({url:qe(MNe),size:24,width:24,height:24}),polyline:new En({color:[130,130,130,1],width:2}),polygon:new Qo({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=lr.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new FE,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await ENe();this.messages=i,this.defaultPopupTemplate=new dp({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([D(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),me),ET(e)])}destroy(){this.removeAllHandles(),this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:ng}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:r}=this,n=typeof r=="function"?r.call(null,{sources:e,defaultSources:i}):r?i.concat(e):e,s=this._get("allSources")||new FE;return s.removeAll(),s.addMany(n.filter(Boolean)),s}get locationEnabled(){return this._get("locationEnabled")||kG()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=kG();if(e&&!i){const r=new C("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Tu.error(r)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:r}=this;if(i===ng)return r??"";const n=e.at(i);return(n==null?void 0:n.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),n=(async()=>{var s;try{await this.when();const o=await this._getResultsFromSources(r,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(a,o,r);const l=this._getFirstResult(a.results),c=r.location&&l?l.name:r.text,h=c==null?void 0:c.replace(TNe,"");return this._set("searchTerm",h),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",a.results),this._set("resultCount",a.results.reduce((p,f)=>{var y;return p+(((y=f.results)==null?void 0:y.length)??0)},0)),this.emit("search-complete",a),await this._selectFirstResult(l),a}finally{this._clearSearching()}})();return this._searching=n,n}async searchNearby(e){if(!this.locationEnabled){const r=new C("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Tu.error(r),r}const i=(async()=>{try{const r=await _Ne(),n=await wNe({position:r,view:this.view},e);return await this.search(n,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const z=new C("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw Tu.error(z),z}const{view:i}=this,r=an(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),n=r!=null?this.allSources.at(r):null;if(!n){const z=new C("select:missing-source","Cannot select without a source.",{source:n});throw Tu.error(z),z}const s=n instanceof ig?this._getLayerSourcePopupTemplate(n):n.popupTemplate,o=n.resultSymbol||this._getDefaultSymbol(e),a=an(n,"resultGraphicEnabled")?n.resultGraphicEnabled:this.resultGraphicEnabled,l=an(n,"autoNavigate")?n.autoNavigate:this.autoNavigate,c=(an(n,"popupEnabled")?n.popupEnabled:this.popupEnabled)?s||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const z=new C("select:missing-feature","Cannot select without a feature.",{feature:h});throw Tu.error(z),z}const{attributes:p,geometry:f,layer:y,sourceLayer:g}=h,v=TG(f),_={layerViewQuery:this._getLayerView(h),elevationQuery:i&&v!=null?CDe(v,i).catch(()=>v):Promise.resolve(v)},w=await Di(_),S=w.layerViewQuery.value,b=w.elevationQuery.value;o instanceof Hm&&(o.text=e.name);const $=i&&l?e.target||e.extent:null;await($!=null?this._goToSearchResult($):Promise.resolve());const I=S?h:new fi({geometry:f,symbol:o,attributes:p,layer:y,sourceLayer:g,popupTemplate:c}),A=i==null?void 0:i.popup,L=A&&I.getEffectivePopupTemplate(A.defaultPopupTemplateEnabled);return L&&await i.openPopup({features:[I],location:b}),S&&g1(S)&&!L&&this._highlightFeature({graphic:I,layerView:S}),!S&&a&&i&&i.graphics.push(I),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",I),this.emit("select-result",{result:e,source:n,sourceIndex:r}),e}async suggest(e,i,r){const n=e||this.searchTerm;this.emit("suggest-start",{searchTerm:n}),await this._suggestTimer(i,r);const s=await this._suggestImmediate(n,r);return this._set("suggestions",s==null?void 0:s.results),this._set("suggestionCount",(s==null?void 0:s.results.reduce((o,a)=>{var l;return o+(((l=a.results)==null?void 0:l.length)??0)},0))??null),this.emit("suggest-complete",s),s}async when(){await Ci(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Di([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await Ci(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,r;const e=(r=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:r.geocode;return e?e.map(n=>{var l;if(n.placefinding===!1)return;const s=Ye.apiKey&&IG(n.url)?{url:oNe}:null,o=Jne.fromJSON({...n,...s}),a=o.url;if(IG(a)||sNe(a)||nNe(a)){const c=o.outFields??["Addr_type","Match_addr","StAddr","City"],h=(o.placeholder||((l=this.messages)==null?void 0:l.placeholder))??"",p=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.singleLineFieldName="SingleLine",o.outFields=c,o.placeholder=h,o.defaultZoomScale=p}return o.singleLineFieldName?o:void 0}).filter(Pi):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var n;const r=(n=this.view)==null?void 0:n.map;return e.map(s=>{const o=r.findLayerById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=ig.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(c=>{l.layer=c}),l}).filter(Pi).toArray()}_getTableSources(e,i){var n;const r=(n=this.view)==null?void 0:n.map;return e.map(s=>{if(!s.id)return;const o=r.findTableById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=ig.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(c=>{l.layer=c}),l}).filter(Pi).toArray()}_convertApplicationProperties(){var a,l,c;const e=(a=this.view)==null?void 0:a.map,i=(c=(l=e==null?void 0:e.applicationProperties)==null?void 0:l.viewing)==null?void 0:c.search;if(!i)return[];const{enabled:r,hintText:n,layers:s,tables:o}=i;return r?[...this._getLayerSources(s,n),...this._getTableSources(o,n)]:[]}async _getSubLayer(e,i){var s;if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find(o=>o.id===i.subLayer);if(!r)throw new Error;const n=await((s=r.createFeatureLayer)==null?void 0:s.call(r));if(!n)throw new Error;return this._createdFeatureLayers.push(n),n}async _getBuildingSubLayer(e,i){await e.load();const r=e.allSublayers.find(n=>n.id===i.subLayer);if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const n=new C("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Tu.error(n),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var s;const e=(s=this.view)==null?void 0:s.popup,{resultGraphic:i}=this;if(!e||!i)return;const r="selectedFeature"in e,n=r?e.selectedFeature:null;r&&n&&n===i&&e.close()}_suggestTimer(e,i){const r=e??this.suggestionDelay;return C1(r,null,i&&i.signal)}_createLocationForSearch(e){return e instanceof fi?TG(e.geometry):e instanceof ce?e:Array.isArray(e)&&e.length===2?new ce({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&an(e,"key")&&an(e,"text")&&an(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:n,selectedResult:s}=this,o=!e&&n&&s,a=o&&n.key===s.key&&n.sourceIndex===s.sourceIndex,l=o&&n.location;return a||l?n:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(e){let i=null;return e&&e.some(r=>{const{results:n}=r,s=n==null?void 0:n[0],o=!!s;return o&&(i=s),o}),i}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var s;await this.when();const r=await this._getSuggestionsFromSources(e,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const n={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(n,r),n}_formatSourceResponse(e,i,r){const n=(i==null?void 0:i.value)||[],s=i==null?void 0:i.error,o=this.allSources.at(r);if(s){const a={sourceIndex:r,source:o,error:s};e.errors.push(a),Tu.error(s),e.numErrors++}else{const a={sourceIndex:r,source:o,results:n};e.results.push(a),e.numResults+=n.length}}_formatResponse(e,i,r){if(i)if(e.activeSourceIndex===ng){const n=r&&an(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach((s,o)=>{const a=n!==void 0?n:o;this._formatSourceResponse(e,s,a)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:r}=this,n=!e.location&&an(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,s=[];if(!r.length){const o=new C("search:no-sources-defined","At least one source is required.",{allSources:r});throw Tu.error(o),o}return n===ng?r.forEach((o,a)=>{s.push(this._getResultsFromSource(e,a,i))}):s.push(this._getResultsFromSource(e,n,i)),Di(s)}async _getSuggestionsFromSources(e,i){const{allSources:r,activeSourceIndex:n}=this,s=[];if(!r.length){const o=new C("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw Tu.error(o),o}return n===ng?r.forEach((o,a)=>{s.push(this._getSuggestionsFromSource(e,a,i))}):s.push(this._getSuggestionsFromSource(e,n,i)),Di(s)}async _getResultsFromSource(e,i,r){var h,p;const n=i!=null?this.allSources.at(i):null;if(!n)return null;const{location:s=null}=e,o=((h=this.view)==null?void 0:h.spatialReference)||PG,a=an(n,"maxResults")?n.maxResults:this.maxResults,l=!!(n instanceof ig&&an(n,"exactMatch"))&&n.exactMatch,{view:c}=this;return(p=n.getResults)==null?void 0:p.call(n,{view:c,sourceIndex:i,location:s,suggestResult:e,spatialReference:o,exactMatch:l,maxResults:a},r)}async _getSuggestionsFromSource(e,i,r){var l,c;const n=this.allSources.at(i);if(!n)return null;e??(e="");const s=an(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,o=e==null?void 0:e.length,a=an(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(s&&e.trim()&&o>=a){const h=((l=this.view)==null?void 0:l.spatialReference)||PG,p=an(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,{view:f}=this,y=!!(n instanceof ig&&an(n,"exactMatch"))&&n.exactMatch;return(c=n.getSuggestions)==null?void 0:c.call(n,{view:f,sourceIndex:i,suggestTerm:e,spatialReference:h,maxSuggestions:p,exactMatch:y},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return an(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){const i=this.results;if(!i)return null;let r=null;return i.some(n=>n.results.some(s=>s===e&&(r=n.sourceIndex,!0))),r}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{signal:i.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var n;const{defaultSymbols:i}=this,r=(n=e.feature)==null?void 0:n.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(CG)}async _getLayerView(e){var n,s;const{view:i}=this;if(!e||!i||((n=e.layer)==null?void 0:n.type)==="building-component"||((s=e.layer)==null?void 0:s.type)==="subtype-sublayer")return null;const{layer:r}=e;return r?(await i.when(),i.whenLayerView(r)):null}_highlightFeature(e){const{graphic:i,layerView:r}=e,{attributes:n,layer:s}=i,{objectIdField:o}=s,a=(o&&(n==null?void 0:n[o]))??null,l=r.highlight(a??i);this.addHandles(l,CG)}_setResultFloor(e){var s,o,a;const{view:i}=this,r=(s=e.feature)==null?void 0:s.attributes,n=(o=e.feature)==null?void 0:o.sourceLayer;if(n&&"floorInfo"in n&&((a=n==null?void 0:n.floorInfo)!=null&&a.floorField)&&r){const l=r[n.floorInfo.floorField];i==null||i.emit("select-result-floor",l)}}};Oe.ALL_INDEX=ng,u([d()],Oe.prototype,"_searching",void 0),u([d()],Oe.prototype,"_updatingPromise",void 0),u([d({readOnly:!0,value:null})],Oe.prototype,"activeSource",null),u([d()],Oe.prototype,"activeSourceIndex",null),u([d()],Oe.prototype,"allPlaceholder",null),u([d({readOnly:!0})],Oe.prototype,"allSources",null),u([d()],Oe.prototype,"autoNavigate",void 0),u([d()],Oe.prototype,"autoSelect",void 0),u([d()],Oe.prototype,"defaultPopupTemplate",void 0),u([d({readOnly:!0})],Oe.prototype,"defaultSources",void 0),u([d()],Oe.prototype,"defaultSymbols",void 0),u([d()],Oe.prototype,"includeDefaultSources",void 0),u([d()],Oe.prototype,"locationEnabled",null),u([d()],Oe.prototype,"maxInputLength",void 0),u([d()],Oe.prototype,"maxResults",void 0),u([d()],Oe.prototype,"maxSuggestions",void 0),u([d()],Oe.prototype,"messages",void 0),u([d()],Oe.prototype,"minSuggestCharacters",void 0),u([d({readOnly:!0})],Oe.prototype,"placeholder",null),u([d()],Oe.prototype,"popupEnabled",void 0),u([d({type:dp})],Oe.prototype,"popupTemplate",void 0),u([d({type:lr})],Oe.prototype,"portal",void 0),u([d()],Oe.prototype,"resultCount",void 0),u([d()],Oe.prototype,"resultGraphicEnabled",void 0),u([d({readOnly:!0})],Oe.prototype,"resultGraphic",void 0),u([d({readOnly:!0})],Oe.prototype,"results",void 0),u([d({readOnly:!0})],Oe.prototype,"selectedSuggestion",void 0),u([d()],Oe.prototype,"searchAllEnabled",void 0),u([d({readOnly:!0})],Oe.prototype,"selectedResult",void 0),u([d()],Oe.prototype,"searchTerm",null),u([d({type:FE})],Oe.prototype,"sources",void 0),u([d({readOnly:!0})],Oe.prototype,"state",null),u([d()],Oe.prototype,"suggestionDelay",void 0),u([d()],Oe.prototype,"suggestionCount",void 0),u([d({readOnly:!0})],Oe.prototype,"suggestions",void 0),u([d()],Oe.prototype,"suggestionsEnabled",void 0),u([d({readOnly:!0})],Oe.prototype,"updating",null),u([d()],Oe.prototype,"view",void 0),u([d()],Oe.prototype,"clear",null),Oe=u([E(ese)],Oe);const Rg=Oe;let Zd=class extends Bt{constructor(e,i){super(e,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const e={[Mu.showMoreResults]:this.showMoreResultsOpen};return x("div",{class:Mu.base},x("div",{key:"esri-search-renderer__container",class:this.classes(Mu.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return x("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var r;const e=(r=this.viewModel)==null?void 0:r.selectedResult,i=e&&e.name||"";return x("div",{key:"esri-search-renderer__result-name",class:Mu.moreResultsItem},i)}renderMoreResultsLists(){const{viewModel:e}=this;if(!e)return[];const i=e.results;if((e.resultCount??0)<2)return null;const r=i==null?void 0:i.map(n=>this.renderMoreResultsList(n));return x("div",{key:"esri-search-renderer__more-results-container",class:Mu.moreResultsList},r)}renderMoreResultsButton(){const{messages:e,viewModel:i}=this;return i?(i.resultCount??0)<2?null:x("div",{key:"esri-search-renderer__more-results-button",class:Mu.moreResultsItem},x("a",{class:Mu.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults)):null}renderMoreResultsHeader(e,i){return x("div",{key:`esri-search-result-renderer__header-${i}`,class:Mu.moreResultsListHeader},e)}renderMoreResultsList(e){var p,f,y;const{results:i}=e,r=(i==null?void 0:i.length)??0,n=r>0,s=(p=this.viewModel)==null?void 0:p.selectedResult,o=r===1&&i[0]===s,a=this._getSourceName(e.source,e.sourceIndex),l=(((y=(f=this.viewModel)==null?void 0:f.results)==null?void 0:y.length)??0)>1&&!o?this.renderMoreResultsHeader(a,e.sourceIndex):null,c=n&&i.map((g,v)=>this.renderMoreResultsListItem(g,v)),h=n&&!o?x("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},c):null;return n?x("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},l,h):null}renderMoreResultsListItem(e,i){return e!==this.get("viewModel.selectedResult")?x("li",{key:`esri-search-result-renderer__list-item-${i}`},x("a",{class:Mu.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=this.get("viewModel.view.popup");i&&i.reposition()}_selectResultClick(e){var r;e.preventDefault();const i=e.currentTarget["data-result"];(r=this.viewModel)==null||r.select(i)}_getSourceName(e,i){return i===Rg.ALL_INDEX?this.messages.all:e.name}};u([d(),rt("esri/widgets/Search/t9n/Search")],Zd.prototype,"messages",void 0),u([d()],Zd.prototype,"showMoreResultsOpen",void 0),u([d()],Zd.prototype,"viewModel",void 0),u([At()],Zd.prototype,"_showMoreResultsClick",null),u([At()],Zd.prototype,"_selectResultClick",null),Zd=u([E("esri.widgets.Search.SearchResultRenderer")],Zd);const INe=Zd,kNe=/<[a-z/][\s\S]*>/i,CNe=(t,e)=>{const i=AD(e).split(/\s/),r=new RegExp(`(${i.join("|")})`,"gi");return t.replace(r,n=>`<strong>${n}</strong>`)};let Le=class extends Bt{constructor(e,i){super(e,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new INe,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=ge.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new Rg,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=r=>{var s;const n=r.relatedTarget;n&&((s=this._container)!=null&&s.contains(n))||this._clearActiveMenu()},this.addHandles([D(()=>this.searchTerm,r=>{(r&&this.activeMenu==="warning"||!r&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),_i(()=>{var r;return(r=this.viewModel)==null?void 0:r.allSources},"change",()=>this._watchSourceChanges()),D(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),me),D(()=>{var r;return(r=this.viewModel)==null?void 0:r.defaultPopupTemplate},r=>{r&&(r.content=this._renderSearchResultsContent.bind(this))},me)])}destroy(){this.removeAllHandles(),this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=Ue(this._searchResultRenderer)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return(e=this.viewModel)==null?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const n=await this.viewModel.search(e,{signal:r});return this._searchController!==i?void 0:(this.activeMenu=n!=null&&n.numResults?"none":"warning",this._searchController=null,n)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const n=await this.viewModel.suggest(e,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=null,n!=null&&n.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),n)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,i={[ge.disabled]:e==="disabled",[ge.esriWidgetDisabled]:this.disabled};return x("div",{class:this.classes(ge.base,i)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:i}=this;return x("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:i,class:this.classes(ge.submitButton,ge.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},x("span",{"aria-hidden":"true",class:ge.searchIcon}))}renderWarningMenu(){return x("div",{key:"esri-search__error-menu",class:this.classes(ge.menu,ge.warningMenu)},x("div",{class:ge.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:i,sourceMenuId:r,sourceMenuButtonId:n,disabled:s}=this,{activeSourceIndex:o,allSources:a}=this.viewModel;return a.length>1?x("button",{id:n,key:"esri-search__source-menu-button",bind:this,disabled:s,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(i==="source").toString(),"aria-controls":r,class:this.classes(ge.sourcesButton,ge.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:mc,"data-node-ref":"_sourceMenuButtonNode",type:"button"},x("span",{"aria-hidden":"true",class:ge.dropdownIcon}),x("span",{"aria-hidden":"true",class:ge.dropupIcon}),x("span",{class:ge.sourceName},this._getSourceName(o))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:n,sourceMenuId:s,sourceMenuButtonId:o}=this,a=n==="source"&&r>-1?this._buildId("source-item",r):null;return e.length>1?x("ul",{"aria-activedescendant":a,"aria-labelledby":o,id:s,role:"menu",bind:this,afterCreate:mc,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:ge.menuList,tabIndex:-1},i?this.renderSource(Rg.ALL_INDEX):null,e.map((l,c)=>this.renderSource(c)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?x("div",{key:"esri-search__source-menu",class:this.classes(ge.menu,ge.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:i,disabled:r}=this;return x("div",{class:ge.loader,key:"base-loader",tabIndex:r?-1:void 0},x("span",{"aria-hidden":"true",class:ge.loaderAnimation}),x("span",{class:ge.fallbackText},e.searchButtonTitle),x("span",{class:ge.loaderText},i.loading))}renderContainer(){const{allSources:e,state:i}=this.viewModel,{activeMenu:r}=this,n={[ge.hasMultipleSources]:e.length>1,[ge.isLoading]:i==="loading",[ge.isSearching]:i==="searching",[ge.showWarning]:r==="warning",[ge.showSources]:r==="source",[ge.showSuggestions]:r==="suggestion"};return x("div",{tabIndex:-1,afterCreate:s=>{this._container=s,s.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:s=>{s.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(n,ge.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?x("button",{bind:this,disabled:this.disabled,class:this.classes(ge.clearButton,ge.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},x("span",{"aria-hidden":"true",class:ge.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:i,displayedSearchTerm:r}=this,n=i&&!r,s=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return n?x("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(ge.menuList,ge.suggestionList,ge.suggestionListCurrentLocation)},x("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(ge.menuItem,s?ge.menuItemFocus:null)},x("span",{"aria-hidden":"true",class:ge.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:i,displayedSearchTerm:r,messages:n,suggestionsMenuId:s,inputId:o,_activeMenuItemIndex:a,disabled:l}=this,{maxInputLength:c,placeholder:h,searchTerm:p,suggestionCount:f}=this.viewModel,y=!(!(i&&!r)&&!f),g=e==="suggestion"&&a>-1?this._buildId("suggestion-item",a):null;return x("input",{"aria-activedescendant":g,"aria-autocomplete":"list","aria-expanded":(y&&e==="suggestion").toString(),"aria-controls":y?s:null,"aria-haspopup":"listbox","aria-label":n.searchButtonTitle,bind:this,disabled:l,placeholder:h,maxlength:c,autocomplete:"off",type:"text",class:this.classes(ge.esriInput,ge.input),value:p,id:o,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:mc,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:p?"":h})}renderForm(){return x("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:ge.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:i}=e,{results:r}=e;return(r==null?void 0:r.length)?x("ul",{role:"group",key:`esri-search__suggestion-list-${i}`,class:this.classes(ge.menuList,ge.suggestionList)},r==null?void 0:r.map(s=>this.renderSuggestion(s,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(i=>[this.renderSuggestionHeader(i),this.renderSuggestList(i)]):[]}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:i,suggestionsMenuId:r,inputId:n}=this,{suggestionCount:s}=this.viewModel,o=i&&!e||s;return this._menuItemCount=0,o?x("div",{id:r,key:"esri-search__suggestions-menu",class:this.classes(ge.menu,ge.suggestionsMenu),role:"listbox","aria-labelledby":n,bind:this,afterCreate:mc,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return x("div",{key:"esri-search__input-container",class:ge.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){var a;const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:n}=e,s=(a=e.results)==null?void 0:a.length,o=i.length>1&&r===Rg.ALL_INDEX;return s&&o?x("div",{key:`esri-search__suggestion-header-${n}`,class:ge.menuHeader},this._getSourceName(n)):null}renderSuggestion(e,i){const{_activeMenuItemIndex:r,viewModel:{searchTerm:n}}=this;if(!n)return;const s=this.activeMenu==="suggestion"&&r===i;return x("li",{bind:this,id:this._buildId("suggestion-item",i),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${i}`,"data-suggestion":e,role:"option",innerHTML:this._getSuggestResultHTML(e.text,n),class:this.classes(ge.menuItem,s?ge.menuItemFocus:null)})}renderSource(e){const{activeSourceIndex:i,searchAllEnabled:r}=this.viewModel,n={[ge.menuItemActive]:e===i,[ge.menuItemFocus]:this.activeMenu==="source"&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},s=r?e+1:e;return x("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",s),"aria-checked":(e===i).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(ge.source,ge.menuItem,n)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:i}=this,r=e?er(i.noResultsFoundForValue,{value:`"${e}"`}):i.noResultsFound;return x("div",{key:"esri-search__no_results"},x("div",{class:ge.warningMenuHeader},i.noResults),x("div",{class:ge.warningMenuText},r))}renderEmptySearchWarning(){const{messages:e}=this;return x("div",{key:"esri-search__empty-search"},x("span",{"aria-hidden":"true",class:ge.noticeIcon}),x("span",{class:ge.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return x("div",{key:"esri-search__locate-error"},x("span",{"aria-hidden":"true",class:ge.noticeIcon}),x("span",{class:ge.noValueText},e.locateError))}renderWarning(){var n;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:r}=this;return i?this.renderLocateWarning():(n=r.selectedSuggestion)!=null&&n.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,i){return`${this.id}-${e}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,i="sources";this.removeHandles(i),e.forEach(r=>this.addHandles(D(()=>r.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const i=AG(e.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;this._searchController=e,(async()=>{try{const r=await this.viewModel.searchNearby({signal:i});this.activeMenu=r!=null&&r.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var r;if(!e)return;const i=PNe(e);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(r=this._sourceMenuButtonNode)==null||r.focus())}_cancelSuggest(){this._suggestController=vs(this._suggestController)}_cancelSearch(){this._searchController=vs(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var s;const i=Va(e);if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const r=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const n=(s=this._suggestionListNode)==null?void 0:s.getElementsByTagName("li");if(n!=null&&n.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),r)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,n,this._suggestionListNode);const o=n[this._activeMenuItemIndex];if(i==="Enter"&&o){const a=AG(o);return void(a?(this._focus(),this.search(a)):ANe(o)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,i,r){const n=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=i.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),n!==this._activeMenuItemIndex&&r&&s1e(i[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const i=e.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){var r;const i=Va(e);if(HK(i)){e.preventDefault();const n=(r=this._sourceListNode)==null?void 0:r.getElementsByTagName("li"),s=n==null?void 0:n[this._activeMenuItemIndex];this._setSourceFromMenuItem(s)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var s,o,a;const i=Va(e),r=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(r&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((s=this._sourceMenuButtonNode)==null?void 0:s.focus());const n=(o=this._sourceListNode)==null?void 0:o.getElementsByTagName("li");return n&&n.length!==0&&r?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,n,(a=this._sourceListNode)==null?void 0:a.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:i}=this,r=this.viewModel,{allSources:n}=r,s=n.at(e);return e===Rg.ALL_INDEX?i.all:s&&s.name||i.untitledSource}_getSuggestResultHTML(e,i){return e?kNe.test(e)?e:CNe(e,i):this.messages.untitledResult}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};function AG(t){return t==null?void 0:t["data-suggestion"]}function PNe(t){return t==null?void 0:t["data-source-index"]}function ANe(t){return!!(t!=null&&t["data-current-location-item"])}u([d()],Le.prototype,"_activeMenuItemIndex",void 0),u([d()],Le.prototype,"displayedSearchTerm",null),u([d({readOnly:!0})],Le.prototype,"inputId",null),u([d({readOnly:!0})],Le.prototype,"suggestionsMenuId",null),u([d({readOnly:!0})],Le.prototype,"sourceMenuId",null),u([d({readOnly:!0})],Le.prototype,"sourceMenuButtonId",null),u([d()],Le.prototype,"activeMenu",void 0),u([d({readOnly:!0})],Le.prototype,"activeSource",null),u([d()],Le.prototype,"activeSourceIndex",null),u([d()],Le.prototype,"allPlaceholder",null),u([d({readOnly:!0})],Le.prototype,"allSources",null),u([d()],Le.prototype,"autoNavigate",null),u([d()],Le.prototype,"autoSelect",null),u([d({readOnly:!0})],Le.prototype,"defaultSources",null),u([d()],Le.prototype,"disabled",void 0),u([d()],Le.prototype,"goToOverride",null),u([d()],Le.prototype,"iconClass",void 0),u([d()],Le.prototype,"icon",void 0),u([d()],Le.prototype,"includeDefaultSources",null),u([d()],Le.prototype,"label",null),u([d()],Le.prototype,"locationEnabled",null),u([d()],Le.prototype,"maxResults",null),u([d()],Le.prototype,"maxSuggestions",null),u([d(),rt("esri/widgets/Search/t9n/Search")],Le.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],Le.prototype,"messagesCommon",void 0),u([d()],Le.prototype,"minSuggestCharacters",null),u([d()],Le.prototype,"popupEnabled",null),u([d()],Le.prototype,"popupTemplate",null),u([d()],Le.prototype,"portal",null),u([d()],Le.prototype,"resultGraphic",null),u([d()],Le.prototype,"resultGraphicEnabled",null),u([d({readOnly:!0})],Le.prototype,"results",null),u([d()],Le.prototype,"searchAllEnabled",null),u([d()],Le.prototype,"searchTerm",null),u([d({readOnly:!0})],Le.prototype,"selectedResult",null),u([d()],Le.prototype,"sources",null),u([d({readOnly:!0})],Le.prototype,"suggestions",null),u([d()],Le.prototype,"suggestionsEnabled",null),u([d()],Le.prototype,"view",null),u([wv(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d({type:Rg})],Le.prototype,"viewModel",void 0),Le=u([E("esri.widgets.Search")],Le);const ONe=Le;let Yd=class extends X{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(_i(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this.removeAllHandles(),this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const i=!!e;this._set("expanded",i);const r=this.get("view.ui");r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&Ai(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?Ai(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const n=Hve(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(n,e),this._viewpointHandle=n}_collapse(){this.expanded=!1}};u([d({value:!1})],Yd.prototype,"autoCollapse",null),u([d({value:!1})],Yd.prototype,"expanded",null),u([d()],Yd.prototype,"group",void 0),u([d({readOnly:!0})],Yd.prototype,"state",null),u([d({value:null})],Yd.prototype,"view",null),Yd=u([E("esri.widgets.Expand.ExpandViewModel")],Yd);const tse=Yd,Jn="esri-expand",Gi={base:`${Jn} esri-widget`,modeAuto:`${Jn}--auto`,modeDrawer:`${Jn}--drawer`,modeFloating:`${Jn}--floating`,container:`${Jn}__container`,containerExpanded:`${Jn}__container--expanded`,panel:`${Jn}__panel`,button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:`${Jn}__icon--expanded`,iconNumber:`${Jn}__icon-number`,iconNumberExpanded:`${Jn}__icon-number--expanded`,expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:`${Jn}__content`,contentExpanded:`${Jn}__content--expanded`,expandMask:`${Jn}__mask`,expandMaskExpanded:`${Jn}__mask--expanded`};let Wt=class extends Bt{constructor(e,i){super(e,i),this.closeOnEsc=!0,this.collapseIcon=null,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconClass=null,this.icon=null,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new tse,this._handleKeyDown=r=>{const{closeOnEsc:n,_toggleButtonEl:s,expanded:o}=this;!o||!n||r.target===s||r.key!=="Escape"||(typeof n=="function"?n(r):n)&&(this.expanded=!1,s==null||s.focus())}}loadDependencies(){return ml({icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"])})}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:r,expandTooltip:n}=this;return(e?r||(i==null?void 0:i.collapse):n||(i==null?void 0:i.expand))??""}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return Gi.collapseIcon}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return fm(this.content)?this.content.iconClass:Gi.expandIcon}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get expandIcon(){return fm(this.content)?this.content.icon:void 0}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,i={[Gi.modeAuto]:e==="auto",[Gi.modeDrawer]:e==="drawer",[Gi.modeFloating]:e==="floating"};return x("div",{class:this.classes(Gi.base,i),onkeydown:this._handleKeyDown},this._renderMask(),this._renderContainer())}_renderContainer(){const{expanded:e}=this,i={[Gi.containerExpanded]:e};return x("div",{class:this.classes(Gi.container,i)},this._renderPanel(),this._renderContent())}_renderMask(){const{expanded:e}=this,i={[Gi.expandMaskExpanded]:e};return x("div",{bind:this,onclick:this._toggle,class:this.classes(Gi.expandMask,i)})}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?x("span",{key:"expand__icon-number",class:Gi.iconNumber},i):null}_renderPanelNumber(){const{iconNumber:e,expanded:i}=this;return e&&i?x("span",{key:"expand__expand-icon-number",class:this.classes(Gi.iconNumber,Gi.iconNumberExpanded)},e):null}_renderIcon(){const e=(this.expanded?this.collapseIcon:this.expandIcon)??"";return x("calcite-icon",{key:"icon",icon:e,scale:"s"})}_renderLegacyIcon(){const{collapseIconClass:e,expandIconClass:i,expanded:r}=this,n={[Gi.iconExpanded]:r};return i!=null&&(n[i]=!r),e!=null&&(n[e]=e===i||r),x("span",{key:"legacy-icon","aria-hidden":"true",class:this.classes(Gi.icon,n)})}_renderTitle(){return x("span",{class:Gi.text},this.expandTitle)}_renderExpandButton(){const{expanded:e,expandTitle:i,expandIcon:r,collapseIcon:n,contentId:s}=this;return x("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":s,"aria-expanded":e?"true":"false",bind:this,class:Gi.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:i},this._renderBadgeNumber(),!e&&r!=null||e&&n!=null?this._renderIcon():this._renderLegacyIcon(),this._renderTitle())}_renderPanel(){return x("div",{class:Gi.panel},this._renderExpandButton(),this._renderPanelNumber())}_renderContent(){const{expanded:e,contentId:i,content:r}=this,n={[Gi.contentExpanded]:e},s={id:i,role:"region",class:this.classes(Gi.content,n)};return typeof r=="string"?x("div",{key:"content__string",innerHTML:r,...s}):fm(r)?x("div",{key:"content__widget",...s},r.render()):r instanceof HTMLElement?x("div",{key:"content__html-element",bind:r,afterCreate:this._attachToNode,...s}):bne(r)?x("div",{key:"content__node",bind:r.domNode,afterCreate:this._attachToNode,...s}):null}_toggle(){this.toggle()}_attachToNode(e){const i=this;e.appendChild(i)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};u([d({readOnly:!0})],Wt.prototype,"contentId",null),u([d({readOnly:!0})],Wt.prototype,"expandTitle",null),u([d()],Wt.prototype,"autoCollapse",null),u([d()],Wt.prototype,"closeOnEsc",void 0),u([d()],Wt.prototype,"collapseIconClass",null),u([d()],Wt.prototype,"collapseIcon",void 0),u([d()],Wt.prototype,"collapseTooltip",void 0),u([d()],Wt.prototype,"content",void 0),u([d()],Wt.prototype,"expanded",null),u([d()],Wt.prototype,"expandIconClass",null),u([d()],Wt.prototype,"expandIcon",null),u([d()],Wt.prototype,"expandTooltip",void 0),u([d()],Wt.prototype,"group",null),u([d()],Wt.prototype,"iconClass",void 0),u([d()],Wt.prototype,"icon",void 0),u([d()],Wt.prototype,"iconNumber",void 0),u([d()],Wt.prototype,"label",null),u([d(),rt("esri/widgets/Expand/t9n/Expand")],Wt.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],Wt.prototype,"messagesCommon",void 0),u([d()],Wt.prototype,"mode",void 0),u([d()],Wt.prototype,"view",null),u([d({type:tse})],Wt.prototype,"viewModel",void 0),u([At()],Wt.prototype,"_toggle",null),Wt=u([E("esri.widgets.Expand")],Wt);const LNe=Wt;function H5(t,e,i,r){let n=null,s=1e3;typeof e=="number"?(s=e,r=i):(n=e??null,s=i);let o,a=0;const l=()=>{a=0,t.apply(r,o)},c=(...h)=>{n&&n.apply(r,h),o=h,s?a||(a=setTimeout(l,s)):l()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),l())},c.hasPendingUpdates=()=>!!a,c}let ww=class extends rI{constructor(e){super(e),this.description=null,this.title=null}};u([d()],ww.prototype,"description",void 0),u([d()],ww.prototype,"title",void 0),ww=u([E("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],ww);const q5=ww,lP="esri-feature-element-info",uP={base:lP,title:`${lP}__title`,description:`${lP}__description`};let sg=class extends Bt{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return x("div",{class:uP.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?x(Uo,{level:this.headingLevel,class:uP.title},e):null}renderDescription(){const{description:e}=this;return e?x("div",{key:"description",class:uP.description},e):null}};u([d()],sg.prototype,"description",void 0),u([d()],sg.prototype,"headingLevel",void 0),u([d()],sg.prototype,"title",void 0),sg=u([E("esri.widgets.Feature.support.FeatureElementInfo")],sg);const CI=sg,RNe={base:"esri-feature-attachments"};let zl=class extends Bt{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new Tee,this.headingLevel=2,this.viewModel=new q5}initialize(){this._featureElementInfo=new CI,this.addHandles([D(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),me),D(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,me)])}destroy(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return x("div",{class:RNe.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var n;const{description:e,title:i,headingLevel:r}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:i,headingLevel:r})}};u([d({readOnly:!0})],zl.prototype,"attachmentsWidget",void 0),u([d()],zl.prototype,"description",null),u([d()],zl.prototype,"displayType",null),u([d()],zl.prototype,"graphic",null),u([d()],zl.prototype,"headingLevel",void 0),u([d()],zl.prototype,"title",null),u([d({type:q5})],zl.prototype,"viewModel",void 0),zl=u([E("esri.widgets.Feature.FeatureAttachments")],zl);const FNe=zl;let Jd=class extends Xr(X){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(D(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},me))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(wM(r,{graphic:i}).catch(()=>null),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=wM(e,{graphic:i}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};u([d({readOnly:!0})],Jd.prototype,"created",void 0),u([d()],Jd.prototype,"creator",void 0),u([d()],Jd.prototype,"destroyer",void 0),u([d({type:fi})],Jd.prototype,"graphic",void 0),u([d({readOnly:!0})],Jd.prototype,"state",null),Jd=u([E("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Jd);const jM=Jd,cP="esri-feature-content",dP={base:cP,loaderContainer:`${cP}__loader-container`,loader:`${cP}__loader`};let og=class extends Bt{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(n=>{_ee(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return x("div",{class:dP.loaderContainer,key:"loader"},x("div",{class:dP.loader}))}renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?x("div",{key:e,bind:e,afterCreate:this._attachToNode}):fm(e)?x("div",{key:e},!e.destroyed&&e.render()):x("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return x("div",{class:dP.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const i=this;e.appendChild(i)}};u([d()],og.prototype,"creator",null),u([d()],og.prototype,"graphic",null),u([d({type:jM})],og.prototype,"viewModel",void 0),og=u([E("esri.widgets.Feature.FeatureContent")],og);const DE=og;let tc=class extends X{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,r=[];return i==null||i.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const s=n.clone();s.label=wee(s,e),r.push(s)}),r}};u([d()],tc.prototype,"attributes",void 0),u([d({type:[jY]})],tc.prototype,"expressionInfos",void 0),u([d()],tc.prototype,"description",void 0),u([d({type:[D1]})],tc.prototype,"fieldInfos",void 0),u([d({readOnly:!0})],tc.prototype,"formattedFieldInfos",null),u([d()],tc.prototype,"title",void 0),tc=u([E("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],tc);const PI=tc,DNe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function NNe(t){let e=null;return DNe.some(i=>(i.pattern.test(t)&&(e=i),!!e)),e}function jNe(t,e){if(typeof e!="string"||!e)return e;const i=NNe(e);if(!i)return e;const r=e.match(i.pattern),n=r&&r[2],s=Wo(Wo(i.label,{messages:t,hierPart:n}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return e.replace(i.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const Zx="esri-feature-fields",u_={base:Zx,fieldHeader:`${Zx}__field-header`,fieldData:`${Zx}__field-data`,fieldDataDate:`${Zx}__field-data--date`,esriTable:"esri-widget__table"};let ka=class extends Bt{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new PI,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new CI,this.addHandles(D(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),me))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,i){const{attributes:r}=this.viewModel,n=e.fieldName,s=e.label||n,o=r?r[n]==null?"":r[n]:"",a=!(!e.format||!e.format.dateFormat),l=typeof o=="number"&&!a?this._forceLTR(o):jNe(this.messagesURIUtils,o),c={[u_.fieldDataDate]:a};return x("tr",{key:`fields-element-info-row-${n}-${i}`},x("th",{key:`fields-element-info-row-header-${n}-${i}`,class:u_.fieldHeader,innerHTML:s}),x("td",{key:`fields-element-info-row-data-${n}-${i}`,class:this.classes(u_.fieldData,c),innerHTML:l}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?x("table",{class:u_.esriTable,summary:this.messages.fieldsSummary},x("tbody",null,e.map((i,r)=>this.renderFieldInfo(i,r)))):null}render(){var e;return x("div",{class:u_.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};u([d()],ka.prototype,"attributes",null),u([d()],ka.prototype,"description",null),u([d()],ka.prototype,"expressionInfos",null),u([d()],ka.prototype,"fieldInfos",null),u([d()],ka.prototype,"title",null),u([d({type:PI,nonNullable:!0})],ka.prototype,"viewModel",void 0),u([d(),rt("esri/widgets/Feature/t9n/Feature")],ka.prototype,"messages",void 0),u([d(),rt("esri/widgets/support/t9n/uriUtils")],ka.prototype,"messagesURIUtils",void 0),ka=u([E("esri.widgets.Feature.FeatureFields")],ka);const ise=ka,VNe=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,zNe=/^-?(\d+)(\.(\d+))?$/i;function UNe(t,e){return t-e}function BNe(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function GNe(t,e,i,r,n){const s=HNe(t,e,i,r),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function rse(t){const e=String(t),i=e.match(zNe);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const c=rse(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function HNe(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,o=e-i-s;n.previous=Math.floor(Math.abs(100*o/s))}if(r!=null){const s=r-t,o=r-e-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function pZe(t,e={}){const i=t.slice(0),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map((o,a)=>a)}=e;s.sort(UNe);for(let o=0;o<s.length;o++){const a=s[o],l=i[a],c=a===0?null:i[a-1],h=a===i.length-1?null:i[a+1],p=rse(l).fractional;if(p){let f,y=0,g=!1;for(;y<=p&&!g;){const v=BNe(l,y);f=n&&o===0?v[1]:v[0],g=GNe(l,f,c,h,r),y++}g&&(i[a]=f)}}return i}const qNe={maximumFractionDigits:20};function WNe(t){return Yo(t,qNe)}const ZNe="<",YNe=">",JNe=$g("short-date");function KNe(t,e,i,r){let n="";e===0?n=`${ZNe} `:e===i&&(n=`${YNe} `);let s=null;return s=r?io(t,JNe):WNe(t),n+s}const fZe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function QNe(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(o=>o.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await O(()=>Promise.resolve().then(()=>aI),void 0);return s(e,n)??null}async function mZe(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await QNe(t)||t.color;return new En({cap:i,color:n,width:r})}function yZe(t){return t!=null&&typeof t=="object"&&"min"in t&&"max"in t}const XNe=new ae([64,64,64]);function nse(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,s)=>i.includes(s)?KNe(n,s,r,e):null)}async function eje(t,e,i){let r=!1,n=[],s=[];if(t.stops){const c=t.stops;n=c.map(h=>h.value),r=c.some(h=>!!h.label),r&&(s=c.map(h=>h.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=r?null:nse(n,i??!1);return(await Promise.all(n.map(async(c,h)=>({value:c,color:t.type==="opacity"?await tje(c,t,e):(await O(()=>Promise.resolve().then(()=>aI),void 0)).getColor(t,c),label:r?s[h]:(l==null?void 0:l[h])??""})))).reverse()}async function tje(t,e,i){const r=new ae(i??XNe),n=(await O(()=>Promise.resolve().then(()=>aI),void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function gZe(t){let e=!1,i=[],r=[];i=t.map(a=>a.value),e=t.some(a=>!!a.label),e&&(r=t.map(a=>a.label??""));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const o=e?null:nse(i,!1);return i.map((a,l)=>({value:a,color:ije(a,t),label:e?r[l]:(o==null?void 0:o[l])??""})).reverse()}function ije(t,e){const{startIndex:i,endIndex:r,weight:n}=rje(t,e);if(i===r)return e[i].color;const s=ae.blendColors(e[i].color,e[r].color,n);return new ae(s)}function rje(t,e){let i=0,r=e.length-1;return e.some((n,s)=>t<n.value?(r=s,!0):(i=s,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function vZe(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new ae(r.toColor),label:"high"}):i.push({value:null,color:new ae(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new ae(r.fromColor),label:"low"}):i.push({value:null,color:new ae(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new ae(n),label:"high"},{value:e.min,color:new ae(r),label:"low"}]}return i}function nje(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new Kw({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{var o,a;let s="";return n===0?s=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":n===i&&(s=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}U.getLogger("esri.renderers.support.utils");async function Ts(t,e,i){Sg(t,e,()=>[]).push(...i)}async function sje(t){var i,r;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const n=t.visualVariables.filter(s=>s.type==="color");for(const s of n){const o=(await eje(s)??[]).map(a=>a.color);await Ts(e,s.field||s.valueExpression,o)}}if(t.type==="heatmap"){const n=nje(t).map(s=>s.color);await Ts(e,t.field||t.valueExpression,n)}else if(t.type==="pie-chart"){for(const n of t.attributes)await Ts(e,n.field||n.valueExpression,[n.color]);await Ts(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,cy(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const n of t.attributes)await Ts(e,n.field||n.valueExpression,[n.color]);await Ts(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((r=t.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of t.uniqueValueInfos??[])await Ts(e,n.value.toString(),[cy(n.symbol,null)]);else{const n=(t.uniqueValueInfos??[]).map(c=>cy(c.symbol,null)),{field:s,field2:o,field3:a,valueExpression:l}=t;(s||l)&&await Ts(e,s||l,n),o&&await Ts(e,o,n),a&&await Ts(e,a,n)}else if(t.type==="class-breaks"){const n=t.classBreakInfos.map(a=>cy(a.symbol,null)),{field:s,valueExpression:o}=t;await Ts(e,s??o,n)}else t.type==="simple"&&await Ts(e,"default",[cy(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await Ts(e,"default",[cy(t.defaultSymbol,null)]),e.forEach((n,s)=>{const o=Fue(n.filter(Boolean),(a,l)=>JSON.stringify(a)===JSON.stringify(l));e.set(s,o)}),e}const Yx={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new No({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:_e.WebMercator}),minus180Line:new No({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:_e.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new No({paths:[[[180,-180],[180,180]]],spatialReference:_e.WGS84}),minus180Line:new No({paths:[[[-180,-180],[-180,180]]],spatialReference:_e.WGS84})}};function Yf(t,e){return Math.ceil((t-e)/(2*e))}function sse(t,e){const i=ob(t);for(const r of i)for(const n of r)n[0]+=e;return t}function ob(t){return rm(t)?t.rings:t.paths}async function oje(t,e,i,r){const n=xv(t),s=e[0].spatialReference,o={...r,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Q0(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await tt(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(h=>{const p=Wh(h);return p.spatialReference=s,p})}}async function aje(t,e,i){const r=typeof t=="string"?_r(t):t,n=e[0].spatialReference,s=Q0(e[0]),o={...i,query:{...r.query,f:"json",sr:n.wkid??JSON.stringify(n),geometries:JSON.stringify(pNe(e))}},{data:a}=await tt(r.path+"/simplify",o);return Kne(a.geometries,s,n)}const ose=U.getLogger("esri.geometry.support.normalizeUtils");function lje(t){return t.type==="polygon"}function uje(t){return t[0].type==="polygon"}function cje(t){return t[0].type==="polyline"}function dje(t,e){if(!(t instanceof No||t instanceof Un)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw ose.error(n),new C(n)}const i=ob(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],h=n[o+1][1],p=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),f=(h-l)/p,y=(c-a)/p,g=p/e;if(g>1){for(let S=1;S<=g-1;S++){const b=S*e,$=y*b+a,T=f*b+l;s.push([$,T])}const v=(p+Math.floor(g-1)*e)/2,_=y*v+a,w=f*v+l;s.push([_,w])}s.push([c,h])}}return lje(t)?new Un({rings:r,spatialReference:t.spatialReference}):new No({paths:r,spatialReference:t.spatialReference})}function OG(t,e,i){if(e){const r=dje(t,1e6);t=Bf(r,!0)}return i&&(t=sse(t,i)),t}function LG(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Yf(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=Yf(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=Yf(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=Yf(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function hje(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=ob(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let f=0;f<l.length;f++){const y=l[f][0];h=y>h?y:h}h=Number(h.toFixed(9));const p=-360*Yf(h,180);for(let f=0;f<l.length;f++){const y=s.getPoint(a,f);s.setPoint(a,f,y.clone().offset(p,0))}return!0}})}if(n===i){if(uje(t))for(const a of ob(s))t[n]=t[n].addRing(a);else if(cje(t))for(const a of ob(s))t[n]=t[n].addPath(a)}else i=n,t[n]=s}return t}async function ase(t,e,i){if(!Array.isArray(t))return ase([t],e);e&&typeof e!="string"&&ose.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Ye.geometryServiceUrl;let n,s,o,a,l,c,h,p,f=0;const y=[],g=[];for(const $ of t)if($!=null)if(n||(n=$.spatialReference,s=Go(n),o=n.isWebMercator,c=o?102100:4326,a=Yx[c].maxX,l=Yx[c].minX,h=Yx[c].plus180Line,p=Yx[c].minus180Line),s)if($.type==="mesh")g.push($);else if($.type==="point")g.push(LG($.clone(),a,l));else if($.type==="multipoint"){const T=$.clone();T.points=T.points.map(I=>LG(I,a,l)),g.push(T)}else if($.type==="extent"){const T=$.clone()._normalize(!1,!1,s);g.push(T.rings?new Un(T):T)}else if($.extent){const T=$.extent,I=Yf(T.xmin,l)*(2*a);let A=I===0?$.clone():sse($.clone(),I);T.offset(I,0),T.intersects(h)&&T.xmax!==a?(f=T.xmax>f?T.xmax:f,A=OG(A,o),y.push(A),g.push("cut")):T.intersects(p)&&T.xmin!==l?(f=T.xmax*(2*a)>f?T.xmax*(2*a):f,A=OG(A,o,360),y.push(A),g.push("cut")):g.push(A)}else g.push($.clone());else g.push($);else g.push($);let v=Yf(f,a),_=-90;const w=v,S=new No;for(;v>0;){const $=360*v-180;S.addPath([[$,_],[$,-1*_]]),_*=-1,v--}if(y.length>0&&w>0){const $=hje(y,await oje(r,y,S,i)),T=[],I=[];for(let z=0;z<g.length;z++){const j=g[z];if(j!=="cut")I.push(j);else{const H=$.shift(),J=t[z];J!=null&&J.type==="polygon"&&J.rings&&J.rings.length>1&&H.rings.length>=J.rings.length?(T.push(H),I.push("simplify")):I.push(o?Xl(H):H)}}if(!T.length)return I;const A=await aje(r,T,i),L=[];for(let z=0;z<I.length;z++){const j=I[z];j!=="simplify"?L.push(j):L.push(o?Xl(A.shift()):A.shift())}return L}const b=[];for(let $=0;$<g.length;$++){const T=g[$];if(T!=="cut")b.push(T);else{const I=y.shift();b.push(o===!0?Xl(I):I)}}return b}function _Ze(t,e){const i=Go(e);if(i){const[r,n]=i.valid,s=n-r;if(t<r)for(;t<r;)t+=s;if(t>n)for(;t>n;)t-=s}return t}function lse(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let n=0;n<r.length;n++)e[i][n]=lse(r[n])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}var lh;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(lh||(lh={}));const RG=4294967296,pje=new TextDecoder("utf-8"),fje=V("safari")||V("ios")?6:V("ff")?12:32;let x3=class NE{constructor(e,i,r=0,n=e?e.byteLength:0){this._tag=0,this._dataType=lh.unknown,this._init(e,i,r,n)}_init(e,i,r,n){this._data=e,this._dataView=i,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new NE(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*RG;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*RG;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,n){const s=this.getMessage(),o=e(s,i,r,n);return s.release(),o}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=NE.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){NE.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case lh.varint:this._decodeVarint();break;case lh.fixed64:this._skip(8);break;case lh.delimited:this._skip(this._getLength());break;case lh.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=e[i++],r|=127&n,(128&n)==0||(n=e[i++],r|=(127&n)<<7,(128&n)==0)||(n=e[i++],r|=(127&n)<<14,(128&n)==0)||(n=e[i++],r|=(127&n)<<21,(128&n)==0)||(n=e[i++],r+=268435456*(127&n),(128&n)==0)||(n=e[i++],r+=34359738368*(127&n),(128&n)==0)||(n=e[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=e[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=e[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=e[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;i!==this._end&&(n=e[i],(128&n)!=0);)++i,r+=(127&n)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*s}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i=this._pos,r=0,n=0;const s=1&e[i];if(this._end-i>=10)do{if(n=e[i++],r|=127&n,(128&n)==0||(n=e[i++],r|=(127&n)<<7,(128&n)==0)||(n=e[i++],r|=(127&n)<<14,(128&n)==0)||(n=e[i++],r|=(127&n)<<21,(128&n)==0)||(n=e[i++],r+=268435456*(127&n),(128&n)==0)||(n=e[i++],r+=34359738368*(127&n),(128&n)==0)||(n=e[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=e[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=e[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=e[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;i!==this._end&&(n=e[i],(128&n)!=0);)++i,r+=(127&n)*o,o*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*o}return this._pos=i,s?-(r+1)/2:r/2}_getLength(){if(this._dataType!==lh.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>fje){const o=e.subarray(i,r);return pje.decode(o)}let n="",s="";for(let o=i;o<r;++o){const a=e[o];128&a?s+="%"+a.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}};x3.pool=new ru(x3,void 0,t=>{t._data=null,t._dataView=null});let hl=class jE{constructor(e=[],i=[],r=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(e){const[i,r,n,s]=e,o=n-i,a=s-r;return new jE([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)e(this.coords[2*(s+i)],this.coords[2*(s+i)+1]);i+=n}}clone(e){return e?(e.set(this.coords),new jE(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new jE(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},np=class use{constructor(e=null,i={},r,n){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new use(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function mje(t){return!(t.geometry==null||!t.geometry.coords||!t.geometry.coords.length)}let wZe=class extends np{},cse=class dse{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new dse;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const hse=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let SZe=class{constructor(e){this._options=e,this.geometryTypes=hse,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new cse}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||Si(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=S0(this._options.sourceSpatialReference)/S0(e.spatialReference);if(i!==1)for(const r of e.features){if(!mje(r))continue;const n=r.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new np}createSpatialReference(){return{wkid:0}}createGeometry(){return new hl}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new hl}};const FG=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],DG=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],NG=["upperLeft","lowerLeft"];function jG(t){return t>=FG.length?null:FG[t]}function yje(t){return t>=DG.length?null:DG[t]}function VG(t){return t>=NG.length?null:NG[t]}function zG(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function gje(t,e,i){const n=t.asUnsafe(),s=e.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const o=n.getUInt32(),a=n.pos()+o;let l=0;for(;n.pos()<a;)e.addCoordinatePoint(s,n.getSInt64(),l++);break}default:n.skip()}return s}function vje(t,e,i){const s=t.asUnsafe(),o=e.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),c=s.pos()+l;let h=0;for(;s.pos()<c;)e.addLength(o,s.getUInt32(),h++);break}case 3:{const l=s.getUInt32(),c=s.pos()+l;let h=0;for(e.allocateCoordinates(o);s.pos()<c;)e.addCoordinate(o,s.getSInt64(),h),h++,h===a&&(h=0);break}default:s.skip()}return o}function _je(t){const n=t.asUnsafe(),s=new hl;let o="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const a=n.getUInt32(),l=n.pos()+a;for(;n.pos()<l;)s.lengths.push(n.getUInt32());break}case 3:{const a=n.getUInt32(),l=n.pos()+a;for(;n.pos()<l;)s.coords.push(n.getSInt64());break}case 1:o=hse[n.getEnum()];break;default:n.skip()}return{queryGeometry:s,queryGeometryType:o}}function wje(t){const h=t.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function bje(t){const a=t.asUnsafe(),l={type:jG(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=jG(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=yje(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function Sje(t){const r={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function xje(t,e,i,r){const a=e.createFeature(i);let l=0;for(;t.next();)switch(t.tag()){case 1:{const c=r[l++].name;a.attributes[c]=t.processMessage(wje);break}case 2:a.geometry=t.processMessageWithArgs(vje,e,i);break;case 4:a.centroid=t.processMessageWithArgs(gje,e,i);break;default:t.skip()}return a}function $je(t){const s=[1,1,1,1],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function Eje(t){const s=[0,0,0,0],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function Mje(t){const n={originPosition:VG(0)},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.originPosition=VG(s.getEnum());break;case 2:n.scale=s.processMessage($je);break;case 3:n.translate=s.processMessage(Eje);break;default:s.skip()}return n}function Tje(t){const n={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.shapeAreaFieldName=s.getString();break;case 2:n.shapeLengthFieldName=s.getString();break;case 3:n.units=s.getString();break;default:s.skip()}return n}function Ije(t,e){const a=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:a.wkid=t.getUInt32();break;case 5:a.wkt=t.getString();break;case 2:a.latestWkid=t.getUInt32();break;case 3:a.vcsWkid=t.getUInt32();break;case 4:a.latestVcsWkid=t.getUInt32();break;default:t.skip()}return a}function kje(t,e){const v=e.createFeatureResult(),_=t.asUnsafe();v.geometryType=zG(e,0);let w=!1;for(;_.next();)switch(_.tag()){case 1:v.objectIdFieldName=_.getString();break;case 3:v.globalIdFieldName=_.getString();break;case 4:v.geohashFieldName=_.getString();break;case 5:v.geometryProperties=_.processMessage(Tje);break;case 7:v.geometryType=zG(e,_.getEnum());break;case 8:v.spatialReference=_.processMessageWithArgs(Ije,e);break;case 10:v.hasZ=_.getBool();break;case 11:v.hasM=_.getBool();break;case 12:v.transform=_.processMessage(Mje);break;case 9:{const S=_.getBool();v.exceededTransferLimit=S;break}case 13:e.addField(v,_.processMessage(bje));break;case 15:w||(e.prepareFeatures(v),w=!0),e.addFeature(v,_.processMessageWithArgs(xje,e,v,v.fields));break;case 2:v.uniqueIdField=_.processMessage(Sje);break;default:_.skip()}return e.finishFeatureResult(v),v}function Cje(t,e){const n={};let s=null;for(;t.next();)switch(t.tag()){case 4:s=t.processMessageWithArgs(_je);break;case 1:n.featureResult=t.processMessageWithArgs(kje,e);break;default:t.skip()}return s!=null&&n.featureResult&&e.addQueryGeometry(n,s),n}function Pje(t,e){try{const r=new x3(new Uint8Array(t),new DataView(t)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(Cje,e):r.skip();return n}catch(i){throw new C("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Aje(t,e){const i=Pje(t,e),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,s=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=n,r.queryGeometryType=s),r}const UG="Layer does not support extent calculation.";function Oje(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function Lje(t,e){const i=t.geometry,r=t.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let s,o,a;if(i!=null&&(o=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=Q0(i),n.geometry=Oje(i,t.compactGeometryEnabled),n.inSR=a),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=r.outSR.wkid||JSON.stringify(r.outSR),s=t.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,s=o),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(n.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&o!=null&&t.quantizationParameters!=null&&t.quantizationParameters.extent!=null&&o.equals(t.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const l=r.timeExtent,{start:c,end:h}=l;c==null&&h==null||(n.time=c===h?c:`${c??"null"},${h??"null"}`),delete r.timeExtent}return t.defaultSpatialReferenceEnabled&&o!=null&&s!=null&&o.equals(s)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function Rje(t,e,i,r){const n=e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:await hS(t,e,"json",r);return fF(e,i,n.data),n}async function $Ze(t,e,i,r){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await Fje(t,e,r),s=n;return s.data=Aje(n.data,i),s}function Fje(t,e,i){return hS(t,e,"pbf",i)}function EZe(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):hS(t,e,"json",i,{returnIdsOnly:!0})}function MZe(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):hS(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function TZe(t,e,i){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await hS(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(UG);if(n.hasOwnProperty("count"))throw new Error(UG);return r}async function hS(t,e,i,r={},n={}){const s=typeof t=="string"?_r(t):t,o=e.geometry?[e.geometry]:[];r.responseType=i==="pbf"?"array-buffer":"json";const a=await ase(o,null,r),l=a&&a[0];l!=null&&((e=e.clone()).geometry=l);const c=lse({...s.query,f:i,...n,...Lje(e,n)});return tt(Pm(s.path,Dje(e,n)?"query3d":"query"),{...r,query:{...c,...r.query}})}function Dje(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}async function hP(t,e,i){const r=await Nje(t,e,i);return pI.fromJSON(r)}async function Nje(t,e,i){const r=xv(t),n={...i},s=tu.from(e),{data:o}=await Rje(r,s,s.sourceSpatialReference,n);return o}function Qr(t,e){return t?e?4:3:e?3:2}const $v=U.getLogger("esri.layers.graphics.featureConversionUtils"),pse={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},jje=(t,e,i,r,n,s)=>{t[i]=n,t[i+1]=s},BG=(t,e,i,r,n,s)=>{t[i]=n,t[i+1]=s,t[i+2]=e[r+2]},Vje=(t,e,i,r,n,s)=>{t[i]=n,t[i+1]=s,t[i+2]=e[r+3]},zje=(t,e,i,r,n,s)=>{t[i]=n,t[i+1]=s,t[i+2]=e[r+2],t[i+3]=e[r+3]};function W5(t,e,i,r){if(t){if(i)return e&&r?zje:BG;if(e&&r)return Vje}else if(e&&r)return BG;return jje}function pP({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function fP({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function mP({scale:t,translate:e},i,r){return i*t[r]+e[r]}function IZe(t,e,i){return t?e?i?J5(t):Z5(t):i?Y5(t):AI(t):null}function AI(t){const e=t.coords;return{x:e[0],y:e[1]}}function fse(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function Z5(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function Uje(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function Y5(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function Bje(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function J5(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function Gje(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function Hje(t,e,i,r){let n=AI;i&&r?n=J5:i?n=Z5:r&&(n=Y5);for(const s of e){const{geometry:o,attributes:a}=s,l=o!=null?n(o):null;t.push({attributes:a,geometry:l})}return t}function K5(t,e){return t&&e?Gje:t?Uje:e?Bje:fse}function mse(t,e,i,r,n){const s=K5(i,r);for(const{geometry:o,attributes:a}of e){const l=o!=null?s(new hl,o):null;t.push(new np(l,a,null,n?a[n]:void 0))}return t}function kZe(t,e,i=K5(e.z!=null,e.m!=null)){return i(t,e)}function qje(t,e,i,r){for(const{geometry:n,attributes:s}of e)t.push({attributes:s,geometry:n!=null?yse(n,i,r):null});return t}function yse(t,e,i){if(t==null)return null;const r=Qr(e,i),n=[];for(let s=0;s<t.coords.length;s+=r){const o=[];for(let a=0;a<r;a++)o.push(t.coords[s+a]);n.push(o)}return e?i?{points:n,hasZ:e,hasM:i}:{points:n,hasZ:e}:i?{points:n,hasM:i}:{points:n}}function gse(t,e,i,r,n){const s=Qr(i,r);for(const{geometry:o,attributes:a}of e){const l=o!=null?vse(new hl,o,s):null;t.push(new np(l,a,null,n?a[n]:void 0))}return t}function vse(t,e,i=Qr(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let n=0;for(const s of e.points)for(let o=0;o<i;o++)r[n++]=s[o];return t}function Wje(t,e,i,r){for(const{geometry:n,attributes:s}of e)t.push({attributes:s,geometry:n!=null?_se(n,i,r):null});return t}function _se(t,e,i){if(!t)return null;const r=Qr(e,i),{coords:n,lengths:s}=t,o=[];let a=0;for(const l of s){const c=[];for(let h=0;h<l;h++){const p=[];for(let f=0;f<r;f++)p.push(n[a++]);c.push(p)}o.push(c)}return e?i?{paths:o,hasZ:e,hasM:i}:{paths:o,hasZ:e}:i?{paths:o,hasM:i}:{paths:o}}function wse(t,e,i,r,n){const s=Qr(i,r);for(const{geometry:o,attributes:a}of e){const l=o!=null?bse(new hl,o,s):null;t.push(new np(l,a,null,n?a[n]:void 0))}return t}function bse(t,e,i=Qr(e.hasZ,e.hasM)){const{lengths:r,coords:n}=t;let s=0;for(const o of e.paths){for(const a of o)for(let l=0;l<i;l++)n[s++]=a[l];r.push(o.length)}return t}function Zje(t,e,i,r){for(const{geometry:n,attributes:s,centroid:o}of e){const a=n!=null?Sse(n,i,r):null;if(o!=null){const l=AI(o);t.push({attributes:s,centroid:l,geometry:a})}else t.push({attributes:s,geometry:a})}return t}function Sse(t,e,i){if(!t)return null;const r=Qr(e,i),{coords:n,lengths:s}=t,o=[];let a=0;for(const l of s){const c=[];for(let h=0;h<l;h++){const p=[];for(let f=0;f<r;f++)p.push(n[a++]);c.push(p)}o.push(c)}return e?i?{rings:o,hasZ:e,hasM:i}:{rings:o,hasZ:e}:i?{rings:o,hasM:i}:{rings:o}}function xse(t,e,i,r,n){for(const{geometry:s,centroid:o,attributes:a}of e){const l=s!=null?$se(new hl,s,i,r):null,c=n?a[n]:void 0;o!=null?t.push(new np(l,a,fse(new hl,o),c)):t.push(new np(l,a,null,c))}return t}function $se(t,e,i=e.hasZ,r=e.hasM){return Yje(t,e.rings,i,r)}function Yje(t,e,i,r){const n=Qr(i,r),{lengths:s,coords:o}=t;let a=0;Ec(t);for(const l of e){for(const c of l)for(let h=0;h<n;h++)o[a++]=c[h];s.push(l.length)}return t}const u0=[],ab=[];function CZe(t,e,i,r,n){u0[0]=t;const[s]=Ese(ab,u0,e,i,r,n);return pl(u0),pl(ab),s}function Ese(t,e,i,r,n,s){if(pl(t),!i){for(const o of e){const a=s?o.attributes[s]:void 0;t.push(new np(null,o.attributes,null,a))}return t}switch(i){case"esriGeometryPoint":return mse(t,e,r,n,s);case"esriGeometryMultipoint":return gse(t,e,r,n,s);case"esriGeometryPolyline":return wse(t,e,r,n,s);case"esriGeometryPolygon":return xse(t,e,r,n,s);default:$v.error("convertToFeatureSet:unknown-geometry",new C(`Unable to parse unknown geometry type '${i}'`)),pl(t)}return t}function PZe(t,e,i,r,n,s){const o=t.length;switch(i){case"esriGeometryPoint":mse(t,e,r,n,s);break;case"esriGeometryMultipoint":gse(t,e,r,n,s);break;case"esriGeometryPolyline":wse(t,e,r,n,s);break;case"esriGeometryPolygon":xse(t,e,r,n,s);break;default:$v.error("convertToFeatureSet:unknown-geometry",new C(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<e.length;a++)t[a+o].geometryType=i,t[a+o].insertAfter=e[a].insertAfter,t[a+o].groupId=e[a].groupId;return t}function AZe(t,e,i,r){ab[0]=t,Mse(u0,ab,e,i,r);const n=u0[0];return pl(u0),pl(ab),n}function OZe(t,e,i){if(t==null)return null;const r=new hl;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),rN(t)?K5(e??t.z!=null,i??t.m!=null)(r,t):rm(t)?$se(r,t,e,i):nN(t)?bse(r,t,Qr(e,i)):iN(t)?vse(r,t,Qr(e,i)):void $v.error("convertFromGeometry:unknown-geometry",new C(`Unable to parse unknown geometry type '${t}'`))}function Jje(t,e,i,r){const n=t&&("coords"in t?t:t.geometry);if(n==null)return null;switch(e){case"esriGeometryPoint":{let s=AI;return i&&r?s=J5:i?s=Z5:r&&(s=Y5),s(n)}case"esriGeometryMultipoint":return yse(n,i,r);case"esriGeometryPolyline":return _se(n,i,r);case"esriGeometryPolygon":return Sse(n,i,r);default:return $v.error("convertToGeometry:unknown-geometry",new C(`Unable to parse unknown geometry type '${e}'`)),null}}function Kje(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function Mse(t,e,i,r,n){if(pl(t),i==null)return Kje(t,e);switch(i){case"esriGeometryPoint":return Hje(t,e,r,n);case"esriGeometryMultipoint":return qje(t,e,r,n);case"esriGeometryPolyline":return Wje(t,e,r,n);case"esriGeometryPolygon":return Zje(t,e,r,n);default:$v.error("convertToFeatureSet:unknown-geometry",new C(`Unable to parse unknown geometry type '${i}'`))}return t}function LZe(t){const{objectIdFieldName:e,spatialReference:i,transform:r,fields:n,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:c,uniqueIdField:h,queryGeometry:p,queryGeometryType:f}=t,y={features:Mse([],a,l,o,s),fields:n,geometryType:l,objectIdFieldName:e,spatialReference:i,uniqueIdField:h,queryGeometry:Jje(p,f,!1,!1)};return r&&(y.transform=r),c&&(y.exceededTransferLimit=c),s&&(y.hasM=s),o&&(y.hasZ=o),y}function RZe(t,e){const i=new cse,{hasM:r,hasZ:n,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:c,transform:h,fields:p}=t;return p&&(i.fields=p),i.geometryType=l??null,i.objectIdFieldName=o??e??null,i.spatialReference=a??null,i.objectIdFieldName?(s&&Ese(i.features,s,l,n,r,i.objectIdFieldName),c&&(i.exceededTransferLimit=c),r&&(i.hasM=r),n&&(i.hasZ=n),h&&(i.transform=h),i):($v.error(new C("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function FZe(t){const{transform:e,features:i,hasM:r,hasZ:n}=t;if(!e)return t;for(const s of i)s.geometry!=null&&HG(s.geometry,s.geometry,r,n,e),s.centroid!=null&&HG(s.centroid,s.centroid,r,n,e);return t.transform=null,t}function DZe(t,e){const{geometryType:i,features:r,hasM:n,hasZ:s}=e;if(!t)return e;for(let o=0;o<r.length;o++){const a=r[o],l=a.weakClone();l.geometry=new hl,GG(l.geometry,a.geometry,n,s,i,t),a.centroid&&(l.centroid=new hl,GG(l.centroid,a.centroid,n,s,"esriGeometryPoint",t)),r[o]=l}return e.transform=t,e}function GG(t,e,i,r,n,s,o=i,a=r){if(Ec(t),e==null||!e.coords.length)return null;const l=pse[n],{coords:c,lengths:h}=e,p=Qr(i,r),f=Qr(i&&o,r&&a),y=W5(i,r,o,a);if(!h.length)return y(t.coords,c,0,0,pP(s,c[0]),fP(s,c[1])),Ec(t,p,0),t;let g,v,_,w,S=0,b=0,$=b;for(const T of h){if(T<l)continue;let I=0;b=$,_=g=pP(s,c[S]),w=v=fP(s,c[S+1]),y(t.coords,c,b,S,_,w),I++,S+=p,b+=f;for(let A=1;A<T;A++,S+=p)_=pP(s,c[S]),w=fP(s,c[S+1]),_===g&&w===v||(y(t.coords,c,b,S,_-g,w-v),b+=f,I++,g=_,v=w);I>=l&&(t.lengths.push(I),$=b)}return pl(t.coords,$),t.coords.length?t:null}function NZe(t,e,i,r,n,s,o=i,a=r){if(Ec(t),!e||!e.coords.length)return null;const l=pse[n],{coords:c,lengths:h}=e,p=Qr(i,r),f=Qr(i&&o,r&&a),y=W5(i,r,o,a);if(!h.length)return y(t.coords,c,0,0,c[0],c[1]),Ec(t,p,0),t;let g=0;const v=s*s;for(const _ of h){if(_<l){g+=_*p;continue}const w=t.coords.length/f,S=g,b=g+(_-1)*p;y(t.coords,c,t.coords.length,S,c[S],c[S+1]),$3(t.coords,c,p,v,y,S,b),y(t.coords,c,t.coords.length,b,c[b],c[b+1]);const $=t.coords.length/f-w;$>=l?t.lengths.push($):pl(t.coords,w*f),g+=_*p}return t.coords.length?t:null}function Qje(t,e,i,r){const n=t[e],s=t[e+1],o=t[i],a=t[i+1],l=t[r],c=t[r+1];let h=o,p=a,f=l-h,y=c-p;if(f!==0||y!==0){const g=((n-h)*f+(s-p)*y)/(f*f+y*y);g>1?(h=l,p=c):g>0&&(h+=f*g,p+=y*g)}return f=n-h,y=s-p,f*f+y*y}function $3(t,e,i,r,n,s,o){let a,l=r,c=0;for(let h=s+i;h<o;h+=i)a=Qje(e,h,s,o),a>l&&(c=h,l=a);l>r&&(c-s>i&&$3(t,e,i,r,n,s,c),n(t,e,t.length,c,e[c],e[c+1]),o-c>i&&$3(t,e,i,r,n,c,o))}function jZe(t,e,i,r){if(e==null||!e.coords||!e.coords.length)return null;const n=Qr(i,r);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(e&&e.coords){const c=e.coords;for(let h=0;h<c.length;h+=n){const p=c[h],f=c[h+1];s=Math.min(s,p),a=Math.max(a,p),o=Math.min(o,f),l=Math.max(l,f)}}return FO(t)?Qge(t,s,o,a,l):ofe(s,o,a,l,t),t}function HG(t,e,i,r,n){const{coords:s,lengths:o}=e,a=Qr(i,r);if(!s.length)return t!==e&&Ec(t),t;W0(n);const{originPosition:l,scale:c,translate:h}=n,p=e5e;p.originPosition=l;const f=p.scale;f[0]=c[0]??1,f[1]=-(c[1]??1),f[2]=c[2]??1,f[3]=c[3]??1;const y=p.translate;if(y[0]=h[0]??0,y[1]=h[1]??0,y[2]=h[2]??0,y[3]=h[3]??0,!o.length){for(let v=0;v<a;++v)t.coords[v]=mP(p,s[v],v);return t!==e&&Ec(t,a,0),t}let g=0;for(let v=0;v<o.length;v++){const _=o[v];t.lengths[v]=_;for(let b=0;b<a;++b)t.coords[g+b]=mP(p,s[g+b],b);let w=t.coords[g],S=t.coords[g+1];g+=a;for(let b=1;b<_;b++,g+=a){w+=s[g]*f[0],S+=s[g+1]*f[1],t.coords[g]=w,t.coords[g+1]=S;for(let $=2;$<a;++$)t.coords[g+$]=mP(p,s[g+$],$)}}return t!==e&&Ec(t,s.length,o.length),t}function VZe(t,e,i,r,n,s){if(Ec(t),t.lengths.push(...e.lengths),i===n&&r===s)for(let o=0;o<e.coords.length;o++)t.coords.push(e.coords[o]);else{const o=Qr(i,r),a=W5(i,r,n,s),l=e.coords;for(let c=0;c<l.length;c+=o)a(t.coords,l,t.coords.length,c,l[c],l[c+1])}return t}function Xje(t,e,i,r){let n=0,s=t[r*e],o=t[r*(e+1)];for(let a=1;a<i;a++){const l=s+t[r*(e+a)],c=o+t[r*(e+a)+1],h=(l-s)*(c+o);s=l,o=c,n+=h}return .5*n}function zZe(t,e){const{coords:i,lengths:r}=t;let n=0,s=0;for(let o=0;o<r.length;o++){const a=r[o];s+=Xje(i,n,a,e),n+=a}return Math.abs(s)}function Ec(t,e=0,i=0){pl(t.lengths,i),pl(t.coords,e)}function pl(t,e=0){t.length!==e&&(t.length=e)}const e5e={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]},t5e="esri.widgets.Feature.support.relatedFeatureUtils",qG=U.getLogger(t5e),WG=new Map;function VE(t){if(!yc(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function i5e(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some(n=>n.id===parseInt(t,10)&&(i=n,!0)),i}function r5e({originRelationship:t,relationships:e,layerId:i}){let r=null;return e&&e.some(n=>(`${n.relatedTableId}`===i&&n.id===(t==null?void 0:t.id)&&(r=n),!!r)),r}function n5e(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function s5e(t,e){const i=i5e(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function o5e(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,n=i&&i.value;e.relatedFeatures=n?n.features:[];const s=r&&r.value;e.relatedStatsFeatures=s?s.features:[]}function a5e(t,e,i,r){var s;const n=new z0;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[t.attributes[i.objectIdField]],((s=i.queryRelatedFeatures)==null?void 0:s.call(i,n,r))??Promise.resolve({})}function l5e(t,e,i){let r=0;const n=[];for(;r<e.length;)n.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return n.join(" OR ")}async function u5e(t,e,i,r){const n=i.layerId.toString(),{layerInfo:s,relation:o,relatedFields:a,outStatistics:l,url:c,sourceSpatialReference:h}=e;if(!s||!o)return null;const p=r5e({originRelationship:o,relationships:s.relationships,layerId:n});if(p!=null&&p.relationshipTableId&&p.keyFieldInRelationshipTable){const y=(await a5e(t,p,i,r))[t.attributes[i.objectIdField]];if(!y)return null;const g=y.features.map(v=>v.attributes[s.objectIdField]);if(l!=null&&l.length&&s.supportsStatistics){const v=new tu;v.where=l5e(s.objectIdField,g,1e3),v.outFields=a,v.outStatistics=l,v.sourceSpatialReference=h;const _={features:Promise.resolve(y),statsFeatures:hP(c,v)};return Di(_)}}const f=p==null?void 0:p.keyField;if(f){const y=nm(f5e(s.fields,f)),g=n5e(t.attributes,o.keyField),v=y?`${f}=${g}`:`${f}='${g}'`,_=hP(c,new tu({where:v,outFields:e.relatedFields,sourceSpatialReference:h}),r),w=e.outStatistics&&e.outStatistics.length>0&&s.supportsStatistics?hP(c,new tu({where:v,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:h}),r):null,S={features:_};return w&&(S.statsFeatures=w),Di(S)}return null}function c5e(t,e){return tt(t,{query:{f:"json"},signal:e&&e.signal})}function d5e({relatedInfos:t,layer:e},i){const r={};return t.forEach((n,s)=>{const{relation:o}=n;if(!o){const p=new C("relation-required","A relation is required on a layer to retrieve related records.");throw qG.error(p),p}const{relatedTableId:a}=o;if(typeof a!="number"){const p=new C("A related table ID is required on a layer to retrieve related records.");throw qG.error(p),p}const l=`${e.url}/${a}`,c=WG.get(l),h=c??c5e(l);c||WG.set(l,h),r[s]=h}),xm(Di(r),i)}function h5e({graphic:t,relatedInfos:e,layer:i},r){const n={};return e.forEach((s,o)=>{s.layerInfo&&(n[o]=u5e(t,s,i,r))}),Di(n)}function p5e({relatedInfo:t,fieldName:e,fieldInfo:i}){var r,n;if((r=t.relatedFields)==null||r.push(e),i.statisticType){const s=new tie({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(n=t.outStatistics)==null||n.push(s)}}function f5e(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const ZG={chartAnimation:!0};let Ji=class extends X{constructor(e){super(e),this.abilities={...ZG},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...ZG,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},s=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(a=>{const l=a==null?void 0:a.clone();if(!l)return null;if(l.title=Zf({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.title}),l.caption=Zf({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.caption}),l.altText=Zf({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.altText}),l.type==="image"){const{value:c}=l;return this._setImageValue({value:c,formattedAttributes:n,layer:i}),l.value.sourceURL?l:void 0}if(l.type==="pie-chart"||l.type==="line-chart"||l.type==="column-chart"||l.type==="bar-chart"){const{value:c}=l;return this._setChartValue({value:c,chartType:l.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:s}),l}return null}).filter(Pi))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:s}=e,{linkURL:o,sourceURL:a}=r;if(a){const l=yR(a,s);r.sourceURL=mR({formattedAttributes:n,template:l,fieldInfoMap:i})}if(o){const l=yR(o,s);r.linkURL=mR({formattedAttributes:n,template:l,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:n,chartType:s,layer:o,expressionAttributes:a}=e,{popupTemplate:l,relatedInfos:c}=this,{fields:h,normalizeField:p}=i,f=o;if(i.fields=lIe(h,f),p&&(i.normalizeField=u1(p,f)),!h.some(g=>!!(n[g]!=null||yc(g)&&(c!=null&&c.size))))return;const y=(l==null?void 0:l.fieldInfos)??[];h.forEach(g=>{if(yc(g))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:y,fieldName:g,formattedAttributes:n,chartType:s,value:i})]);const v=this._getChartOption({value:i,attributes:r,chartType:s,formattedAttributes:n,expressionAttributes:a,fieldName:g,fieldInfos:y});i.series.push(v)})}_getRelatedChartInfos(e){var y;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:s,value:o}=e,a=[],l=VE(r),c=l&&((y=this.relatedInfos)==null?void 0:y.get(l.layerId.toString()));if(!c)return a;const{relatedFeatures:h,relation:p}=c;if(!p||!h)return a;const{cardinality:f}=p;return h.forEach(g=>{const{attributes:v}=g;v&&Object.keys(v).forEach(_=>{_===l.fieldName&&a.push(this._getChartOption({value:o,attributes:v,formattedAttributes:n,fieldName:r,chartType:s,relatedFieldName:_,hasMultipleRelatedFeatures:(h==null?void 0:h.length)>1,fieldInfos:i}))})}),f==="one-to-many"||f==="many-to-many"?a:[a[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var I;const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:s,fieldName:o,relatedFieldName:a,fieldInfos:l,chartType:c,hasMultipleRelatedFeatures:h}=e,p=this.layer,f=this.fieldInfoMap??new Map,{normalizeField:y,tooltipField:g}=i,v=y?yc(y)?r[VE(y).fieldName]:r[y]:null,_=Nj(o)&&s&&s[o]!==void 0?s[o]:a&&r[a]!==void 0?r[a]:r[o]!==void 0?r[o]:n[o],w=new AY({fieldName:o,value:_===void 0?null:_&&v?_/v:_});if(yc(o)){const A=f.get(o.toLowerCase()),L=g&&f.get(g.toLowerCase()),z=(A==null?void 0:A.fieldName)??o,j=h&&g?VE(g).fieldName:(L==null?void 0:L.fieldName)??g,H=h&&j?r[j]:n[j]??(A==null?void 0:A.label)??(A==null?void 0:A.fieldName)??a,J=h&&a?r[a]:n[z];return w.tooltip=this._getTooltip({label:H,value:J,chartType:c}),w}const S=See(l,o),b=u1(o,p),$=g&&n[g]!==void 0?n[g]:wee(S||new D1({fieldName:b}),(I=this.popupTemplate)==null?void 0:I.expressionInfos),T=n[b];return w.tooltip=this._getTooltip({label:$,value:T,chartType:c}),w}};u([d()],Ji.prototype,"abilities",void 0),u([Re("abilities")],Ji.prototype,"castAbilities",null),u([d()],Ji.prototype,"activeMediaInfoIndex",void 0),u([d({readOnly:!0})],Ji.prototype,"activeMediaInfo",null),u([d()],Ji.prototype,"attributes",void 0),u([d()],Ji.prototype,"description",void 0),u([d()],Ji.prototype,"fieldInfoMap",void 0),u([d()],Ji.prototype,"formattedAttributes",void 0),u([d()],Ji.prototype,"expressionAttributes",void 0),u([d({readOnly:!0})],Ji.prototype,"formattedMediaInfos",null),u([d()],Ji.prototype,"isAggregate",void 0),u([d()],Ji.prototype,"layer",void 0),u([d({readOnly:!0})],Ji.prototype,"formattedMediaInfoCount",null),u([d()],Ji.prototype,"mediaInfos",void 0),u([d()],Ji.prototype,"popupTemplate",void 0),u([d()],Ji.prototype,"relatedInfos",void 0),u([d()],Ji.prototype,"title",void 0),Ji=u([E("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Ji);const Jf=Ji;function Q5(t){return Number(t)!==t}function m5e(t){return{}.toString.call(t)}function Vs(t){if(t!=null&&!ke(t)){let e=Number(t);return Q5(e)&&B0(t)&&t!=""?Vs(t.replace(/[^0-9.\-]+/g,"")):e}return t}function y5e(t){if(E3(t))return new Date(t);if(ke(t))return new Date(t);{let e=Number(t);return ke(e)?new Date(e):new Date(t)}}function g5e(t){if(Q5(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(t===0&&1/t==-1/0)return"-0";let e=t<0;t=Math.abs(t);let i,r=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t),n=r[1],s=r[2]||"";if(r[3]===void 0)i=s===""?n:n+"."+s;else{let o=+r[3];if(t<1)i="0."+YG("0",o-1)+n+s;else{let a=o-s.length;i=a===0?n+s:a<0?n+s.slice(0,a)+"."+s.slice(a):n+s+YG("0",a)}}return e?"-"+i:i}function YG(t,e){return new Array(e+1).join(t)}function E3(t){return m5e(t)==="[object Date]"}function B0(t){return typeof t=="string"}function ke(t){return typeof t=="number"&&Number(t)==t}function OI(t){return typeof t=="object"&&t!==null}const sp="__§§§__",Fg="__§§§§__";function VM(t,e){const i=t.length;for(let r=0;r<i;++r)if(t[r]===e)return r;return-1}function v5e(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r]))return!0;return!1}function _5e(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=e(t[n],n);return r}function Y(t,e){const i=t.length;for(let r=0;r<i;++r)e(t[r],r)}function lb(t,e){let i=t.length;for(;i>0;)--i,e(t[i],i)}function Tse(t,e){const i=t.length;for(let r=0;r<i&&e(t[r],r);++r);}function mh(t,e){let i=!1,r=0;for(;;){if(r=t.indexOf(e,r),r===-1)return i;i=!0,t.splice(r,1)}}function Hs(t,e){let i=t.indexOf(e);return i!==-1&&(t.splice(i,1),!0)}function v1(t,e){t.indexOf(e)===-1&&t.push(e)}function w5e(t){const e=t.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=t[r];return i}function yP(t,e,i){t.splice(e,0,i)}function JG(t,e){t.splice(e,1)}function Ise(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r],r))return r;return-1}function b5e(t,e){let i=t.length;for(;i>0;)if(--i,e(t[i],i))return i;return-1}function S5e(t,e){const i=Ise(t,e);if(i!==-1)return t[i]}function x5e(t,e){const i=b5e(t,e);if(i!==-1)return t[i]}function $5e(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const s=i+r>>1,o=e(t[s]);o<0?i=s+1:o===0?(n=!0,i=s+1):r=s}return{found:n,index:n?i-1:i}}function E5e(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const s=i+r>>1,o=e(t[s]);o<0?i=s+1:(o===0&&(n=!0),r=s)}return{found:n,index:i}}function LI(t,e){let i=t.length;for(;i>0;)--i,e(t[i])||t.splice(i,1)}let X5=class{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},gr=class{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},M5e=class extends X5{constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){Y(this._disposers,e=>{e.dispose()})}},zs=class extends X5{constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){Y(this._disposers,e=>{e.dispose()})}},kse=class extends gr{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new gr(()=>{--this._counter,this._counter===0&&this.dispose()})}},Ev=class{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{Y(e,i=>{i.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return this._listeners.length!==0}hasListenersByType(e){return v5e(this._listeners,i=>(i.type===null||i.type===e)&&!i.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,i=1/0){this._disabled[e]=i}_removeListener(e){if(this._iterating===0){const i=this._listeners.indexOf(e);if(i===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(i,1)}else this._killed.push(e)}_removeExistingListener(e,i,r,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(s=>{s.once!==e||s.type!==i||r!==void 0&&s.callback!==r||s.context!==n||s.disposer.dispose()})}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&this._disabled[e]===void 0}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(i=>{i.type===e&&i.disposer.dispose()})}has(e,i,r){return Ise(this._listeners,n=>n.once!==!0&&n.type===e&&(i===void 0||n.callback===i)&&n.context===r)!==-1}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");const i=this._disabled[e];return ke(i)?(i<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{Y(this._listeners,e)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(Y(this._killed,i=>{this._removeListener(i)}),this._killed.length=0)}}dispatch(e,i){this._shouldDispatch(e)&&this._eachListener(r=>{r.killed||r.type!==null&&r.type!==e||r.dispatch(e,i)})}_on(e,i,r,n,s,o){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,i,r,n);const a={type:i,callback:r,context:n,shouldClone:s,dispatch:o,killed:!1,once:e,disposer:new gr(()=>{a.killed=!0,this._removeListener(a)})};return this._listeners.push(a),a}onAll(e,i,r=!0){return this._on(!1,null,e,i,r,(n,s)=>e.call(i,s)).disposer}on(e,i,r,n=!0){return this._on(!1,e,i,r,n,(s,o)=>i.call(r,o)).disposer}once(e,i,r,n=!0){const s=this._on(!0,e,i,r,n,(o,a)=>{s.disposer.dispose(),i.call(r,a)});return s.disposer}off(e,i,r){this._removeExistingListener(!1,e,i,r)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const i=[];return Y(e._listeners,r=>{!r.killed&&r.shouldClone&&(r.type===null?i.push(this.onAll(r.callback,r.context)):r.once?i.push(this.once(r.type,r.callback,r.context)):i.push(this.on(r.type,r.callback,r.context)))}),new zs(i)}};function c_(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}let Cse=class{constructor(e=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Ev}),this._values=e}get values(){return this._values}contains(e){return this._values.indexOf(e)!==-1}removeValue(e){let i=0,r=this._values.length;for(;i<r;)this._values[i]===e?(this.removeIndex(i),--r):++i}indexOf(e){return VM(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}_onInsertIndex(e,i){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:i})}_onSetIndex(e,i,r){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:i,newValue:r})}_onRemoveIndex(e,i){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:i})}_onMoveIndex(e,i,r){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:i,value:r})}_onClear(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}setIndex(e,i){c_(e,this._values.length);const r=this._values[e];return r!==i&&(this._values[e]=i,this._onSetIndex(e,r,i)),r}insertIndex(e,i){return c_(e,this._values.length+1),yP(this._values,e,i),this._onInsertIndex(e,i),i}swap(e,i){const r=this._values.length;if(c_(e,r),c_(i,r),e!==i){const n=this._values[e],s=this._values[i];this._values[e]=s,this._onSetIndex(e,n,s),this._values[i]=n,this._onSetIndex(i,s,n)}}removeIndex(e){c_(e,this._values.length);const i=this._values[e];return JG(this._values,e),this._onRemoveIndex(e,i),i}moveValue(e,i){let r=this.indexOf(e);if(r!==-1)if(JG(this._values,r),i==null){const n=this._values.length;this._values.push(e),this._onMoveIndex(r,n,e)}else yP(this._values,i,e),this._onMoveIndex(r,i,e);else i==null?(this._values.push(e),this._onPush(e)):(yP(this._values,i,e),this._onInsertIndex(i,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){Y(e,i=>{this.push(i)})}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){const i=this._values;this._values=[],this._onClear(i),Y(e,r=>{this._values.push(r),this._onPush(r)})}clear(){this.setAll([])}*[Symbol.iterator](){const e=this._values.length;for(let i=0;i<e;++i)yield this._values[i]}each(e){Y(this._values,e)}eachReverse(e){lb(this._values,e)}},T5e=class extends Cse{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(e,i,r){this.autoDispose&&i.dispose(),super._onSetIndex(e,i,r)}_onRemoveIndex(e,i){this.autoDispose&&i.dispose(),super._onRemoveIndex(e,i)}_onClear(e){this.autoDispose&&Y(e,i=>{i.dispose()}),super._onClear(e)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&Y(this._values,e=>{e.dispose()}))}},KZe=class extends T5e{constructor(e,i){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=i}},I5e=class extends Cse{constructor(e){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll(i=>{if(i.type==="clear")Y(i.oldValues,r=>{this._onRemoved(r)});else if(i.type==="push")this._onInserted(i.newValue);else if(i.type==="setIndex")this._onRemoved(i.oldValue),this._onInserted(i.newValue,i.index);else if(i.type==="insertIndex")this._onInserted(i.newValue,i.index);else if(i.type==="removeIndex")this._onRemoved(i.oldValue);else{if(i.type!=="moveIndex")throw new Error("Unknown IListEvent type");this._onRemoved(i.value),this._onInserted(i.value,i.newIndex)}})}_onInserted(e,i){e._setParent(this._container,!0);const r=this._container._childrenDisplay;i===void 0?r.addChild(e._display):r.addChildAt(e._display,i)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),Y(this.values,e=>{e.dispose()}))}},Jt=class M3{constructor(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return this._value+"%"}interpolate(e,i){return e+this.value*(i-e)}static normalize(e,i,r){return e instanceof M3?e:new M3(i===r?0:100*Math.min(Math.max(1/(r-i)*(e-i),0),1))}};function pS(t){return new Jt(t)}pS(0);const Ii=pS(100),Ki=pS(50);function Vn(t){return Object.keys(t)}function k5e(t,e){return Vn(t).sort(e)}function C5e(t){return Object.assign({},t)}function pi(t,e){Vn(t).forEach(i=>{e(i,t[i])})}function P5e(t,e){for(let i in t)if(A5e(t,i)&&!e(i,t[i]))break}function A5e(t,e){return{}.hasOwnProperty.call(t,e)}function O5e(t){t.parentNode&&t.parentNode.removeChild(t)}function ir(t,e,i,r){return t.addEventListener(e,i,r||!1),new gr(()=>{t.removeEventListener(e,i,r||!1)})}function Pse(t){return ir(window,"resize",e=>{t()})}function mm(t){switch(t){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function gP(t){return t.pointerId||0}function L5e(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}}function R5e(t){t&&t.focus()}function T3(t){if(mm("pointerevents"))return t;if(mm("touchevents"))switch(t){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(mm("mouseevents"))switch(t){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return t}function KG(t){if(typeof Touch<"u"&&t instanceof Touch)return!0;if(typeof PointerEvent<"u"&&t instanceof PointerEvent&&t.pointerType!=null)switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(t.type!=null&&t.type.match(/^mouse/))return!1;return!0}function vP(t,e,i){t.style[e]=i}function F5e(t,e){return t.style[e]}function Ase(t){if(t.composedPath){const e=t.composedPath();return e.length===0?null:e[0]}return t.target}function D5e(t,e){let i=e;for(;;){if(t===i)return!0;if(i.parentNode===null){if(i.host==null)return!1;i=i.host}else i=i.parentNode}}function N5e(t,e){return t.target&&D5e(e.root.dom,t.target)}function ag(t,e){t.style.pointerEvents=e?"auto":"none"}function j5e(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document}function V5e(){return j5e()?1:void 0}function ld(t,e){return ke(t)?t:t!=null&&ke(t.value)&&ke(e)?e*t.value:0}function eYe(t){let e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function Ri(t,e=0,i="0"){return typeof t!="string"&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function z5e(t){return t.replace(/^[\s]*/,"")}function U5e(t){return t.replace(/[\s]*$/,"")}function zE(t){return z5e(U5e(t))}function B5e(t){if(t===void 0)return"string";let e=(t=(t=(t=t.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:t==="number"?"number":t==="date"?"date":t==="duration"?"duration":t.match(/[#0]/)?"number":t.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}function eV(t){return t.replace(/\/(date|number|duration)$/i,"")}function QG(t){return t&&t.replace(/<[^>]*>/g,"")}function XG(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function e9(t,e=!1){const i=new Date(t.getFullYear(),0,0),r=t.getTime()-i.getTime()+60*(i.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function zM(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-r);const n=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-n.getTime())/864e5+1)/7)}function G5e(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;return i.setUTCDate(i.getUTCDate()+4-r),new Date(Date.UTC(i.getUTCFullYear(),0,1)).getFullYear()}function H5e(t,e=!1){const i=zM(new Date(t.getFullYear(),t.getMonth(),1),e);let r=zM(t,e);return r==1&&(r=53),r-i+1}function q5e(t,e,i=1,r=!1){let n=new Date(e,0,4,0,0,0,0);return r&&n.setUTCFullYear(e),7*t+i-((n.getDay()||7)+3)}function Jx(t,e){return t>12?t-=12:t===0&&(t=12),e!=null?t+(e-1):t}function Kx(t,e=!1,i=!1,r=!1){if(r)return e?"Coordinated Universal Time":"UTC";let n=t.toLocaleString("UTC"),s=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(n.length);return i===!1&&(s=s.replace(/ (standard|daylight|summer|winter) /i," ")),s}function W5e(t){const e=new Date(Date.UTC(2012,0,1,0,0,0,0)),i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:t})).getTime()-i.getTime())/6e4*-1}function tYe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ose(t){let e,i,r,n=t.h,s=t.s,o=t.l;if(s==0)e=i=r=o;else{let a=function(h,p,f){return f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?h+6*(p-h)*f:f<.5?p:f<.6666666666666666?h+(p-h)*(.6666666666666666-f)*6:h},l=o<.5?o*(1+s):o+s-o*s,c=2*o-l;e=a(c,l,n+1/3),i=a(c,l,n),r=a(c,l,n-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*r)}}function Lse(t){let e=t.r/255,i=t.g/255,r=t.b/255,n=Math.max(e,i,r),s=Math.min(e,i,r),o=0,a=0,l=(n+s)/2;if(n===s)o=a=0;else{let c=n-s;switch(a=l>.5?c/(2-n-s):c/(n+s),n){case e:o=(i-r)/c+(i<r?6:0);break;case i:o=(r-e)/c+2;break;case r:o=(e-i)/c+4}o/=6}return{h:o,s:a,l}}function Z5e(t,e){return t&&{r:Math.max(0,Math.min(255,t.r+UE(t.r,e))),g:Math.max(0,Math.min(255,t.g+UE(t.g,e))),b:Math.max(0,Math.min(255,t.b+UE(t.b,e))),a:t.a}}function UE(t,e){let i=e>0?255-t:t;return Math.round(i*e)}function Y5e(t,e){if(t){let i=UE(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+i))),g:Math.max(0,Math.min(255,Math.round(t.g+i))),b:Math.max(0,Math.min(255,Math.round(t.b+i))),a:t.a}}return t}function t9(t){return(299*t.r+587*t.g+114*t.b)/1e3>=128}function J5e(t,e){if(t===void 0||e==1)return t;let i=Lse(t);return i.s=e,Ose(i)}function K5e(t,e={r:255,g:255,b:255},i={r:255,g:255,b:255}){let r=e,n=i;return t9(i)&&(r=i,n=e),t9(t)?n:r}function Q5e(t,e){return t||(t=[]),[...t,...e].filter((i,r,n)=>n.indexOf(i)===r)}function iYe(t,e){return!!e&&t.left==e.left&&t.right==e.right&&t.top==e.top&&t.bottom==e.bottom}function Rse(t){return t[0]==="#"&&(t=t.substr(1)),t.length==3&&(t=t[0].repeat(2)+t[1].repeat(2)+t[2].repeat(2)),parseInt(t,16)}function X5e(t){let e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!e)return 0;let i="";for(let r=1;r<=3;r++){let n=parseInt(e[r]).toString(16);n.length==1&&(n="0"+n),i+=n}return Rse(i)}function lg(t){return Te.fromAny(t)}class Te{constructor(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return 255&this._hex}toCSS(e=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}toCSSHex(){return"#"+Ri(this.r.toString(16),2)+Ri(this.g.toString(16),2)+Ri(this.b.toString(16),2)}toHSL(e=1){return Lse({r:this.r,g:this.g,b:this.b,a:e})}static fromHSL(e,i,r){const n=Ose({h:e,s:i,l:r});return this.fromRGB(n.r,n.g,n.b)}toString(){return this.toCSSHex()}static fromHex(e){return new Te(e)}static fromRGB(e,i,r){return new Te((0|r)+(i<<8)+(e<<16))}static fromString(e){return new Te(Rse(e))}static fromCSS(e){return new Te(X5e(e))}static fromAny(e){if(B0(e)){if(e[0]=="#")return Te.fromString(e);if(e.substr(0,3)=="rgb")return Te.fromCSS(e)}else{if(ke(e))return Te.fromHex(e);if(e instanceof Te)return Te.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}static alternative(e,i,r){const n=K5e({r:e.r,g:e.g,b:e.b},i?{r:i.r,g:i.g,b:i.b}:void 0,r?{r:r.r,g:r.g,b:r.b}:void 0);return this.fromRGB(n.r,n.g,n.b)}static interpolate(e,i,r,n="rgb"){if(n=="hsl"){const s=i.toHSL(),o=r.toHSL();return Te.fromHSL(uh(e,s.h,o.h),uh(e,s.s,o.s),uh(e,s.l,o.l))}return Te.fromRGB(uh(e,i.r,r.r),uh(e,i.g,r.g),uh(e,i.b,r.b))}static lighten(e,i){const r=Z5e({r:e.r,g:e.g,b:e.b},i);return Te.fromRGB(r.r,r.g,r.b)}static brighten(e,i){const r=Y5e({r:e.r,g:e.g,b:e.b},i);return Te.fromRGB(r.r,r.g,r.b)}static saturate(e,i){const r=J5e({r:e.r,g:e.g,b:e.b},i);return Te.fromRGB(r.r,r.g,r.b)}}function i9(t){return g$(this,void 0,void 0,function*(){if(t!==void 0){const e=[];pi(t,(i,r)=>{e.push(r.waitForStop())}),yield Promise.all(e)}})}function uh(t,e,i){return e+t*(i-e)}function eVe(t,e,i){return t>=1?i:e}function tVe(t,e,i){return new Jt(uh(t,e.percent,i.percent))}function iVe(t,e,i){return Te.interpolate(t,e,i)}function rVe(t,e){return typeof t=="number"&&typeof e=="number"?uh:t instanceof Jt&&e instanceof Jt?tVe:t instanceof Te&&e instanceof Te?iVe:eVe}const Fse=Math.PI,Dse=Fse/180,ub=180/Fse;function rYe(t,e,i){if(!ke(e)||e<=0){let r=Math.round(t);return i&&r-t==.5&&r--,r}{let r=Math.pow(10,e);return Math.round(t*r)/r}}function nYe(t,e){if(!ke(e)||e<=0)return Math.ceil(t);{let i=Math.pow(10,e);return Math.ceil(t*i)/i}}function Ds(t,e,i){return Math.min(Math.max(t,e),i)}function I3(t){return Math.sin(Dse*t)}function k3(t){return Math.cos(Dse*t)}function nVe(t){return(t%=360)<0&&(t+=360),t}function sVe(t,e,i,r,n){let s=Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=-Number.MAX_VALUE,c=[];c.push(_P(n,i)),c.push(_P(n,r));let h=Math.min(90*Math.floor(i/90),90*Math.floor(r/90)),p=Math.max(90*Math.ceil(i/90),90*Math.ceil(r/90));for(let f=h;f<=p;f+=90)f>=i&&f<=r&&c.push(_P(n,f));for(let f=0;f<c.length;f++){let y=c[f];y.x<s&&(s=y.x),y.y<o&&(o=y.y),y.x>a&&(a=y.x),y.y>l&&(l=y.y)}return{left:t+s,top:e+o,right:t+a,bottom:e+l}}function _P(t,e){return{x:t*k3(e),y:t*I3(e)}}function sYe(t){const e=t.length;if(e>0){let i=t[0],r=i.left,n=i.top,s=i.right,o=i.bottom;if(e>1)for(let a=1;a<e;a++)i=t[a],r=Math.min(i.left,r),s=Math.max(i.right,s),n=Math.min(i.top,n),o=Math.max(i.bottom,o);return{left:r,right:s,top:n,bottom:o}}return{left:0,right:0,top:0,bottom:0}}function r9(t){return t}function bw(t){return t*t*t}function Qx(t){return function(e){return 1-t(1-e)}}class oVe{constructor(e,i){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=i,pi(i,r=>{this._userSettings[r]=!0})}get(e,i){const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._settings[e]=i}set(e,i){this._userSettings[e]=!0,this.setRaw(e,i)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){Vn(e).forEach(i=>{this.set(i,e[i])})}_eachSetting(e){pi(this._settings,e)}apply(){const e={stateAnimationEasing:!0,stateAnimationDuration:!0},i=this._entity.states.lookup("default");this._eachSetting((r,n)=>{e[r]||(e[r]=!0,this!==i&&(r in i._settings||(i._settings[r]=this._entity.get(r))),this._entity.set(r,n))})}applyAnimate(e){e==null&&(e=this._settings.stateAnimationDuration),e==null&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let i=this._settings.stateAnimationEasing;i==null&&(i=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",bw)));const r=this._entity.states.lookup("default"),n={stateAnimationEasing:!0,stateAnimationDuration:!0},s={};return this._eachSetting((o,a)=>{if(!n[o]){n[o]=!0,this!=r&&(o in r._settings||(r._settings[o]=this._entity.get(o)));const l=this._entity.animate({key:o,to:a,duration:e,easing:i});l&&(s[o]=l)}}),s}}class aVe{constructor(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new oVe(this._entity,i);return this._states[e]=n,n}}remove(e){delete this._states[e]}apply(e){const i=this._states[e];i&&i.apply(),this._entity._applyState(e)}applyAnimate(e,i){let r;const n=this._states[e];return n&&(r=n.applyAnimate(i)),this._entity._applyStateAnimated(e,i),r}}class lVe{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.3.12"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}const za=new lVe;function uVe(t){za.licenses.push(t)}function ym(t,e){return t===e?0:t<e?-1:1}function Nse(t,e,i){const r=t.length,n=e.length,s=Math.min(r,n);for(let o=0;o<s;++o){const a=i(t[o],e[o]);if(a!==0)return a}return ym(r,n)}function oYe(t,e){return t===e?0:t<e?-1:1}let cVe=class{constructor(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),this._entity._markDirtyKey(e),new gr(()=>{Hs(r,i)&&this._entity._markDirtyKey(e)})}remove(e){const i=this._callbacks[e];i!==void 0&&(delete this._callbacks[e],i.length!==0&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,i){if(!this._disabled[e]){const r=this._callbacks[e];if(r!==void 0)for(let n=0,s=r.length;n<s;++n)i=r[n](i,this._entity,e)}return i}},Xx=class{constructor(e,i,r,n,s,o,a){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Ev}),this._animation=e,this._from=i,this._to=r,this._duration=n,this._easing=s,this._loops=o,this._interpolate=rVe(i,r),this._oldTime=a}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((e,i)=>{if(this._stopped)e();else{const r=()=>{n.dispose(),e()},n=this.events.on("stopped",r)}})}_checkEnded(){return!(this._loops>1)||(--this._loops,!1)}_run(e){this._oldTime!==null&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}},dVe=0,hVe=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++dVe}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=e}_checkDirty(){Vn(this._settings).forEach(e=>{this._userProperties[e]=!0,this._markDirtyKey(e)})}resetUserSettings(){this._userProperties={}}_runAnimation(e){if(this.isDisposed())return!1;{let i=!1;return pi(this._animatingSettings,(r,n)=>{if(n._stopped)this._stopAnimation(r);else if(n._playing){n._run(e);const s=n.percentage;s>=1?n._checkEnded()?this.set(r,n._value(1)):(i=!0,n._reset(e),this._set(r,n._value(1))):(i=!0,this._set(r,n._value(s)))}}),pi(this._animatingPrivateSettings,(r,n)=>{if(n._stopped)this._stopAnimationPrivate(r);else if(n._playing){n._run(e);const s=n.percentage;s>=1?n._checkEnded()?this.setPrivate(r,n._value(1)):(i=!0,n._reset(e),this._setPrivate(r,n._value(1))):(i=!0,this._setPrivate(r,n._value(s)))}}),i}}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,i){let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new gr(()=>{Hs(r,i),r.length===0&&delete this._settingEvents[e]})}onPrivate(e,i){let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new gr(()=>{Hs(r,i),r.length===0&&delete this._privateSettingEvents[e]})}getRaw(e,i){const r=this._settings[e];return r!==void 0?r:i}get(e,i){return this.getRaw(e,i)}_sendKeyEvent(e,i){const r=this._settingEvents[e];r!==void 0&&Y(r,n=>{n(i,this,e)})}_sendPrivateKeyEvent(e,i){const r=this._privateSettingEvents[e];r!==void 0&&Y(r,n=>{n(i,this,e)})}_setRaw(e,i,r){this._prevSettings[e]=i,this._sendKeyEvent(e,r)}setRaw(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&this._setRaw(e,r,i)}_set(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&(this._setRaw(e,r,i),this._markDirtyKey(e))}_stopAnimation(e){const i=this._animatingSettings[e];i&&(delete this._animatingSettings[e],i.stop())}set(e,i){return this._set(e,i),this._stopAnimation(e),i}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){Y(Vn(this._settings),e=>{this.remove(e)})}getPrivate(e,i){const r=this._privateSettings[e];return r!==void 0?r:i}_setPrivateRaw(e,i,r){this._prevPrivateSettings[e]=i,this._sendPrivateKeyEvent(e,r)}setPrivateRaw(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&this._setPrivateRaw(e,r,i)}_setPrivate(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&(this._setPrivateRaw(e,r,i),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){const i=this._animatingPrivateSettings[e];i&&(i.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,i){return this._setPrivate(e,i),this._stopAnimationPrivate(e),i}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){pi(e,(i,r)=>{this.set(i,r)})}animate(e){const i=e.key,r=e.to,n=e.duration||0,s=e.loops||1,o=e.from===void 0?this.get(i):e.from,a=e.easing===void 0?r9:e.easing;if(n===0)this.set(i,r);else{if(o!==void 0&&o!==r){this.set(i,o);const c=this._animatingSettings[i]=new Xx(this,o,r,n,a,s,this._animationTime());return this._startAnimation(),c}this.set(i,r)}const l=new Xx(this,o,r,n,a,s,null);return l.stop(),l}animatePrivate(e){const i=e.key,r=e.to,n=e.duration||0,s=e.loops||1,o=e.from===void 0?this.getPrivate(i):e.from,a=e.easing===void 0?r9:e.easing;if(n===0)this.setPrivate(i,r);else{if(o!==void 0&&o!==r){this.setPrivate(i,o);const c=this._animatingPrivateSettings[i]=new Xx(this,o,r,n,a,s,this._animationTime());return this._startAnimation(),c}this.setPrivate(i,r)}const l=new Xx(this,o,r,n,a,s,null);return l.stop(),l}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},$s=class extends hVe{constructor(e,i,r,n=[]){if(super(i),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new aVe(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new cVe(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=n,i.id&&this._registerId(i.id)}static new(e,i,r){const n=new this(e,i,!0);return n._template=r,n._afterNew(),n}static _new(e,i,r=[]){const n=new this(e,i,!0,r);return n._afterNew(),n}_afterNew(){this._checkDirty();let e=!1;const i=this._template;i&&(e=!0,i._setObjectTemplate(this)),Y(this._internalTemplates,r=>{e=!0,r._setObjectTemplate(this)}),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const e=this._template;e&&e._setObjectTemplate(this),Y(this._internalTemplates,i=>{i._setObjectTemplate(this)}),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new Ev}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefault(e,i){e in this._settings||super.set(e,i)}_setRawDefault(e,i){e in this._settings||super.setRaw(e,i)}_clearDirty(){Vn(this._dirty).forEach(e=>{this._dirty[e]=!1}),Vn(this._dirtyPrivate).forEach(e=>{this._dirtyPrivate[e]=!1})}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return this.classNames.indexOf(e)!==-1}_pushPropertyDisposer(e,i){let r=this._disposerProperties[e];return r===void 0&&(r=this._disposerProperties[e]=[]),r.push(i),i}_disposeProperty(e){const i=this._disposerProperties[e];i!==void 0&&(Y(i,r=>{r.dispose()}),delete this._disposerProperties[e])}set template(e){const i=this._template;i!==e&&(this._template=e,i&&i._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,i){}get(e,i){const r=this.adapters.fold(e,this._settings[e]);return r!==void 0?r:i}isUserSetting(e){return this._userProperties[e]||!1}set(e,i){return this._userProperties[e]=!0,super.set(e,i)}setRaw(e,i){this._userProperties[e]=!0,super.setRaw(e,i)}_setSoft(e,i){return this._userProperties[e]?i:super.set(e,i)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,i){return this._userPrivateProperties[e]=!0,super.setPrivate(e,i)}setPrivateRaw(e,i){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,i)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,i,r){this._userProperties[i]||e===this._findTemplateByKey(i)&&super.set(i,r)}_setTemplatePrivateProperty(e,i,r){this._userPrivateProperties[i]||e===this._findTemplateByPrivateKey(i)&&super.setPrivate(i,r)}_removeTemplateProperty(e){if(!this._userProperties[e]){const i=this._findTemplateByKey(e);i?super.set(e,i._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){const i=this._findTemplateByPrivateKey(e);i?super.setPrivate(e,i._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){const i=this.states.create(e,{}),r={};this._eachTemplate(n=>{const s=n.states.lookup(e);s&&s._apply(i,r)}),pi(i._settings,n=>{r[n]||i._userSettings[n]||i.remove(n)})}_applyTemplate(e,i){this._templateDisposers.push(e._apply(this,i)),pi(e._settings,(r,n)=>{i.settings[r]||this._userProperties[r]||(i.settings[r]=!0,super.set(r,n))}),pi(e._privateSettings,(r,n)=>{i.privateSettings[r]||this._userPrivateProperties[r]||(i.privateSettings[r]=!0,super.setPrivate(r,n))}),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate(i=>(e(i),!1)),lb(this._internalTemplates,e),Y(this._templates,e)}_applyTemplates(e=!0){e&&this._disposeTemplates();const i={settings:{},privateSettings:{},states:{}};this._eachTemplate(r=>{this._applyTemplate(r,i)}),e&&(pi(this._settings,r=>{this._userProperties[r]||i.settings[r]||super.remove(r)}),pi(this._privateSettings,r=>{this._userPrivateProperties[r]||i.privateSettings[r]||super.removePrivate(r)}))}_findTemplate(e){const i=this._findStaticTemplate(e);if(i===void 0){const r=x5e(this._internalTemplates,e);return r===void 0?S5e(this._templates,e):r}return i}_findTemplateByKey(e){return this._findTemplate(i=>e in i._settings)}_findTemplateByPrivateKey(e){return this._findTemplate(i=>e in i._privateSettings)}_disposeTemplates(){Y(this._templateDisposers,e=>{e.dispose()}),this._templateDisposers.length=0}_removeTemplates(){Y(this._templates,e=>{e._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(){let e=!1;const i=[];let r=[];const n=new Set,s=this.get("themeTagsSelf");return s&&Y(s,o=>{n.add(o)}),this._walkParents(o=>{o===this._root._rootContainer&&(e=!0),o._defaultThemes.length>0&&i.push(o._defaultThemes);const a=o.get("themes");a&&r.push(a);const l=o.get("themeTags");l&&Y(l,c=>{n.add(c)})}),r=i.concat(r),this._removeTemplates(),e&&lb(this.classNames,o=>{const a=[];Y(r,l=>{Y(l,c=>{const h=c._lookupRules(o);h&&lb(h,p=>{if(p.tags.every(f=>n.has(f))){const f=E5e(a,y=>{const g=ym(p.tags.length,y.tags.length);return g===0?Nse(p.tags,y.tags,ym):g});a.splice(f.index,0,p)}})})}),Y(a,l=>{this._templates.push(l.template),l.template._setObjectTemplate(this)})}),this._applyTemplates(),e&&(this._runSetup=!1),e}_changed(){}_beforeChanged(){if(this.isDirty("id")){const e=this.get("id");e&&this._registerId(e);const i=this._prevSettings.id;i&&delete za.entitiesById[i]}}_registerId(e){if(za.entitiesById[e]&&za.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');za.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();const e=this._template;e&&e._removeObjectTemplate(this),Y(this._internalTemplates,r=>{r._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(r=>{r.dispose()}),pi(this._disposerProperties,(r,n)=>{Y(n,s=>{s.dispose()})});const i=this.get("id");i&&delete za.entitiesById[i]}setTimeout(e,i){const r=setTimeout(()=>{this.removeDispose(n),e()},i),n=new gr(()=>{clearTimeout(r)});return this._disposers.push(n),n}removeDispose(e){if(!this.isDisposed()){let i=VM(this._disposers,e);i>-1&&this._disposers.splice(i,1)}e.dispose()}hasTag(e){return VM(this.get("themeTags",[]),e)!==-1}addTag(e){if(!this.hasTag(e)){const i=this.get("themeTags",[]);i.push(e),this.set("themeTags",i)}}removeTag(e){if(this.hasTag(e)){const i=this.get("themeTags",[]);mh(i,e),this.set("themeTags",i)}}_t(e,i,...r){return this._root.language.translate(e,i,...r)}get root(){return this._root}};Object.defineProperty($s,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty($s,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});let pVe=class{constructor(e,i,r){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=i,this._settings=r}get(e,i){const r=this._settings[e];return r!==void 0?r:i}set(e,i){this._settings[e]=i,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){Vn(e).forEach(i=>{this._settings[i]=e[i]}),this._template._stateChanged(this._name)}_apply(e,i){pi(this._settings,(r,n)=>{i[r]||e._userSettings[r]||(i[r]=!0,e.setRaw(r,n))})}},fVe=class{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new pVe(e,this._template,i);return this._states[e]=n,this._template._stateChanged(e),n}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,i){pi(this._states,(r,n)=>{let s=i.states[r];s==null&&(s=i.states[r]={});const o=e.states.create(r,{});n._apply(o,s)})}},mVe=class{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),new gr(()=>{Hs(r,i),r.length===0&&delete this._callbacks[e]})}remove(e){this._callbacks[e]!==void 0&&delete this._callbacks[e]}_apply(e){const i=[];return pi(this._callbacks,(r,n)=>{Y(n,s=>{i.push(e.adapters.add(r,s))})}),new zs(i)}},C3=class jse{constructor(e,i){if(Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new fVe(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new mVe}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Ev}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new jse(e,!0)}get entities(){return this._entities}get(e,i){const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._settings[e]=i}set(e,i){this._settings[e]!==i&&(this.setRaw(e,i),this._entities.forEach(r=>{r._setTemplateProperty(this,e,i)}))}remove(e){e in this._settings&&(delete this._settings[e],this._entities.forEach(i=>{i._removeTemplateProperty(e)}))}removeAll(){pi(this._settings,(e,i)=>{this.remove(e)})}getPrivate(e,i){const r=this._privateSettings[e];return r!==void 0?r:i}setPrivateRaw(e,i){return this._privateSettings[e]=i,i}setPrivate(e,i){return this._privateSettings[e]!==i&&(this.setPrivateRaw(e,i),this._entities.forEach(r=>{r._setTemplatePrivateProperty(this,e,i)})),i}removePrivate(e){e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(i=>{i._removeTemplatePrivateProperty(e)}))}setAll(e){pi(e,(i,r)=>{this.set(i,r)})}on(e,i){let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new gr(()=>{Hs(r,i),r.length===0&&delete this._settingEvents[e]})}onPrivate(e,i){let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new gr(()=>{Hs(r,i),r.length===0&&delete this._privateSettingEvents[e]})}_apply(e,i){const r=[];return pi(this._settingEvents,(n,s)=>{Y(s,o=>{r.push(e.on(n,o))})}),pi(this._privateSettingEvents,(n,s)=>{Y(s,o=>{r.push(e.onPrivate(n,o))})}),this.states._apply(e,i),r.push(this.adapters._apply(e)),r.push(e.events.copyFrom(this.events)),new zs(r)}_setObjectTemplate(e){this._entities.push(e)}_removeObjectTemplate(e){mh(this._entities,e)}_stateChanged(e){this._entities.forEach(i=>{i._applyStateByKey(e)})}},Vse=class zse extends Ev{constructor(e){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,i){return{type:e,originalEvent:i.event,point:i.point,simulated:i.simulated,native:i.native,target:this._sprite}}_onRenderer(e,i){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let r=this._rendererDisposers[e];if(r===void 0){const n=this._sprite._display.on(e,s=>{i.call(this,s)});r=this._rendererDisposers[e]=new kse(()=>{delete this._rendererDisposers[e],n.dispose()})}return r.increment()}_on(e,i,r,n,s,o){const a=super._on(e,i,r,n,s,o),l=zse.RENDERER_EVENTS[i];return l!==void 0&&(a.disposer=new zs([a.disposer,this._onRenderer(i,l)])),a}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,i){const r=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,i),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,i)}finally{this._dispatchParents=r}}};Object.defineProperty(Vse,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(t){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",t))&&this.dispatch("click",this._makePointerEvent("click",t))},rightclick:function(t){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",t))},middleclick:function(t){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",t))},dblclick:function(t){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",t))},pointerover:function(t){this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",t))},pointerout:function(t){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",t))},pointerdown:function(t){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",t))},pointerup:function(t){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",t))},globalpointerup:function(t){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",t))},globalpointermove:function(t){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",t))},wheel:function(t){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:t.event,point:t.point})}}});let il=class extends $s{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}_markDirtyKey(e){super._markDirtyKey(e),e!="x"&&e!="y"&&e!="dx"&&e!="dy"||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),e!="x"&&e!="y"||this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new Vse(this)}_processTemplateField(){let e;const i=this.get("templateField");if(i){const r=this.dataItem;if(r){const n=r.dataContext;n&&(e=n[i],e instanceof C3||!e||(e=C3.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){const i=this._dataItem;this._dataItem=e,this._processTemplateField();const r="dataitemchanged";e!=i&&this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this,oldDataItem:i,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;){if(e._dataItem)return e._dataItem;e=e._parent}}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get("width")instanceof Jt||this.get("height")instanceof Jt?v1(e._percentageSizeChildren,this):Hs(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get("x")instanceof Jt||this.get("y")instanceof Jt?v1(e._percentagePositionChildren,this):Hs(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const e=this._localBounds;if(e){const i=this.get("centerX");i!=null&&(this._display.pivot.x=e.left+ld(i,e.right-e.left));const r=this.get("centerY");r!=null&&(this._display.pivot.y=e.top+ld(r,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);const i=this._tooltipPointerDp;i&&(i.dispose(),this._tooltipPointerDp=void 0),this.get("tooltipPosition")=="pointer"&&(this._tooltipPointerDp=new zs([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",r=>{this.showTooltip(r.point)})}),this.events.on("pointerout",()=>{const r=this._tooltipMoveDp;r&&(r.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();const e=this._display,i=this.events;if(this.isDirty("draggable")){const r=this.get("draggable");r?(this.set("interactive",!0),this._dragDp=new zs([i.on("pointerdown",n=>{this.dragStart(n)}),i.on("globalpointermove",n=>{this.dragMove(n)}),i.on("globalpointerup",n=>{this.dragStop(n)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!r}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const r=this.get("tooltipText"),n=this.get("tooltipHTML"),s=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(r||n)&&(s=="click"?this._tooltipDp=new zs([i.on("click",()=>{this.setTimeout(()=>this.showTooltip(),10)}),ir(document,"click",o=>{this.hideTooltip()})]):s=="always"||(this._tooltipDp=new zs([i.on("pointerover",()=>{this.showTooltip()}),i.on("pointerout",()=>{this.hideTooltip()})])))}if(this.isDirty("toggleKey")){let r=this.get("toggleKey");r&&r!="none"?this._toggleDp=i.on("click",()=>{this._isDragging||this.set(r,!this.get(r))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1))),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?e.visible=!0:(e.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const r=this.parent;r&&(this.isDirty("width")&&this.get("width")instanceof Jt||this.isDirty("height")&&this.get("height")instanceof Jt)&&(r.markDirty(),r._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const r=this.get("wheelable");r&&this.set("interactive",!0),e.wheelable=!!r}if((this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter")),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new zs([i.on("focus",()=>{this.showTooltip()}),i.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){const r=this.events;this.get("interactive")?this._hoverDp=new zs([r.on("click",n=>{KG(n.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})},10))}),r.on("globalpointerup",n=>{KG(n.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})),this._isDown&&this._handleUp(n)}),r.on("pointerover",()=>{this._handleOver()}),r.on("pointerout",()=>{this._handleOut()}),r.on("pointerdown",n=>{this._handleDown(n)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",!1)),this.get("showTooltipOn")=="always"&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const i="dragstop";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const i=gP(e.originalEvent);delete this._downPoints[i],Vn(this._downPoints).length==0&&(this._isDown=!1)}}_hasMoved(e){const i=gP(e.originalEvent),r=this._downPoints[i];if(r){const n=Math.abs(r.x-e.point.x),s=Math.abs(r.y-e.point.y);return n>5||s>5}return!1}_hasDown(){return Vn(this._downPoints).length>0}_handleDown(e){const i=this.parent;if(i&&!this.get("draggable")&&i._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;const r=gP(e.originalEvent);this._downPoints[r]={x:e.point.x,y:e.point.y}}}dragMove(e){let i=this._dragEvent;if(i){if(i.simulated&&!e.simulated)return!0;let r=0,n=this.parent;for(;n!=null;)r+=n.get("rotation",0),n=n.parent;let s=e.point.x-i.point.x,o=e.point.y-i.point.y;const a=this.events;if(i.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const l="dragstart";a.isEnabled(l)&&a.dispatch(l,{type:l,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let l=this._dragPoint;this.set("x",l.x+s*k3(r)+o*I3(r)),this.set("y",l.y+o*k3(r)-s*I3(r));const c="dragged";a.isEnabled(c)&&a.dispatch(c,{type:c,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(s,o)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const l="dragstart";a.isEnabled(l)&&a.dispatch(l,{type:l,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,i=0;for(;;){if(!e)return i;++i,e=e.parent}}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){if(this.get("isMeasured")){const e=this._display;this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();const i=this.parent;i&&this.get("position")!="absolute"&&(i.get("width")==null||i.get("height")==null||i.get("layout"))&&i.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const e=this._adjustedLocalBounds;let i;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),i=this._adjustedLocalBounds):(i={left:0,right:0,top:0,bottom:0},this._localBounds=i,this._adjustedLocalBounds=i),!e||e.left!==i.left||e.top!==i.top||e.right!==i.right||e.bottom!==i.bottom){const r="boundschanged";this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds())}}_fixMinBounds(e){let i=this.get("minWidth",this.getPrivate("minWidth")),r=this.get("minHeight",this.getPrivate("minHeight"));ke(i)&&e.right-e.left<i&&(e.right=e.left+i),ke(r)&&e.bottom-e.top<r&&(e.bottom=e.top+r);let n=this.getPrivate("width"),s=this.getPrivate("height");ke(n)&&(n>0?e.right=e.left+n:e.left=e.right+n),ke(s)&&(s>0?e.bottom=e.top+s:e.top=e.bottom+s)}_removeParent(e){e&&(e.children.removeValue(this),Hs(e._percentageSizeChildren,this),Hs(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._statesHandled=!1}hover(){this.showTooltip(),this._handleOver()}unhover(){this.hideTooltip(),this._handleOut()}showTooltip(e){const i=this.getTooltip(),r=this.get("tooltipText"),n=this.get("tooltipHTML");if((r||n)&&i){const s=this.get("tooltipPosition"),o=this.getPrivate("tooltipTarget",this);s!="fixed"&&e||(this._display._setMatrix(),e=this.toGlobal(o._getTooltipPoint())),i.set("pointTo",e),i.set("tooltipTarget",o),i.get("x")||i.set("x",e.x),i.get("y")||i.set("y",e.y),r&&i.label.set("text",r),n&&i.label.set("html",n);const a=this.dataItem;if(a&&i.label._setDataItem(a),this.get("showTooltipOn")=="always"&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();i.label.text.markDirtyText();const l=i.show();return this.setPrivateRaw("showingTooltip",!0),l}}hideTooltip(){const e=this.getTooltip();if(e&&e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)){let i=e.get("keepTargetHover")&&e.get("stateAnimationDuration",0)==0?400:void 0;const r=e.hide(i);return this.setPrivateRaw("showingTooltip",!1),r}}_getTooltipPoint(){const e=this._localBounds;if(e){let i=0,r=0;return this.get("isMeasured")?(i=e.left+ld(this.get("tooltipX",0),e.right-e.left),r=e.top+ld(this.get("tooltipY",0),e.bottom-e.top)):(i=ld(this.get("tooltipX",0),this.width()),r=ld(this.get("tooltipY",0),this.height())),{x:i,y:r}}return{x:0,y:0}}getTooltip(){let e=this.get("tooltip");if(e)return e;{let i=this.parent;if(i)return i.getTooltip()}}_updatePosition(){const e=this.parent;let i=this.get("dx",0),r=this.get("dy",0),n=this.get("x"),s=this.getPrivate("x"),o=0,a=0;const l=this.get("position");n instanceof Jt&&(n=e?e.innerWidth()*n.value+e.get("paddingLeft",0):0),ke(n)?o=n+i:s!=null?o=s:e&&l=="relative"&&(o=e.get("paddingLeft",0)+i);let c=this.get("y"),h=this.getPrivate("y");c instanceof Jt&&(c=e?e.innerHeight()*c.value+e.get("paddingTop",0):0),ke(c)?a=c+r:h!=null?a=h:e&&l=="relative"&&(a=e.get("paddingTop",0)+r);const p=this._display;if(p.x!=o||p.y!=a){p.invalidateBounds(),p.x=o,p.y=a;const f="positionchanged";this.events.isEnabled(f)&&this.events.dispatch(f,{type:f,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let e=this.get("x"),i=this.getPrivate("x");const r=this.parent;return r?e instanceof Jt?ld(e,r.innerWidth())+r.get("paddingLeft",0):ke(e)?e:i??r.get("paddingLeft",this._display.x):this._display.x}y(){let e=this.getPrivate("y");if(e!=null)return e;let i=this.get("y");const r=this.parent;return r?i instanceof Jt?ld(i,r.innerHeight())+r.get("paddingTop",0):ke(i)?i:e??r.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const e=this.get("tooltip");e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const e=this._adjustedLocalBounds,i=this.x(),r=this.y();return{left:e.left+i,right:e.right+i,top:e.top+r,bottom:e.bottom+r}}globalBounds(){const e=this.localBounds(),i=this.toGlobal({x:e.left,y:e.top}),r=this.toGlobal({x:e.right,y:e.top}),n=this.toGlobal({x:e.right,y:e.bottom}),s=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(i.x,r.x,n.x,s.x),top:Math.min(i.y,r.y,n.y,s.y),right:Math.max(i.x,r.x,n.x,s.x),bottom:Math.max(i.y,r.y,n.y,s.y)}}_onShow(e){}_onHide(e){}appear(e,i){return g$(this,void 0,void 0,function*(){return yield this.hide(0),i?new Promise((r,n)=>{this.setTimeout(()=>{r(this.show(e))},i)}):this.show(e)})}show(e){return g$(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e);const i=this.states.applyAnimate("default",e);yield i9(i),this._isShowing=!1}})}hide(e){return g$(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let i=this.states.lookup("hidden");i||(i=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(e);const r=this.states.applyAnimate("hidden",e);yield i9(r),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}width(){let e=this.get("width"),i=this.get("maxWidth",this.getPrivate("maxWidth")),r=this.get("minWidth",this.getPrivate("minWidth")),n=this.getPrivate("width"),s=0;if(ke(n))s=n;else if(e==null)this._adjustedLocalBounds&&(s=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof Jt){const o=this.parent;s=o?o.innerWidth()*e.value:this._root.width()*e.value}else ke(e)&&(s=e);return ke(r)&&(s=Math.max(r,s)),ke(i)&&(s=Math.min(i,s)),s}maxWidth(){let e=this.get("maxWidth",this.getPrivate("maxWidth"));if(ke(e))return e;{let r=this.get("width");if(ke(r))return r}const i=this.parent;return i?i.innerWidth():this._root.width()}maxHeight(){let e=this.get("maxHeight",this.getPrivate("maxHeight"));if(ke(e))return e;{let r=this.get("height");if(ke(r))return r}const i=this.parent;return i?i.innerHeight():this._root.height()}height(){let e=this.get("height"),i=this.get("maxHeight",this.getPrivate("maxHeight")),r=this.get("minHeight",this.getPrivate("minHeight")),n=this.getPrivate("height"),s=0;if(ke(n))s=n;else if(e==null)this._adjustedLocalBounds&&(s=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof Jt){const o=this.parent;s=o?o.innerHeight()*e.value:this._root.height()*e.value}else ke(e)&&(s=e);return ke(r)&&(s=Math.max(r,s)),ke(i)&&(s=Math.min(i,s)),s}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){this._parent&&this._walkParent(e)}_walkParent(e){this._parent&&this._parent._walkParent(e),e(this)}get parent(){return this._parent}_setParent(e,i=!1){const r=this._parent;e!==r&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,i&&(this._removeParent(r),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){const e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return k5e(this._downPoints,(e,i)=>e>i?1:e<i?-1:0)[0]}toFront(){const e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){const e=this.parent;e&&e.children.moveValue(this,0)}};Object.defineProperty(il,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(il,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$s.classNames.concat([il.className])});let cb=class extends $s{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("color")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fill")||this.isDirty("fillOpacity"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("repetition",""),i=this.get("width",100),r=this.get("height",100),n=this.get("fill"),s=this.get("fillOpacity",1);this._display.clear(),this._backgroundDisplay.clear(),n&&s>0&&(this._backgroundDisplay.beginFill(n,s),this._backgroundDisplay.drawRect(0,0,i,r),this._backgroundDisplay.endFill()),this._display.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(this._display,this._backgroundDisplay,e,i,r)}}};Object.defineProperty(cb,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(cb,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$s.classNames.concat([cb.className])});let db=class extends cb{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load()}_draw(){super._draw();const e=this._image;if(e){const i=this.get("width",100),r=this.get("height",100),n=this.get("fit","image");let s=0,o=0;n=="pattern"?(s=i,o=r):(s=e.width,o=e.height,n=="image"&&(this.set("width",s),this.set("height",o)));let a=0,l=0;this.get("centered",!0)&&(a=i/2-s/2,l=r/2-o/2),this._display.image(e,s,o,a,l)}}_load(){const e=this.get("src");if(e){const i=new Image;i.src=e,i.decode().then(()=>{this._image=i,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(r=>{})}}};var UM;Object.defineProperty(db,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(db,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cb.classNames.concat([db.className])}),function(t){t.ADD="lighter",t.COLOR="color",t.COLOR_BURN="color-burn",t.COLOR_DODGE="color-dodge",t.DARKEN="darken",t.DIFFERENCE="difference",t.DST_OVER="destination-over",t.EXCLUSION="exclusion",t.HARD_LIGHT="hard-light",t.HUE="hue",t.LIGHTEN="lighten",t.LUMINOSITY="luminosity",t.MULTIPLY="multiply",t.NORMAL="source-over",t.OVERLAY="overlay",t.SATURATION="saturation",t.SCREEN="screen",t.SOFT_LIGHT="soft-light",t.SRC_ATOP="source-atop",t.XOR="xor"}(UM||(UM={}));const gYe=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset"];let Mc=class extends il{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const e=this.get("fillGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}}if(this.isDirty("strokeGradient")){const e=this.get("strokeGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get("strokeDasharray");ke(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);const i=this.get("strokeDashoffset");i&&this._display.setLineDashOffset(i);const r=this.get("blendMode",UM.NORMAL);this._display.blendMode=r;const n=this.get("draw");n&&n(this._display,this);const s=this.get("svgPath");s!=null&&this._display.svgPath(s)}}_afterChanged(){if(super._afterChanged(),this._clear){const e=this.get("fill"),i=this.get("fillGradient"),r=this.get("fillPattern"),n=this.get("fillOpacity"),s=this.get("stroke"),o=this.get("strokeGradient"),a=this.get("strokePattern"),l=this.get("shadowColor"),c=this.get("shadowBlur"),h=this.get("shadowOffsetX"),p=this.get("shadowOffsetY"),f=this.get("shadowOpacity");if(l&&(c||h||p)&&this._display.shadow(l,c,h,p,f),r){let y=!1;!e||r.get("fill")&&!r.get("fillInherited")||(r.set("fill",e),r.set("fillInherited",!0),y=!0),!s||r.get("color")&&!r.get("colorInherited")||(r.set("color",s),r.set("colorInherited",!0),y=!0),y&&r._changed();const g=r.pattern;g&&(this._display.beginFill(g,n),this._display.endFill(),r instanceof db&&r.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}else if(i){if(e){const g=i.get("stops",[]);g.length&&Y(g,v=>{v.color&&!v.colorInherited||!e||(v.color=e,v.colorInherited=!0),(v.opacity==null||v.opacityInherited)&&(v.opacity=n,v.opacityInherited=!0)})}const y=i.getFill(this);y&&(this._display.beginFill(y,n),this._display.endFill())}else e&&(this._display.beginFill(e,n),this._display.endFill());if(s||o||a){const y=this.get("strokeOpacity");let g=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(g/=this.get("scale",1)),this.get("crisp")&&(g/=this._root._renderer.resolution);const v=this.get("lineJoin");if(a){let _=!1;!s||a.get("color")&&!a.get("colorInherited")||(a.set("color",s),a.set("colorInherited",!0),_=!0),_&&a._changed();const w=a.pattern;w&&(this._display.lineStyle(g,w,y,v),this._display.endStroke(),a instanceof db&&a.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}else if(o){const _=o.get("stops",[]);_.length&&Y(_,S=>{S.color&&!S.colorInherited||!s||(S.color=s,S.colorInherited=!0),(S.opacity==null||S.opacityInherited)&&(S.opacity=y,S.opacityInherited=!0)});const w=o.getFill(this);w&&(this._display.lineStyle(g,w,y,v),this._display.endStroke())}else s&&(this._display.lineStyle(g,s,y,v),this._display.endStroke())}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}};Object.defineProperty(Mc,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(Mc,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:il.classNames.concat([Mc.className])});let c0=class extends Mc{_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty(),this._clear=!0}};function Tc(t,e){t.get("reverseChildren",!1)?t.children.eachReverse(e):t.children.each(e)}Object.defineProperty(c0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(c0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mc.classNames.concat([c0.className])});let Ic=class extends $s{};Object.defineProperty(Ic,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(Ic,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$s.classNames.concat([Ic.className])});let d0=class extends Ic{updateContainer(e){let i=e.get("paddingLeft",0),r=e.innerWidth(),n=0;Tc(e,o=>{if(o.isVisible()&&o.get("position")=="relative"){let a=o.get("width");if(a instanceof Jt){n+=a.value;let l=r*a.value,c=o.get("minWidth",o.getPrivate("minWidth",-1/0));c>l&&(r-=c,n-=a.value);let h=o.get("maxWidth",o.getPrivate("maxWidth",1/0));l>h&&(r-=h,n-=a.value)}else ke(a)||(a=o.width()),r-=a+o.get("marginLeft",0)+o.get("marginRight",0)}}),(r<=0||r==1/0)&&(r=.1),Tc(e,o=>{if(o.isVisible()&&o.get("position")=="relative"){let a=o.get("width");if(a instanceof Jt){let l=r*a.value/n-o.get("marginLeft",0)-o.get("marginRight",0),c=o.get("minWidth",o.getPrivate("minWidth",-1/0)),h=o.get("maxWidth",o.getPrivate("maxWidth",1/0));l=Math.min(Math.max(c,l),h),o.setPrivate("width",l)}}});let s=i;Tc(e,o=>{if(o.get("position")=="relative")if(o.isVisible()){let a=o.adjustedLocalBounds(),l=o.get("marginLeft",0),c=o.get("marginRight",0),h=o.get("maxWidth"),p=a.left,f=a.right;h&&f-p>h&&(f=p+h);let y=s+l-p;o.setPrivate("x",y),s=y+f+c}else o.setPrivate("x",void 0)})}};Object.defineProperty(d0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(d0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ic.classNames.concat([d0.className])});let h0=class extends Ic{updateContainer(e){let i=e.get("paddingTop",0),r=e.innerHeight(),n=0;Tc(e,o=>{if(o.isVisible()&&o.get("position")=="relative"){let a=o.get("height");if(a instanceof Jt){n+=a.value;let l=r*a.value,c=o.get("minHeight",o.getPrivate("minHeight",-1/0));c>l&&(r-=c,n-=a.value);let h=o.get("maxHeight",o.getPrivate("maxHeight",1/0));l>h&&(r-=h,n-=a.value)}else ke(a)||(a=o.height()),r-=a+o.get("marginTop",0)+o.get("marginBottom",0)}}),(r<=0||r==1/0)&&(r=.1),Tc(e,o=>{if(o.isVisible()&&o.get("position")=="relative"){let a=o.get("height");if(a instanceof Jt){let l=r*a.value/n-o.get("marginTop",0)-o.get("marginBottom",0),c=o.get("minHeight",o.getPrivate("minHeight",-1/0)),h=o.get("maxHeight",o.getPrivate("maxHeight",1/0));l=Math.min(Math.max(c,l),h),o.setPrivate("height",l)}}});let s=i;Tc(e,o=>{if(o.get("position")=="relative")if(o.isVisible()){let a=o.adjustedLocalBounds(),l=o.get("marginTop",0),c=a.top,h=a.bottom,p=o.get("maxHeight");p&&h-c>p&&(h=c+p);let f=o.get("marginBottom",0),y=s+l-c;o.setPrivate("y",y),s=y+h+f}else o.setPrivate("y",void 0)})}};Object.defineProperty(h0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(h0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ic.classNames.concat([h0.className])});let gm=class extends Ic{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(e){let i=e.get("paddingLeft",0),r=e.get("paddingRight",0),n=e.get("paddingTop",0),s=e.maxWidth()-i-r,o=s,a=1;Tc(e,g=>{if(g.get("visible")&&g.getPrivate("visible")&&!g.get("forceHidden")&&g.get("position")!="absolute"){let v=g.width();v<o&&(o=v),v>a&&(a=v)}}),o=Ds(o,1,s),a=Ds(a,1,s);let l=1;l=this.get("fixedWidthGrid")?s/a:s/o,l=Math.max(1,Math.floor(l)),l=Math.min(this.get("maxColumns",Number.MAX_VALUE),l);let c=this.getColumnWidths(e,l,a,s),h=n,p=0,f=0;l=c.length;let y=i;Tc(e,g=>{if(g.get("position")=="relative"&&g.isVisible()){const v=g.get("marginTop",0),_=g.get("marginBottom",0);let w=g.adjustedLocalBounds(),S=g.get("marginLeft",0),b=g.get("marginRight",0),$=y+S-w.left,T=h+v-w.top;g.setPrivate("x",$),g.setPrivate("y",T),y+=c[p]+b,f=Math.max(f,g.height()+v+_),p++,p>=l&&(p=0,y=i,h+=f)}})}getColumnWidths(e,i,r,n){let s=0,o=[],a=0;return Tc(e,l=>{let c=l.adjustedLocalBounds();l.get("position")!="absolute"&&l.isVisible()&&(this.get("fixedWidthGrid")?o[a]=r:o[a]=Math.max(0|o[a],c.right-c.left+l.get("marginLeft",0)+l.get("marginRight",0)),a<e.children.length-1&&(a++,a==i&&(a=0)))}),Y(o,l=>{s+=l}),s>n?i>2?(i-=1,this.getColumnWidths(e,i,r,n)):[n]:o}};Object.defineProperty(gm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(gm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ic.classNames.concat([gm.className])});let rl=class{static escape(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(e,i=!1,r=!1){let n=[];e=this.escape(e);let s=i?e.split("'"):[e];for(let o=0;o<s.length;o++){let a=s[o];if(a!=="")if(o%2==0){a=a.replace(/\]\[/g,"]"+sp+"["),a=a.replace(/\[\]/g,"[ ]");let l=a.split(/[\[\]]+/);for(let c=0;c<l.length;c++){let h=this.cleanUp(this.unescape(l[c]));h!==sp&&h!==""&&(c%2==0?n.push({type:"value",text:h}):n.push({type:r?"value":"format",text:"["+h+"]"}))}}else{let l=a.split(/[\[\]]+/);for(let c=0;c<l.length;c++){let h=this.cleanUp(this.unescape(l[c]));h!==""&&(c%2==0?n.push({type:"text",text:h}):this.isImage(h)?n.push({type:"image",text:"["+h+"]"}):n.push({type:"format",text:"["+h+"]"}))}}}return n}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let i={};if(e==""||e=="[ ]")return{};const r=e.match(/('[^']*')|("[^"]*")/gi);if(r)for(let s=0;s<r.length;s++)e=e.replace(r[s],r[s].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let n=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!n)return{};for(let s=0;s<n.length;s++)if(n[s].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))i.fontWeight=n[s];else if(n[s].match(/^(underline|line-through)$/i))i.textDecoration=n[s];else if(n[s]!="/")if(n[s].match(/:/)){const o=n[s].replace("+"," ").split(/:[ ]*/);i[o[0]]=o[1]}else i.fill=Te.fromString(n[s]);return i}};function BM(t,e){if(e!=null){e=""+e;let i,r=(e=rl.escape(e)).match(/\{([^}]+)\}/g);if(r)for(i=0;i<r.length;i++){let n=P3(t,r[i].replace(/\{([^}]+)\}/,"$1"));n==null&&(n=""),e=e.split(r[i]).join(n)}e=rl.unescape(e)}else e="";return e}function P3(t,e,i){let r;const n=t.dataItem;let s,o=[],a=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;for(;s=a.exec(e),s!==null;)if(s[3]){o.push({prop:s[3]});const l=t.getDateFormatter().get("dateFields",[]),c=t.getNumberFormatter().get("numericFields",[]),h=t.getDurationFormatter().get("durationFields",[]);l.indexOf(s[3])!==-1?o.push({method:"formatDate",params:[]}):c.indexOf(s[3])!==-1?o.push({method:"formatNumber",params:[]}):h.indexOf(s[3])!==-1&&o.push({method:"formatDuration",params:[]})}else{let l=[];if(zE(s[2])!=""){let c,h=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;for(;c=h.exec(s[2]),c!==null;)l.push(c[1]||c[2]||c[3])}o.push({method:s[1],params:l})}if(n){r=$f(t,o,n._settings),(r==null||OI(r))&&(r=$f(t,o,n));let l=n.dataContext;r==null&&l&&(r=$f(t,o,l),r==null&&(r=$f(t,[{prop:e}],l)),r==null&&l.dataContext&&(r=$f(t,o,l.dataContext))),r==null&&n.component&&n.component.dataItem!==n&&(r=P3(n.component,e))}return r==null&&(r=$f(t,o,t)),r==null&&t.parent&&(r=P3(t.parent,e)),r}function yVe(t,e){const i=t.getPrivate("customData");if(OI(i))return i[e]}function $f(t,e,i,r){let n=i,s=!1;for(let o=0,a=e.length;o<a;o++){let l=e[o];if(l.prop){if(n instanceof il){let c=n.get(l.prop);c==null&&(c=n.getPrivate(l.prop)),c==null&&(c=yVe(n,l.prop)),c==null&&(c=n[l.prop]),n=c}else if(n.get){let c=n.get(l.prop);c==null&&(c=n[l.prop]),n=c}else n=n[l.prop];if(n==null)return}else switch(l.method){case"formatNumber":let c=Vs(n);c!=null&&(n=t.getNumberFormatter().format(c,r||l.params[0]||void 0),s=!0);break;case"formatDate":let h=y5e(n);if(!E3(h)||Q5(h.getTime()))return;h!=null&&(n=t.getDateFormatter().format(h,r||l.params[0]||void 0),s=!0);break;case"formatDuration":let p=Vs(n);p!=null&&(n=t.getDurationFormatter().format(p,r||l.params[0]||void 0,l.params[1]||void 0),s=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[l.method]&&n[l.method].apply(i,l.params)}}if(!s){let o=[{method:"",params:r}];if(r==null)ke(n)?(o[0].method="formatNumber",o[0].params=""):E3(n)&&(o[0].method="formatDate",o[0].params="");else{let a=B5e(r);a==="number"?o[0].method="formatNumber":a==="date"?o[0].method="formatDate":a==="duration"&&(o[0].method="formatDuration")}o[0].method&&(n=$f(t,o,n))}return n}Object.defineProperty(rl,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});let Us=class Use extends il{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new I5e(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_dispose(){lb(this.allChildren(),e=>{e.dispose()}),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(e=>{e.removePrivate("x"),e.removePrivate("y")})),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(e=>{e.markDirtyPosition()}),this.isDirty("maskContent")){const e=this._childrenDisplay;let i=this._contentMask;this.get("maskContent")?i||(i=c0.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=i,e.addChildAt(i._display,0),e.mask=i._display):i&&(e.removeChild(i._display),e.mask=null,i.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),Y(this._percentageSizeChildren,e=>{e._updateSize()}),Y(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e._updateSize()}),this.updateBackground()}updateBackground(){const e=this.get("background");let i=this._localBounds;if(i&&!this.isHidden()){let r=i.left,n=i.top,s=i.right-r,o=i.bottom-n,a=this.get("maxWidth"),l=this.get("maxHeight");l&&o>l&&(o=l),a&&s>a&&(s=a);let c=this.width(),h=this.height();e&&(e.setAll({width:s,height:o,x:r,y:n}),this._display.interactive&&(e._display.interactive=!0));const p=this._contentMask;p&&p.setAll({width:c+1,height:h+1});const f=this.get("verticalScrollbar");if(f){f.set("height",h),f.set("x",c-f.width()-f.get("marginRight",0)),f.set("end",f.get("start",0)+h/this._contentHeight);const y=f.get("background");y&&y.setAll({width:f.width(),height:h});let g=!0;this._contentHeight<=h&&(g=!1),f.setPrivate("visible",g)}}}_applyThemes(){return!!super._applyThemes()&&(this.eachChildren(e=>{e._applyThemes()}),!0)}_applyState(e){super._applyState(e),this.get("setStateOnChildren")&&this.eachChildren(i=>{i.states.apply(e)})}_applyStateAnimated(e,i){super._applyStateAnimated(e,i),this.get("setStateOnChildren")&&this.eachChildren(r=>{r.states.applyAnimate(e,i)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let e=this.get("width"),i=this.get("height"),r=this.getPrivate("width"),n=this.getPrivate("height"),s={left:0,top:0,right:this.width(),bottom:this.height()},o=this.get("layout"),a=!1,l=!1;if((o instanceof d0||o instanceof gm)&&(a=!0),o instanceof h0&&(l=!0),e==null&&r==null||i==null&&n==null||this.get("verticalScrollbar")){let c=Number.MAX_VALUE,h=c,p=-c,f=c,y=-c;const g=this.get("paddingLeft",0),v=this.get("paddingTop",0),_=this.get("paddingRight",0),w=this.get("paddingBottom",0);this.children.each(S=>{if(S.get("position")!="absolute"&&S.get("isMeasured")){let b=S.adjustedLocalBounds(),$=S.x(),T=S.y(),I=$+b.left,A=$+b.right,L=T+b.top,z=T+b.bottom;a&&(I-=S.get("marginLeft",0),A+=S.get("marginRight",0)),l&&(L-=S.get("marginTop",0),z+=S.get("marginBottom",0)),I<h&&(h=I),A>p&&(p=A),L<f&&(f=L),z>y&&(y=z)}}),h==c&&(h=0),p==-c&&(p=0),f==c&&(f=0),y==-c&&(y=0),s.left=h-g,s.top=f-v,s.right=p+_,s.bottom=y+w}this._contentWidth=s.right-s.left,this._contentHeight=s.bottom-s.top,ke(e)&&(s.left=0,s.right=e),ke(r)&&(s.left=0,s.right=r),ke(i)&&(s.top=0,s.bottom=i),ke(n)&&(s.top=0,s.bottom=n),this._localBounds=s}_updateBounds(){const e=this.get("layout");e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){const e=this.innerWidth(),i=this.innerHeight();if(e!=this._prevWidth||i!=this._prevHeight){let r=this.get("layout"),n=!1,s=!1;r&&((r instanceof d0||r instanceof gm)&&(n=!0),r instanceof h0&&(s=!0)),Y(this._percentageSizeChildren,o=>{if(!n){let a=o.get("width");a instanceof Jt&&o.setPrivate("width",a.value*e)}if(!s){let a=o.get("height");a instanceof Jt&&o.setPrivate("height",a.value*i)}}),Y(this._percentagePositionChildren,o=>{o.markDirtyPosition(),o.markDirtyBounds()}),this._prevWidth=e,this._prevHeight=i,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}_updateChildren(){if(this.isDirty("html")){const e=this.get("html");e&&e!==""?this._root._setHTMLContent(this,BM(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){const e=this.get("verticalScrollbar");if(e){e._setParent(this),e.children.removeValue(e.startGrip),e.children.removeValue(e.endGrip),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));let i=this.get("background");i||(i=this.set("background",c0.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",r=>{const n=r.originalEvent;if(!N5e(n,this))return;n.preventDefault();let s=n.deltaY/5e3;const o=e.get("start",0),a=e.get("end",1);o+s<=0&&(s=-o),a+s>=1&&(s=1-a),o+s>=0&&a+s<=1&&(e.set("start",o+s),e.set("end",a+s))}),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",()=>{let r=this._contentHeight;const n=this._childrenDisplay,s=this._contentMask;n.y=-e.get("start")*r,n.markDirtyLayer(),s&&(s._display.y=-n.y,n.mask=s._display)}),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{const i=this._prevSettings.verticalScrollbar;i&&(this._display.removeChild(i._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0))}}if(this.isDirty("background")){const e=this._prevSettings.background;e&&this._display.removeChild(e._display);const i=this.get("background");i instanceof il&&(i.set("isMeasured",!1),i._setParent(this),this._display.addChildAt(i._display,0))}if(this.isDirty("mask")){const e=this.get("mask"),i=this._prevSettings.mask;if(i&&(this._display.removeChild(i._display),i!=e&&i.dispose()),e){const r=e.parent;r&&r.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(e=>{e._processTemplateField()})}walkChildren(e){this.children.each(i=>{i instanceof Use&&i.walkChildren(e),e(i)})}eachChildren(e){const i=this.get("background");i&&e(i);const r=this.get("verticalScrollbar");r&&e(r);const n=this.get("mask");n&&e(n),this.children.values.forEach(s=>{e(s)})}allChildren(){const e=[];return this.eachChildren(i=>{e.push(i)}),e}_setDataItem(e){const i=e!==this._dataItem;super._setDataItem(e);const r=this.get("html","");r&&r!==""&&i&&this._root._setHTMLContent(this,BM(this,r))}};Object.defineProperty(Us,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(Us,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:il.classNames.concat([Us.className])});let hb=class extends il{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){if(this.get("text"))super._updateBounds();else{let e={left:0,right:0,top:0,bottom:0};this._adjustedLocalBounds=e}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty("opacity")){let i=this.get("opacity",1);this._display.alpha=i}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),this.get("role")=="tooltip"&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new gr(()=>{this._root._removeTooltipElement(this)})),this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){let i=this.get("fill");i&&(e.fill=i)}if(this.isDirty("fillOpacity")){let i=this.get("fillOpacity",1);i&&(e.fillOpacity=i)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),Y(this._textStyles,i=>{this._dirty[i]&&(e[i]=this.get(i),this.markDirtyBounds())}),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&this.get("role")=="tooltip"&&this._root.updateTooltip(this)}_getText(){const e=this.get("text","");return this.get("populateText")?BM(this,e):e}markDirtyText(){this._display.text=this._getText(),this.get("role")=="tooltip"&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}};Object.defineProperty(hb,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(hb,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:il.classNames.concat([hb.className])});let BE=class extends Us{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),Y(this._textKeys,e=>{const i=this.get(e);i!=null&&this._text.set(e,i)}),this.get("html","")!==""&&this._text.set("text",""),this.onPrivate("maxWidth",()=>{this._setMaxDimentions()}),this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(hb.new(this._root,{}))}_updateChildren(){if(super._updateChildren(),Y(this._textKeys,e=>{this._text.set(e,this.get(e))}),this.isDirty("maxWidth")&&this._setMaxDimentions(),this.isDirty("maxHeight")&&this._setMaxDimentions(),this.isDirty("rotation")&&this._setMaxDimentions(),this.get("html","")!==""?this._text.set("text",""):this._text.set("text",this.get("text")),this.isDirty("textAlign")||this.isDirty("width")){const e=this.get("textAlign");let i;this.get("width")!=null?i=e=="right"?Ii:e=="center"?Ki:0:e=="left"||e=="start"?i=this.get("paddingLeft"):e!="right"&&e!="end"||(i=-this.get("paddingRight")),this.text.set("x",i)}}_setMaxDimentions(){const e=this.get("rotation"),i=e==90||e==270||e==-90,r=this.get("maxWidth",this.getPrivate("maxWidth",1/0));ke(r)?this.text.set(i?"maxHeight":"maxWidth",r-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(i?"maxHeight":"maxWidth",void 0);const n=this.get("maxHeight",this.getPrivate("maxHeight",1/0));ke(n)?this.text.set(i?"maxWidth":"maxHeight",n-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(i?"maxWidth":"maxHeight",void 0)}_setDataItem(e){super._setDataItem(e),this._markDirtyKey("text"),this.text.get("populateText")&&this.text.markDirtyText()}getText(){return this._text._getText()}};Object.defineProperty(BE,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(BE,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Us.classNames.concat([BE.className])});class gVe{constructor(e,i){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){const i=new this(e,!0);return i.setupDefaultRules(),i}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,i=[]){let r=this._rules[e];r||(r=this._rules[e]=[]),i.sort(ym);const{index:n,found:s}=$5e(r,o=>{const a=ym(o.tags.length,i.length);return a===0?Nse(o.tags,i,ym):a});if(s)return r[n].template;{const o=C3.new({});return r.splice(n,0,{tags:i,template:o}),o}}rule(e,i=[]){return this.ruleRaw(e,i)}}let p0=class extends Mc{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let e=this.width(),i=this.height();if(e>0&&i>0){let r=this.get("cornerRadius",8);r=Ds(r,0,Math.min(e/2,i/2));let n=this.get("pointerX",0),s=this.get("pointerY",0),o=this.get("pointerBaseWidth",15)/2,a=0,l=0,c=0,h=(n-a)*(i-l)-(s-l)*(e-a),p=(n-c)*(0-i)-(s-i)*(e-c);const f=this._display;if(f.moveTo(r,0),h>0&&p>0){let y=Math.round(Ds(n,r+o,e-o-r));s=Ds(s,-1/0,0),f.lineTo(y-o,0),f.lineTo(n,s),f.lineTo(y+o,0)}if(f.lineTo(e-r,0),f.arcTo(e,0,e,r,r),h>0&&p<0){let y=Math.round(Ds(s,r+o,i-o-r));n=Ds(n,e,1/0),f.lineTo(e,r),f.lineTo(e,Math.max(y-o,r)),f.lineTo(n,s),f.lineTo(e,y+o)}if(f.lineTo(e,i-r),f.arcTo(e,i,e-r,i,r),h<0&&p<0){let y=Math.round(Ds(n,r+o,e-o-r));s=Ds(s,i,1/0),f.lineTo(e-r,i),f.lineTo(y+o,i),f.lineTo(n,s),f.lineTo(y-o,i)}if(f.lineTo(r,i),f.arcTo(0,i,0,i-r,r),h<0&&p>0){let y=Math.round(Ds(s,r+o,i-r-o));n=Ds(n,-1/0,0),f.lineTo(0,i-r),f.lineTo(0,y+o),f.lineTo(n,s),f.lineTo(0,Math.max(y-o,r))}f.lineTo(0,r),f.arcTo(0,0,r,0,r),f.closePath()}}}};Object.defineProperty(p0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(p0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mc.classNames.concat([p0.className])});let pb=class extends Us{constructor(e,i,r,n=[]){super(e,i,r,n),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=Q5e(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",p0.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(BE.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",e=>{e&&(ir(e,"pointerover",i=>{this._htmlContentHovered=!0}),ir(e,"pointerout",i=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),mh(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),this.get("labelText")!=null&&this.label.set("text",this.get("labelText")),this.get("labelHTML")!=null&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const e=this.get("background");this._keepHoverDp=new zs([e.events.on("pointerover",i=>{let r=this.get("tooltipTarget");r&&(r.parent&&r.parent.getPrivate("tooltipTarget")==r&&(r=r.parent),r.hover())}),e.events.on("pointerout",i=>{let r=this.get("tooltipTarget");r&&(r.parent&&r.parent.getPrivate("tooltipTarget")==r&&(r=r.parent),this._htmlContentHovered||r.unhover())})])}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let e=this.get("tooltipTarget");const i=this.get("background");let r,n;e&&i&&(r=e.get("fill"),n=e.get("stroke"),r==null&&(r=n),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),r!=null&&i.set("fill",r),this._fillDp=e.on("fill",s=>{s!=null&&(i.set("fill",s),this._updateTextColor(s))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),r!=null&&i.set("stroke",r),this._strokeDp=e.on("fill",s=>{s!=null&&i.set("stroke",s)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),r!=null&&this.label.set("fill",r),this._labelDp=e.on("fill",s=>{s!=null&&this.label.set("fill",s)}),this._disposers.push(this._labelDp))),this._updateTextColor(r)}_updateTextColor(e){this.get("autoTextColor")&&(e==null&&(e=this.get("background").get("fill")),e==null&&(e=this._root.interfaceColors.get("background")),e instanceof Te&&this.label.set("fill",Te.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(e){super._setDataItem(e),this.label._setDataItem(e)}_updateBackground(){super.updateBackground();const e=this._root.container;if(e){let i=.5,r=.5,n=this.get("centerX");n instanceof Jt&&(i=n.value);let s=this.get("centerY");s instanceof Jt&&(r=s.value);let o=e.width(),a=e.height(),l=this.parent,c=0,h=0;if(l){c=l.x(),h=l.y();const H=l.get("layerMargin");H&&(c+=H.left||0,h+=H.top||0,o+=(H.left||0)+(H.right||0),a+=(H.top||0)+(H.bottom||0))}const p=this.get("bounds",{left:-c,top:-h,right:o-c,bottom:a-h});this._updateBounds();let f=this.width(),y=this.height();f===0&&(f=this._w),y===0&&(y=this._h);let g=this.get("pointTo",{x:o/2,y:a/2}),v=g.x,_=g.y,w=this.get("pointerOrientation"),S=this.get("background"),b=0,$=0,T=0;S instanceof p0&&(b=S.get("pointerLength",0),$=S.get("strokeWidth",0)/2,T=$,S.set("width",f),S.set("height",y));let I=0,A=0,L=p.right-p.left,z=p.bottom-p.top;w=="horizontal"||w=="left"||w=="right"?($=0,w=="horizontal"?v>p.left+L/2?(v-=f*(1-i)+b,T*=-1):v+=f*i+b:w=="left"?v+=f*(1-i)+b:(v-=f*i+b,T*=-1)):(T=0,w=="vertical"?_>p.top+y/2+b?_-=y*(1-r)+b:(_+=y*r+b,$*=-1):w=="down"?_-=y*(1-r)+b:(_+=y*r+b,$*=-1)),v=Ds(v,p.left+f*i,p.left+L-f*(1-i))+T,_=Ds(_,p.top+y*r,p.top+z-y*(1-r))-$,I=g.x-v+f*i+T,A=g.y-_+y*r-$,this._fx=v,this._fy=_;const j=this.get("animationDuration",0);if(j>0&&this.get("visible")&&this.get("opacity")>.1){const H=this.get("animationEasing");this.animate({key:"x",to:v,duration:j,easing:H}),this.animate({key:"y",to:_,duration:j,easing:H})}else this.set("x",v),this.set("y",_);S instanceof p0&&(S.set("pointerX",I),S.set("pointerY",A)),f>0&&(this._w=f),y>0&&(this._h=y)}}};Object.defineProperty(pb,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(pb,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Us.classNames.concat([pb.className])});function Ze(t,e,i,r){t.set(e,i.get(r)),i.on(r,n=>{t.set(e,n)})}let vVe=class extends gVe{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,i=this._root.interfaceColors,r=this._root.horizontalLayout,n=this._root.verticalLayout,s=this.rule.bind(this);s("InterfaceColors").setAll({stroke:Te.fromHex(15066597),fill:Te.fromHex(15987699),primaryButton:Te.fromHex(6788316),primaryButtonHover:Te.fromHex(6779356),primaryButtonDown:Te.fromHex(6872182),primaryButtonActive:Te.fromHex(6872182),primaryButtonText:Te.fromHex(16777215),primaryButtonStroke:Te.fromHex(16777215),secondaryButton:Te.fromHex(14277081),secondaryButtonHover:Te.fromHex(10724259),secondaryButtonDown:Te.fromHex(9276813),secondaryButtonActive:Te.fromHex(15132390),secondaryButtonText:Te.fromHex(0),secondaryButtonStroke:Te.fromHex(16777215),grid:Te.fromHex(0),background:Te.fromHex(16777215),alternativeBackground:Te.fromHex(0),text:Te.fromHex(0),alternativeText:Te.fromHex(16777215),disabled:Te.fromHex(11382189),positive:Te.fromHex(5288704),negative:Te.fromHex(11730944)});{const o=s("ColorSet");o.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[Te.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),o.setPrivate("currentStep",0),o.setPrivate("currentPass",0)}s("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:Qx(bw)}),s("Component").setAll({interpolationDuration:0,interpolationEasing:Qx(bw)}),s("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:Ki,tooltipY:Ki,tooltipPosition:"fixed",isMeasured:!0}),s("Sprite").states.create("default",{visible:!0,opacity:1}),s("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),s("Graphics").setAll({strokeWidth:1}),s("Chart").setAll({width:Ii,height:Ii,interactiveChildren:!1}),s("Sprite",["horizontal","center"]).setAll({centerX:Ki,x:Ki}),s("Sprite",["vertical","center"]).setAll({centerY:Ki,y:Ki}),s("Container",["horizontal","layout"]).setAll({layout:r}),s("Container",["vertical","layout"]).setAll({layout:n}),s("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),s("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),s("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),s("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),s("LinearGradient").setAll({rotation:90}),s("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:gm.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),s("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:r,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});{const o=s("Rectangle",["legend","item","background"]);o.setAll({fillOpacity:0}),Ze(o,"fill",i,"background")}s("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:Ki,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),s("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:Ii,height:Ii,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const o=s("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});Ze(o,"fill",i,"disabled"),Ze(o,"stroke",i,"disabled")}s("Label",["legend","label"]).setAll({centerY:Ki,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),Ze(s("Label",["legend","label"]).states.create("disabled",{}),"fill",i,"disabled"),s("Label",["legend","value","label"]).setAll({centerY:Ki,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:Ii,populateText:!0}),Ze(s("Label",["legend","value","label"]).states.create("disabled",{}),"fill",i,"disabled"),s("HeatLegend").setAll({stepCount:1}),s("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),s("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:Ii,width:15}),s("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:Ii,height:15}),s("HeatLegend",["vertical"]).setAll({height:Ii}),s("HeatLegend",["horizontal"]).setAll({width:Ii}),s("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),s("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const o=s("Label");o.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),Ze(o,"fill",i,"text")}s("RadialLabel").setAll({textType:"regular",centerY:Ki,centerX:Ki,inside:!1,radius:0,baseRadius:Ii,orientation:"auto",textAlign:"center"}),s("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),s("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),s("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const o=s("Tick");o.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),Ze(o,"stroke",i,"grid")}s("Bullet").setAll({locationX:.5,locationY:.5}),s("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:Ki,centerY:Ki,animationEasing:Qx(bw),exportable:!1}),s("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:Te.fromHex(16777215)});{const o=s("Label",["tooltip"]);o.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),Ze(o,"fill",i,"alternativeText")}s("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:r,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),s("Button").states.create("hover",{}),s("Button").states.create("down",{stateAnimationDuration:0}),s("Button").states.create("active",{});{const o=s("RoundedRectangle",["button","background"]);Ze(o,"fill",i,"primaryButton"),Ze(o,"stroke",i,"primaryButtonStroke")}Ze(s("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),Ze(s("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown"),Ze(s("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",i,"primaryButtonActive"),Ze(s("Graphics",["button","icon"]),"stroke",i,"primaryButtonText"),Ze(s("Label",["button"]),"fill",i,"primaryButtonText"),s("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:Ii,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});{const o=s("RoundedRectangle",["background","button","zoom"]);o.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Ze(o,"fill",i,"primaryButton")}Ze(s("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),Ze(s("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown");{const o=s("Graphics",["icon","button","zoom"]);o.setAll({crisp:!0,strokeOpacity:.7,draw:a=>{a.moveTo(0,0),a.lineTo(12,0)}}),Ze(o,"stroke",i,"primaryButtonText")}s("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:Ki,centerY:Ki,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});{const o=s("RoundedRectangle",["background","resize","button"]);o.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Ze(o,"fill",i,"secondaryButton"),Ze(o,"stroke",i,"secondaryButtonStroke")}Ze(s("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),Ze(s("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown");{const o=s("Graphics",["resize","button","icon"]);o.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:a=>{a.moveTo(0,.5),a.lineTo(0,12.5),a.moveTo(4,.5),a.lineTo(4,12.5)}}),Ze(o,"stroke",i,"secondaryButtonText")}s("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),s("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),s("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});{const o=s("RoundedRectangle",["play","background"]);o.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Ze(o,"fill",i,"primaryButton")}{const o=s("Graphics",["play","icon"]);o.setAll({stateAnimationDuration:0,dx:1,draw:a=>{a.moveTo(0,-5),a.lineTo(8,0),a.lineTo(0,5),a.lineTo(0,-5)}}),Ze(o,"fill",i,"primaryButtonText")}s("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),s("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:o=>{o.moveTo(-4,-5),o.lineTo(-1,-5),o.lineTo(-1,5),o.lineTo(-4,5),o.lineTo(-4,-5),o.moveTo(4,-5),o.lineTo(1,-5),o.lineTo(1,5),o.lineTo(4,5),o.lineTo(4,-5)}}),s("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const o=s("RoundedRectangle",["switch","background"]);o.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Ze(o,"fill",i,"primaryButton")}{const o=s("Circle",["switch","icon"]);o.setAll({radius:8,centerY:0,centerX:0,dx:0}),Ze(o,"fill",i,"primaryButtonText")}s("Graphics",["switch","icon"]).states.create("active",{dx:16}),s("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:Qx(bw)}),s("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:Ii}),s("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:Ii}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const o=s("RoundedRectangle",["scrollbar","main","background"]);o.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),Ze(o,"fill",i,"fill")}{const o=s("RoundedRectangle",["scrollbar","thumb"]);o.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),Ze(o,"fill",i,"secondaryButton")}Ze(s("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),Ze(s("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown"),s("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:Ki,width:Ii,centerX:Ki,ariaLabel:e.translate("Use up and down arrows to move selection")}),s("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:Ki,centerY:Ki,height:Ii,ariaLabel:e.translate("Use left and right arrows to move selection")});{const o=s("PointedRectangle",["axis","tooltip","background"]);o.setAll({cornerRadius:0}),Ze(o,"fill",i,"alternativeBackground")}s("Label",["axis","tooltip"]).setAll({role:void 0}),s("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),s("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),s("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),s("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),s("Star").setAll({spikes:5,innerRadius:5,radius:10}),s("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),s("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),s("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),s("SpriteResizer").setAll({rotationStep:10}),s("Container",["resizer","grip"]).states.create("hover",{});{const o=s("RoundedRectangle",["resizer","grip"]);o.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),Ze(o,"fill",i,"background"),Ze(o,"stroke",i,"alternativeBackground")}{const o=s("RoundedRectangle",["resizer","grip","outline"]);o.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),o.states.create("hover",{fillOpacity:.3}),Ze(o,"fill",i,"alternativeBackground")}s("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),s("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const o=s("Rectangle",["resizer","rectangle"]);o.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),Ze(o,"stroke",i,"alternativeBackground")}}};class _Ve{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver(e=>{Y(e,i=>{Y(this._targets,r=>{r.target===i.target&&r.callback()})})})}addTarget(e,i){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:i})}removeTarget(e){this._observer.unobserve(e),LI(this._targets,i=>i.target!==e)}}class RI{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(e,i){if(this._timer===null){let n=null;const s=()=>{const o=Date.now();(n===null||o>n+RI.delay)&&(n=o,Y(this._targets,a=>{let l=a.target.getBoundingClientRect();l.width===a.size.width&&l.height===a.size.height||(a.size=l,a.callback())})),this._targets.length===0?this._timer=null:this._timer=requestAnimationFrame(s)};this._timer=requestAnimationFrame(s)}let r={width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0};this._targets.push({target:e,callback:i,size:r})}removeTarget(e){LI(this._targets,i=>i.target!==e),this._targets.length===0&&this._timer!==null&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(RI,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let wP=null;function wVe(){return wP===null&&(wP=typeof ResizeObserver<"u"?new _Ve:new RI),wP}class bVe{constructor(e,i){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=wVe(),this._element=e,this._listener=Pse(i),this._sensor.addTarget(e,i)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class GE extends $s{}Object.defineProperty(GE,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(GE,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$s.classNames.concat([GE.className])});class SVe extends $s{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const e="_big_number_suffix_",i="_small_number_suffix_",r="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(i+"24")},{number:1e-21,suffix:this._t(i+"21")},{number:1e-18,suffix:this._t(i+"18")},{number:1e-15,suffix:this._t(i+"15")},{number:1e-12,suffix:this._t(i+"12")},{number:1e-9,suffix:this._t(i+"9")},{number:1e-6,suffix:this._t(i+"6")},{number:.001,suffix:this._t(i+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(r+"B")},{number:1024,suffix:this._t(r+"KB")},{number:1048576,suffix:this._t(r+"MB")},{number:1073741824,suffix:this._t(r+"GB")},{number:1099511627776,suffix:this._t(r+"TB")},{number:0x4000000000000,suffix:this._t(r+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){let n;(i==null||B0(i)&&i.toLowerCase()==="number")&&(i=this.get("numberFormat",""));let s=Number(e);if(OI(i))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),i).format(s):new Intl.NumberFormat(void 0,i).format(s)}catch{return"Invalid"}else{i=eV(i);let o,a=this.parseFormat(i,this._root.language);o=s>this.get("negativeBase")?a.positive:s<this.get("negativeBase")?a.negative:a.zero,r==null||o.mod||(o=C5e(o),o.decimals.active=s==0?0:r),n=o.template.split(sp).join(this.applyFormat(s,o))}return n}parseFormat(e,i){const r=i.translateEmpty("_thousandSeparator"),n=i.translateEmpty("_decimalSeparator");let s={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1}},o=(e=e.replace("||",Fg)).split("|");return s.positive.source=o[0],o[2]===void 0?s.zero=s.positive:s.zero.source=o[2],o[1]===void 0?s.negative=s.positive:s.negative.source=o[1],pi(s,(a,l)=>{if(l.parsed)return;let c=l.source;c.toLowerCase()==="number"&&(c=this.get("numberFormat","#,###.#####"));let h=rl.chunk(c,!0);for(let p=0;p<h.length;p++){let f=h[p];if(f.text=f.text.replace(Fg,"|"),f.type==="value"){let y=f.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);if(y)if(y===null||y[0]==="")l.template+=f.text;else{let g=y[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);g&&(l.mod=g[0].toLowerCase(),l.modSpacing=!!y[0].match(/[ ]{1}[abespABESP%‰!]{1}$/));let v=y[0].split(".");if(v[0]!==""){l.thousands.active=(v[0].match(/0/g)||[]).length,l.thousands.passive=(v[0].match(/\#/g)||[]).length+l.thousands.active;let _=v[0].split(",");_.length===1||(l.thousands.interval=(_.pop()||"").length,l.thousands.interval===0&&(l.thousands.interval=-1))}v[1]===void 0||(l.decimals.active=(v[1].match(/0/g)||[]).length,l.decimals.passive=(v[1].match(/\#/g)||[]).length+l.decimals.active),l.template+=f.text.split(y[0]).join(sp)}}else l.template+=f.text}l.parsed=!0}),s}applyFormat(e,i){let r=e<0;e=Math.abs(e);let n="",s="",o=i.mod?i.mod.split(""):[];if(o.indexOf("b")!==-1){let p=this.applyPrefix(e,this.get("bytePrefixes"),o.indexOf("!")!==-1);e=p[0],n=p[1],s=p[2],i.modSpacing&&(s=" "+s)}else if(o.indexOf("a")!==-1){let p=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),o.indexOf("!")!==-1);e=p[0],n=p[1],s=p[2],i.modSpacing&&(s=" "+s)}else if(o.indexOf("p")!==-1){let p=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(p)),n=this._root.language.translate("_percentPrefix"),s=this._root.language.translate("_percentSuffix"),n==""&&s==""&&(s="%")}else if(o.indexOf("%")!==-1){let p=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(p)),s="%"}else if(o.indexOf("‰")!==-1){let p=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(p)),s="‰"}if(o.indexOf("e")!==-1){let p;p=i.decimals.passive>=0?e.toExponential(i.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(p[0]),s="e"+p[1],i.modSpacing&&(s=" "+s)}else if(i.decimals.passive===0)e=Math.round(e);else if(i.decimals.passive>0){let p=Math.pow(10,i.decimals.passive);e=Math.round(e*p)/p}let a="",l=g5e(e).split("."),c=l[0];if(c.length<i.thousands.active&&(c=Array(i.thousands.active-c.length+1).join("0")+c),i.thousands.interval>0){let p=[],f=c.split("").reverse().join("");for(let y=0,g=c.length;y<=g;y+=i.thousands.interval){let v=f.substr(y,i.thousands.interval).split("").reverse().join("");v!==""&&p.unshift(v)}c=p.join(i.thousands.separator)}a+=c,l.length===1&&l.push("");let h=l[1];return h.length<i.decimals.active&&(h+=Array(i.decimals.active-h.length+1).join("0")),h!==""&&(a+=i.decimals.separator+h),a===""&&(a="0"),e!==0&&r&&o.indexOf("s")===-1&&(a="-"+a),n&&(a=n+a),s&&(a+=s),a}applyPrefix(e,i,r=!1){let n=e,s="",o="",a=!1,l=1;for(let c=0,h=i.length;c<h;c++)i[c].number<=e&&(i[c].number===0?n=0:(n=e/i[c].number,l=i[c].number),s=i[c].prefix,o=i[c].suffix,a=!0);return!a&&r&&i.length&&e!=0&&(n=e/i[0].number,s=i[0].prefix,o=i[0].suffix,a=!0),a&&(n=parseFloat(n.toPrecision(Math.min(l.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,s,o]}escape(e){return e.replace("||",Fg)}unescape(e){return e.replace(Fg,"|")}}function Bse(t,e){let i=0,r=0,n=1,s=0,o=0,a=0,l=0,c=0;return t.formatToParts(e).forEach(h=>{switch(h.type){case"year":i=+h.value;break;case"month":r=+h.value-1;break;case"day":n=+h.value;break;case"hour":s=+h.value;break;case"minute":o=+h.value;break;case"second":a=+h.value;break;case"fractionalSecond":l=+h.value;break;case"weekday":switch(h.value){case"Sun":c=0;break;case"Mon":c=1;break;case"Tue":c=2;break;case"Wed":c=3;break;case"Thu":c=4;break;case"Fri":c=5;break;case"Sat":c=6}}}),s===24&&(s=0),{year:i,month:r,day:n,hour:s,minute:o,second:a,millisecond:l,weekday:c}}function n9(t,e){const{year:i,month:r,day:n,hour:s,minute:o,second:a,millisecond:l}=Bse(t,e);return Date.UTC(i,r,n,s,o,a,l)}class xVe{constructor(e,i){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=e,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(e){return new this(e,!0)}convertLocal(e){const i=this.offsetUTC(e),r=e.getTimezoneOffset(),n=new Date(e);n.setUTCMinutes(n.getUTCMinutes()-(i-r));const s=n.getTimezoneOffset();return r!=s&&n.setUTCMinutes(n.getUTCMinutes()+s-r),n}offsetUTC(e){return(n9(this._utc,e)-n9(this._dtf,e))/6e4}parseDate(e){return Bse(this._dtf,e)}}class $Ve extends $s{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i){let r;i!==void 0&&i!==""||(i=this.get("dateFormat","yyyy-MM-dd"));let n=e;if(OI(i))try{const a=this.get("intlLocales");return a?new Intl.DateTimeFormat(a,i).format(n):new Intl.DateTimeFormat(void 0,i).format(n)}catch{return"Invalid"}let s=this.parseFormat(i);const o=this._root.timezone;return o&&!this._root.utc&&(n=o.convertLocal(n)),ke(n.getTime())?(r=this.applyFormat(n,s),this.get("capitalize")&&(r=r.replace(/^.{1}/,r.substr(0,1).toUpperCase())),r):"Invalid date"}applyFormat(e,i){let r,n,s,o,a,l,c,h,p=i.template,f=e.getTime();this._root.utc?(r=e.getUTCFullYear(),n=e.getUTCMonth(),s=e.getUTCDay(),o=e.getUTCDate(),a=e.getUTCHours(),l=e.getUTCMinutes(),c=e.getUTCSeconds(),h=e.getUTCMilliseconds()):(r=e.getFullYear(),n=e.getMonth(),s=e.getDay(),o=e.getDate(),a=e.getHours(),l=e.getMinutes(),c=e.getSeconds(),h=e.getMilliseconds());for(let y=0,g=i.parts.length;y<g;y++){let v="";switch(i.parts[y]){case"G":v=this._t(r<0?"_era_bc":"_era_ad");break;case"yyyy":v=Math.abs(r).toString(),r<0&&(v+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":v=Math.abs(r).toString().substr(-i.parts[y].length),r<0&&(v+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let _=G5e(e,this._root.utc);v=i.parts[y]=="YYYY"?Math.abs(_).toString():Math.abs(_).toString().substr(-i.parts[y].length),_<0&&(v+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":v=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":v=this._t(this._getMonth(n)).substr(0,1);break;case"MMMM":v=this._t(this._getMonth(n));break;case"MMM":v=this._t(this._getShortMonth(n));break;case"MM":v=Ri(n+1,2,"0");break;case"M":v=(n+1).toString();break;case"ww":v=Ri(zM(e,this._root.utc),2,"0");break;case"w":v=zM(e,this._root.utc).toString();break;case"W":v=H5e(e,this._root.utc).toString();break;case"dd":v=Ri(o,2,"0");break;case"d":v=o.toString();break;case"DD":case"DDD":v=Ri(e9(e,this._root.utc).toString(),i.parts[y].length,"0");break;case"D":v=e9(e,this._root.utc).toString();break;case"t":v=this._root.language.translateFunc("_dateOrd").call(this,o);break;case"E":v=(s||7).toString();break;case"EE":v=Ri((s||7).toString(),2,"0");break;case"EEE":case"eee":v=this._t(this._getShortWeekday(s));break;case"EEEE":case"eeee":v=this._t(this._getWeekday(s));break;case"EEEEE":case"eeeee":v=this._t(this._getShortWeekday(s)).substr(0,1);break;case"e":case"ee":v=(s-(this._root.locale.firstDayOfWeek||1)+1).toString(),i.parts[y]=="ee"&&(v=Ri(v,2,"0"));break;case"a":v=a>=12?this._t("PM"):this._t("AM");break;case"aa":v=a>=12?this._t("P.M."):this._t("A.M.");break;case"aaa":v=a>=12?this._t("P"):this._t("A");break;case"h":v=Jx(a).toString();break;case"hh":v=Ri(Jx(a),2,"0");break;case"H":v=a.toString();break;case"HH":v=Ri(a,2,"0");break;case"K":v=Jx(a,0).toString();break;case"KK":v=Ri(Jx(a,0),2,"0");break;case"k":v=(a+1).toString();break;case"kk":v=Ri(a+1,2,"0");break;case"m":v=l.toString();break;case"mm":v=Ri(l,2,"0");break;case"s":v=c.toString();break;case"ss":v=Ri(c,2,"0");break;case"S":case"SS":case"SSS":v=Math.round(h/1e3*Math.pow(10,i.parts[y].length)).toString();break;case"x":v=f.toString();break;case"n":case"nn":case"nnn":v=Ri(h,i.parts[y].length,"0");break;case"z":v=Kx(e,!1,!1,this._root.utc);break;case"zz":v=Kx(e,!0,!1,this._root.utc);break;case"zzz":v=Kx(e,!1,!0,this._root.utc);break;case"zzzz":v=Kx(e,!0,!0,this._root.utc);break;case"Z":case"ZZ":let w=this._root.utc?"UTC":this._root.timezone;w instanceof xVe&&(w=w.name);const S=w?W5e(w):e.getTimezoneOffset();let b=Math.abs(S)/60,$=Math.floor(b),T=60*b-60*$;this._root.utc&&($=0,T=0),i.parts[y]=="Z"?(v="GMT",v+=S>0?"-":"+",v+=Ri($,2)+":"+Ri(T,2)):(v=S>0?"-":"+",v+=Ri($,2)+Ri(T,2));break;case"i":v=e.toISOString();break;case"I":v=e.toUTCString()}p=p.replace(sp,v)}return p}parseFormat(e){let i={template:"",parts:[]},r=rl.chunk(e,!0);for(let n=0;n<r.length;n++){let s=r[n];if(s.type==="value"){if(s.text.match(/^date$/i)){let a=this.get("dateFormat","yyyy-MM-dd");B0(a)||(a="yyyy-MM-dd"),s.text=a}let o=s.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(o)for(let a=0;a<o.length;a++)i.parts.push(o[a]),s.text=s.text.replace(o[a],sp)}i.template+=s.text}return i}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(e){return this._months()[e]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(e){return this._shortMonths()[e]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(e){return this._weekdays()[e]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(e){return this._shortWeekdays()[e]}parse(e,i){if(e instanceof Date)return e;if(ke(e))return new Date(e);let r;B0(e)||(e=e.toString());let n="";i=(i=eV(i)).substr(0,e.length);let s=this.parseFormat(i),o={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},a={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},l=0,c=0;for(let f=0;f<s.parts.length;f++){switch(c=f+l+1,s.parts[f]){case"yyyy":case"YYYY":n+="([0-9]{4})",o.year=c;break;case"yyy":case"YYY":n+="([0-9]{3})",o.year3=c;break;case"yy":case"YY":n+="([0-9]{2})",o.year2=c;break;case"y":case"Y":n+="([0-9]{1})",o.year1=c;break;case"MMMM":n+="("+this.getStringList(this._months()).join("|")+")",o.monthLong=c;break;case"MMM":n+="("+this.getStringList(this._shortMonths()).join("|")+")",o.monthShort=c;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",o.month=c;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",o.week=c;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",o.day=c;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.yearDay=c;break;case"dddd":n+="("+this.getStringList(this._weekdays()).join("|")+")",o.weekdayLong=c;break;case"ddd":n+="("+this.getStringList(this._shortWeekdays()).join("|")+")",o.weekdayShort=c;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",o.am=c;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",o.hour12Base1=c;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",o.hourBase0=c;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",o.hour12Base0=c;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",o.hourBase1=c;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",o.minute=c;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",o.second=c;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=c,o.millisecondDigits=s.parts[f].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=c;break;case"x":n+="([0-9]{1,})",o.timestamp=c;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",o.zone=c;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",o.zone=c;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",o.iso=c,l+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":l--}n+="[^0-9]*"}let h=new RegExp(n),p=e.match(h);if(p){if(o.year>-1&&(a.year=parseInt(p[o.year])),o.year3>-1){let f=parseInt(p[o.year3]);f+=1e3,a.year=f}if(o.year2>-1){let f=parseInt(p[o.year2]);f+=f>50?1e3:2e3,a.year=f}if(o.year1>-1){let f=parseInt(p[o.year1]);f=10*Math.floor(new Date().getFullYear()/10)+f,a.year=f}if(o.monthLong>-1&&(a.month=this.resolveMonth(p[o.monthLong])),o.monthShort>-1&&(a.month=this.resolveShortMonth(p[o.monthShort])),o.month>-1&&(a.month=parseInt(p[o.month])-1),o.week>-1&&o.day===-1&&(a.month=0,a.day=q5e(parseInt(p[o.week]),a.year,1,this._root.utc)),o.day>-1&&(a.day=parseInt(p[o.day])),o.yearDay>-1&&(a.month=0,a.day=parseInt(p[o.yearDay])),o.hourBase0>-1&&(a.hour=parseInt(p[o.hourBase0])),o.hourBase1>-1&&(a.hour=parseInt(p[o.hourBase1])-1),o.hour12Base0>-1){let f=parseInt(p[o.hour12Base0]);f==11&&(f=0),o.am>-1&&!this.isAm(p[o.am])&&(f+=12),a.hour=f}if(o.hour12Base1>-1){let f=parseInt(p[o.hour12Base1]);f==12&&(f=0),o.am>-1&&!this.isAm(p[o.am])&&(f+=12),a.hour=f}if(o.minute>-1&&(a.minute=parseInt(p[o.minute])),o.second>-1&&(a.second=parseInt(p[o.second])),o.millisecond>-1){let f=parseInt(p[o.millisecond]);o.millisecondDigits==2?f*=10:o.millisecondDigits==1&&(f*=100),a.millisecond=f}if(o.timestamp>-1){a.timestamp=parseInt(p[o.timestamp]);const f=new Date(a.timestamp);a.year=f.getUTCFullYear(),a.month=f.getUTCMonth(),a.day=f.getUTCDate(),a.hour=f.getUTCHours(),a.minute=f.getUTCMinutes(),a.second=f.getUTCSeconds(),a.millisecond=f.getUTCMilliseconds()}o.zone>-1&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),p[o.zone])),o.iso>-1&&(a.year=Vs(p[o.iso+0]),a.month=Vs(p[o.iso+1])-1,a.day=Vs(p[o.iso+2]),a.hour=Vs(p[o.iso+3]),a.minute=Vs(p[o.iso+4]),a.second=Vs(p[o.iso+5]),a.millisecond=Vs(p[o.iso+6]),p[o.iso+7]=="Z"||p[o.iso+7]=="z"?a.utc=!0:p[o.iso+7]!=""&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),p[o.iso+7]))),r=a.utc?new Date(Date.UTC(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond)):new Date(a.year,a.month,a.day,a.hour,a.minute+a.offset,a.second,a.millisecond)}else r=new Date(e);return r}resolveTimezoneOffset(e,i){if(i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let r=i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),n=r[1],s=r[2],o=r[3],a=60*parseInt(s)+parseInt(o);return n=="+"&&(a*=-1),a-(e||new Date).getTimezoneOffset()}return 0}resolveMonth(e){let i=this._months().indexOf(e);return i>-1||!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._months()).indexOf(e),i>-1)?i:0}resolveShortMonth(e){let i=this._shortMonths().indexOf(e);return i>-1?i:(i=this._months().indexOf(e),i>-1||this._root.language&&!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._shortMonths()).indexOf(e),i>-1)?i:0)}isAm(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}getStringList(e){let i=[];for(let r=0;r<e.length;r++)this._root.language?i.push(XG(this._t(e[r]))):i.push(XG(e[r]));return i}}class EVe extends $s{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const e="_duration_millisecond",i="_duration_second",r="_duration_minute",n="_duration_hour",s="_duration_day",o="_duration_week",a="_duration_month",l="_duration_year",c="_second",h="_minute",p="_hour",f="_day",y="_week",g="_week",v="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+c),minute:this._t(e+h),hour:this._t(e+p),day:this._t(e+f),week:this._t(e+y),month:this._t(e+g),year:this._t(e+v)},second:{second:this._t(i),minute:this._t(i+h),hour:this._t(i+p),day:this._t(i+f),week:this._t(i+y),month:this._t(i+g),year:this._t(i+v)},minute:{minute:this._t(r),hour:this._t(r+p),day:this._t(r+f),week:this._t(r+y),month:this._t(r+g),year:this._t(r+v)},hour:{hour:this._t(n),day:this._t(n+f),week:this._t(n+y),month:this._t(n+g),year:this._t(n+v)},day:{day:this._t(s),week:this._t(s+y),month:this._t(s+g),year:this._t(s+v)},week:{week:this._t(o),month:this._t(o+g),year:this._t(o+v)},month:{month:this._t(a),year:this._t(a+v)},year:{year:this._t(l)}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){let n=r||this.get("baseUnit");i!==void 0&&i!==""||(i=this.get("durationFormat")!=null?this.get("durationFormat"):this.getFormat(Vs(e),void 0,n)),i=eV(i);let s,o=this.parseFormat(i,n),a=Number(e);s=a>this.get("negativeBase")?o.positive:a<this.get("negativeBase")?o.negative:o.zero;let l=this.applyFormat(a,s);return s.color!==""&&(l="["+s.color+"]"+l+"[/]"),l}parseFormat(e,i){let r=i||this.get("baseUnit"),n={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}},s=(e=e.replace("||",Fg)).split("|");return n.positive.source=s[0],s[2]===void 0?n.zero=n.positive:n.zero.source=s[2],s[1]===void 0?n.negative=n.positive:n.negative.source=s[1],pi(n,(o,a)=>{if(a.parsed)return;let l=a.source,c=[];c=a.source.match(/^\[([^\]]*)\]/),c&&c.length&&c[0]!==""&&(l=a.source.substr(c[0].length),a.color=c[1]);let h=rl.chunk(l,!0);for(let p=0;p<h.length;p++){let f=h[p];if(f.text=f.text.replace(Fg,"|"),f.type==="value"){f.text.match(/[yYMdDwhHKkmsSn]+a/)&&(a.absolute=!0,f.text=f.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let y=f.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(y)for(let g=0;g<y.length;g++)y[g]==null&&(y[g]=this._unitAliases[y[g]]),a.parts.push(y[g]),f.text=f.text.replace(y[g],sp)}a.template+=f.text}a.parsed=!0}),n}applyFormat(e,i){let r=!i.absolute&&e<this.get("negativeBase");e=Math.abs(e);let n=this.toTimeStamp(e,i.baseUnit),s=i.template;for(let o=0,a=i.parts.length;o<a;o++){let l=i.parts[o],c=this._toTimeUnit(l.substr(0,1)),h=l.length,p=Math.floor(n/this._getUnitValue(c));s=s.replace(sp,Ri(p,h,"0")),n-=p*this._getUnitValue(c)}return r&&(s="-"+s),s}toTimeStamp(e,i){return e*this._getUnitValue(i)}_toTimeUnit(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(e,i,r){if(this.get("durationFormat")!=null)return this.get("durationFormat");if(r||(r=this.get("baseUnit")),i!=null&&e!=i){e=Math.abs(e),i=Math.abs(i);let n=this.getValueUnit(Math.max(e,i),r);return this.get("durationFormats")[r][n]}{let n=this.getValueUnit(e,r);return this.get("durationFormats")[r][n]}}getValueUnit(e,i){let r;i||(i=this.get("baseUnit"));let n=this.getMilliseconds(e,i);return P5e(this._getUnitValues(),(s,o)=>{if(s==i||r){if(n/o<=1)return r||(r=s),!1;r=s}return!0}),r}getMilliseconds(e,i){return i||(i=this.get("baseUnit")),e*this._getUnitValue(i)}_getUnitValue(e){return this._getUnitValues()[e]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const Gse={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"μ",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){let e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class MVe extends $s{_setDefaults(){this.setPrivate("defaultLocale",Gse),super._setDefaults()}translate(e,i,...r){i||(i=this._root.locale||this.getPrivate("defaultLocale"));let n=e,s=i[e];if(s===null)n="";else if(s!=null)s&&(n=s);else if(i!==this.getPrivate("defaultLocale"))return this.translate(e,this.getPrivate("defaultLocale"),...r);if(r.length)for(let o=r.length,a=0;a<o;++a)n=n.split("%"+(a+1)).join(r[a]);return n}translateAny(e,i,...r){return this.translate(e,i,...r)}setTranslationAny(e,i,r){(r||this._root.locale)[e]=i}setTranslationsAny(e,i){pi(e,(r,n)=>{this.setTranslationAny(r,n,i)})}translateEmpty(e,i,...r){let n=this.translate(e,i,...r);return n==e?"":n}translateFunc(e,i){return this._root.locale[e]?this._root.locale[e]:i!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):()=>""}translateAll(e,i){return this.isDefault()?e:_5e(e,r=>this.translate(r,i))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class bP{constructor(e=1,i=0,r=0,n=1,s=0,o=0){Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=o}setTransform(e,i,r,n,s,o=1){this.a=Math.cos(s)*o,this.b=Math.sin(s)*o,this.c=-Math.sin(s)*o,this.d=Math.cos(s)*o,this.tx=e-(r*this.a+n*this.c),this.ty=i-(r*this.b+n*this.d)}apply(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}applyInverse(e){const i=1/(this.a*this.d+this.c*-this.b);return{x:this.d*i*e.x+-this.c*i*e.y+(this.ty*this.c-this.tx*this.d)*i,y:this.a*i*e.y+-this.b*i*e.x+(-this.ty*this.a+this.tx*this.b)*i}}append(e){const i=this.a,r=this.b,n=this.c,s=this.d;this.a=e.a*i+e.b*n,this.b=e.a*r+e.b*s,this.c=e.c*i+e.d*n,this.d=e.c*r+e.d*s,this.tx=e.tx*i+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*s+this.ty}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty}copyFrom(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}var TVe=function(){function t(e,i){var r=[],n=!0,s=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!i||r.length!==i);n=!0);}catch(c){s=!0,o=c}finally{try{!n&&l.return&&l.return()}finally{if(s)throw o}}return r}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),fb=2*Math.PI,SP=function(t,e,i,r,n,s,o){var a=t.x,l=t.y;return{x:r*(a*=e)-n*(l*=i)+s,y:n*a+r*l+o}},IVe=function(t,e){var i=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(t),n=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[{x:r-n*i,y:n+r*i},{x:s+o*i,y:o-s*i},{x:s,y:o}]},s9=function(t,e,i,r){var n=t*i+e*r;return n>1&&(n=1),n<-1&&(n=-1),(t*r-e*i<0?-1:1)*Math.acos(n)},kVe=function(t,e,i,r,n,s,o,a,l,c,h,p){var f=Math.pow(n,2),y=Math.pow(s,2),g=Math.pow(h,2),v=Math.pow(p,2),_=f*y-f*v-y*g;_<0&&(_=0),_/=f*v+y*g;var w=(_=Math.sqrt(_)*(o===a?-1:1))*n/s*p,S=_*-s/n*h,b=c*w-l*S+(t+i)/2,$=l*w+c*S+(e+r)/2,T=(h-w)/n,I=(p-S)/s,A=(-h-w)/n,L=(-p-S)/s,z=s9(1,0,T,I),j=s9(T,I,A,L);return a===0&&j>0&&(j-=fb),a===1&&j<0&&(j+=fb),[b,$,z,j]},CVe=function(t){var e=t.px,i=t.py,r=t.cx,n=t.cy,s=t.rx,o=t.ry,a=t.xAxisRotation,l=a===void 0?0:a,c=t.largeArcFlag,h=c===void 0?0:c,p=t.sweepFlag,f=p===void 0?0:p,y=[];if(s===0||o===0)return[];var g=Math.sin(l*fb/360),v=Math.cos(l*fb/360),_=v*(e-r)/2+g*(i-n)/2,w=-g*(e-r)/2+v*(i-n)/2;if(_===0&&w===0)return[];s=Math.abs(s),o=Math.abs(o);var S=Math.pow(_,2)/Math.pow(s,2)+Math.pow(w,2)/Math.pow(o,2);S>1&&(s*=Math.sqrt(S),o*=Math.sqrt(S));var b=kVe(e,i,r,n,s,o,h,f,g,v,_,w),$=TVe(b,4),T=$[0],I=$[1],A=$[2],L=$[3],z=Math.abs(L)/(fb/4);Math.abs(1-z)<1e-7&&(z=1);var j=Math.max(Math.ceil(z),1);L/=j;for(var H=0;H<j;H++)y.push(IVe(A,L)),A+=L;return y.map(function(J){var ue=SP(J[0],s,o,v,g,T,I),re=ue.x,pe=ue.y,Dt=SP(J[1],s,o,v,g,T,I),we=Dt.x,q=Dt.y,le=SP(J[2],s,o,v,g,T,I);return{x1:re,y1:pe,x2:we,y2:q,x:le.x,y:le.y}})};function PVe(t,e,i){if(e!==i)throw new Error("Required "+i+" arguments for "+t+" but got "+e)}function Sw(t,e,i){if(e<i)throw new Error("Required at least "+i+" arguments for "+t+" but got "+e)}function Is(t,e,i){if(Sw(t,e,i),e%i!=0)throw new Error("Arguments for "+t+" must be in pairs of "+i)}function AVe(t){for(let e=0;e<t.length;e+=7){let i=e+3,r=t[i];if(r.length>1){const n=/^([01])([01])(.*)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t.splice(i,0,n[2]),++i,n[3].length>0?t[i]=n[3]:t.splice(i,1))}if(++i,r=t[i],r.length>1){const n=/^([01])(.+)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t[i]=n[2])}}}function o9(t){if(t===0||t===1)return t;throw new Error("Flag must be 0 or 1")}function OVe(t){const e=[0,0,0];for(let i=0;i<24;i++)e[i%3]<<=1,e[i%3]|=1&t,t>>=1;return(0|e[2])+(e[1]<<8)+(e[0]<<16)}function e$(t,e){for(;(!t.interactive||e(t))&&t._parent;)t=t._parent}function LVe(t,e,i){return ir(t,T3(e),r=>{const n=Ase(r);let s=r.touches;s?(s.length==0&&(s=r.changedTouches),i(w5e(s),n)):i([r],n)})}function a9(t){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d",{willReadFrequently:!0});i.drawImage(t,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+t.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function xw(t){t.width=0,t.height=0,t.style.width="0px",t.style.height="0px"}class RVe{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class FI extends X5{constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new RVe}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new bP}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new bP}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new bP}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,i){e==null?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=i,i&&ag(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return this._colorId===void 0&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(){return this.inactive==0&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(){return this._isInteractive()}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();const i=this.getLocalMatrix(),r=i.apply({x:e.left,y:e.top}),n=i.apply({x:e.right,y:e.top}),s=i.apply({x:e.right,y:e.bottom}),o=i.apply({x:e.left,y:e.bottom});return{left:Math.min(r.x,n.x,s.x,o.x),top:Math.min(r.y,n.y,s.y,o.y),right:Math.max(r.x,n.x,s.x,o.x),bottom:Math.max(r.y,n.y,s.y,o.y)}}on(e,i,r){return this.interactive?this._renderer._addEvent(this,e,i,r):new gr(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,i){const r=this._matrix;let n=r.tx*i,s=r.ty*i;this.crisp&&(n=Math.floor(n)+.5,s=Math.floor(s)+.5),e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,n,s)}_transformMargin(e,i,r){const n=this._matrix;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,(n.tx+r.left)*i,(n.ty+r.top)*i)}_transformLayer(e,i,r){r.margin?this._transformMargin(e,r.scale||i,r.margin):this._transform(e,r.scale||i)}render(e){if(this.visible&&(this.exportable!==!1||!this._renderer._omitTainted)){this._setMatrix();const i=this._renderer.resolution,r=this._renderer.layers,n=this._renderer._ghostLayer,s=n.context,o=this.mask;o&&o._setMatrix(),Y(r,a=>{if(a){const l=a.context;l.save(),o&&(o._transformLayer(l,i,a),o._runPath(l),l.clip()),l.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(l,i,a),this.filter&&(l.filter=this.filter)}}),s.save(),o&&this._isInteractiveMask()&&(o._transformMargin(s,i,n.margin),o._runPath(s),s.clip()),this._transformMargin(s,i,n.margin),this._render(e),s.restore(),Y(r,a=>{a&&a.context.restore()})}}_render(e){this.exportable===!1&&((this._layer||e).tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){const e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class FVe extends FI{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(){return this.interactiveChildren||super._isInteractiveMask()}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,i){e._parent=this,this._children.splice(i,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,Hs(this._children,e)}_render(e){super._render(e);const i=this._renderer;this.interactive&&this.interactiveChildren&&++i._forceInteractive;const r=this._layer||e;Y(this._children,n=>{n.compoundAlpha=this.compoundAlpha*this.alpha,n.render(r)}),this.interactive&&this.interactiveChildren&&--i._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),v1(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&Y(this._childLayers,i=>i.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&Y(this._childLayers,e=>{e.dirty=!0})}}function Ni(t,e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.right=Math.max(t.right,e.x),t.bottom=Math.max(t.bottom,e.y)}class Sr{colorize(e,i){}path(e){}addBounds(e){}}class DVe extends Sr{colorize(e,i){e.beginPath()}}class xP extends Sr{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.fillStyle=i!==void 0?i:this.color}}class NVe extends Sr{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class jVe extends Sr{colorize(e,i){e.stroke()}}class $P extends Sr{constructor(e,i,r){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:r})}colorize(e,i){e.strokeStyle=i!==void 0?i:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}class VVe extends Sr{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.setLineDash(this.dash)}}class zVe extends Sr{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.lineDashOffset=this.dashOffset}}class UVe extends Sr{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){const i=this.x,r=this.y,n=i+this.width,s=r+this.height;Ni(e,{x:i,y:r}),Ni(e,{x:n,y:r}),Ni(e,{x:i,y:s}),Ni(e,{x:n,y:s})}}class BVe extends Sr{constructor(e,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){Ni(e,{x:this.x-this.radius,y:this.y-this.radius}),Ni(e,{x:this.x+this.radius,y:this.y+this.radius})}}class GVe extends Sr{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){Ni(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),Ni(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class HVe extends Sr{constructor(e,i,r,n,s,o){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:o})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let i=sVe(this.cx,this.cy,this.startAngle*ub,this.endAngle*ub,this.radius);Ni(e,{x:i.left,y:i.top}),Ni(e,{x:i.right,y:i.bottom})}}class qVe extends Sr{constructor(e,i,r,n,s){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class WVe extends Sr{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.lineTo(this.x,this.y)}addBounds(e){Ni(e,{x:this.x,y:this.y})}}class ZVe extends Sr{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x,this.y)}addBounds(e){Ni(e,{x:this.x,y:this.y})}}class YVe extends Sr{path(e){e.closePath()}}class JVe extends Sr{constructor(e,i,r,n,s,o){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:o})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){Ni(e,{x:this.cpX,y:this.cpY}),Ni(e,{x:this.cpX2,y:this.cpY2}),Ni(e,{x:this.toX,y:this.toY})}}class KVe extends Sr{constructor(e,i,r,n){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){Ni(e,{x:this.cpX,y:this.cpY}),Ni(e,{x:this.toX,y:this.toY})}}class QVe extends Sr{constructor(e,i,r,n,s){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:s})}colorize(e,i){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}}class XVe extends Sr{constructor(e,i,r,n,s){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){Ni(e,{x:this.x,y:this.y}),Ni(e,{x:this.width,y:this.height})}}class e4e extends FI{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:UM.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,i=1){this._fillAlpha=i,e?e instanceof Te?this._pushOp(new xP(e.toCSS(i))):(this.isMeasured=!0,this._pushOp(new xP(e))):this._pushOp(new xP("rgba(0, 0, 0, "+i+")"))}endFill(){this._pushOp(new NVe(this._hasShadows))}endStroke(){this._pushOp(new jVe)}beginPath(){this._pushOp(new DVe)}lineStyle(e=0,i,r=1,n){this._strokeAlpha=r,i?i instanceof Te?this._pushOp(new $P(e,i.toCSS(r),n)):this._pushOp(new $P(e,i,n)):this._pushOp(new $P(e,"rgba(0, 0, 0, "+r+")",n))}setLineDash(e){this._pushOp(new VVe(e||[]))}setLineDashOffset(e=0){this._pushOp(new zVe(e))}drawRect(e,i,r,n){this._pushOp(new UVe(e,i,r,n))}drawCircle(e,i,r){this._pushOp(new BVe(e,i,r))}drawEllipse(e,i,r,n){this._pushOp(new GVe(e,i,r,n))}arc(e,i,r,n,s,o=!1){this._pushOp(new HVe(e,i,r,n,s,o))}arcTo(e,i,r,n,s){this._pushOp(new qVe(e,i,r,n,s))}lineTo(e,i){this._pushOp(new WVe(e,i))}moveTo(e,i){this._pushOp(new ZVe(e,i))}bezierCurveTo(e,i,r,n,s,o){this._pushOp(new JVe(e,i,r,n,s,o))}quadraticCurveTo(e,i,r,n){this._pushOp(new KVe(e,i,r,n))}closePath(){this._pushOp(new YVe)}shadow(e,i=0,r=0,n=0,s){this._hasShadows=!0,this._pushOp(new QVe(s?e.toCSS(s):e.toCSS(this._fillAlpha||this._strokeAlpha),i,r,n))}image(e,i,r,n,s){this._pushOp(new XVe(e,i,r,n,s))}svgPath(e){let i=0,r=0,n=null,s=null,o=null,a=null;const l=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,c=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let h;for(;(h=l.exec(e))!==null;){const p=h[1],f=h[2],y=[];for(;(h=c.exec(f))!==null;)y.push(h[1]);switch(p!=="S"&&p!=="s"&&p!=="C"&&p!=="c"&&(n=null,s=null),p!=="Q"&&p!=="q"&&p!=="T"&&p!=="t"&&(o=null,a=null),p){case"M":Is(p,y.length,2),i=+y[0],r=+y[1],this.moveTo(i,r);for(let v=2;v<y.length;v+=2)i=+y[v],r=+y[v+1],this.lineTo(i,r);break;case"m":Is(p,y.length,2),i+=+y[0],r+=+y[1],this.moveTo(i,r);for(let v=2;v<y.length;v+=2)i+=+y[v],r+=+y[v+1],this.lineTo(i,r);break;case"L":Is(p,y.length,2);for(let v=0;v<y.length;v+=2)i=+y[v],r=+y[v+1],this.lineTo(i,r);break;case"l":Is(p,y.length,2);for(let v=0;v<y.length;v+=2)i+=+y[v],r+=+y[v+1],this.lineTo(i,r);break;case"H":Sw(p,y.length,1);for(let v=0;v<y.length;++v)i=+y[v],this.lineTo(i,r);break;case"h":Sw(p,y.length,1);for(let v=0;v<y.length;++v)i+=+y[v],this.lineTo(i,r);break;case"V":Sw(p,y.length,1);for(let v=0;v<y.length;++v)r=+y[v],this.lineTo(i,r);break;case"v":Sw(p,y.length,1);for(let v=0;v<y.length;++v)r+=+y[v],this.lineTo(i,r);break;case"C":Is(p,y.length,6);for(let v=0;v<y.length;v+=6){const _=+y[v],w=+y[v+1];n=+y[v+2],s=+y[v+3],i=+y[v+4],r=+y[v+5],this.bezierCurveTo(_,w,n,s,i,r)}break;case"c":Is(p,y.length,6);for(let v=0;v<y.length;v+=6){const _=+y[v]+i,w=+y[v+1]+r;n=+y[v+2]+i,s=+y[v+3]+r,i+=+y[v+4],r+=+y[v+5],this.bezierCurveTo(_,w,n,s,i,r)}break;case"S":Is(p,y.length,4),n!==null&&s!==null||(n=i,s=r);for(let v=0;v<y.length;v+=4){const _=2*i-n,w=2*r-s;n=+y[v],s=+y[v+1],i=+y[v+2],r=+y[v+3],this.bezierCurveTo(_,w,n,s,i,r)}break;case"s":Is(p,y.length,4),n!==null&&s!==null||(n=i,s=r);for(let v=0;v<y.length;v+=4){const _=2*i-n,w=2*r-s;n=+y[v]+i,s=+y[v+1]+r,i+=+y[v+2],r+=+y[v+3],this.bezierCurveTo(_,w,n,s,i,r)}break;case"Q":Is(p,y.length,4);for(let v=0;v<y.length;v+=4)o=+y[v],a=+y[v+1],i=+y[v+2],r=+y[v+3],this.quadraticCurveTo(o,a,i,r);break;case"q":Is(p,y.length,4);for(let v=0;v<y.length;v+=4)o=+y[v]+i,a=+y[v+1]+r,i+=+y[v+2],r+=+y[v+3],this.quadraticCurveTo(o,a,i,r);break;case"T":Is(p,y.length,2),o!==null&&a!==null||(o=i,a=r);for(let v=0;v<y.length;v+=2)o=2*i-o,a=2*r-a,i=+y[v],r=+y[v+1],this.quadraticCurveTo(o,a,i,r);break;case"t":Is(p,y.length,2),o!==null&&a!==null||(o=i,a=r);for(let v=0;v<y.length;v+=2)o=2*i-o,a=2*r-a,i+=+y[v],r+=+y[v+1],this.quadraticCurveTo(o,a,i,r);break;case"A":case"a":const g=p==="a";AVe(y),Is(p,y.length,7);for(let v=0;v<y.length;v+=7){let _=+y[v+5],w=+y[v+6];g&&(_+=i,w+=r);const S=CVe({px:i,py:r,rx:+y[v],ry:+y[v+1],xAxisRotation:+y[v+2],largeArcFlag:o9(+y[v+3]),sweepFlag:o9(+y[v+4]),cx:_,cy:w});Y(S,b=>{this.bezierCurveTo(b.x1,b.y1,b.x2,b.y2,b.x,b.y),i=b.x,r=b.y})}break;case"Z":case"z":PVe(p,y.length,0),this.closePath()}}}_runPath(e){e.beginPath(),Y(this._operations,i=>{i.path(e)})}_render(e){super._render(e);const i=this._layer||e,r=i.dirty,n=this._isInteractive();if(r||n){const s=i.context,o=this._renderer._ghostLayer.context;let a;r&&(s.globalCompositeOperation=this.blendMode,s.beginPath()),n&&(o.beginPath(),a=this._getColorId()),Y(this._operations,l=>{r&&(l.path(s),l.colorize(s,void 0)),n&&(l.path(o),l.colorize(o,a))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();const i=this.mask;i&&(i._setMatrix(),i._transform(e,1),i._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),Y(this._operations,r=>{r.path(e),r.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&Y(this._operations,i=>{i.addBounds(e)})}}class Hse extends FI{constructor(e,i,r){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=i,this.style=r}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,i=!1,r=!1){super._render(e);const n=e.context,s=this._renderer._ghostLayer.context,o=this.style;let a=this._getFontStyle(void 0,r);n.font=a,this._isInteractive()&&!i&&(s.font=a),o.fill&&(o.fill instanceof Te?n.fillStyle=o.fill.toCSS(o.fillOpacity!=null?o.fillOpacity:1):n.fillStyle=o.fill),o.shadowColor&&(e.context.shadowColor=o.shadowColor.toCSS(o.shadowOpacity||1)),o.shadowBlur&&(e.context.shadowBlur=o.shadowBlur),o.shadowOffsetX&&(e.context.shadowOffsetX=o.shadowOffsetX),o.shadowOffsetY&&(e.context.shadowOffsetY=o.shadowOffsetY),this._shared(n),this._isInteractive()&&!i&&(s.fillStyle=this._getColorId(),this._shared(s))}_getFontStyle(e,i=!1){const r=this.style;let n=[];return e&&e.fontVariant?n.push(e.fontVariant):r.fontVariant&&n.push(r.fontVariant),i||(e&&e.fontWeight?n.push(e.fontWeight):r.fontWeight&&n.push(r.fontWeight)),e&&e.fontStyle?n.push(e.fontStyle):r.fontStyle&&n.push(r.fontStyle),e&&e.fontSize?(ke(e.fontSize)&&(e.fontSize=e.fontSize+"px"),n.push(e.fontSize)):r.fontSize&&(ke(r.fontSize)&&(r.fontSize=r.fontSize+"px"),n.push(r.fontSize)),e&&e.fontFamily?n.push(e.fontFamily):r.fontFamily?n.push(r.fontFamily):n.length&&n.push("Arial"),n.join(" ")}_render(e){const i=this._layer||e;if(this._textInfo||this._measure(i),this.textVisible){const r=this._isInteractive(),n=i.context,s=i.dirty,o=this._renderer._ghostLayer.context;n.save(),o.save(),this._prerender(i),Y(this._textInfo,(a,l)=>{Y(a.textChunks,(c,h)=>{if(c.style&&(n.save(),o.save(),n.font=c.style,this._isInteractive()&&(o.font=c.style)),c.fill&&(n.save(),n.fillStyle=c.fill.toCSS()),s&&n.fillText(c.text,c.offsetX,a.offsetY+c.offsetY),c.textDecoration=="underline"||c.textDecoration=="line-through"){let p,f=1,y=1,g=c.height,v=c.offsetX;switch(this.style.textAlign){case"right":case"end":v-=c.width;break;case"center":v-=c.width/2}if(c.style)switch(rl.getTextStyle(c.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":f=2}g&&(y=g/20),p=c.textDecoration=="line-through"?f+a.offsetY+c.offsetY-c.height/2:f+1.5*y+a.offsetY+c.offsetY,n.save(),n.beginPath(),c.fill?n.strokeStyle=c.fill.toCSS():this.style.fill&&this.style.fill instanceof Te&&(n.strokeStyle=this.style.fill.toCSS()),n.lineWidth=f*y,n.moveTo(v,p),n.lineTo(v+c.width,p),n.stroke(),n.restore()}r&&this.interactive&&o.fillText(c.text,c.offsetX,a.offsetY+c.offsetY),c.fill&&n.restore(),c.style&&(n.restore(),o.restore())})}),n.restore(),o.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){const i=this._measure(this.getLayer());Ni(e,{x:i.left,y:i.top}),Ni(e,{x:i.right,y:i.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){const i=e.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl";this._textInfo=[];const s=this.style.oversizedBehavior,o=this.style.maxWidth,a=ke(o)&&s=="truncate",l=ke(o)&&(s=="wrap"||s=="wrap-no-break");i.save(),r.save(),this._prerender(e,!0,this._ignoreFontWeight());const c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",h=this.text.toString().replace(/\r/g,"").split(/\n/);let p,f=!0,y=0,g=0,v=0;Y(h,(w,S)=>{let b;for(b=w==""?[{type:"value",text:""}]:rl.chunk(w,!1,this.style.ignoreFormatting);b.length>0;){let $={offsetY:v,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const T=this._measureText(c,i),I=T.actualBoundingBoxAscent+T.actualBoundingBoxDescent;let A;$.height=I,$.ascent=T.actualBoundingBoxAscent;let L,z,j,H=this.style.textDecoration,J=!1,ue=!0,re=[];Tse(b,(pe,Dt)=>{if(pe.type=="format")if(pe.text=="[/]")f||(i.restore(),r.restore(),f=!0),L=void 0,p=void 0,z=void 0,H=this.style.textDecoration,j=void 0,A=pe.text;else{f||(i.restore(),r.restore());let we=rl.getTextStyle(pe.text);const q=this._getFontStyle(we);i.save(),r.save(),i.font=q,p=q,A=pe.text,we.textDecoration&&(H=we.textDecoration),we.fill&&(L=we.fill),we.width&&(z=Vs(we.width)),we.verticalAlign&&(j=we.verticalAlign),f=!1;const le=this._measureText(c,i),Ee=le.actualBoundingBoxAscent+le.actualBoundingBoxDescent;Ee>$.height&&($.height=Ee),le.actualBoundingBoxAscent>$.ascent&&($.ascent=le.actualBoundingBoxAscent)}else if(pe.type=="value"&&!J){const we=this._measureText(pe.text,i);let q=we.actualBoundingBoxLeft+we.actualBoundingBoxRight;if(a){let mt=ue||this.style.breakWords||!1;const Dr=this.style.ellipsis||"",Wn=this._measureText(Dr,i),yu=Wn.actualBoundingBoxLeft+Wn.actualBoundingBoxRight;if($.width+q>o){const Xo=o-$.width-yu;pe.text=this._truncateText(i,pe.text,Xo,mt),pe.text+=Dr,J=!0}}else if(l&&$.width+q>o){const mt=o-$.width,Dr=this._truncateText(i,pe.text,mt,!1,ue&&this.style.oversizedBehavior!="wrap-no-break");if(Dr=="")return this.textVisible=!0,!1;re=b.slice(Dt+1),zE(Dr)!=zE(pe.text)&&(re.unshift({type:"value",text:pe.text.substr(Dr.length)}),A&&re.unshift({type:"format",text:A})),pe.text=zE(Dr),b=[],J=!0}let le=1,Ee=1;if(p&&z&&z>q){const mt=q/z;switch(this.style.textAlign){case"right":case"end":le=mt;break;case"center":le=mt,Ee=mt;break;default:Ee=mt}q=z}const ft=we.actualBoundingBoxAscent+we.actualBoundingBoxDescent;ft>$.height&&($.height=ft),we.actualBoundingBoxAscent>$.ascent&&($.ascent=we.actualBoundingBoxAscent),$.width+=q,$.left+=we.actualBoundingBoxLeft/le,$.right+=we.actualBoundingBoxRight/Ee,$.textChunks.push({style:p,fill:L,text:pe.text,width:q,height:ft,left:we.actualBoundingBoxLeft,right:we.actualBoundingBoxRight,ascent:we.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:H,verticalAlign:j}),ue=!1}return!0}),this.style.lineHeight instanceof Jt?($.height*=this.style.lineHeight.value,$.ascent*=this.style.lineHeight.value):($.height*=this.style.lineHeight||1.2,$.ascent*=this.style.lineHeight||1.2),y<$.left&&(y=$.left),g<$.right&&(g=$.right),this._textInfo.push($),v+=$.height,b=re||[]}}),f||(i.restore(),r.restore()),Y(this._textInfo,(w,S)=>{let b=0;Y(w.textChunks,$=>{if($.offsetX=b+$.left-w.left,$.offsetY+=w.height-w.height*(this.style.baselineRatio||.19),b+=$.width,$.verticalAlign)switch($.verticalAlign){case"super":$.offsetY-=w.height/2-$.height/2;break;case"sub":$.offsetY+=$.height/2}})});const _={left:n?-g:-y,top:0,right:n?y:g,bottom:v};if(s!=="none"){const w=this._fitRatio(_);if(w<1)if(s=="fit")ke(this.style.minScale)&&w<this.style.minScale?(this.textVisible=!1,_.left=0,_.top=0,_.right=0,_.bottom=0):(this._originalScale&&this._originalScale!=1||(this._originalScale=this.scale),this.scale=w,this.textVisible=!0);else if(s=="hide")this.textVisible=!1,_.left=0,_.top=0,_.right=0,_.bottom=0;else{switch(this.style.textAlign){case"right":case"end":_.left=-o,_.right=0;break;case"center":_.left=-o/2,_.right=o/2;break;default:_.left=0,_.right=o}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return i.restore(),r.restore(),_}_fitRatio(e){const i=this.style.maxWidth,r=this.style.maxHeight;if(!ke(i)&&!ke(r))return 1;const n=e.right-e.left,s=e.bottom-e.top;return Math.min(i/n||1,r/s||1)}_truncateText(e,i,r,n=!1,s=!0){let o;do{if(n)i=i.slice(0,-1);else{let l=i.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");if(l==""&&s)n=!0;else{if(l=="")return i;i=l}}const a=this._measureText(i,e);o=a.actualBoundingBoxLeft+a.actualBoundingBoxRight}while(o>r&&i!="");return i}_measureText(e,i){let r=i.measureText(e),n={};if(r.actualBoundingBoxAscent==null){const o=document.createElement("div");o.innerText=e,o.style.visibility="hidden",o.style.position="absolute",o.style.top="-1000000px;",o.style.fontFamily=this.style.fontFamily||"",o.style.fontSize=this.style.fontSize+"",document.body.appendChild(o);const a=o.getBoundingClientRect();document.body.removeChild(o);const l=a.height,c=r.width;n={actualBoundingBoxAscent:l,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:c,fontBoundingBoxAscent:l,fontBoundingBoxDescent:0,width:c}}else n={actualBoundingBoxAscent:r.actualBoundingBoxAscent,actualBoundingBoxDescent:r.actualBoundingBoxDescent,actualBoundingBoxLeft:r.actualBoundingBoxLeft,actualBoundingBoxRight:r.actualBoundingBoxRight,fontBoundingBoxAscent:r.actualBoundingBoxAscent,fontBoundingBoxDescent:r.actualBoundingBoxDescent,width:r.width};const s=r.width;switch(this.style.textAlign){case"right":case"end":n.actualBoundingBoxLeft=s,n.actualBoundingBoxRight=0;break;case"center":n.actualBoundingBoxLeft=s/2,n.actualBoundingBoxRight=s/2;break;default:n.actualBoundingBoxLeft=0,n.actualBoundingBoxRight=s}return n}}class t4e{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:pS(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"…"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class i4e extends Hse{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e){this.textType==="circular"?this._renderCircular(e):super._render(e)}_renderCircular(e){if(this.textVisible){const i=this._layer||e;this._prerender(i);const r=this._isInteractive(),n=i.context,s=i.dirty,o=this._renderer._ghostLayer.context;n.save(),r&&o.save(),this._textInfo||this._measure(i);let a=this.radius||0,l=this.startAngle||0,c=0,h=this.orientation,p=h=="auto"?"auto":h=="inward";const f=this.inside,y=this.style.textAlign||"left",g=this.kerning||0;let v=y=="left"?1:-1;const _=!this._textReversed;if(p=="auto"){let w=0,S=0;Y(this._textInfo,(b,$)=>{const T=l+b.width/(a-b.height)/2*-v;T>w&&(w=T)}),S=y=="left"?(w+c/2)*ub:y=="right"?(w-c/2)*ub:l*ub,S=nVe(S),p=S>=270||S<=90}p==1&&_&&(this._textInfo.reverse(),this._textReversed=!0),Y(this._textInfo,(w,S)=>{const b=w.height;f||(a+=b),(v==-1&&p||v==1&&!p)&&_&&w.textChunks.reverse();let $=l;c=0,y=="center"&&($+=w.width/(a-b)/2*-v,c=$-l),$+=Math.PI*(p?0:1),n.save(),r&&o.save(),n.rotate($),r&&o.rotate($);let T=0;Y(w.textChunks,(I,A)=>{const L=I.text,z=I.width;T=z/2/(a-b)*v,n.rotate(T),r&&o.rotate(T),I.style&&(n.save(),o.save(),n.font=I.style,r&&(o.font=I.style)),I.fill&&(n.save(),n.fillStyle=I.fill.toCSS()),n.textBaseline="middle",n.textAlign="center",r&&(o.textBaseline="middle",o.textAlign="center"),s&&n.fillText(L,0,(p?1:-1)*(0-a+b/2)),r&&o.fillText(L,0,(p?1:-1)*(0-a+b/2)),I.fill&&n.restore(),I.style&&(n.restore(),o.restore()),T=(z/2+g)/(a-b)*v,n.rotate(T),r&&o.rotate(T)}),n.restore(),r&&o.restore(),f&&(a-=b)}),n.restore(),r&&o.restore()}}_measure(e){return this.textType==="circular"?this._measureCircular(e):super._measure(e)}_measureCircular(e){const i=e.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl",s=this.style.oversizedBehavior,o=this.style.maxWidth,a=ke(o)&&s=="truncate",l=this.style.ellipsis||"";let c;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,i.save(),r.save(),this._prerender(e,!0);const h=this.text.toString().replace(/\r/g,"").split(/\n/);let p=!0,f=0,y=0;return Y(h,(g,v)=>{let _,w,S,b=rl.chunk(g,!1,this.style.ignoreFormatting),$={offsetY:y,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};Y(b,(T,I)=>{if(T.type=="format"){if(T.text=="[/]")p||(i.restore(),r.restore(),p=!0),w=void 0,_=void 0,S=void 0;else{let A=rl.getTextStyle(T.text);const L=this._getFontStyle(A);i.save(),r.save(),i.font=L,_=L,A.fill&&(w=A.fill),A.width&&(S=Vs(A.width)),p=!1}a&&(c=this._measureText(l,i))}else if(T.type=="value"){const A=T.text.match(/./gu)||[];n&&A.reverse();for(let L=0;L<A.length;L++){const z=A[L],j=this._measureText(z,i);let H=j.width;_&&S&&S>H&&(H=S);const J=j.actualBoundingBoxAscent+j.actualBoundingBoxDescent;if(J>$.height&&($.height=J),j.actualBoundingBoxAscent>$.ascent&&($.ascent=j.actualBoundingBoxAscent),$.width+=H,$.left+=j.actualBoundingBoxLeft,$.right+=j.actualBoundingBoxRight,$.textChunks.push({style:_,fill:w,text:z,width:H,height:J+j.actualBoundingBoxDescent,left:j.actualBoundingBoxLeft,right:j.actualBoundingBoxRight,ascent:j.actualBoundingBoxAscent,offsetX:0,offsetY:J,textDecoration:void 0}),f+=H,a){c||(c=this._measureText(l,i));const ue=c.actualBoundingBoxLeft+c.actualBoundingBoxRight;if(f+=ue,f+ue>o){$.textChunks.length==1?this.textVisible=!1:($.width+=ue,$.left+=c.actualBoundingBoxLeft,$.right+=c.actualBoundingBoxRight,$.textChunks.push({style:_,fill:w,text:l,width:ue,height:J+c.actualBoundingBoxDescent,left:c.actualBoundingBoxLeft,right:c.actualBoundingBoxRight,ascent:c.actualBoundingBoxAscent,offsetX:0,offsetY:J,textDecoration:void 0}));break}}if(n)break}}}),this.style.lineHeight instanceof Jt?$.height*=this.style.lineHeight.value:$.height*=this.style.lineHeight||1.2,this._textInfo.push($),y+=$.height}),p||(i.restore(),r.restore()),s=="hide"&&f>o&&(this.textVisible=!1),Y(this._textInfo,g=>{Y(g.textChunks,v=>{v.offsetY+=Math.round((g.height-v.height+(g.ascent-v.ascent))/2)})}),i.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}class r4e extends FI{constructor(e,i){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=i}_dispose(){super._dispose(),this._imageMask&&xw(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,i=0;this.width&&(e=this.width),this.height&&(i=this.height),this._localBounds={left:0,top:0,right:e,bottom:i},this._addBounds(this._localBounds)}return this._localBounds}_render(e){if(super._render(e),this.image){const i=this._layer||e;if(this.tainted===void 0&&(this.tainted=a9(this.image),i.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(i.dirty){this.shadowColor&&(i.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(i.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(i.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(i.context.shadowOffsetY=this.shadowOffsetY);const r=this.width||this.image.naturalWidth,n=this.height||this.image.naturalHeight;i.context.drawImage(this.image,0,0,r,n)}if(this.interactive&&this._isInteractive()){const r=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(r,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(this._imageMask===void 0){const i=this.width||e.naturalWidth,r=this.height||e.naturalHeight,n=document.createElement("canvas");n.width=i,n.height=r;const s=n.getContext("2d");s.imageSmoothingEnabled=!1,s.fillStyle=this._getColorId(),s.fillRect(0,0,i,r),a9(e)||(s.globalCompositeOperation="destination-in",s.drawImage(e,0,0,i,r)),this._imageMask=n}return this._imageMask}}class n4e{constructor(e,i,r,n){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),mm("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null}}class s4e extends M5e{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new o4e}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_domWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_domHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=e??window.devicePixelRatio,this.view.style.position="absolute",this.view.appendChild(this._layerDom),this._disposers.push(new gr(()=>{pi(this._events,(i,r)=>{r.disposer.dispose()}),Y(this.layers,i=>{xw(i.view),i.exportableView&&xw(i.exportableView)}),xw(this._ghostLayer.view),xw(this._patternCanvas)})),this._disposers.push(Pse(()=>{e==null&&(this.resolution=window.devicePixelRatio)})),mm("touchevents")){const i=r=>{this._dragging.length!==0&&Tse(this._dragging,n=>!n.value.shouldCancelTouch()||(r.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(ir(window,"touchstart",i,{passive:!1})),this._disposers.push(ir(this.view,"touchstart",i,{passive:!1})),this._disposers.push(ir(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(ir(window,"click",r=>{this._touchActive=!1},{passive:!0})),this._disposers.push(ir(this.view,"click",r=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}mm("wheelevents")&&this._disposers.push(ir(this.view,"wheel",i=>{let r=!1;this._hovering.forEach(n=>{if(n.wheelable)return r=!0,!1}),r&&i.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,i,r,n){return this.defaultLayer.context.createLinearGradient(e,i,r,n)}createRadialGradient(e,i,r,n,s,o){return this.defaultLayer.context.createRadialGradient(e,i,r,n,s,o)}createPattern(e,i,r,n,s){return this._patternCanvas.width=n,this._patternCanvas.height=s,this._patternContext.clearRect(0,0,n,s),i.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,r)}makeContainer(){return new FVe(this)}makeGraphics(){return new e4e(this)}makeText(e,i){return new Hse(this,e,i)}makeTextStyle(){return new t4e}makeRadialText(e,i){return new i4e(this,e,i)}makePicture(e){return new r4e(this,e)}resizeLayer(e){e.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resize(e,i,r,n){this._canvasWidth=e,this._canvasHeight=i,this._domWidth=r,this._domHeight=n,Y(this.layers,s=>{s&&(s.dirty=!0,this.resizeLayer(s))}),this.resizeGhost(),this.view.style.width=r+"px",this.view.style.height=n+"px"}createDetachedLayer(e=!1){const i=document.createElement("canvas"),r=i.getContext("2d",{willReadFrequently:e}),n=new a4e(i,r);return i.style.position="absolute",i.style.top="0px",i.style.left="0px",n}getLayerByOrder(e){const i=this.layers,r=i.length;for(let n=0;n<r;n++){const s=i[n];if(s.order==e)return s}}getLayer(e,i=!0){let r=this.getLayerByOrder(e);if(r)return r;const n=this.createDetachedLayer(e==99);n.order=e,n.visible=i,n.visible&&this.resizeLayer(n);const s=this.layers;s.push(n),s.sort((l,c)=>l.order>c.order?1:l.order<c.order?-1:0);const o=s.length;let a;for(let l=VM(s,n)+1;l<o;l++)if(s[l].visible){a=s[l];break}return n.visible&&(a===void 0?this._layerDom.appendChild(n.view):this._layerDom.insertBefore(n.view,a.view)),n}render(e){if(this._dirtyLayers.length=0,Y(this.layers,i=>{i&&i.dirty&&i.visible&&(this._dirtyLayers.push(i),i.clear())}),this._ghostLayer.clear(),e.render(this.defaultLayer),this._ghostLayer.context.restore(),Y(this.layers,i=>{if(i){const r=i.context;r.beginPath(),r.moveTo(0,0),r.stroke()}}),Y(this._dirtyLayers,i=>{i.context.restore(),i.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:i,target:r,native:n}=this._lastPointerMoveEvent;Y(i,s=>{this._dispatchGlobalMousemove(s,r,n)})}}paintId(e){const i=OVe(++this._colorId),r=Te.fromHex(i).toCSS();return this._colorMap[r]=e,r}_removeObject(e){e._colorId!==void 0&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){const i=this._ghostLayer.margin;return new DOMRect(e.left-i.left,e.top-i.top,e.width+i.left+i.right,e.height+i.top+i.bottom)}getEvent(e,i=!0){const r=this.view.getBoundingClientRect(),n={x:e.clientX||0,y:e.clientY||0},s={x:n.x-(i?r.left:0),y:n.y-(i?r.top:0)};return new n4e(e,n,s,this._adjustBoundingBox(r))}_getHitTarget(e,i,r){if(i.width===0||i.height===0||e.x<i.left||e.x>i.right||e.y<i.top||e.y>i.bottom||!r||!this._layerDom.contains(r))return;const n=this._ghostLayer.getImageData(e,i);if(n.data[0]===0&&n.data[1]===0&&n.data[2]===0)return!1;const s=Te.fromRGB(n.data[0],n.data[1],n.data[2]).toCSS();return this._colorMap[s]}_withEvents(e,i){const r=this._events[e];if(r!==void 0){r.dispatching=!0;try{i(r)}finally{r.dispatching=!1,r.cleanup&&(r.cleanup=!1,LI(r.callbacks,n=>!n.disposed),r.callbacks.length===0&&(r.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,i){this.interactionsEnabled&&this._withEvents(e,r=>{Y(r.callbacks,n=>{n.disposed||n.callback.call(n.context,i)})})}_dispatchEvent(e,i,r){if(!this.interactionsEnabled)return!1;let n=!1;return this._withEvents(e,s=>{Y(s.callbacks,o=>{o.disposed||o.object!==i||(o.callback.call(o.context,r),n=!0)})}),n}_dispatchMousedown(e,i){const r=e.button;if(r!=0&&r!=2&&r!=1&&r!==void 0)return;const n=this.getEvent(e),s=this._getHitTarget(n.originalPoint,n.bbox,i);if(s){const o=n.id;let a=!1;e$(s,l=>{const c={id:o,value:l};return this._mousedown.push(c),!a&&this._dispatchEvent("pointerdown",l,n)&&(a=!0,this._dragging.some(h=>h.value===l&&h.id===o)||this._dragging.push(c)),!0})}}_dispatchGlobalMousemove(e,i,r){const n=this.getEvent(e),s=this._getHitTarget(n.originalPoint,n.bbox,i);n.native=r,s?(this._hovering.forEach(o=>{o.contains(s)||(this._hovering.delete(o),o.cursorOverStyle&&vP(document.body,"cursor",o._replacedCursorStyle),this._dispatchEvent("pointerout",o,n))}),n.native&&e$(s,o=>(this._hovering.has(o)||(this._hovering.add(o),o.cursorOverStyle&&(o._replacedCursorStyle=F5e(document.body,"cursor"),vP(document.body,"cursor",o.cursorOverStyle)),this._dispatchEvent("pointerover",o,n)),!0))):(this._hovering.forEach(o=>{o.cursorOverStyle&&vP(document.body,"cursor",o._replacedCursorStyle),this._dispatchEvent("pointerout",o,n)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",n)}_dispatchGlobalMouseup(e,i){const r=this.getEvent(e);r.native=i,this._dispatchEventAll("globalpointerup",r)}_dispatchDragMove(e){if(this._dragging.length!==0){const i=this.getEvent(e),r=i.id;this._dragging.forEach(n=>{n.id===r&&this._dispatchEvent("pointermove",n.value,i)})}}_dispatchDragEnd(e,i){const r=e.button;let n;if(r==0||r===void 0)n="click";else if(r==2)n="rightclick";else{if(r!=1)return;n="middleclick"}const s=this.getEvent(e),o=s.id;if(this._mousedown.length!==0){const a=this._getHitTarget(s.originalPoint,s.bbox,i);a&&this._mousedown.forEach(l=>{l.id===o&&l.value.contains(a)&&this._dispatchEvent(n,l.value,s)}),this._mousedown.length=0}this._dragging.length!==0&&(this._dragging.forEach(a=>{a.id===o&&this._dispatchEvent("pointerup",a.value,s)}),this._dragging.length=0)}_dispatchDoubleClick(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&e$(n,s=>!this._dispatchEvent("dblclick",s,r))}_dispatchWheel(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&e$(n,s=>!this._dispatchEvent("wheel",s,r))}_makeSharedEvent(e,i){if(this._listeners[e]===void 0){const r=i();this._listeners[e]=new kse(()=>{delete this._listeners[e],r.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,i){let r=!1,n=null;function s(){n=null,r=!1}return new zs([new gr(()=>{n!==null&&clearTimeout(n),s()}),ir(this.view,T3(e),o=>{r=!0,n!==null&&clearTimeout(n),n=window.setTimeout(s,0)}),LVe(window,e,(o,a)=>{n!==null&&(clearTimeout(n),n=null),i(o,a,r),r=!1})])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const i=(r,n,s)=>{this._lastPointerMoveEvent={events:r,target:n,native:s},Y(r,o=>{this._dispatchGlobalMousemove(o,n,s)})};return new zs([this._onPointerEvent("pointerdown",i),this._onPointerEvent("pointermove",i)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const i=this._onPointerEvent("pointerup",(n,s,o)=>{Y(n,a=>{this._dispatchGlobalMouseup(a,o)}),this._lastPointerMoveEvent={events:n,target:s,native:o}}),r=this._onPointerEvent("pointercancel",(n,s,o)=>{Y(n,a=>{this._dispatchGlobalMouseup(a,o)}),this._lastPointerMoveEvent={events:n,target:s,native:o}});return new gr(()=>{i.dispose(),r.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const i=this._onPointerEvent("pointerdown",(o,a)=>{Y(o,l=>{this._dispatchMousedown(l,a)})}),r=this._onPointerEvent("pointermove",o=>{Y(o,a=>{this._dispatchDragMove(a)})}),n=this._onPointerEvent("pointerup",(o,a)=>{Y(o,l=>{this._dispatchDragEnd(l,a)})}),s=this._onPointerEvent("pointercancel",(o,a)=>{Y(o,l=>{this._dispatchDragEnd(l,a)})});return new gr(()=>{i.dispose(),r.dispose(),n.dispose(),s.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(i,r)=>{Y(i,n=>{this._dispatchDoubleClick(n,r)})}));case"wheel":return this._makeSharedEvent("wheel",()=>ir(window,T3("wheel"),i=>{this._dispatchWheel(i,Ase(i))},{passive:!1}))}}_addEvent(e,i,r,n){let s=this._events[i];s===void 0&&(s=this._events[i]={disposer:this._initEvent(i),callbacks:[],dispatching:!1,cleanup:!1});const o={object:e,context:n,callback:r,disposed:!1};return s.callbacks.push(o),new gr(()=>{o.disposed=!0,s.dispatching?s.cleanup=!0:(Hs(s.callbacks,o),s.callbacks.length===0&&(s.disposer.dispose(),delete this._events[i]))})}getCanvas(e,i){this.render(e),i||(i={});let r=this.resolution,n=Math.floor(this._canvasWidth*this.resolution),s=Math.floor(this._canvasHeight*this.resolution);if(i.minWidth&&i.minWidth>n){let y=i.minWidth/n;y>r&&(r=y*this.resolution)}if(i.minHeight&&i.minHeight>s){let y=i.minHeight/s;y>r&&(r=y*this.resolution)}if(i.maxWidth&&i.maxWidth<n){let y=i.maxWidth/n;y<r&&(r=y*this.resolution)}if(i.maxHeight&&i.maxHeight>s){let y=i.maxHeight/s;y<r&&(r=y*this.resolution)}i.maintainPixelRatio&&(r/=this.resolution);const o=[];let a=!1;const l=document.createElement("canvas");r!=this.resolution&&(a=!0,n=n*r/this.resolution,s=s*r/this.resolution),l.width=n,l.height=s,l.style.position="fixed",l.style.top="-10000px",this.view.appendChild(l),o.push(l);const c=l.getContext("2d");let h=0,p=0,f=!1;return Y(this.layers,y=>{if(y&&y.visible&&(y.tainted||a)){f=!0,y.exportableView=y.view,y.exportableContext=y.context,y.view=document.createElement("canvas"),y.view.style.position="fixed",y.view.style.top="-10000px",this.view.appendChild(y.view),o.push(y.view);let g=0,v=0;y.margin&&(g+=y.margin.left||0+y.margin.right||0,v+=y.margin.top||0+y.margin.bottom||0),y.view.width=n+g,y.view.height=s+v,y.context=y.view.getContext("2d"),y.dirty=!0,y.scale=r}}),f&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),Y(this.layers,y=>{if(y&&y.visible){let g=0,v=0;y.margin&&(g=-(y.margin.left||0)*this.resolution,v=-(y.margin.top||0)*this.resolution),c.drawImage(y.view,g,v),y.exportableView&&(y.view=y.exportableView,y.exportableView=void 0),y.exportableContext&&(y.context=y.exportableContext,y.exportableContext=void 0),h<y.view.clientWidth&&(h=y.view.clientWidth),p<y.view.clientHeight&&(p=y.view.clientHeight),y.scale=void 0}}),l.style.width=h+"px",l.style.height=p+"px",Y(o,y=>{y.style.position="",y.style.top="",this.view.removeChild(y)}),l}}class o4e{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,i,r,n,s){e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*s),this._height=Math.floor(i*s),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}getImageData(e,i){return this.context.getImageData(Math.round((e.x-i.left)/i.width*this._width),Math.round((e.y-i.top)/i.height*this._height),1,1)}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,Y(e,i=>{i.margin&&(this.margin.left=Math.max(this.margin.left,i.margin.left),this.margin.right=Math.max(this.margin.right,i.margin.right),this.margin.top=Math.max(this.margin.top,i.margin.top),this.margin.bottom=Math.max(this.margin.bottom,i.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class a4e{constructor(e,i){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=i}resize(e,i,r,n,s){this.width!=null&&(e=this.width,r=this.width),this.height!=null&&(i=this.height,n=this.height),this.margin?(e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*s),this._height=Math.floor(i*s),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function l9(t,e){t==null?requestAnimationFrame(e):setTimeout(()=>{requestAnimationFrame(e)},1e3/t)}class tV{constructor(e,i={},r){if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Ev}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:MVe.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:Gse}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:SVe.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:$Ve.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:EVe.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:h0.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:d0.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:gm.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");let n,s;if(this._settings=i,i.accessible==0&&(this._a11yD=!0),i.useSafeResolution==null&&(i.useSafeResolution=!0),i.useSafeResolution&&(n=V5e()),this._renderer=new s4e(n),s=e instanceof HTMLElement?e:document.getElementById(e),Y(za.rootElements,l=>{if(l.dom===s)throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=GE.new(this,{}),s===null)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=s;let o=document.createElement("div");o.style.position="relative",o.style.height="100%",s.appendChild(o);const a=i.tooltipContainerBounds;a&&(this._tooltipContainerSettings=a),this._inner=o,this._updateComputedStyles(),za.rootElements.push(this)}static new(e,i){const r=new tV(e,i,!0);return r._init(),r}moveDOM(e){let i;if(i=e instanceof HTMLElement?e:document.getElementById(e),i){for(;this.dom.childNodes.length>0;)i.appendChild(this.dom.childNodes[0]);this.dom=i,this._initResizeSensor(),this.resize()}}_handleLogo(){if(this._logo){const e=this.dom.offsetWidth,i=this.dom.offsetHeight;e<=150||i<=60?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const e=this.tooltipContainer.children.push(Us.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:pS(100),centerY:Ii,tooltipText:"Created using amCharts 5",tooltipX:Ii,cursorOverStyle:"pointer",background:c0.new(this,{fill:lg(4671320),fillOpacity:0,tooltipY:5})})),i=pb.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});i.label.setAll({fontSize:12}),i.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",i),e.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),e.states.create("hover",{}),e.children.push(Mc.new(this,{stroke:lg(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:lg(3976191)}),e.children.push(Mc.new(this,{stroke:lg(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:lg(4671320)}),this._logo=e,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}_init(){const e=this._renderer,i=this._getRealSize(),r=this._getCalculatedSize(i),n=Math.floor(r.width),s=Math.floor(r.height),o=Math.floor(i.width),a=Math.floor(i.height),l=Us.new(this,{visible:!0,width:o,height:a});this._rootContainer=l,this._rootContainer._defaultThemes.push(vVe.new(this));const c=l.children.push(Us.new(this,{visible:!0,width:Ii,height:Ii}));this.container=c,e.resize(o,a,n,s),this._inner.appendChild(e.view),this._initResizeSensor();const h=document.createElement("div");if(this._htmlElementContainer=h,h.className="am5-html-container",h.style.position="absolute",h.style.pointerEvents="none",this._tooltipContainerSettings||(h.style.overflow="hidden"),this._inner.appendChild(h),this._a11yD!==!0){const p=document.createElement("div");p.className="am5-reader-container",p.setAttribute("role","alert"),p.style.position="absolute",p.style.width="1px",p.style.height="1px",p.style.overflow="hidden",p.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=p,this._inner.appendChild(this._readerAlertElement);const f=document.createElement("div");f.className="am5-focus-container",f.style.position="absolute",f.style.pointerEvents="none",f.style.top="0px",f.style.left="0px",f.style.overflow="hidden",f.style.width=n+"px",f.style.height=s+"px",f.setAttribute("role","application"),ag(f,!1),this._focusElementContainer=f,this._inner.appendChild(this._focusElementContainer);const y=document.createElement("div");this._tooltipElementContainer=y,y.className="am5-tooltip-container",this._inner.appendChild(y),mm("keyboardevents")&&(this._disposers.push(ir(window,"keydown",g=>{g.keyCode==16?this._isShift=!0:g.keyCode==9&&(this._isShift=g.shiftKey)})),this._disposers.push(ir(window,"keyup",g=>{g.keyCode==16&&(this._isShift=!1)})),this._disposers.push(ir(f,"keydown",g=>{const v=this._focusedSprite;if(v){g.keyCode==27&&(L5e(),this._focusedSprite=void 0);let _=0,w=0;switch(g.keyCode){case 13:g.preventDefault();const S=e.getEvent(new MouseEvent("click"));return void v.events.dispatch("click",{type:"click",originalEvent:S.event,point:S.point,simulated:!0,target:v});case 37:_=-6;break;case 39:_=6;break;case 38:w=-6;break;case 40:w=6;break;default:return}if(_!=0||w!=0){if(g.preventDefault(),!v.isDragging()){this._keyboardDragPoint={x:0,y:0};const $=e.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));v.events.isEnabled("pointerdown")&&v.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:$.event,point:$.point,simulated:!0,target:v})}const S=this._keyboardDragPoint;S.x+=_,S.y+=w;const b=e.getEvent(new MouseEvent("mousemove",{clientX:S.x,clientY:S.y}),!1);v.events.isEnabled("globalpointermove")&&v.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:b.event,point:b.point,simulated:!0,target:v})}}})),this._disposers.push(ir(f,"keyup",g=>{if(this._focusedSprite){const v=this._focusedSprite,_=g.keyCode;switch(_){case 37:case 39:case 38:case 40:if(v.isDragging()){const w=this._keyboardDragPoint,S=e.getEvent(new MouseEvent("mouseup",{clientX:w.x,clientY:w.y}));return v.events.isEnabled("globalpointerup")&&v.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:S.event,point:S.point,simulated:!0,target:v}),void(this._keyboardDragPoint=void 0)}if(v.get("focusableGroup")){const w=v.get("focusableGroup"),S=this._tabindexes.filter(T=>T.get("focusableGroup")==w);let b=S.indexOf(v);const $=S.length-1;b+=_==39||_==40?1:-1,b<0?b=$:b>$&&(b=0),R5e(S[b].getPrivate("focusElement").dom)}}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new bVe(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const e=this._getRealSize(),i=this._getCalculatedSize(e),r=Math.floor(i.width),n=Math.floor(i.height);if(r>0&&n>0){const s=Math.floor(e.width),o=Math.floor(e.height),a=this._htmlElementContainer;if(a.style.width=r+"px",a.style.height=n+"px",this._a11yD!==!0){const c=this._focusElementContainer;c.style.width=r+"px",c.style.height=n+"px"}this._renderer.resize(s,o,r,n);const l=this._rootContainer;l.setPrivate("width",s),l.setPrivate("height",o),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(e){Y(this._tickers,i=>{i(e)})}_runAnimations(e){LI(this._animations,i=>i._runAnimation(e))}_runDirties(){let e={};for(;this._isDirtyParents;)this._isDirtyParents=!1,Vn(this._dirtyParents).forEach(o=>{const a=this._dirtyParents[o];delete this._dirtyParents[o],a.isDisposed()||(e[a.uid]=a,a._prepareChildren())});Vn(e).forEach(o=>{e[o]._updateChildren()});const i=[];Vn(this._dirty).forEach(o=>{const a=this._dirty[o];a.isDisposed()?delete this._dirty[a.uid]:(i.push(a),a._beforeChanged())}),i.forEach(o=>{o._changed(),delete this._dirty[o.uid],o._clearDirty()}),this._isDirty=!1;const r={},n=[];Vn(this._dirtyBounds).forEach(o=>{const a=this._dirtyBounds[o];delete this._dirtyBounds[o],a.isDisposed()||(r[a.uid]=a.depth(),n.push(a))}),this._positionHTMLElements(),n.sort((o,a)=>ym(r[a.uid],r[o.uid])),n.forEach(o=>{o._updateBounds()});const s=this._dirtyPositions;Vn(s).forEach(o=>{const a=s[o];delete s[o],a.isDisposed()||a._updatePosition()}),i.forEach(o=>{o._afterChanged()})}_renderFrame(e){return!this._updateTick||(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e),this._runAnimations(e),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),this._tickers.length===0&&this._animations.length===0&&!this._isDirty)}_runTicker(e,i){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||(i?this._ticker:l9(this.fps,this._ticker)))}_runTickerNow(e=1e4){if(!this.isDisposed()){const i=performance.now()+e;for(;;){const r=performance.now();if(r>=i){this.animationTime=null;break}if(this.animationTime=r,this._renderFrame(r)){this.animationTime=null;break}}}}_startTicker(){this._ticker===null&&(this.animationTime=null,this._ticker=e=>{this._runTicker(e)},l9(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(e){this._updateTick=e,e&&this._startTicker()}_addDirtyEntity(e){this._dirty[e.uid]===void 0&&(this._isDirty=!0,this._dirty[e.uid]=e,this._startTicker())}_addDirtyParent(e){this._dirtyParents[e.uid]===void 0&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]=e,this._startTicker())}_addDirtyBounds(e){this._dirtyBounds[e.uid]===void 0&&(this._isDirty=!0,this._dirtyBounds[e.uid]=e,this._startTicker())}_addDirtyPosition(e){this._dirtyPositions[e.uid]===void 0&&(this._isDirty=!0,this._dirtyPositions[e.uid]=e,this._startTicker())}_addAnimation(e){this._animations.indexOf(e)===-1&&(this._animations.push(e),this._startTicker())}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(e){return this._tickers.push(e),this._startTicker(),new gr(()=>{Hs(this._tickers,e)})}markDirtyGlobal(e){e||(e=this.container),e.walkChildren(i=>{i instanceof Us&&this.markDirtyGlobal(i),i.markDirty(),i.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),Y(this._disposers,e=>{e.dispose()}),this._inner&&O5e(this._inner),mh(za.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(e){this._a11yD!==!0&&(this._readerAlertElement.innerHTML=QG(e))}setThemes(e){this._rootContainer.set("themes",e);const i=this.tooltipContainer;i&&i._applyThemes();const r=this.interfaceColors;r&&r._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const e=this._tooltipContainerSettings,i=this._rootContainer.children.push(Us.new(this,{position:"absolute",isMeasured:!1,width:Ii,height:Ii,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=i;const r=pb.new(this,{});this.container.set("tooltip",r),r.hide(0),this._tooltip=r}}_registerTabindexOrder(e){this._a11yD!=1&&(e.get("focusable")?v1(this._tabindexes,e):mh(this._tabindexes,e),this._invalidateTabindexes())}_unregisterTabindexOrder(e){this._a11yD!=1&&(mh(this._tabindexes,e),this._invalidateTabindexes())}_invalidateTabindexes(){if(this._a11yD==1)return;this._tabindexes.sort((i,r)=>{const n=i.get("tabindexOrder",0),s=r.get("tabindexOrder",0);return n==s?0:n>s?1:-1});const e=[];Y(this._tabindexes,(i,r)=>{i.getPrivate("focusElement")?this._moveFocusElement(r,i):this._makeFocusElement(r,i);const n=i.get("focusableGroup");n&&(e.indexOf(n)!==-1?i.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):e.push(n))})}_updateCurrentFocus(){this._a11yD!=1&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(e,i){if(this._a11yD==1||(i||(i=e.getPrivate("focusElement").dom),!i))return;e.get("visible")&&e.get("role")!="tooltip"&&!e.isHidden()?i.getAttribute("tabindex")!="-1"&&i.setAttribute("tabindex",""+this.tabindex):i.removeAttribute("tabindex");const r=e.get("role");r?i.setAttribute("role",r):i.removeAttribute("role");const n=e.get("ariaLabel");if(n){const y=BM(e,n);i.setAttribute("aria-label",y)}else i.removeAttribute("aria-label");const s=e.get("ariaLive");s?i.setAttribute("aria-live",s):i.removeAttribute("aria-live");const o=e.get("ariaChecked");o!=null?i.setAttribute("aria-checked",o?"true":"false"):i.removeAttribute("aria-checked"),e.get("ariaHidden")?i.setAttribute("aria-hidden","hidden"):i.removeAttribute("aria-hidden");const a=e.get("ariaOrientation");a?i.setAttribute("aria-orientation",a):i.removeAttribute("aria-orientation");const l=e.get("ariaValueNow");l?i.setAttribute("aria-valuenow",l):i.removeAttribute("aria-valuenow");const c=e.get("ariaValueMin");c?i.setAttribute("aria-valuemin",c):i.removeAttribute("aria-valuemin");const h=e.get("ariaValueMax");h?i.setAttribute("aria-valuemax",h):i.removeAttribute("aria-valuemax");const p=e.get("ariaValueText");p?i.setAttribute("aria-valuetext",p):i.removeAttribute("aria-valuetext");const f=e.get("ariaControls");f?i.setAttribute("aria-controls",f):i.removeAttribute("aria-controls")}_makeFocusElement(e,i){if(i.getPrivate("focusElement")||this._a11yD==1)return;const r=document.createElement("div");i.get("role")!="tooltip"&&(r.tabIndex=this.tabindex),r.style.position="absolute",ag(r,!1);const n=[];i.setPrivate("focusElement",{dom:r,disposers:n}),this._decorateFocusElement(i),n.push(ir(r,"focus",s=>{this._handleFocus(s,e)})),n.push(ir(r,"blur",s=>{this._handleBlur(s,e)})),this._moveFocusElement(e,i)}_removeFocusElement(e){if(this._a11yD==1)return;mh(this._tabindexes,e);const i=e.getPrivate("focusElement");i&&(this._focusElementContainer.removeChild(i.dom),Y(i.disposers,r=>{r.dispose()}))}_hideFocusElement(e){this._a11yD!=1&&(e.getPrivate("focusElement").dom.style.display="none")}_moveFocusElement(e,i){if(this._a11yD==1)return;const r=this._focusElementContainer,n=i.getPrivate("focusElement").dom;if(n===this._focusElementContainer.children[e])return;const s=this._focusElementContainer.children[e+1];s?r.insertBefore(n,s):r.append(n)}_positionFocusElement(e){if(this._a11yD==1)return;const i=e.globalBounds();let r=i.right==i.left?e.width():i.right-i.left,n=i.top==i.bottom?e.height():i.bottom-i.top,s=i.left-2,o=i.top-2;r<0&&(s+=r,r=Math.abs(r)),n<0&&(o+=n,n=Math.abs(n));const a=e.getPrivate("focusElement").dom;a.style.top=o+"px",a.style.left=s+"px",a.style.width=r+4+"px",a.style.height=n+4+"px"}_handleFocus(e,i){if(this._a11yD==1)return;const r=this._tabindexes[i];r.isVisibleDeep()?(this._positionFocusElement(r),this._focusedSprite=r,r.events.isEnabled("focus")&&r.events.dispatch("focus",{type:"focus",originalEvent:e,target:r})):this._focusNext(e.target,this._isShift?-1:1)}_focusNext(e,i){if(this._a11yD==1)return;const r=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let n=r.indexOf(e)+i;n<0?n=r.length-1:n>=r.length&&(n=0),r[n].focus()}_handleBlur(e,i){if(this._a11yD==1)return;const r=this._focusedSprite;r&&r.events.isEnabled("blur")&&r.events.dispatch("blur",{type:"blur",originalEvent:e,target:r}),this._focusedSprite=void 0}updateTooltip(e){if(this._a11yD==1)return;const i=QG(e._getText());let r=e.getPrivate("tooltipElement");e.get("role")=="tooltip"&&i!=""?(r||(r=this._makeTooltipElement(e)),r.innerHTML!=i&&(r.innerHTML=i)):r&&(r.remove(),e.removePrivate("tooltipElement"))}_makeTooltipElement(e){const i=this._tooltipElementContainer,r=document.createElement("div");return r.style.position="absolute",r.style.width="1px",r.style.height="1px",r.style.overflow="hidden",r.style.clip="rect(1px, 1px, 1px, 1px)",ag(r,!1),this._decorateFocusElement(e,r),i.append(r),e.setPrivate("tooltipElement",r),r}_removeTooltipElement(e){if(this._a11yD==1)return;const i=e.getPrivate("tooltipElement");if(i){const r=i.parentElement;r&&r.removeChild(i)}}_invalidateAccessibility(e){if(this._a11yD==1)return;this._focusElementDirty=!0;const i=e.getPrivate("focusElement");e.get("focusable")?i&&(this._decorateFocusElement(e),this._positionFocusElement(e)):i&&this._removeFocusElement(e)}focused(e){return this._focusedSprite===e}documentPointToRoot(e){const i=this.dom.getBoundingClientRect();return{x:e.x-i.left,y:e.y-i.top}}rootPointToDocument(e){const i=this.dom.getBoundingClientRect();return{x:e.x+i.left,y:e.y+i.top}}addDisposer(e){return this._disposers.push(e),e}_updateComputedStyles(){const e=window.getComputedStyle(this.dom);let i="";pi(e,(n,s)=>{B0(n)&&n.match(/^font/)&&(i+=s)});const r=i!=this._fontHash;return r&&(this._fontHash=i),r}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(e){e instanceof Us?e.children.each(i=>{this._invalidateLabelBounds(i)}):e instanceof hb&&e.markDirtyBounds()}_hasLicense(){for(let e=0;e<za.licenses.length;e++)if(za.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(e){this._renderer.debugGhostView=e}set tapToActivate(e){this._renderer.tapToActivate=e}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(e){this._renderer.tapToActivateTimeout=e}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(e){const i=this._htmlElementContainer,r=document.createElement("div");return e.setPrivate("htmlElement",r),r.style.position="absolute",r.style.overflow="auto",r.style.boxSizing="border-box",ag(r,e.get("interactive",!1)),e.events.isEnabled("click")&&(ag(r,!0),this._disposers.push(ir(r,"click",n=>{const s=this._renderer.getEvent(n);e.events.dispatch("click",{type:"click",originalEvent:s.event,point:s.point,simulated:!1,target:e})}))),this._positionHTMLElement(e),i.append(r),v1(this._htmlEnabledContainers,e),r}_positionHTMLElements(){Y(this._htmlEnabledContainers,e=>{this._positionHTMLElement(e)})}_positionHTMLElement(e){const i=e.getPrivate("htmlElement");if(i){Y(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],h=>{const p=e.get(h);i.style[h]=p?p+"px":""});const r=e.compositeOpacity();setTimeout(()=>{i.style.opacity=r+""},10);const n=e.isVisibleDeep();n&&(i.style.display="block");const s=e.globalBounds();i.style.top=s.top+"px",i.style.left=s.left+"px";const o=e.get("width"),a=e.get("height");let l=0,c=0;if(o&&(l=e.width()),a&&(c=e.height()),o&&a)e.removePrivate("minWidth"),e.removePrivate("minHeight");else{i.style.position="fixed",i.style.width="",i.style.height="";const h=i.getBoundingClientRect();i.style.position="absolute",l=h.width,c=h.height,e._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},e.setPrivate("minWidth",l),e.setPrivate("minHeight",c)}l>0&&(i.style.minWidth=l+"px"),c>0&&(i.style.minHeight=c+"px"),n&&r!=0||(i.style.display="none")}}_setHTMLContent(e,i){let r=e.getPrivate("htmlElement");r||(r=this._makeHTMLElement(e)),r.innerHTML!=i&&(r.innerHTML=i)}_removeHTMLContent(e){let i=e.getPrivate("htmlElement");i&&this._htmlElementContainer.removeChild(i),mh(this._htmlEnabledContainers,e)}}uVe("AM5C241025748");const u9="en-us",iV=new Map([["ar",()=>O(()=>import("./ar2-dfb29e9e.js"),[])],["bg-bg",()=>O(()=>import("./bg_BG2-08c99e6c.js"),[])],["bs-ba",()=>O(()=>import("./bs_BA2-f2917445.js"),[])],["ca-es",()=>O(()=>import("./ca_ES2-f5f347b0.js"),[])],["cs-cz",()=>O(()=>import("./cs_CZ2-1e33a1ce.js"),[])],["da-dk",()=>O(()=>import("./da_DK2-4e72198c.js"),[])],["de-de",()=>O(()=>import("./de_DE2-15e279b1.js"),[])],["de-ch",()=>O(()=>import("./de_CH2-b9a3a608.js"),[])],["el-gr",()=>O(()=>import("./el_GR2-2b9c8a60.js"),[])],["en-us",()=>O(()=>import("./en_US2-40dcf3cc.js"),[])],["en-ca",()=>O(()=>import("./en_CA2-40dcf3cc.js"),[])],["es-es",()=>O(()=>import("./es_ES2-c856435b.js"),[])],["et-ee",()=>O(()=>import("./et_EE2-193ac1c8.js"),[])],["fi-fi",()=>O(()=>import("./fi_FI2-53484f9e.js"),[])],["fr-fr",()=>O(()=>import("./fr_FR2-8b6dd3fc.js"),[])],["he-il",()=>O(()=>import("./he_IL2-ecc10351.js"),[])],["hr-hr",()=>O(()=>import("./hr_HR2-6c8e87b3.js"),[])],["hu-hu",()=>O(()=>import("./hu_HU2-fbe5572b.js"),[])],["id-id",()=>O(()=>import("./id_ID2-56ecb0c6.js"),[])],["it-it",()=>O(()=>import("./it_IT2-20a2fdf5.js"),[])],["ja-jp",()=>O(()=>import("./ja_JP2-2f441bec.js"),[])],["ko-kr",()=>O(()=>import("./ko_KR2-5290e5f8.js"),[])],["lt-lt",()=>O(()=>import("./lt_LT2-e057464e.js"),[])],["lv-lv",()=>O(()=>import("./lv_LV2-7a761c7a.js"),[])],["nb-no",()=>O(()=>import("./nb_NO2-853c98f6.js"),[])],["nl-nl",()=>O(()=>import("./nl_NL2-e2c04ba1.js"),[])],["pl-pl",()=>O(()=>import("./pl_PL2-8693870b.js"),[])],["pt-br",()=>O(()=>import("./pt_BR2-a1cac873.js"),[])],["pt-pt",()=>O(()=>import("./pt_PT2-e5eb7b28.js"),[])],["ro-ro",()=>O(()=>import("./ro_RO2-554c8802.js"),[])],["ru-ru",()=>O(()=>import("./ru_RU2-5b0bfec9.js"),[])],["sk-sk",()=>O(()=>import("./sk_SK2-feee92a1.js"),[])],["sl-sl",()=>O(()=>import("./sl_SL2-56e581d6.js"),[])],["sr-rs",()=>O(()=>import("./sr_RS2-dba2ad75.js"),[])],["sv-se",()=>O(()=>import("./sv_SE2-e6ae4e09.js"),[])],["th-th",()=>O(()=>import("./th_TH2-def73602.js"),[])],["tr-tr",()=>O(()=>import("./tr_TR2-d87d745f.js"),[])],["uk-ua",()=>O(()=>import("./uk_UA2-ae6136c6.js"),[])],["vi-vn",()=>O(()=>import("./vi_VN2-8bff547b.js"),[])],["zh-cn",()=>O(()=>import("./zh_Hans2-41156b15.js"),[])],["zh-hk",()=>O(()=>import("./zh_Hant2-8bca75bb.js"),[])],["zh-tw",()=>O(()=>import("./zh_Hant2-8bca75bb.js"),[])]]);function l4e(t){const e=t.split("-")[0].toLowerCase();let i=null;for(const r of iV.keys())if(r.startsWith(e)){i=r;break}return i}function u4e(t){return t?iV.has(t.toLowerCase())?t.toLowerCase():l4e(t)||u9:u9}async function c4e(t,e=Yr()){const i=tV.new(t);return i.locale=(await iV.get(u4e(e))()).default,i}const qse=["#7ABEE5","#B39BD5","#F8AE83","#92E6E4","#FBC487","#EE967A","#CEA2D6","#89D594","#CEE68F","#F1A6D5"].map(t=>lg(t)),d4e=Object.freeze(Object.defineProperty({__proto__:null,createRoot:c4e,esriChartColorSet:qse},Symbol.toStringTag,{value:"Module"})),Hi="esri-feature-media",In={base:Hi,mediaContainer:`${Hi}__container`,mediaItemContainer:`${Hi}__item-container`,mediaItem:`${Hi}__item`,mediaItemText:`${Hi}__item-text`,mediaItemTitle:`${Hi}__item-title`,mediaItemCaption:`${Hi}__item-caption`,mediaNavigation:`${Hi}__item-navigation`,mediaPagination:`${Hi}__pagination`,mediaPaginationText:`${Hi}__pagination-text`,mediaPrevious:`${Hi}__previous`,mediaPreviousIconLTR:`${Hi}__previous-icon`,mediaPreviousIconRTL:`${Hi}__previous-icon--rtl`,mediaNext:`${Hi}__next`,mediaNextIconLTR:`${Hi}__next-icon`,mediaNextIconRTL:`${Hi}__next-icon--rtl`,mediaChart:`${Hi}__chart`,mediaPaginationButton:`${Hi}__pagination-button`,mediaPaginationIcon:`${Hi}__pagination-icon`,mediaChartRendered:`${Hi}__chart--rendered`},EP=15,ud="category",d_="value",h4e="rgba(50, 50, 50, 1)",p4e=250,f4e=500,m4e=200;let Rn=class extends Bt{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new Jf,this.messages=null,this._disposeChart=r=>{var n;(n=this._chartRootMap.get(r))==null||n.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:n,viewModel:s}=this;if(n||!s||!r)return;const{createRoot:o}=await O(()=>Promise.resolve().then(()=>d4e),void 0),a=await o(r);this._chartRootMap.set(r,a),this._renderChart({mediaInfo:s.activeMediaInfo,root:a})}}initialize(){this._featureElementInfo=new CI,this.addHandles([D(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),me),D(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),me)])}loadDependencies(){return ml({icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"])})}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return x("div",{bind:this,class:In.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e,activeMediaInfoIndex:i}=this.viewModel,r=this.renderMediaText();return e?x("div",{key:"media-element-container",class:In.mediaContainer},this.renderMediaInfo(),x("div",{class:In.mediaNavigation},r,x("div",{class:In.mediaPagination},this.renderMediaPageButton("previous"),x("span",{class:In.mediaPaginationText},er(this.messages.pageText,{index:i+1,total:e})),this.renderMediaPageButton("next")))):null}renderMediaText(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e&&e.title?x("div",{key:"media-title",class:In.mediaItemTitle,innerHTML:e.title}):null,r=e&&e.caption?x("div",{key:"media-caption",class:In.mediaItemCaption,innerHTML:e.caption}):null;return i||r?x("div",{key:"media-text",class:In.mediaItemText},i,r):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:s,refreshInterval:o,altText:a,title:l,type:c}=e,{sourceURL:h,linkURL:p}=s,f=_ee(p??void 0)?"_blank":"_self",y=f==="_blank"?"noreferrer":"",g=o?i:null,v=g?g.timestamp:0,_=g?g.sourceURL:h,w=x("img",{alt:a||l,key:`media-${c}-${r}-${n}-${v}`,src:_??void 0});return(p?x("a",{title:l,href:p,rel:y,target:f},w):null)??w}renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return x("div",{key:`media-${e.type}-${i}-${r}`,bind:this,class:In.mediaChart,afterCreate:this._createChart,afterRemoved:this._disposeChart})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;return e?x("div",{key:"media-container",class:In.mediaItemContainer},x("div",{key:"media-item-container",class:In.mediaItem},this.renderMediaInfoType())):null}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?this.messages.previous:this.messages.next,n=i?"chevron-left":"chevron-right",s=i?"media-previous":"media-next",o=i?this._previous:this._next;return x("button",{type:"button",key:s,title:r,"aria-label":r,tabIndex:0,class:In.mediaPaginationButton,bind:this,onclick:o},x("calcite-icon",{class:In.mediaPaginationIcon,scale:"s",icon:n}))}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:e,layer:i}=this.viewModel;return e&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getRendererColors(){const{colorAm5:e}=await O(()=>import("./chartCommon-631dc50e.js"),["assets/chartCommon-631dc50e.js","assets/Button-065446c6.js","assets/ColorSet-c444c7cb.js"]),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const s=await sje(r);return s.delete(n),Array.from(s.values()).every(o=>(o==null?void 0:o.length)===1)&&Array.from(s.keys()).forEach(o=>{var l,c;const a=(c=(l=s.get(o))==null?void 0:l[0])==null?void 0:c.toCss(!0);a&&i.set(o,e(a))}),i}_handleMediaKeyup(e){const i=Va(e);i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!VNe()}_getChartAnimationMS(){return this._canAnimateChart()?p4e:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?f4e:0}async _renderChart(e){const{root:i,mediaInfo:r}=e,{value:n,type:s}=r,{ResponsiveThemeAm5:o,DarkThemeAm5:a,AnimatedThemeAm5:l,ColorSetAm5:c,ThemeAm5:h}=await O(()=>import("./chartCommon-631dc50e.js"),["assets/chartCommon-631dc50e.js","assets/Button-065446c6.js","assets/ColorSet-c444c7cb.js"]),p=h.new(i);p.rule("ColorSet").set("colors",qse);const f=[o.new(i),p];uM()&&f.push(a.new(i)),this._canAnimateChart()&&f.push(l.new(i)),i.setThemes(f);const y=await this._getRendererColors(),g=c.new(i,{}),v=n.series.map((_,w)=>{const S=y.get(_.fieldName)||g.getIndex(w);return{[ud]:_.tooltip,[d_]:_.value,columnSettings:{fill:S,stroke:S}}}).filter(_=>s!=="pie-chart"||_.value!=null&&_.value>0);s==="pie-chart"?this._createPieChart(e,v):this._createXYChart(e,v)}_getDirection(){return Fc(this.container)?"rtl":"ltr"}_isInversed(){return!!Fc(this.container)}async _customizeChartTooltip(e,i="horizontal"){var n;const{colorAm5:r}=await O(()=>import("./chartCommon-631dc50e.js"),["assets/chartCommon-631dc50e.js","assets/Button-065446c6.js","assets/ColorSet-c444c7cb.js"]);e.setAll({pointerOrientation:i}),(n=e.get("background"))==null||n.setAll({stroke:r(h4e)}),e.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:m4e})}async _createPieChart(e,i){const{TooltipAm5:r}=await O(()=>import("./chartCommon-631dc50e.js"),["assets/chartCommon-631dc50e.js","assets/Button-065446c6.js","assets/ColorSet-c444c7cb.js"]),{PieChartAm5:n,PieSeriesAm5:s}=await O(()=>import("./pieChart-d8fe7abf.js"),["assets/pieChart-d8fe7abf.js","assets/Tick-cfbff422.js","assets/ColorSet-c444c7cb.js"]),{mediaInfo:o,root:a}=e,{title:l}=o,c=5,h=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",p=a.container.children.push(n.new(a,{ariaLabel:h,focusable:!0,paddingBottom:c,paddingTop:c,paddingLeft:c,paddingRight:c})),f=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,y=r.new(a,{labelText:f}),g=p.series.push(s.new(a,{name:l,valueField:d_,categoryField:ud,tooltip:y}));g.ticks.template.set("forceHidden",!0),g.labels.template.set("forceHidden",!0),g.slices.template.states.create("active",{shiftRadius:c}),this._customizeChartTooltip(y),g.slices.template.setAll({ariaLabel:f,focusable:!0,templateField:"columnSettings"}),g.data.setAll(i),g.appear(this._getChartSeriesAnimationMS()),p.appear(this._getChartAnimationMS()),p.root.dom.classList.toggle(In.mediaChartRendered,!0)}_getMinSeriesValue(e){let i=0;return e.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:s}=await O(()=>import("./chartCommon-631dc50e.js"),["assets/chartCommon-631dc50e.js","assets/Button-065446c6.js","assets/ColorSet-c444c7cb.js"]),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:c,ColumnSeriesAm5:h}=await O(()=>import("./xyChart-c0a3e2e4.js"),["assets/xyChart-c0a3e2e4.js","assets/ColorSet-c444c7cb.js","assets/Tick-cfbff422.js","assets/Button-065446c6.js"]),{mediaInfo:p,root:f}=i,{value:y,title:g}=p;e.setAll({wheelX:"panX",wheelY:"zoomX"});const v=e.xAxes.push(o.new(f,{renderer:a.new(f,{inversed:this._isInversed()}),categoryField:ud}));v.get("renderer").labels.template.setAll({forceHidden:!0});const _=e.yAxes.push(l.new(f,{renderer:c.new(f,{inside:!1}),min:this._getMinSeriesValue(y.series)}));_.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryX}",S=n.new(f,{labelText:w}),b=e.series.push(h.new(f,{name:g,xAxis:v,yAxis:_,valueYField:d_,categoryXField:ud,tooltip:S}));this._customizeChartTooltip(S),b.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),y.series.length>EP&&e.set("scrollbarX",s.new(f,{orientation:"horizontal"})),v.data.setAll(r),b.data.setAll(r),b.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createBarChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:s}=await O(()=>import("./chartCommon-631dc50e.js"),["assets/chartCommon-631dc50e.js","assets/Button-065446c6.js","assets/ColorSet-c444c7cb.js"]),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:c,ColumnSeriesAm5:h}=await O(()=>import("./xyChart-c0a3e2e4.js"),["assets/xyChart-c0a3e2e4.js","assets/ColorSet-c444c7cb.js","assets/Tick-cfbff422.js","assets/Button-065446c6.js"]),{mediaInfo:p,root:f}=i,{value:y,title:g}=p;e.setAll({wheelX:"panY",wheelY:"zoomY"});const v=e.yAxes.push(o.new(f,{renderer:c.new(f,{inversed:!0}),categoryField:ud}));v.get("renderer").labels.template.setAll({forceHidden:!0});const _=e.xAxes.push(l.new(f,{renderer:a.new(f,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(y.series)}));_.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryY}",S=n.new(f,{labelText:w}),b=e.series.push(h.new(f,{name:g,xAxis:_,yAxis:v,valueXField:d_,categoryYField:ud,tooltip:S}));this._customizeChartTooltip(S,"vertical"),b.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),y.series.length>EP&&e.set("scrollbarY",s.new(f,{orientation:"vertical"})),v.data.setAll(r),b.data.setAll(r),b.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createLineChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:s}=await O(()=>import("./chartCommon-631dc50e.js"),["assets/chartCommon-631dc50e.js","assets/Button-065446c6.js","assets/ColorSet-c444c7cb.js"]),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:c,LineSeriesAm5:h}=await O(()=>import("./xyChart-c0a3e2e4.js"),["assets/xyChart-c0a3e2e4.js","assets/ColorSet-c444c7cb.js","assets/Tick-cfbff422.js","assets/Button-065446c6.js"]),{root:p,mediaInfo:f}=i,{value:y,title:g}=f;e.setAll({wheelX:"panX",wheelY:"zoomX"});const v=e.xAxes.push(o.new(p,{renderer:a.new(p,{inversed:this._isInversed()}),categoryField:ud}));v.get("renderer").labels.template.setAll({forceHidden:!0});const _=e.yAxes.push(l.new(p,{renderer:c.new(p,{inside:!1}),min:this._getMinSeriesValue(y.series)}));_.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryX}",S=n.new(p,{labelText:w}),b=e.series.push(h.new(p,{name:g,xAxis:v,yAxis:_,valueYField:d_,categoryXField:ud,tooltip:S}));this._customizeChartTooltip(S,"vertical"),y.series.length>EP&&e.set("scrollbarX",s.new(p,{orientation:"horizontal"})),v.data.setAll(r),b.data.setAll(r),b.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createXYChart(e,i){const{XYChartAm5:r,XYCursorAm5:n}=await O(()=>import("./xyChart-c0a3e2e4.js"),["assets/xyChart-c0a3e2e4.js","assets/ColorSet-c444c7cb.js","assets/Tick-cfbff422.js","assets/Button-065446c6.js"]),{root:s,mediaInfo:o}=e,{type:a}=o,l=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",c=s.container.children.push(r.new(s,{ariaLabel:l,focusable:!0,panX:!0,panY:!0}));c.set("cursor",n.new(s,{})),a==="column-chart"&&await this._createColumnChart(c,e,i),a==="bar-chart"&&await this._createBarChart(c,e,i),a==="line-chart"&&await this._createLineChart(c,e,i),c.root.dom.classList.toggle(In.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e;if(!i)return;const n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=s}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[n,s=""]=e.split("#");return`${n}${r}timestamp=${i}${s?"#":""}${s}`}};u([d()],Rn.prototype,"_refreshIntervalInfo",void 0),u([d()],Rn.prototype,"attributes",null),u([d()],Rn.prototype,"activeMediaInfoIndex",null),u([d()],Rn.prototype,"description",null),u([d()],Rn.prototype,"fieldInfoMap",null),u([d()],Rn.prototype,"layer",null),u([d()],Rn.prototype,"mediaInfos",null),u([d()],Rn.prototype,"popupTemplate",null),u([d()],Rn.prototype,"relatedInfos",null),u([d()],Rn.prototype,"title",null),u([d({type:Jf})],Rn.prototype,"viewModel",void 0),u([d(),rt("esri/widgets/Feature/t9n/Feature")],Rn.prototype,"messages",void 0),Rn=u([E("esri.widgets.Feature.FeatureMedia")],Rn);const Wse=Rn,y4e=["$datastore","$map","$layer","$aggregatedfeatures"],g4e="esri.widgets.Feature.support.arcadeFeatureUtils",v4e=U.getLogger(g4e);function _4e(t){return typeof t=="string"?nS(Vj(t)):Array.isArray(t)?w4e(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?b4e(t):t}function w4e(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?nS(Vj(e)):e}</li>`).join("")}</ul>`}function b4e(t){return`<table class="esri-widget__table">${t.keys().map(e=>{const i=t.field(e);return`<tr><th>${e}</th><td>${typeof i=="string"?nS(Vj(i)):i}</td></tr>`}).join("")}</table>`}function S4e({aggregatedFeatures:t,arcadeUtils:e,featureSetVars:i,context:r,viewInfo:n,map:s,graphic:o,interceptor:a}){i.forEach(l=>{const c=l.toLowerCase(),h=n.sr,p={map:s,spatialReference:h,interceptor:a};if(c==="$map"&&(r.vars[c]=e.convertMapToFeatureSetCollection(p)),c==="$layer"&&(r.vars[c]=e.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:h,interceptor:a})),c==="$datastore"&&(r.vars[c]=e.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:h,interceptor:a})),c==="$aggregatedfeatures"){const f=o.layer,{fields:y,objectIdField:g,geometryType:v,spatialReference:_,displayField:w}=f,S=new cS({fields:y,objectIdField:g,geometryType:v,spatialReference:_,displayField:w,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:t});r.vars[c]=e.convertFeatureLayerToFeatureSet({layer:S,spatialReference:_,interceptor:a})}})}function Zse(){return O(()=>import("./arcadeUtils-b9eca3d7.js").then(t=>t.au),["assets/arcadeUtils-b9eca3d7.js","assets/arcadeTimeUtils-4146daa5.js"])}function x4e(t){return"createQuery"in t&&"queryFeatures"in t}async function $4e({graphic:t,view:e}){const{isAggregate:i,layer:r}=t;if(!i||!r||(e==null?void 0:e.type)!=="2d")return[];const n=await e.whenLayerView(r);if(!x4e(n))return[];const s=n.createQuery(),o=t.getObjectId();s.aggregateIds=o!=null?[o]:[];const{features:a}=await n.queryFeatures(s);return a}async function Yse({expressionInfo:t,arcadeUtils:e,interceptor:i,spatialReference:r,map:n,graphic:s,view:o}){if(!t||!t.expression)return null;const a=e.createSyntaxTree(t.expression),l=y4e.filter(y=>e.hasVariable(a,y)),[c]=await Promise.all([$4e({graphic:s,view:o}),e.loadScriptDependencies(a,!0,l)]),h=e.getViewInfo({spatialReference:r}),p=e.createExecContext(s,h);p.interceptor=i,p.useAsync=!0,S4e({aggregatedFeatures:c,arcadeUtils:e,featureSetVars:l,context:p,viewInfo:h,map:n,graphic:s,interceptor:i});const f=e.createFunction(a,p);return e.executeAsyncFunction(f,p).catch(y=>v4e.error("arcade-execution-error",{error:y,graphic:s,expressionInfo:t}))}async function E4e({expressionInfos:t,spatialReference:e,graphic:i,interceptor:r,map:n,view:s}){if(!t||!t.length)return{};const o=await Zse(),a={};for(const h of t)a[`expression/${h.name}`]=Yse({expressionInfo:h,arcadeUtils:o,interceptor:r,spatialReference:e,map:n,graphic:i,view:s});const l=await Di(a),c={};for(const h in l)c[h]=_4e(l[h].value);return c}const M4e=1;let Ls=class extends Xr(X){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var n,s;const i=(n=this.contentElement)==null?void 0:n.type;(s=this.contentElementViewModel)==null||s.destroy();const r=i==="fields"?new PI:i==="media"?new Jf:i==="text"?new jM:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=H5(this._compile,M4e,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:n,spatialReference:s,map:o,view:a,_abortController:l}=this;if(!(i&&r&&s&&o))return void this._set("contentElement",null);const c=await Zse();if(l!==this._abortController)return;const h=await Yse({arcadeUtils:c,expressionInfo:i,graphic:r,interceptor:n,map:o,spatialReference:s,view:a});if(!h||h.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const p=await h.castAsJsonAsync(l==null?void 0:l.signal),f=p==null?void 0:p.type,y=f==="media"?Gb.fromJSON(p):f==="text"?C0.fromJSON(p):f==="fields"?k0.fromJSON(p):null;this._set("contentElement",y)},this.handles.add([D(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),me),D(()=>[this.contentElement],()=>this._createVM(),me)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:i,contentElementViewModel:r}=this;return e?"loading":i||r?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};u([d()],Ls.prototype,"_abortController",void 0),u([d({type:TZ})],Ls.prototype,"expressionInfo",void 0),u([d({type:fi})],Ls.prototype,"graphic",void 0),u([d({readOnly:!0})],Ls.prototype,"contentElement",void 0),u([d({readOnly:!0})],Ls.prototype,"contentElementViewModel",void 0),u([d()],Ls.prototype,"interceptor",void 0),u([d()],Ls.prototype,"spatialReference",null),u([d({readOnly:!0})],Ls.prototype,"state",null),u([d()],Ls.prototype,"map",null),u([d()],Ls.prototype,"view",void 0),Ls=u([E("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Ls);const rV=Ls,t$={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let HE=class extends Bt{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new rV}initialize(){this.addHandles(D(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),me))}destroy(){this._destroyContentWidget()}renderLoading(){return x("div",{key:"loading-container",class:t$.loadingSpinnerContainer},x("span",{class:this.classes(t$.iconLoading,t$.spinner)}))}render(){var i;const{state:e}=this.viewModel;return x("div",{class:t$.base},e==="loading"?this.renderLoading():e==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const n=e?r==="fields"?new ise({viewModel:e}):r==="media"?new Wse({viewModel:e}):r==="text"?new DE({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};u([d({type:rV})],HE.prototype,"viewModel",void 0),HE=u([E("esri.widgets.Feature.FeatureExpression")],HE);const T4e=HE,$w="esri-feature",h_=`${$w}-relationship`,ca={base:h_,esriWidget:"esri-widget",listContainer:`${h_}__list`,listItem:`${h_}__list-item`,listItemHidden:`${h_}__list-item--hidden`,listContainerQuerying:`${h_}__list--querying`,featureObserver:`${$w}__feature-observer`,stickySpinnerContainer:`${$w}__sticky-loading-container`,loadingSpinnerContainer:`${$w}__loading-container`,spinner:`${$w}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},c9={title:!0,description:!0};let Fn=class extends Bt{constructor(e,i){super(e,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new vI,this.messages=null,this.messagesCommon=null,this.visibleElements={...c9},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:n,relatedFeatures:s,featuresPerPage:o,featurePage:a}=this.viewModel;r==="ready"&&n&&s.length>=o*a&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new CI,this.addHandles([D(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),me),D(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),_i(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return ml({icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"]),list:()=>O(()=>import("./calcite-list-fa432183.js"),["assets/calcite-list-fa432183.js","assets/interactive-c63d961a.js","assets/observers-d8508c63.js","assets/utils3-72f50212.js","assets/loadable-2a2d3905.js","assets/filter2-77b3a64c.js","assets/debounce-fe65f68f.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/icon-001847d5.js","assets/input-137231d2.js","assets/form-5cdb3d6c.js","assets/label2-5308b85f.js","assets/progress-a78ebc6f.js","assets/loader-6e51c251.js","assets/guid-0d265cb2.js","assets/scrim-6c563638.js"]),"list-item":()=>O(()=>import("./calcite-list-item-941d6637.js"),["assets/calcite-list-item-941d6637.js","assets/interactive-c63d961a.js","assets/utils3-72f50212.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/handle-db6dd90b.js"]),notice:()=>O(()=>import("./calcite-notice-e9826fd0.js"),["assets/calcite-notice-e9826fd0.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/openCloseComponent-ad0ec359.js","assets/icon-001847d5.js"])})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Ue(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:r,state:n}=this.viewModel;return!e&&!!i&&n==="ready"&&(i>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:i}=this.viewModel;return er(e==null?void 0:e.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...c9,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?x("div",{key:"sticky-loader",class:ca.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return x("span",{class:this.classes(ca.iconLoading,ca.spinner)})}renderLoading(){return x("div",{key:"loading-container",class:ca.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return x("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Fc(this.container)?"chevron-left":"chevron-right";return x("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var s;const{itemDescriptionFieldName:i}=this.viewModel,r=e.title;e.description=i&&((s=e.formattedAttributes)==null?void 0:s.global[i]);const n=e.state==="loading";return x("calcite-list-item",{class:this.classes(ca.listItem,{[ca.listItemHidden]:n}),key:e.uid,label:r,description:e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?x("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return x("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},x("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return x("div",{key:"feature-observer",class:ca.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return x("calcite-list",null,e.toArray().map(i=>this.renderRelatedFeature(i)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this.viewModel;return x("div",{key:"list-container",class:this.classes(ca.listContainer,{[ca.listContainerQuerying]:i==="querying"})},e?this.renderList():i==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return x("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},x("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var i;const{state:e}=this.viewModel;return x("div",{class:this.classes(ca.base,ca.esriWidget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),e==null||e.forEach(r=>{this.addHandles(D(()=>[r.title,r.state],()=>this.scheduleRender(),me),i)}),this.scheduleRender()}_setupFeatureElementInfo(){var s;const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;(s=this._featureElementInfo)==null||s.set({description:r,title:n,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this.viewModel;await C1(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};u([d()],Fn.prototype,"_relatedFeatureIntersectionObserverNode",void 0),u([d({readOnly:!0})],Fn.prototype,"displayShowAllButton",null),u([d({readOnly:!0})],Fn.prototype,"displayListItems",null),u([d()],Fn.prototype,"description",null),u([d({readOnly:!0})],Fn.prototype,"featureCountDescription",null),u([d()],Fn.prototype,"headingLevel",void 0),u([d()],Fn.prototype,"title",null),u([d({type:vI})],Fn.prototype,"viewModel",void 0),u([d(),rt("esri/widgets/Feature/t9n/Feature")],Fn.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],Fn.prototype,"messagesCommon",void 0),u([d()],Fn.prototype,"visibleElements",void 0),u([Re("visibleElements")],Fn.prototype,"castVisibleElements",null),Fn=u([E("esri.widgets.Feature.FeatureRelationship")],Fn);const d9=Fn;let I4e=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var Ew;const k4e=1,h9="content-view-models",p9="relationship-view-models",f9={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let Zt=Ew=class extends jc(X){constructor(t){super(t),this._handles=new Kr,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=H5(this._graphicChanged,k4e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...f9},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:i}=this;return e.type==="attachments"&&!!i.attachmentsContent||e.type==="custom"&&!!i.customContent||e.type==="fields"&&!!i.fieldsContent||e.type==="media"&&!!i.mediaContent||e.type==="text"&&!!i.textContent||e.type==="expression"&&!!i.expressionContent||e.type==="relationship"&&!!i.relationshipContent},this._handles.add(D(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),me))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return SIe(X8(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return vee(this.graphic)}castAbilities(t){return{...f9,...t}}get isTable(){var t;return((t=this._sourceLayer)==null?void 0:t.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get map(){var t;return((t=this.view)==null?void 0:t.map)||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const i=this.contentViewModels[t];i instanceof Jf&&i.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof Jf&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof Jf&&e.previous()}async updateGeometry(){var o;const{graphic:t,spatialReference:e,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!t||!i)return;const n=(o=t==null?void 0:t.attributes)==null?void 0:o[r];if(n==null)return;const s=[n];if(!t.geometry){const a=await $ee({layer:i,graphic:t,outFields:[],objectIds:s,returnGeometry:!0,spatialReference:e}),l=a==null?void 0:a.geometry;l&&(t.geometry=l)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(i){xn(i)||(this._error=i,U.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,i)=>this._compileContentElement(e,i)).filter(Pi):typeof t=="string"?this._compileText(new C0({text:t}),0).text:t}_destroyContentViewModels(){var t,e;(t=this._handles)==null||t.remove(p9),(e=this._handles)==null||e.remove(h9),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){var n;const i=(n=t==null?void 0:t.graphic)==null?void 0:n.getObjectId(),r=e==null?void 0:e.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:i}){const{view:r,spatialReference:n}=this;e==null||e.filter(Boolean).forEach(s=>{t.find(o=>this._matchesFeature(o,s))||t.add(new Ew({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:n,graphic:s}))}),t.forEach(s=>{(e==null?void 0:e.find(a=>this._matchesFeature(s,a)))||t.remove(s)})}_setExpressionContentVM(t,e){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:n}=t,s=r==null?void 0:r.type;n&&s&&(s==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,e))),s==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),n.set(this._createMediaVMParams(r,e))),s==="text"&&n.set(this._createTextVMParams(r)))}_compileRelationship(t,e){const{displayCount:i,orderByFields:r,relationshipId:n,title:s,description:o}=t,{_sourceLayer:a,graphic:l,map:c}=this;if(!rS(a))return;const h=new vI({displayCount:i,graphic:l,orderByFields:r,relationshipId:n,layer:a,map:c,...this._compileTitleAndDesc({title:s,description:o})});return this.contentViewModels[e]=h,this._handles.add(_i(()=>h.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(h)),p9),t}_compileExpression(t,e){const{expressionInfo:i}=t,{graphic:r,map:n,spatialReference:s,view:o}=this,a=new rV({expressionInfo:i,graphic:r,interceptor:Ew.interceptor,map:n,spatialReference:s,view:o});return this.contentViewModels[e]=a,this._handles.add(D(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,e),me),h9),t}_compileAttachments(t,e){const{graphic:i}=this,{description:r,title:n}=t;return this.contentViewModels[e]=new q5({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),t}_compileCustom(t,e){const{graphic:i}=this,{creator:r,destroyer:n}=t;return this.contentViewModels[e]=new jM({graphic:i,creator:r,destroyer:n}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:s}=this,o=n==null?void 0:n.attributes,a=this._expressionAttributes,l=s.global;return{title:Zf({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:r,text:t}),description:Zf({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:r,text:e})}}_createFieldsVMParams(t,e){const i=this._effectivePopupTemplate,r=this.formattedAttributes,n={...r==null?void 0:r.global,...r==null?void 0:r.content[e]},s=(t==null?void 0:t.fieldInfos)||(i==null?void 0:i.fieldInfos),o=s==null?void 0:s.filter(({fieldName:h})=>Nj(h)||yc(h)||n.hasOwnProperty(h)),a=i==null?void 0:i.expressionInfos,{description:l,title:c}=t;return{attributes:n,expressionInfos:a,fieldInfos:o,...this._compileTitleAndDesc({title:c,description:l})}}_compileFields(t,e){const i=t.clone(),r=new PI(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,e){const{abilities:i,graphic:r,_fieldInfoMap:n,_effectivePopupTemplate:s,relatedInfos:o,_sourceLayer:a,_expressionAttributes:l}=this,c=this.formattedAttributes,h=(r==null?void 0:r.attributes)??{},{description:p,mediaInfos:f,title:y}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:h,isAggregate:r==null?void 0:r.isAggregate,layer:a,fieldInfoMap:n,formattedAttributes:{...c==null?void 0:c.global,...c==null?void 0:c.content[e]},expressionAttributes:l,mediaInfos:f,popupTemplate:s,relatedInfos:o,...this._compileTitleAndDesc({title:y,description:p})}}_compileMedia(t,e){const i=t.clone(),r=new Jf(this._createMediaVMParams(t,e));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[e]=r,i}_createTextVMParams(t){var s;const{graphic:e,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(t&&t.text){const o=(e==null?void 0:e.attributes)??{},a=((s=this.formattedAttributes)==null?void 0:s.global)??{};t.text=Zf({attributes:o,fieldInfoMap:i,globalAttributes:a,expressionAttributes:n,layer:r,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const i=t.clone();return this.contentViewModels[e]=new jM(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:i}=this;if(!t)return;const{lastEditInfoEnabled:r}=t,n=e==null?void 0:e.editFieldsInfo;return r&&n?bIe(n,i==null?void 0:i.attributes):void 0}_compileTitle(t){var a;const{_fieldInfoMap:e,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,s=(r==null?void 0:r.attributes)??{},o=((a=this.formattedAttributes)==null?void 0:a.global)??{};return Zf({attributes:s,fieldInfoMap:e,globalAttributes:o,expressionAttributes:n,layer:i,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.title;return wM(i,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.content;return wM(i,{graphic:e})}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n}=this,s=this.map,o=this.view,a=this.spatialReference;if(e!==this._featureAbortController||!r)return;await $Ie({graphic:r,popupTemplate:n,layer:i,spatialReference:a},t);const{content:{value:l},title:{value:c}}=await Di({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:h}}=await Di({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:E4e({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:a,graphic:r,map:s,interceptor:Ew.interceptor,view:o})});e===this._featureAbortController&&r&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...r.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;i.content[e]=yC({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...l,...t.attributes},layer:o,fieldInfoMap:a,relatedInfos:s})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){if(t.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;i.content[e]=yC({fieldInfos:t.fieldInfos,graphic:r,attributes:{...a,...t.attributes},layer:s,fieldInfoMap:o,relatedInfos:n})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:s,_graphicExpressionAttributes:o}=this,a=e==null?void 0:e.fieldInfos,l={global:yC({fieldInfos:a,graphic:i,attributes:o,layer:n,fieldInfoMap:s,relatedInfos:r}),content:[]};return Array.isArray(t)&&t.forEach((c,h)=>{c.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:c,contentElementIndex:h,formattedAttributes:l}),c.type==="media"&&this._createMediaFormattedAttributes({contentElement:c,contentElementIndex:h,formattedAttributes:l})}),l}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(e,X8(i),t)}async _queryRelatedInfos(t,e,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const s=(n==null?void 0:n.associatedLayer)!=null?await(n==null?void 0:n.associatedLayer.load(i)):n;if(!s||!t)return;const o=e.filter(c=>c&&yc(c.fieldName));if(!o||!o.length)return;e.forEach(c=>this._configureRelatedInfo(c,s));const a=await d5e({relatedInfos:r,layer:s},i);Object.keys(a).forEach(c=>{var f;const h=r.get(c.toString()),p=(f=a[c])==null?void 0:f.value;h&&p&&(h.layerInfo=p.data)});const l=await h5e({graphic:t,relatedInfos:r,layer:s},i);Object.keys(l).forEach(c=>{var h;o5e((h=l[c])==null?void 0:h.value,r.get(c.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:i}=this,r=VE(t.fieldName);if(!r)return;const{layerId:n,fieldName:s}=r;if(!n)return;const o=i.get(n.toString())||s5e(n,e);o&&(p5e({relatedInfo:o,fieldName:s,fieldInfo:t}),this.relatedInfos.set(n,o))}};Zt.interceptor=new I4e(TIe,IIe),u([d()],Zt.prototype,"_error",void 0),u([d()],Zt.prototype,"_featureAbortController",void 0),u([d({readOnly:!0})],Zt.prototype,"_effectivePopupTemplate",null),u([d({readOnly:!0})],Zt.prototype,"_fieldInfoMap",null),u([d({readOnly:!0})],Zt.prototype,"_sourceLayer",null),u([d()],Zt.prototype,"abilities",void 0),u([Re("abilities")],Zt.prototype,"castAbilities",null),u([d({readOnly:!0})],Zt.prototype,"content",void 0),u([d({readOnly:!0})],Zt.prototype,"contentViewModels",void 0),u([d()],Zt.prototype,"description",void 0),u([d({type:Boolean})],Zt.prototype,"defaultPopupTemplateEnabled",void 0),u([d({readOnly:!0})],Zt.prototype,"isTable",null),u([d({readOnly:!0})],Zt.prototype,"state",null),u([d({readOnly:!0})],Zt.prototype,"formattedAttributes",void 0),u([d({type:fi,value:null})],Zt.prototype,"graphic",null),u([d({readOnly:!0})],Zt.prototype,"lastEditInfo",void 0),u([d({readOnly:!0})],Zt.prototype,"relatedInfos",void 0),u([d()],Zt.prototype,"spatialReference",null),u([d({readOnly:!0})],Zt.prototype,"title",void 0),u([d()],Zt.prototype,"map",null),u([d({readOnly:!0})],Zt.prototype,"waitingForContent",null),u([d()],Zt.prototype,"view",void 0),Zt=Ew=u([E("esri.widgets.FeatureViewModel")],Zt);const nV=Zt,Nr="esri-feature",ui={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:Nr,container:`${Nr}__size-container`,title:`${Nr}__title`,main:`${Nr}__main-container`,btn:`${Nr}__button`,icon:`${Nr}__icon`,content:`${Nr}__content`,contentNode:`${Nr}__content-node`,contentElement:`${Nr}__content-element`,text:`${Nr}__text`,lastEditedInfo:`${Nr}__last-edited-info`,fields:`${Nr}__fields`,fieldHeader:`${Nr}__field-header`,fieldData:`${Nr}__field-data`,fieldDataDate:`${Nr}__field-data--date`,loadingSpinnerContainer:`${Nr}__loading-container`,spinner:`${Nr}__loading-spinner`},Jse=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>fm(i)&&!i.destroyed?x("div",{class:ui.contentNode,key:i},i.render()):i instanceof HTMLElement?x("div",{class:ui.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):bne(i)?x("div",{class:ui.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return e=u([E("esri.widgets.Feature.ContentMixin")],e),e};var A3;const m9={title:!0,content:!0,lastEditedInfo:!0},y9="relationship-handles";let mr=A3=class extends Jse(Bt){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...m9},this.viewModel=new nV}initialize(){this.addHandles(D(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),me))}loadDependencies(){return ml({notice:()=>O(()=>import("./calcite-notice-e9826fd0.js"),["assets/calcite-notice-e9826fd0.js","assets/conditionalSlot-3a9e5c5a.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/openCloseComponent-ad0ec359.js","assets/icon-001847d5.js"])})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...m9,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{state:t}=this.viewModel,e=x("div",{class:ui.container,key:"container"},this.renderTitle(),t==="error"?this.renderError():t==="loading"?this.renderLoading():this.renderContentContainer());return x("div",{class:this.classes(ui.base,ui.esriWidget)},e)}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){const{messagesCommon:t,messages:e,visibleElements:i}=this;return x("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?x("div",{key:"error-title",slot:"title"},t.errorMessage):null,x("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return x("div",{key:"loading-container",class:ui.loadingSpinnerContainer},x("span",{class:this.classes(ui.iconLoading,ui.spinner)}))}renderContentContainer(){const{visibleElements:t}=this;return t.content?x("div",{class:ui.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:t,title:e}=this;return t.title?x(Uo,{level:this.headingLevel,class:ui.title,innerHTML:e}):null}renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?x("div",{class:ui.contentNode,key:`${e}-content-elements`},t.map(this.renderContentElement,this)):null;if(typeof t=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:x("div",{class:ui.contentNode,key:`${e}-content`},i.render())}return this.renderNodeContent(t)}renderContentElement(t,e){var r;const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!((r=i.content)!=null&&r[t.type]))return null;switch(t.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(t,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(t,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:i,attachmentInfos:r}=e.viewModel;return i==="loading"||r.length>0?x("div",{key:this._buildKey("attachments-element",t),class:this.classes(ui.contentElement)},e.render()):null}renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?x("div",{key:this._buildKey("relationship-element",t),class:ui.contentElement},e.render()):null}renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:x("div",{key:this._buildKey("expression-element",t),class:ui.contentElement},e.render())}renderCustom(t,e){const{creator:i}=t,r=this._contentWidgets[e];return!r||r.destroyed?null:i?x("div",{key:this._buildKey("custom-element",e),class:ui.contentElement},r.render()):null}renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:x("div",{key:this._buildKey("fields-element",t),class:ui.contentElement},e.render())}renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:x("div",{key:this._buildKey("media-element",t),class:ui.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;const{date:r,user:n}=i,s=i.type==="edit"?n?e.lastEditedByUser:e.lastEdited:n?e.lastCreatedByUser:e.lastCreated,o=er(s,{date:r,user:n});return x("div",{key:"edit-info-element",class:this.classes(ui.lastEditedInfo,ui.contentElement)},o)}renderText(t,e){const i=t.text,r=this._contentWidgets[e];return!r||r.destroyed?null:i?x("div",{key:this._buildKey("text-element",e),class:this.classes(ui.contentElement,ui.text)},r.render()):null}_buildKey(t,...e){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles(y9),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:i}=this;this.addHandles([_i(()=>t,"select-record",({featureViewModel:r})=>{e&&(r.abilities={relationshipContent:!0},e.push(new A3({flowItems:e,viewModel:r,visibleElements:i})))}),_i(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:r}=t;r.showAllEnabled=!0;const n=new d9({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(n),e.push(n)})],y9)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,s)=>{if(n.type==="attachments"&&(this._contentWidgets[s]=new FNe({displayType:n.displayType,headingLevel:e.title?t+1:t,viewModel:r[s]})),n.type==="fields"&&(this._contentWidgets[s]=new ise({viewModel:r[s]})),n.type==="media"&&(this._contentWidgets[s]=new Wse({viewModel:r[s]})),n.type==="text"&&(this._contentWidgets[s]=new DE({viewModel:r[s]})),n.type==="custom"&&(this._contentWidgets[s]=new DE({viewModel:r[s]})),n.type==="expression"&&(this._contentWidgets[s]=new T4e({viewModel:r[s]})),n.type==="relationship"){const o=new d9({viewModel:r[s]});this._addFeatureRelationshipHandles(o),this._contentWidgets[s]=o}},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new DE({viewModel:n}))}this.scheduleRender()}};u([d()],mr.prototype,"graphic",null),u([d()],mr.prototype,"defaultPopupTemplateEnabled",null),u([d()],mr.prototype,"flowItems",void 0),u([d()],mr.prototype,"headingLevel",void 0),u([d({readOnly:!0})],mr.prototype,"isTable",null),u([d()],mr.prototype,"label",null),u([d(),rt("esri/widgets/Feature/t9n/Feature")],mr.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],mr.prototype,"messagesCommon",void 0),u([d(),rt("esri/widgets/support/t9n/uriUtils")],mr.prototype,"messagesURIUtils",void 0),u([d()],mr.prototype,"spatialReference",null),u([d({readOnly:!0})],mr.prototype,"title",null),u([d()],mr.prototype,"visibleElements",void 0),u([Re("visibleElements")],mr.prototype,"castVisibleElements",null),u([d()],mr.prototype,"map",null),u([d()],mr.prototype,"view",null),u([d({type:nV})],mr.prototype,"viewModel",void 0),mr=A3=u([E("esri.widgets.Feature")],mr);const C4e=mr,DI={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Kf=new ov({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:DI.iconZoom}),g9=new ov({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:DI.iconTrash}),Dg=new ov({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:DI.iconZoom}),yh=new AT({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:DI.iconBrowseClusteredFeatures,value:!1}),P4e="esri.widgets.Popup.PopupViewModel",GM=U.getLogger(P4e),A4e=t=>{const{event:e,view:i,viewModel:r}=t,{action:n}=e;if(!n)return Promise.reject(new C("trigger-action:missing-arguments","Event has no action"));const{disabled:s,id:o}=n;if(!o)return Promise.reject(new C("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new C("trigger-action:invalid-action","Action is disabled"));if(o===Kf.id)return L4e(r).catch(I2);if(o===Dg.id)return R4e(r);if(o===yh.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(o===g9.id){r.visible=!1;const{selectedFeature:a}=r;if(!a)return Promise.reject(new C(`trigger-action:${g9.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):i==null||i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function Kse(t){const{selectedFeature:e,location:i,view:r}=t;return r?r.type==="3d"?e??i??null:t.get("selectedFeature.geometry")||i:null}function jf(t){var e,i;return!!t&&t.isAggregate&&((i=(e=t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function O4e(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function L4e(t){var h;const{location:e,selectedFeature:i,view:r,zoomFactor:n}=t,s=Kse(t);if(!r||!s){const p=new C("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:r});throw GM.error(p),p}const o=r.scale/n,a=(h=t.selectedFeature)==null?void 0:h.geometry,l=a??e,c=l!=null&&l.type==="point"&&await O4e(i,r);Kf.active=!0,Kf.disabled=!0;try{await t.zoomTo({target:{target:s,scale:c?o:void 0}})}catch{const f=new C("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});GM.error(f)}finally{Kf.active=!1,Kf.disabled=!1,t.zoomToLocation=null,c&&(t.location=l)}}async function R4e(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d"){const o=new C("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw GM.error(o),o}if(!e||!jf(e)){const o=new C("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw GM.error(o),o}const[r,n]=await sV(i,e);Dg.active=!0,Dg.disabled=!0;const{extent:s}=await r.queryExtent(n);await t.zoomTo({target:s}),Dg.active=!1,Dg.disabled=!1}async function F4e(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[r,n]=await sV(e,i),{extent:s}=await r.queryExtent(n);t.selectedClusterBoundaryFeature.geometry=s,e.graphics.add(t.selectedClusterBoundaryFeature)}async function D4e(t){const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[r,n]=await sV(i,e);yh.active=!0,yh.disabled=!0;const{features:s}=await r.queryFeatures(n);yh.active=!1,yh.disabled=!1,yh.value=!0,t==null||t.open({features:[e].concat(s),featureMenuOpen:!0})}async function sV(t,e){const i=await t.whenLayerView(e.sourceLayer),r=i.createQuery(),n=e.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function N4e(t){yh.value=!1;const e=t.features.filter(i=>jf(i));e.length&&(t.features=e)}function Qse(t){var e;if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const be="esri-popup",p_=`${be}__header`,kp=`${be}--is-docked`,W={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:be,widget:"esri-widget",main:`${be}__main-container`,loadingContainer:`${be}__loading-container`,isCollapsible:`${be}--is-collapsible`,isCollapsed:`${be}--is-collapsed`,shadow:`${be}--shadow`,isDocked:kp,isDockedTopLeft:`${kp}-top-left`,isDockedTopCenter:`${kp}-top-center`,isDockedTopRight:`${kp}-top-right`,isDockedBottomLeft:`${kp}-bottom-left`,isDockedBottomCenter:`${kp}-bottom-center`,isDockedBottomRight:`${kp}-bottom-right`,alignTopCenter:`${be}--aligned-top-center`,alignBottomCenter:`${be}--aligned-bottom-center`,alignTopLeft:`${be}--aligned-top-left`,alignBottomLeft:`${be}--aligned-bottom-left`,alignTopRight:`${be}--aligned-top-right`,alignBottomRight:`${be}--aligned-bottom-right`,isFeatureMenuOpen:`${be}--feature-menu-open`,isActionsMenuOpen:`${be}--actions-menu-open`,hasFeatureUpdated:`${be}--feature-updated`,header:p_,headerButtons:`${p_}-buttons`,headerContainer:`${p_}-container`,headerContainerButton:`${p_}-container--button`,headerTitle:`${p_}-title`,content:`${be}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${be}__footer`,footerHasPagination:`${be}__footer--has-pagination`,footerHasActions:`${be}__footer--has-actions`,footerHasActionsMenu:`${be}__footer--has-actions-menu`,button:`${be}__button`,buttonDisabled:`${be}__button--disabled`,buttonDock:`${be}__button--dock`,icon:`${be}__icon`,iconDock:`${be}__icon--dock-icon`,inlineActionsContainer:`${be}__inline-actions-container`,actionsMenuButton:`${be}__actions-menu-button`,actions:`${be}__actions`,action:`${be}__action`,actionImage:`${be}__action-image`,actionText:`${be}__action-text`,actionToggle:`${be}__action-toggle`,actionToggleOn:`${be}__action-toggle--on`,actionExit:`${be}__action--exit`,actionSelectFeature:`${be}__action--select-feature`,pointer:`${be}__pointer`,pointerDirection:`${be}__pointer-direction`,navigation:`${be}__navigation`,paginationIcon:`${be}__pagination-icon`,paginationPrevious:`${be}__pagination-previous`,paginationNext:`${be}__pagination-next`,featureMenu:`${be}__feature-menu`,featureMenuList:`${be}__feature-menu-list`,featureMenuItem:`${be}__feature-menu-item`,featureMenuViewport:`${be}__feature-menu-viewport`,featureMenuHeader:`${be}__feature-menu-header`,featureMenuNote:`${be}__feature-menu-note`,featureMenuSelected:`${be}__feature-menu-item--selected`,featureMenuButton:`${be}__feature-menu-button`,featureMenuButtonIcon:`${be}__feature-menu-button-icon`,featureMenuTitle:`${be}__feature-menu-title`,featureMenuObserver:`${be}__feature-menu-observer`,featureMenuLoader:`${be}__feature-menu-loader`,collapseButton:`${be}__collapse-button`,collapseIcon:`${be}__collapse-icon`},j4e="OBJECTID",mb=se.ofType({key:"type",defaultKeyValue:"button",base:sv,typeMap:{button:ov,toggle:AT}}),V4e=()=>[Kf.clone()],z4e=()=>[Dg.clone(),yh.clone()];let ze=class extends iS(vre){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new Kr,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new mb,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new fi({symbol:new Qo({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([this.on("view-change",()=>this._autoClose()),D(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),D(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),D(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.state},e=>this._animationStateChange(e)),D(()=>this.location,e=>this._locationChange(e)),D(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),D(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),D(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),D(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>A4e({event:e,viewModel:this,view:this.view})),Ai(()=>!this.waitingForResult,()=>this._waitingForResultChange(),ul),D(()=>{var e,i;return[this.features,(e=this.view)==null?void 0:e.map,(i=this.view)==null?void 0:i.spatialReference]},()=>this._updateFeatureVMs()),D(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Ai(()=>!this.visible,()=>this.browseClusterEnabled=!1),D(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new mb;e.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:s,selectedFeature:o}=this,a=s?r.concat(i):i,l=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(n)||o.popupTemplate),c=l&&l.actions,h=l&&l.overwriteActions?c:c?c.concat(a):a;return h&&h.filter(Boolean).forEach(p=>e.add(p)),e}get defaultActions(){const e=this._get("defaultActions")||new mb;return e.removeAll(),e.addMany(jf(this.selectedFeature)?z4e():V4e()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:s}=this,o=n&&i.length;o&&r&&s===-1?this.selectedFeatureIndex=0:o&&s!==-1||(this.selectedFeatureIndex=i.length?0:-1)}get location(){return this._get("location")||null}set location(e){var n,s,o;let i=e;const r=(s=(n=this.view)==null?void 0:n.spatialReference)==null?void 0:s.isWebMercator;e&&((o=e==null?void 0:e.spatialReference)!=null&&o.isWGS84)&&r&&(i=Xl(e)),this._set("location",i)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(i=>{this._pendingPromises.add(i);const r=s=>{this._pendingPromises.has(i)&&this._updateFeatures(s),this._updatePendingPromises(i)},n=()=>this._updatePendingPromises(i);i.then(r,n)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;e=isNaN(e)||e<-1||!i?-1:(e+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,i=Kse(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new C("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){const{view:r}=this;if(!r||!e)throw new C("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{event:i&&i.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i&&i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed"];for(const s of n)delete i[s];this.set(i)}triggerAction(e){const i=this.allActions.at(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){N4e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;(e==null?void 0:e.type)==="2d"?jf(i)?(await F4e(this),await D4e(this)):U.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):U.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}handleViewClick(e){this.autoOpenEnabled&&this._fetchFeaturesAndOpen(e)}_animationStateChange(e){this.zoomToLocation||(Kf.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i;const e=(i=this.view)==null?void 0:i.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(jf(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:r}=this;r&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:s}=this;if(r===null)return;const o=((r-1)*n+i)%i,a=o+n;s.slice(o,a).forEach((l,c)=>{l&&!l.graphic&&(l.graphic=e[o+c])})}async _selectedFeatureChange(e){const{location:i,updateLocationEnabled:r,view:n}=this;if(e&&n){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),jf(e)?void 0:(e.symbol=await PM(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));!r&&i||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{var o;const s=(o=n.center)==null?void 0:o.clone();s&&(this.location=s)}):this.location=Qse(e.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(i=>{const{clientOnlyGraphics:r,promisesPerLayerView:n}=i,s=Promise.resolve(r),o=n.map(a=>a.promise);this.promises=[s,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:r}=this;if(jf(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!i||!i.length)return;const n=r.slice(0),s=[];i.forEach((o,a)=>{var c,h;if(!o)return;let l=null;if(n.some((p,f)=>(p&&p.graphic===o&&(l=p,n.splice(f,1)),!!l)),l)s[a]=l;else{const p=new nV({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(c=this.view)==null?void 0:c.spatialReference,graphic:o===e?o:null,map:(h=this.view)==null?void 0:h.map,view:this.view});s[a]=p}}),n.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:i}=this;return i&&e&&typeof i.toScreen=="function"?i.toScreen(e):null}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,i){this._cancelFetchingFeatures();const r=new AbortController,{signal:n}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:n,event:i});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:i,mapPoint:r}=e,{view:n}=this;this._fetchFeaturesWithController(i,e).then(s=>{const{clientOnlyGraphics:o,promisesPerLayerView:a,location:l}=s,c=[Promise.resolve(o),...a.map(h=>h.promise)];return n!=null&&n.popup&&"open"in n.popup&&n.popup.open({location:l||r,promises:c}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i}_getHighlightTarget(e,i){const r=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||j4e:null,n=e.attributes;return n&&r&&n[r]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:i,view:r,activeFeature:n,visible:s}=this;if(!(n&&r&&i&&s))return;const o=this._getHighlightLayer(n);if(!(o&&o instanceof r1))return;const a=this._getLayerView(r,o);this._highlightActiveFeaturePromise=a;const l=await a;if(!(l&&g1(l)&&this._highlightActiveFeaturePromise===a&&this.activeFeature&&this.highlightEnabled))return;const c=l.highlight(this._getHighlightTarget(n,o));this._handles.add(c,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:i,highlightEnabled:r,view:n,visible:s}=this;if(!(i&&n&&r&&s))return;const o=this._getHighlightLayer(i);if(!(o&&o instanceof r1))return;const a=this._getLayerView(n,o);this._highlightSelectedFeaturePromise=a;const l=await a;if(!(l&&g1(l)&&this._highlightSelectedFeaturePromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const c=l.highlight(this._getHighlightTarget(i,o));this._handles.add(c,e)}_updateFeatures(e){const{features:i}=this;if(!e||!e.length)return;if(!i.length)return void(this.features=e);const r=e.filter(n=>!i.includes(n));this.features=i.concat(r)}};u([d()],ze.prototype,"featurePage",void 0),u([d()],ze.prototype,"isLoadingFeature",null),u([d({type:mb})],ze.prototype,"actions",void 0),u([d({readOnly:!0})],ze.prototype,"active",null),u([d()],ze.prototype,"activeFeature",void 0),u([d({readOnly:!0})],ze.prototype,"allActions",null),u([d({type:Boolean})],ze.prototype,"defaultPopupTemplateEnabled",void 0),u([d()],ze.prototype,"autoCloseEnabled",void 0),u([d()],ze.prototype,"autoOpenEnabled",void 0),u([d()],ze.prototype,"browseClusterEnabled",void 0),u([d()],ze.prototype,"content",void 0),u([d({type:mb,readOnly:!0})],ze.prototype,"defaultActions",null),u([d({readOnly:!0})],ze.prototype,"featureCount",null),u([d()],ze.prototype,"features",null),u([d()],ze.prototype,"featuresPerPage",void 0),u([d()],ze.prototype,"featureMenuOpen",void 0),u([d()],ze.prototype,"featureViewModelAbilities",void 0),u([d({readOnly:!0})],ze.prototype,"featureViewModels",void 0),u([d()],ze.prototype,"highlightEnabled",void 0),u([d()],ze.prototype,"includeDefaultActions",void 0),u([d({type:ce})],ze.prototype,"location",null),u([d({readOnly:!0})],ze.prototype,"pendingPromisesCount",null),u([d({readOnly:!0})],ze.prototype,"selectedClusterBoundaryFeature",void 0),u([d({readOnly:!0})],ze.prototype,"waitingForResult",null),u([d({readOnly:!0})],ze.prototype,"promiseCount",null),u([d()],ze.prototype,"promises",null),u([d({value:null,readOnly:!0})],ze.prototype,"selectedFeature",null),u([d({value:-1})],ze.prototype,"selectedFeatureIndex",null),u([d({readOnly:!0})],ze.prototype,"selectedFeatureViewModel",null),u([d({readOnly:!0})],ze.prototype,"state",null),u([d()],ze.prototype,"title",void 0),u([d()],ze.prototype,"updateLocationEnabled",void 0),u([d()],ze.prototype,"view",void 0),u([d()],ze.prototype,"visible",void 0),u([d()],ze.prototype,"zoomFactor",void 0),u([d()],ze.prototype,"zoomToLocation",void 0),u([d()],ze.prototype,"centerAtLocation",null),ze=u([E("esri.widgets.Popup.PopupViewModel")],ze);const Xse=ze,v9="selected-index",U4e=0,_9="popup-spinner",w9={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},b9="esri-popup";function Iu(t,e){return e===void 0?`${b9}__${t}`:`${b9}__${t}-${e}`}const S9={closeButton:!0,featureNavigation:!0};let ve=class extends Jse(Bt){constructor(t,e){super(t,e),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Kr,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=H5(()=>this._displaySpinner(),U4e),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new se,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new Xse,this.visibleElements={...S9},this._handleOpenRelatedFeature=i=>{this._openRelatedFeature(i)},this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,D(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),D(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),D(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),D(()=>{var i,r,n,s,o,a;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.size,(o=this.viewModel)==null?void 0:o.active,(a=this.viewModel)==null?void 0:a.location,this.alignment]},()=>this.reposition()),D(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),D(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),D(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),D(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i??!1,r??!1)),D(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),D(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),D(()=>{var i,r,n,s;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.state]},()=>this._setTitleFromFeatureWidget()),D(()=>{var i,r,n,s;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.state]},()=>this._setContentFromFeatureWidget()),Ai(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),_i(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),D(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),me),D(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop()),_i(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),D(()=>{var i,r,n,s;return[(r=(i=this._activeFlowItemWidget)==null?void 0:i.viewModel)==null?void 0:r.state,(s=(n=this._activeFlowItemWidget)==null?void 0:n.viewModel)==null?void 0:s.title]},()=>this.scheduleRender())])}loadDependencies(){return ml({action:()=>O(()=>import("./calcite-action-f987d5e3.js"),["assets/calcite-action-f987d5e3.js","assets/action-7e59ed9f.js","assets/guid-0d265cb2.js","assets/interactive-c63d961a.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/icon-001847d5.js","assets/loader-6e51c251.js"]),flow:()=>O(()=>import("./calcite-flow-5373e5c7.js"),["assets/calcite-flow-5373e5c7.js","assets/observers-d8508c63.js","assets/loadable-2a2d3905.js"]),"flow-item":()=>O(()=>import("./calcite-flow-item-8d910728.js"),["assets/calcite-flow-item-8d910728.js","assets/interactive-c63d961a.js","assets/loadable-2a2d3905.js","assets/t9n-58647fac.js","assets/key-bcbe3efc.js","assets/observers-d8508c63.js","assets/panel-7f56d54a.js","assets/action-menu-f113beb5.js","assets/guid-0d265cb2.js","assets/action-7e59ed9f.js","assets/icon-001847d5.js","assets/loader-6e51c251.js","assets/popover-26a7b513.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/focusTrapComponent-67860a68.js","assets/openCloseComponent-ad0ec359.js","assets/FloatingArrow-3cfbf1c2.js","assets/scrim-6c563638.js"]),icon:()=>O(()=>import("./calcite-icon-c5a7e699.js"),["assets/calcite-icon-c5a7e699.js","assets/icon-001847d5.js","assets/observers-d8508c63.js"]),tooltip:()=>O(()=>import("./calcite-tooltip-0a477140.js"),["assets/calcite-tooltip-0a477140.js","assets/floating-ui-9672dd95.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-ad0ec359.js","assets/FloatingArrow-3cfbf1c2.js"])})}initialize(){this.addHandles(this._displaySpinnerThrottled)}destroy(){var t,e;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(t=this._handles)==null||t.destroy(),this._unobserveFeatureMenuObserver(),(e=this._featureMenuIntersectionObserver)==null||e.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:t,viewModel:e}=this;if(!t)return!!(e!=null&&e.content);const i=t.viewModel;if(i!=null&&i.waitingForContent||(i==null?void 0:i.state)==="error")return!0;const r=i==null?void 0:i.content;return Array.isArray(r)?!!r.length:!!r}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:t}=this;return t.at(-1)??null}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}set actionsMenuOpen(t){this._set("actionsMenuOpen",!!t)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get autoOpenEnabled(){return Ha(U.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled}set autoOpenEnabled(t){Ha(U.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||w9}set dockOptions(t){var a,l;const e={...w9},i=(l=(a=this.viewModel)==null?void 0:a.view)==null?void 0:l.breakpoints,r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const n={...e,...t},s={...e.breakpoint,...r},{breakpoint:o}=n;typeof o=="object"?n.breakpoint={...s,...o}:o&&(n.breakpoint=s),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){const{_feature:t,visibleElements:e,headingLevel:i,_flowItems:r}=this,{selectedFeatureViewModel:n}=this.viewModel,s={...e,title:!1};return n?(t?(t.viewModel=n,t.visibleElements=s):this._feature=new C4e({flowItems:r,headingLevel:i+1,viewModel:n,visibleElements:s}),this._feature):null}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}castVisibleElements(t){return{...S9,...t}}blur(){const{active:t}=this.viewModel;t||U.getLogger(this).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,e){return this.viewModel.fetchFeatures(t,e)}focus(){const{active:t}=this.viewModel;t||U.getLogger(this).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(t){var n,s;this._handles.remove(v9);const e=!!t&&!!t.featureMenuOpen,i=!!t&&!!t.actionsMenuOpen,r={collapsed:!!t&&!!t.collapsed,actionsMenuOpen:i,featureMenuOpen:e};((s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(t),this._shouldFocus(t),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){var g,v,_,w;const{actionsMenuOpen:t,dockEnabled:e,featureMenuVisible:i,dividedActions:r,currentAlignment:n,currentDockPosition:s}=this,{active:o}=this.viewModel,{menuActions:a}=r,l=o&&a.length>1&&t,c=o&&e,h=o&&!e,p=(v=(g=this.selectedFeature)==null?void 0:g.layer)==null?void 0:v.title,f=(w=(_=this.selectedFeature)==null?void 0:_.layer)==null?void 0:w.id,y={[W.alignTopCenter]:n==="top-center",[W.alignBottomCenter]:n==="bottom-center",[W.alignTopLeft]:n==="top-left",[W.alignBottomLeft]:n==="bottom-left",[W.alignTopRight]:n==="top-right",[W.alignBottomRight]:n==="bottom-right",[W.isDocked]:c,[W.shadow]:h,[W.isDockedTopLeft]:s==="top-left",[W.isDockedTopCenter]:s==="top-center",[W.isDockedTopRight]:s==="top-right",[W.isDockedBottomLeft]:s==="bottom-left",[W.isDockedBottomCenter]:s==="bottom-center",[W.isDockedBottomRight]:s==="bottom-right",[W.isFeatureMenuOpen]:i,[W.isActionsMenuOpen]:l};return x("div",{class:this.classes(W.base,y),role:"presentation","data-layer-title":p,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},o?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return x("span",{"aria-hidden":"true",class:this.classes(W.icon,W.iconLoading,W.rotating)})}renderNavigationLoading(){const{messagesCommon:t}=this;return this.viewModel.pendingPromisesCount?x("div",{key:Iu("loading-container"),role:"presentation",class:W.loadingContainer,"aria-label":t.loading,title:t.loading},this.renderLoadingIcon()):null}renderPreviousButton(){const{messages:t}=this;return x("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(W.button,W.paginationPrevious),"aria-label":t.previous,title:t.previous},x("calcite-icon",{icon:"chevron-left",scale:"s",class:W.paginationIcon}))}renderNextButton(){const{messages:t}=this;return x("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(W.button,W.paginationNext),"aria-label":t.next,title:t.next},x("calcite-icon",{icon:"chevron-right",scale:"s",class:W.paginationIcon}))}renderFeatureMenuButton(){const{featureMenuOpen:t,featureMenuId:e,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:n}=this.viewModel;return x("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:W.featureMenuButton,"aria-haspopup":"true","aria-controls":e,"aria-expanded":t.toString(),"aria-label":i.menu,title:i.menu},x("calcite-icon",{icon:"list-bullet",scale:"s",class:W.featureMenuButtonIcon}),this._getPageText(r,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNextButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton()]:[]}renderDockIcon(){const{dockEnabled:t}=this,e=this._wouldDockTo(),i={[W.iconUndock]:t,[W.iconDock]:!t,[W.iconDockToRight]:!t&&(e==="top-right"||e==="bottom-right"),[W.iconDockToLeft]:!t&&(e==="top-left"||e==="bottom-left"),[W.iconDockToTop]:!t&&e==="top-center",[W.iconDockToBottom]:!t&&e==="bottom-center"};return x("span",{"aria-hidden":"true",class:this.classes(i,W.icon)})}renderDockButton(){var n,s,o;const{dockEnabled:t,messages:e}=this,i=(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.widthBreakpoint,r=t?e.undock:e.dock;return i!=="xsmall"&&((o=this.dockOptions)!=null&&o.buttonEnabled)?x("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(W.button,W.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:t}=this.viewModel,{titleId:e,collapsible:i,contentCollapsed:r,messagesCommon:n}=this,s={[W.headerContainerButton]:i},o=x(Uo,{level:this.headingLevel,class:W.headerTitle,innerHTML:t??""}),a=i?x("button",{key:`${t}--collapsible`,id:e,title:r?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(W.headerContainer,s),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},o,x("calcite-icon",{class:W.collapseIcon,key:"collapse-icon",icon:r?"chevron-down":"chevron-up",scale:"m"})):x("div",{key:t??"title",id:e,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(W.headerContainer,s)},o);return t?a:null}renderCloseIcon(){return x("span",{"aria-hidden":"true",class:this.classes(W.icon,W.iconClose)})}renderCloseButton(){const{visibleElements:t,messagesCommon:e}=this;return t.closeButton?x("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:W.button,"aria-label":e.close,title:e.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return x("header",{class:W.header},this.renderTitle(),x("div",{class:W.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:t,hasContent:e,contentCollapsed:i,_flowItems:r}=this,{content:n}=this.viewModel,s=r.toArray(),o={[W.contentHasFlows]:!!s.length};return e&&!i?x("div",{key:n??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:t,class:this.classes(W.content,o)},x("calcite-flow",{bind:this},x("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:mc,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),s.map(a=>this.renderFlowItem(a))),s.map(a=>this.renderFlowItemTooltips(a))):null}renderFlowItem(t){const{messages:e}=this,i=uM(),r="graphic"in t&&!t.isTable;return x("calcite-flow-item",{bind:this,class:this.classes({[W.calciteThemeDark]:!i,[W.calciteThemeLight]:i}),heading:t.title??"",description:this._getFlowItemDescription(t),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${t.viewModel.uid}`},x("calcite-action",{class:W.actionExit,icon:"move-up",label:e==null?void 0:e.exitRelatedRecords,text:e==null?void 0:e.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:n=>this._storeExitRelatedRecordsAction(t,n),onclick:this._destroyFlowItemWidgets}),r?x("calcite-action",{class:W.actionSelectFeature,icon:"zoom-to-object",label:e==null?void 0:e.selectFeature,text:e==null?void 0:e.selectFeature,slot:"header-actions-end",bind:this,afterCreate:n=>this._storeFeatureSelectionAction(t,n),onclick:()=>this._handleOpenRelatedFeature(t)}):null,x("div",{class:this.classes(W.contentFlowItem,{[W.calciteThemeDark]:i,[W.calciteThemeLight]:!i})},t.render()))}renderFlowItemTooltips(t){const{messages:e,_exitRelatedRecordsActions:i,_featureSelectionActions:r}=this,n=uM(),s=r.get(t);return[x("calcite-tooltip",{class:this.classes({[W.calciteThemeDark]:!n,[W.calciteThemeLight]:n}),key:`exit-related-records-tooltip-${t.viewModel.uid}`,label:e==null?void 0:e.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(t),placement:"top"},e==null?void 0:e.exitRelatedRecords),s?x("calcite-tooltip",{class:this.classes({[W.calciteThemeDark]:!n,[W.calciteThemeLight]:n}),key:`select-related-record-tooltip-${t.viewModel.uid}`,label:e==null?void 0:e.selectFeature,overlayPositioning:"fixed",referenceElement:s,placement:"top"},e==null?void 0:e.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:t,actionsMenuButtonId:e,actionsMenuOpen:i,dividedActions:r,messagesCommon:n}=this,s=i?n.close:n.open,{menuActions:o}=r;return o.length?x("div",{key:Iu("actions-menu-button"),class:this.classes(W.button,W.actionsMenuButton),role:"button",id:e,"aria-haspopup":"true","aria-controls":i?t:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},x("span",{"aria-hidden":"true",class:W.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:t,actionsMenuButtonId:e,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:n}=r;return n.length&&i?x("ul",{id:t,role:"menu","aria-labelledby":e,key:Iu("actions"),class:W.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(s=>this.renderAction({action:s,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:t}=this.dividedActions;return t.length?t.toArray().map(e=>this.renderAction({action:e,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:t,menuActions:e}=this.dividedActions,i=!!t.length,r=!!e.length;return i||r?x("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:W.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?x("section",{key:Iu("navigation"),class:this.classes(W.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:t,dividedActions:e}=this,{inlineActions:i,menuActions:r}=e,n=!!i.length,s=!!r.length,o={[W.footerHasPagination]:t,[W.footerHasActions]:n,[W.footerHasActionsMenu]:s};return t||n?x("div",{key:Iu("feature-buttons"),class:this.classes(W.footer,o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:t}=this,{featureViewModels:e,isLoadingFeature:i}=this.viewModel,r=er(t.selectedFeatures,{total:e.length});return x("section",{key:Iu("menu"),class:W.featureMenu},x("strong",{class:W.featureMenuHeader},r),x("nav",{bind:this,class:W.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:mc},this.renderFeatureMenu(),x("div",{class:W.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?x("div",{class:W.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:x("div",{key:Iu("pointer"),class:W.pointer,role:"presentation"},x("div",{class:this.classes(W.pointerDirection,W.shadow)}))}renderMainContainer(){const{dockEnabled:t,currentAlignment:e,currentDockPosition:i,titleId:r,contentId:n,collapsible:s,hasContent:o,contentCollapsed:a,visibleElements:l}=this,{title:c}=this.viewModel,h=e==="bottom-left"||e==="bottom-center"||e==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",p=e==="top-left"||e==="top-center"||e==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",f={[W.shadow]:t,[W.isCollapsible]:s,[W.isCollapsed]:a};return x("div",{class:this.classes(W.main,W.widget,f),tabIndex:l.closeButton?void 0:-1,role:"dialog","aria-live":"polite","aria-labelledby":c?r:"","aria-describedby":o&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=(e=this.viewModel)==null?void 0:e.content;return t?typeof t=="string"?x("div",{class:ui.contentNode,key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(t){return x("span",{key:"text",class:W.actionText},t)}renderActionCalciteIcon(t,e){return x("calcite-icon",{scale:"s",key:`calcite-icon-${e}`,icon:t,class:W.icon})}renderActionIcon(t){const e=this._getActionClass(t),i=this._getActionImage(t),r={[W.iconLoading]:t.active,[W.rotating]:t.active,[W.icon]:!!e,[W.actionImage]:!t.active&&!!i};return e&&(r[e]=!t.active),x("span",{key:"icon","aria-hidden":"true",class:this.classes(W.icon,r),styles:this._getIconStyles(i)})}renderAction(t){const{action:e,type:i}=t,r=this._getActionTitle(e),n={[W.action]:e.type!=="toggle",[W.actionToggle]:e.type==="toggle",[W.actionToggleOn]:e.type==="toggle"&&e.value,[W.buttonDisabled]:e.disabled},s=[e.icon&&!e.active?this.renderActionCalciteIcon(e.icon,e.uid):this.renderActionIcon(e),this.renderActionText(r)],o=i==="menu-item"?x("li",{key:e.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(W.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":e.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s):x("div",{key:e.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(W.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":e.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return e.visible?o:null}renderFeatureMenuItem(t,e){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,o=t===s,a={[W.featureMenuSelected]:o},l=o?x("span",{key:Iu(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:W.iconCheckMark}):null,c=x("span",{innerHTML:t.title||r.untitled});return x("li",{role:"menuitem",tabIndex:-1,key:Iu(`feature-menu-feature-${n}`),class:this.classes(a,W.featureMenuItem),bind:this,"data-feature-index":e,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},x("span",{class:W.featureMenuTitle},c,l))}renderFeatureMenu(){const{featureMenuId:t}=this,{featureViewModels:e}=this.viewModel;return e.length>1?x("ol",{class:W.featureMenuList,id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},e.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_storeFeatureSelectionAction(t,e){this._featureSelectionActions.set(t,e),this.scheduleRender()}_storeExitRelatedRecordsAction(t,e){this._exitRelatedRecordsActions.set(t,e),this.scheduleRender()}_getFlowItemDescription(t){return"featureCountDescription"in t?t.featureCountDescription:t.viewModel.description??""}async _openRelatedFeature(t){await t.viewModel.updateGeometry();const e=t.graphic,i=e==null?void 0:e.geometry;if(i==null||e==null)return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:i});const r=Qse(i);this.open({features:[e],location:r??void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t.viewModel=null,t.destroy()})}_handleBackClick(){const t=this._flowItems.pop();t&&(this._exitRelatedRecordsActions.delete(t),this._featureSelectionActions.delete(t),"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy()))}_getActionTitle(t){const{messages:e,selectedFeature:i,messagesCommon:r}=this,{id:n}=t,s=i==null?void 0:i.attributes,o=t.title??"",a=n==="zoom-to-feature"?er(o,{messages:e}):n==="remove-selected-feature"?er(o,{messages:r}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?er(o,{messages:e}):t.title;return a&&s?er(a,s):a??""}_getActionClass(t){const{selectedFeature:e}=this,i=e==null?void 0:e.attributes,{className:r,image:n}=t,s=n||r?r:W.iconDefaultAction;return s&&i?er(s,i):s??""}_getActionImage(t){if(t.active)return"";const{selectedFeature:e}=this,i=e==null?void 0:e.attributes,{image:r}=t;return r&&i?er(r,i):r??""}_createFeatureUpdatedAnimation(){return t1e("enter",W.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:t,featureNavigationVisible:e}=this;if(typeof t!="number")return null;const i=Math.round(t);return Math.max(e?i-1:i,0)}_watchActions(){const{allActions:t}=this.viewModel;this.notifyChange("dividedActions");const e="actions";this._handles.remove(e),t&&t.forEach(i=>{this._handles.add(D(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),e)})}_divideActions(){const{allActions:t}=this.viewModel,e=t.filter(s=>s.visible),i=this._getInlineActionCount(),r=i===null,n=i===0;return{inlineActions:r?e.slice(0):n?new se:e.slice(0,i),menuActions:r?new se:n?e.slice(0):e.slice(i)}}_featureMenuOpenChanged(t){t?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(t){t?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:t,messagesCommon:e}=this;t&&(this.viewModel.title=((i=t.viewModel)==null?void 0:i.state)==="error"?e.errorMessage:((r=t.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_handleFeatureMenuKeyup(t){Va(t)==="Escape"&&(t.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(t){Va(t)==="Escape"&&(t.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(t){const{viewModel:e}=this,i=MP(t.currentTarget);e.activeFeature=e.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(t){const e=Va(t),{_featureMenuNode:i}=this,r=MP(t.currentTarget);if(!i)return;const n=i.querySelectorAll("li"),s=n.length;e!=="ArrowUp"?e!=="ArrowDown"?e!=="Home"?e!=="End"||(t.stopPropagation(),n[n.length-1].focus()):(t.stopPropagation(),n[0].focus()):(t.stopPropagation(),n[(r+1+s)%s].focus()):(t.stopPropagation(),n[(r-1+s)%s].focus())}_handleActionMenuItemKeyup(t){const e=Va(t),{_actionsMenuNode:i}=this,r=t.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,s=n.findIndex(l=>l.uid===r);if(!i)return;const o=i.querySelectorAll("li"),a=o.length;e!=="ArrowUp"?e!=="ArrowDown"?e!=="Home"?e!=="End"||(t.stopPropagation(),o[o.length-1].focus()):(t.stopPropagation(),o[0].focus()):(t.stopPropagation(),o[(s+1+a)%a].focus()):(t.stopPropagation(),o[(s-1+a)%a].focus())}_handleMainKeyup(t){const e=Va(t);e==="ArrowLeft"&&(t.stopPropagation(),this.previous()),e==="ArrowRight"&&(t.stopPropagation(),this.next())}_spinnerEnabledChange(t){if(this._destroySpinner(),!t)return;const e=this.get("viewModel.view");this._createSpinner(e)}_hideSpinner(){const{_spinner:t}=this;t&&(t.location=null,t.hide())}_displaySpinner(){const{_spinner:t}=this;if(!t)return;const{location:e,waitingForResult:i}=this.viewModel;i&&e?t.show({location:e}):t.hide()}_getIconStyles(t){return{"background-image":t?`url(${t})`:""}}async _shouldFocus(t){t!=null&&t.shouldFocus&&(await Ci(()=>{var e;return((e=this.viewModel)==null?void 0:e.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const t=D(()=>{var e;return(e=this.viewModel)==null?void 0:e.selectedFeatureIndex},(e,i)=>this._selectedFeatureIndexUpdated(e,i));this._handles.add(t,v9)}_selectedFeatureIndexUpdated(t,e){const{featureCount:i}=this;i&&t!==e&&t!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:t}=this;t&&(t.viewModel=null,t&&!t.destroyed&&t.destroy()),this._feature=null}_isScreenLocationWithinView(t,e){return t.x>-1&&t.y>-1&&t.x<=e.width&&t.y<=e.height}_isOutsideView(t){const{popupHeight:e,popupWidth:i,screenLocation:r,side:n,view:s}=t;if(isNaN(i)||isNaN(e)||!s||!r)return!1;const o=s.padding;return n==="right"&&r.x+i/2>s.width-o.right||n==="left"&&r.x-i/2<o.left||n==="top"&&r.y-e<o.top||n==="bottom"&&r.y+e>s.height-o.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_pointerOffsetInPx:e,_containerNode:i,_mainContainerNode:r,viewModel:n}=this,{screenLocation:s,view:o}=n;if(s==null||!o||!i)return"top-center";if(!this._isScreenLocationWithinView(s,o))return this._get("currentAlignment")||"top-center";function a(b){return parseInt(b.replaceAll(/[^-\d\.]/g,""),10)}const l=r?window.getComputedStyle(r,null):null,c=l?a(l.getPropertyValue("max-height")):0,h=l?a(l.getPropertyValue("height")):0,{height:p,width:f}=i.getBoundingClientRect(),y=f+e,g=Math.max(p,c,h)+e,v=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"right",view:o}),_=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"left",view:o}),w=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"top",view:o}),S=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"bottom",view:o});return _?w?"bottom-right":"top-right":v?w?"bottom-left":"top-left":w?S?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){const{alignment:t,dockEnabled:e}=this;return e||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){const e=["left","right"];return Fc(this.container)&&e.reverse(),t==null?void 0:t.replace(/leading/gi,e[0]).replaceAll(/trailing/gi,e[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){var t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((t=this.dockOptions)==null?void 0:t.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(t){var o;if(t!=="auto")return t;const e=(o=this.viewModel)==null?void 0:o.view,i=Fc(this.container)?"top-left":"top-right";if(!e)return i;const r=e.padding||{left:0,right:0,top:0,bottom:0},n=e.width-r.left-r.right,{breakpoints:s}=e;return s&&n<=s.xsmall?"bottom-center":i}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;const{screenLocation:e}=this.viewModel,{width:i}=this._containerNode.getBoundingClientRect(),r=this._calculatePositionStyle(e,i);r&&Object.assign(this._containerNode.style,r)}_calculateFullWidth(t){const{currentAlignment:e,_pointerOffsetInPx:i}=this;return e==="top-left"||e==="bottom-left"||e==="top-right"||e==="bottom-right"?t+i:t}_calculateAlignmentPosition(t,e,i,r){const{currentAlignment:n,_pointerOffsetInPx:s}=this;if(!i)return;const{padding:o}=i,a=r/2,l=i.height-e,c=i.width-t;return n==="bottom-center"?{top:e+s-o.top,left:t-a-o.left}:n==="top-left"?{bottom:l+s-o.bottom,right:c+s-o.right}:n==="bottom-left"?{top:e+s-o.top,right:c+s-o.right}:n==="top-right"?{bottom:l+s-o.bottom,left:t+s-o.left}:n==="bottom-right"?{top:e+s-o.top,left:t+s-o.left}:n==="top-center"?{bottom:l+s-o.bottom,left:t-a-o.left}:void 0}_calculatePositionStyle(t,e){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(t==null||!e)return;const n=this._calculateFullWidth(e),s=this._calculateAlignmentPosition(t.x,t.y,r,n);return s?{top:s.top!==void 0?`${s.top}px`:"auto",left:s.left!==void 0?`${s.left}px`:"auto",bottom:s.bottom!==void 0?`${s.bottom}px`:"auto",right:s.right!==void 0?`${s.right}px`:"auto"}:void 0}_viewChange(t,e){t&&e&&(this.close(),this.clear())}_viewReadyChange(t,e){if(t){const i=this.get("viewModel.view");this._wireUpView(i)}else e&&(this.close(),this.clear())}_wireUpView(t){if(this._destroySpinner(),!t)return;const{spinnerEnabled:e}=this;e&&this._createSpinner(t),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,e,i){const[r,n]=t,[s,o]=e,{width:a=0,height:l=0}=i??{};return r<=a&&s>a||r>a&&s<=a||n<=l&&o>l||n>l&&o<=l}_updateDockEnabledForViewSize(t,e){if(!t||!e)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,n=i.top+i.bottom,s=[],o=[];s[0]=t[0]-r,s[1]=t[1]-n,o[0]=e[0]-r,o[1]=e[1]-n;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(s,o,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(t){this._focusDockButton&&(this._focusDockButton=!1,t.focus())}_closeButtonNodeUpdated(t){return this._focusClose?(this._focusClose=!1,void t.focus()):this._blurClose?(this._blurClose=!1,void t.blur()):void 0}_mainContainerNodeUpdated(t){return this._mainContainerNode=t,this._focusContainer?(this._focusContainer=!1,void t.focus()):this._blurContainer?(this._blurContainer=!1,void t.blur()):void 0}_featureMenuNodeUpdated(t){if(this._featureMenuNode=t,!t||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const e=t.querySelectorAll("li");e.length&&e[0].focus()}_actionsMenuNodeUpdated(t){if(this._actionsMenuNode=t,!t||!this._focusFirstAction)return;this._focusFirstAction=!1;const e=t.querySelectorAll("li");e.length&&e[0].focus()}_focusFeatureMenuButtonNode(t){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,t.focus())}_focusActionsMenuButtonNode(t){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,t.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:t,viewModel:e}=this;if(!e)return;const i=e.active&&!t;e.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(t){var a,l;const e=t.breakpoint,i=(l=(a=this.viewModel)==null?void 0:a.view)==null?void 0:l.ui;if(!i)return!1;const{width:r,height:n}=i;if(isNaN(r)||isNaN(n)||!e)return!1;const s=e.hasOwnProperty("width")&&r<=(e.width??0),o=e.hasOwnProperty("height")&&n<=(e.height??0);return s||o}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}_getPageText(t,e){return this.featureNavigationVisible?er(this.messages.pageText,{index:e+1,total:t}):null}_destroySpinner(){var t,e;this._spinner&&((e=(t=this.view)==null?void 0:t.ui)==null||e.remove(this._spinner,_9),this._spinner.destroy(),this._spinner=null)}_createSpinner(t){t&&(this._spinner=new _re({view:t}),t.ui.add(this._spinner,{key:_9,position:"manual",internal:!0}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const t=!this.featureMenuOpen;this._featureMenuOpenChanged(t),this.actionsMenuOpen=!1,this.featureMenuOpen=t}_toggleActionsMenu(){const t=!this.actionsMenuOpen;this._actionsMenuOpenChanged(t),this.featureMenuOpen=!1,this.actionsMenuOpen=t}_triggerAction(t){const e=t.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(s=>s.uid===e),n=i.at(r);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(t){const e=MP(t.currentTarget);e==null||isNaN(e)||(this.viewModel.selectedFeatureIndex=e),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};function MP(t){return t==null?void 0:t["data-feature-index"]}u([d({readOnly:!0})],ve.prototype,"actionsMenuId",null),u([d({readOnly:!0})],ve.prototype,"actionsMenuButtonId",null),u([d({readOnly:!0})],ve.prototype,"featureMenuId",null),u([d({readOnly:!0})],ve.prototype,"titleId",null),u([d({readOnly:!0})],ve.prototype,"contentId",null),u([d({readOnly:!0})],ve.prototype,"hasContent",null),u([d({readOnly:!0})],ve.prototype,"featureNavigationVisible",null),u([d({readOnly:!0})],ve.prototype,"collapsible",null),u([d({readOnly:!0})],ve.prototype,"featureMenuVisible",null),u([d({readOnly:!0})],ve.prototype,"contentCollapsed",null),u([d({readOnly:!0})],ve.prototype,"dividedActions",null),u([d({readOnly:!0,dependsOn:["_flowItems.length"]})],ve.prototype,"_activeFlowItemWidget",null),u([d()],ve.prototype,"actions",null),u([d()],ve.prototype,"actionsMenuOpen",null),u([d()],ve.prototype,"alignment",void 0),u([d()],ve.prototype,"autoCloseEnabled",null),u([d()],ve.prototype,"autoOpenEnabled",null),u([d()],ve.prototype,"defaultPopupTemplateEnabled",null),u([d()],ve.prototype,"content",null),u([d()],ve.prototype,"collapsed",void 0),u([d()],ve.prototype,"collapseEnabled",void 0),u([d({readOnly:!0})],ve.prototype,"currentAlignment",null),u([d({readOnly:!0})],ve.prototype,"currentDockPosition",null),u([d()],ve.prototype,"dockOptions",null),u([d()],ve.prototype,"dockEnabled",void 0),u([d({readOnly:!0})],ve.prototype,"featureCount",null),u([d()],ve.prototype,"featureMenuOpen",null),u([d()],ve.prototype,"features",null),u([d()],ve.prototype,"goToOverride",null),u([d()],ve.prototype,"headingLevel",void 0),u([d()],ve.prototype,"highlightEnabled",null),u([d()],ve.prototype,"location",null),u([d()],ve.prototype,"label",null),u([d()],ve.prototype,"maxInlineActions",void 0),u([d(),rt("esri/widgets/Popup/t9n/Popup")],ve.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],ve.prototype,"messagesCommon",void 0),u([d()],ve.prototype,"promises",null),u([d({readOnly:!0})],ve.prototype,"selectedFeature",null),u([d()],ve.prototype,"selectedFeatureIndex",null),u([d({readOnly:!0})],ve.prototype,"selectedFeatureWidget",null),u([d()],ve.prototype,"spinnerEnabled",void 0),u([d()],ve.prototype,"title",null),u([d()],ve.prototype,"updateLocationEnabled",null),u([d()],ve.prototype,"view",null),u([d({type:Xse}),wv(["triggerAction","trigger-action"])],ve.prototype,"viewModel",void 0),u([d()],ve.prototype,"visible",null),u([d()],ve.prototype,"visibleElements",void 0),u([Re("visibleElements")],ve.prototype,"castVisibleElements",null),u([At()],ve.prototype,"_close",null),u([At()],ve.prototype,"_toggleDockEnabled",null),u([At()],ve.prototype,"_toggleFeatureMenu",null),u([At()],ve.prototype,"_toggleActionsMenu",null),u([At()],ve.prototype,"_triggerAction",null),u([At()],ve.prototype,"_selectFeature",null),u([At()],ve.prototype,"_next",null),u([At()],ve.prototype,"_previous",null),ve=u([E("esri.widgets.Popup")],ve);const eoe=ve,x9=Object.freeze(Object.defineProperty({__proto__:null,default:eoe},Symbol.toStringTag,{value:"Module"}));let ku=class extends G{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};u([d({type:[Object],json:{read:{reader:t=>t&&t.records?t.records.map(e=>e.attributes):null},write:{writer:(t,e)=>{const i=[];Array.isArray(t)&&t.forEach(r=>{i.push({attributes:r})}),e.addresses={records:i}}}}})],ku.prototype,"addresses",void 0),u([d({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],ku.prototype,"categories",void 0),u([d({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],ku.prototype,"countryCode",void 0),u([d({type:String,json:{write:!0}})],ku.prototype,"locationType",void 0),u([d({type:_e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ku.prototype,"outSpatialReference",void 0),ku=u([E("esri.rest.support.AddressesToLocationsParameters")],ku),ku.from=Xt(ku);async function B4e(t){const e={location:t instanceof ce?t:t.mapPoint};try{const{attributes:i}=await Hne("http://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer",e);return{region:(i==null?void 0:i.Region)??"",city:((i==null?void 0:i.Neighborhood)||(i==null?void 0:i.City))??"",street:((i==null?void 0:i.Address)||(i==null?void 0:i.City))??""}}catch{return null}}const G4e=({coords:t,id:e})=>Da.jsxs("div",{id:e,className:"esri-component lat-long-widget",children:[`lat: ${t.latitude.toFixed(4)}`,"   ",`lon: ${t.longitude.toFixed(4)}`]});let ug=class extends X{constructor(e){super(e),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){var e,i;return(i=this.format)==null?void 0:i.getDisplayCoordinate((e=this.position)==null?void 0:e.coordinate)}};u([d({readOnly:!0})],ug.prototype,"displayCoordinate",null),u([d()],ug.prototype,"format",void 0),u([d()],ug.prototype,"position",void 0),ug=u([E("esri.widgets.CoordinateConversion.support.Conversion")],ug);const Ng=ug;function H4e(t,e){const i=toe(e);return[t[0].toFixed(i),t[1].toFixed(i)]}function toe(t){return t>=500?6:t<500&&t>=50?7:t<50&&t>=5?8:9}function q4e(t,e){const i=t.includes(",")?",":" ",[r,n,s]=t.split(i).map(a=>{const l=a.trim();return l?Number(l):null});if(!HM(r)||!HM(n))return null;const o=new ce({x:r,y:n,spatialReference:e||_e.WGS84});return s&&(o.z=s,o.hasZ=!0),o}function HM(t){return typeof t=="number"&&isFinite(t)}function O3(t){return!!t&&HM(t.x)&&HM(t.y)}function $9(t,e){if(t.spatialReference.isGeographic&&e){const[i,r]=H4e([t.x,t.y],e);return`${i}, ${r}`}return`${t.x.toFixed(3)}, ${t.y.toFixed(3)}`}const W4e=["dd","dms","ddm","mgrs","usng","utm"];function Z4e(t){return W4e.includes(t)}const TP={ar:[".",","],bg:[","," "],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function NI(t=Yr()){let e=(t=t.toLowerCase())in TP;if(!e){const s=t.split("-");s.length>1&&s[0]in TP&&(t=s[0],e=!0),e||(t="en")}const[i,r,n="#,##0.###"]=TP[t];return{decimal:i,group:r,pattern:n}}function Y4e(t,e){const i=NI((e={...e}).locale);e.customs=i;const r=e.pattern||i.pattern;return isNaN(t)||Math.abs(t)===1/0?null:J4e(t,r,e)}const ioe=/[#0,]*[#0](?:\.0*#*)?/;function J4e(t,e,i){const r=(i=i||{}).customs.group,n=i.customs.decimal,s=e.split(";"),o=s[0];if((e=s[t<0?1:0]||"-"+o).includes("%"))t*=100;else if(e.includes("‰"))t*=1e3;else{if(e.includes("¤"))throw new Error("currency notation not supported");if(e.includes("E"))throw new Error("exponential notation not supported")}const a=ioe,l=o.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+e);return i.fractional===!1&&(i.places=0),e.replace(a,K4e(t,l[0],{decimal:n,group:r,places:i.places,round:i.round}))}function K4e(t,e,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const r=e.split("."),n=typeof i.places=="string"&&i.places.indexOf(",");let s=i.places;n?s=i.places.substring(n+1):+s>=0||(s=(r[1]||[]).length),i.round<0||(t=Number(t.toFixed(Number(s))));const o=String(Math.abs(t)).split("."),a=o[1]||"";if(r[1]||i.places){n&&(i.places=i.places.substring(0,n));const g=i.places!==void 0?i.places:r[1]&&r[1].lastIndexOf("0")+1;+g>a.length&&(o[1]=a.padEnd(Number(g),"0")),+s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const l=r[0].replace(",","");let c=l.indexOf("0");c!==-1&&(c=l.length-c,c>o[0].length&&(o[0]=o[0].padStart(c,"0")),l.includes("#")||(o[0]=o[0].substr(o[0].length-c)));let h,p,f=r[0].lastIndexOf(",");if(f!==-1){h=r[0].length-f-1;const g=r[0].substr(0,f);f=g.lastIndexOf(","),f!==-1&&(p=g.length-f-1)}const y=[];for(let g=o[0];g;){const v=g.length-h;y.push(v>0?g.substr(v):g),g=v>0?g.slice(0,v):"",p&&(h=p,p=void 0)}return o[0]=y.reverse().join(i.group||","),o.join(i.decimal||".")}function Q4e(t){const e=NI((t=t||{}).locale),i=t.pattern||e.pattern,r=e.group,n=e.decimal;let s=1;if(i.includes("%"))s/=100;else if(i.includes("‰"))s/=1e3;else if(i.includes("¤"))throw new Error("currency notation not supported");const o=i.split(";");return o.length===1&&o.push("-"+o[0]),{regexp:_1(o,l=>(l="(?:"+AD(l,".")+")").replace(ioe,c=>{const h={signed:!1,separator:t.strict?r:[r,""],fractional:t.fractional,decimal:n,exponent:!1},p=c.split(".");let f=t.places;p.length===1&&s!==1&&(p[1]="###"),p.length===1||f===0?h.fractional=!1:(f===void 0&&(f=t.pattern?p[1].lastIndexOf("0")+1:1/0),f&&t.fractional==null&&(h.fractional=!0),!t.places&&+f<p[1].length&&(f+=","+p[1].length),h.places=f);const y=p[0].split(",");return y.length>1&&(h.groupSize=y.pop().length,y.length>1&&(h.groupSize2=y.pop().length)),"("+e6e(h)+")"}),!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:n,factor:s}}function X4e(t,e){const i=Q4e(e),r=new RegExp("^"+i.regexp+"$").exec(t);if(!r)return NaN;let n=r[1];if(!r[1]){if(!r[2])return NaN;n=r[2],i.factor*=-1}return n=n.replaceAll(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(n)*i.factor}function e6e(t){"places"in(t=t||{})||(t.places=1/0),typeof t.decimal!="string"&&(t.decimal="."),"fractional"in t&&!/^0/.test(String(t.places))||(t.fractional=[!0,!1]),"exponent"in t||(t.exponent=[!0,!1]),"eSigned"in t||(t.eSigned=[!0,!1]);const e=E9(t),i=_1(t.fractional,n=>{let s="";return n&&t.places!==0&&(s="\\"+t.decimal,t.places===1/0?s="(?:"+s+"\\d+)?":s+="\\d{"+t.places+"}"),s},!0);let r=e+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+_1(t.exponent,n=>n?"([eE]"+E9({signed:t.eSigned})+")":"")}function E9(t){return"signed"in(t=t||{})||(t.signed=[!0,!1]),"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="",_1(t.signed,e=>e?"[-+]":"",!0)+_1(t.separator,e=>{if(!e)return"(?:\\d+)";(e=AD(e))===" "?e="\\s":e===" "&&(e="\\s\\xa0");const i=t.groupSize,r=t.groupSize2;if(r){const n="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+e+"]\\d{"+r+"})*["+e+"]\\d{"+i+"})";return i-r>0?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":n}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+e+"]\\d{"+i+"})*)"},!0)}const _1=(t,e,i)=>{if(!(t instanceof Array))return e(t);const r=[];for(let n=0;n<t.length;n++)r.push(e(t[n]));return t6e(r.join("|"),!!i)},t6e=(t,e)=>"("+(e?"?:":"")+t+")";function i6e(t,e){const i=[];t=(t=(t=t.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("′","'")).replaceAll("″",'"');const r=yp(e);return am.dmsToGeog(r,1,[t],i)?new ce(i[0][0],i[0][1],e||_e.WGS84):null}function r6e(t,e,i){const r=[],n=roe(i);if(n===-1)return console.warn(`invalid conversionMode: ${i}`),null;const s=yp(e);return cs.mgrsToGeogExtended(s,1,[t],n,r)?new ce(r[0][0],r[0][1],e||_e.WGS84):null}function n6e(t,e){const i=[];!e&&/\(.+27/.test(t)&&(e=_e.GCS_NAD_1927);const r=yp(e);return t1.usngToGeog(r,1,[t],i)?new ce(i[0][0],i[0][1],e||_e.WGS84):null}function s6e(t,e,i){const r=[],n=noe(i);if(n===-1)return console.warn(`invalid conversionMode: ${i}`),null;const s=yp(e);return Rc.utmToGeog(s,1,[t],n,r)?new ce(r[0][0],r[0][1],e||_e.WGS84):null}function o6e(t,e,i=0){const r=[[t.x,t.y]],n=[],s=yp(t.spatialReference);let o=0;switch(e){case"dd":o=am.geogToDd(s,1,r,i,n);break;case"ddm":o=am.geogToDdm(s,1,r,i,n);break;case"dms":o=am.geogToDms(s,1,r,i,n);break;default:return console.warn(`invalid format: ${e}`),null}return o?n[0]:null}function a6e(t,e,i=0,r=!1){const n=[[t.x,t.y]],s=[],o=yp(t.spatialReference);let a=roe(e);return a===-1?(console.warn(`invalid conversionMode: ${e}`),null):(r&&(a|=cs.PE_MGRS_ADD_SPACES),cs.geogToMgrsExtended(o,1,n,i,!1,a,s)?s[0]:null)}function l6e(t,e=0,i=!1){const r=[[t.x,t.y]],n=[],s=yp(t.spatialReference);return t1.geogToUsng(s,1,r,e,!1,i,n)?n[0]:null}function u6e(t,e,i=!1){const r=[[t.x,t.y]],n=[],s=yp(t.spatialReference);let o=noe(e);return o===-1?(console.warn(`invalid conversionMode: ${e}`),null):(i&&(o|=Rc.PE_UTM_OPTS_ADD_SPACES),Rc.geogToUtm(s,1,r,o,n)?n[0]:null)}function yp(t){let e=null;if(t||(t=_e.WGS84),t.wkid){if(e=e1.geogcs(t.wkid),!e)throw new C("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!t.wkt)throw new C("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(e=e1.fromString(Yt.PE_TYPE_GEOGCS,t.wkt),!e)throw new C("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return e}function roe(t){let e=-1;switch(t){case"automatic":e=cs.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":e=cs.PE_MGRS_STYLE_NEW|cs.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":e=cs.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":e=cs.PE_MGRS_STYLE_OLD|cs.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":e=cs.PE_MGRS_STYLE_OLD}return e}function noe(t){let e=-1;switch(t){case"latitude-band-indicators":e=Rc.PE_UTM_OPTS_NONE;break;case"north-south-indicators":e=Rc.PE_UTM_OPTS_NS}return e}let as=class extends X{constructor(t){super(t),this.conversionInfo=null,this.coordinateSegments=null,this.defaultPattern=null,this.name=null,this.viewModel=null}get currentPattern(){return this._get("currentPattern")||this._get("defaultPattern")}set currentPattern(t){this._set("currentPattern",t)}get label(){return this.name??""}set label(t){this._overrideIfSome("label",t)}get hasDisplayProperties(){return!(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){var t;return this.name==="basemap"?this._viewSpatialReference:((t=this.conversionInfo)==null?void 0:t.spatialReference)??_e.WGS84}set spatialReference(t){this._overrideIfSome("spatialReference",t)}get _viewSpatialReference(){return this.get("viewModel.view.spatialReference")||_e.WGS84}get _additionalCharactersPattern(){const t=this.get("coordinateSegments");if(!t)return null;const e=t.map(r=>r.alias),i=this.currentPattern.replaceAll(new RegExp(`["nsew${e.join()}]`,"gi"),"").replaceAll(" ","");return new RegExp(`[${i}]`,"g")}get test(){return{additionalCharactersPattern:this._additionalCharactersPattern}}async convert(t){if(!O3(t))throw new C("format:invalid-point","Could not convert invalid point.",{point:t});const e=this.get("conversionInfo.convert");if(e)return Promise.resolve().then(()=>e(t));const i=await this._project(t,this.spatialReference);return{location:i,coordinate:await this._getCoordinate(i)}}getConversionStrategy(){const t=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||this.name==="xy"&&(t.isWebMercator||t.isWGS84)||this.name==="basemap"?"client":"server"}getDisplayCoordinate(t){if(!t)return null;if(!this.coordinateSegments||!this.currentPattern)return t;let e=this.currentPattern;const i=this._getSegmentMatches(t,!1);for(let r=this.coordinateSegments.length-1;r>=0;r--){const n=this.coordinateSegments[r];e=e.replace(n.alias,i[r])}return e}parseUserInput(t){const{defaultPattern:e,_additionalCharactersPattern:i,coordinateSegments:r}=this;if(!e||!i)return"";let n=e.replace(i,"");t=t.replace(i,"");const s=this._getSegmentMatches(t,!0);if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];n=n.replace(a.alias,s[o])}return n}_getSegmentMatches(t,e){const i=new Array,{coordinateSegments:r}=this;if(!r)return i;for(let n=0;n<r.length;n++){const s=r[n],o=t.match(s.searchPattern);if(!o){i.push("");continue}let a=o[0];if(t=t.replace(a,"").trim(),s.substitution){const l=e?s.substitution.input(a):s.substitution.output(a);l&&(a=`${l}`)}i.push(a)}return i}async reverseConvert(t){var n;const e=this.parseUserInput(t),i=this.get("conversionInfo.reverseConvert");let r;if(i)r=i(e);else if(this.name==="xy"||this.name==="basemap")r=q4e(e,this.spatialReference);else if((n=this.viewModel)!=null&&n.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":r=i6e(e,this.spatialReference);break;case"mgrs":{const s="automatic";r=r6e(e,this.spatialReference,s);break}case"utm":{const s="latitude-band-indicators";r=s6e(e,this.spatialReference,s);break}case"usng":r=n6e(e,this.spatialReference);break;default:r=null}if(!r)throw new C("format:invalid-input","Could not parse input into point.",{userInput:t});return this._project(r,this._viewSpatialReference)}async _getCoordinate(t){const e=this.get("viewModel.view.scale");if(!O3(t))throw new C("format:invalid-point","Could not transform invalid point into coordinate.",{point:t});if(this.get("viewModel.formatterAvailable")||this.name==="basemap"||this.name==="xy")switch(this.name){case"dd":case"ddm":case"dms":{const i=toe(e);return o6e(t,this.name,i)}case"mgrs":return a6e(t,"automatic",5,!1);case"usng":return l6e(t,5,!1);case"utm":return u6e(t,"latitude-band-indicators",!0);default:return $9(t,e)}return $9(t,e)}async _project(t,e){var i,r;if(Si(t.spatialReference,e)||!e)return t;if((i=this.viewModel)!=null&&i.formatterAvailable&&zc())return Jo(t,e);if(!((r=this.viewModel)!=null&&r.formatterAvailable)){const n=A1(t,e);if(n!=null)return n}return null}};u([d()],as.prototype,"conversionInfo",void 0),u([d()],as.prototype,"coordinateSegments",void 0),u([d()],as.prototype,"currentPattern",null),u([d()],as.prototype,"label",null),u([d()],as.prototype,"defaultPattern",void 0),u([d({readOnly:!0})],as.prototype,"hasDisplayProperties",null),u([d()],as.prototype,"name",void 0),u([d({type:_e})],as.prototype,"spatialReference",null),u([d()],as.prototype,"viewModel",void 0),u([d({readOnly:!0})],as.prototype,"_viewSpatialReference",null),u([d({readOnly:!0})],as.prototype,"_additionalCharactersPattern",null),as=u([E("esri.widgets.CoordinateConversion.support.Format")],as);const cd=as,Ef=NI().decimal,my={N:"north",S:"south",E:"east",W:"west"},ci="°‎",i$=new RegExp(`-?\\d+[\\.|\\${Ef}]?\\d*`),c6e=/^[\\0]+(?=\d)/;function M9(t,e){const i=Yr()==="ar",r=t.abbreviatedDirections.north,n=t.abbreviatedDirections.south,s=t.abbreviatedDirections.east,o=t.abbreviatedDirections.west,a=NI().decimal,l={[r]:"N",[n]:"S",[s]:"E",[o]:"W"},c=new RegExp(`-?\\d+[\\.|\\${a}]?\\d*`),h=new RegExp(`N|S|${r}|${n}`,"i"),p=new RegExp(`E|W|${s}|${o}`,"i"),f={ddm:`Y${ci} A'${t.abbreviatedDirections.north}, X${ci} B'${t.abbreviatedDirections.east}`,dms:`Y${ci} A' B"${t.abbreviatedDirections.north}, X${ci} C' D"${t.abbreviatedDirections.east}`,dd:`Y${ci}${t.abbreviatedDirections.north}, X${ci}${t.abbreviatedDirections.east}`,xy:`X${ci}, Y${ci}`,basemap:"X, Y"},y={ddm:`${t.abbreviatedDirections.north}${ci}Y 'A ,${t.abbreviatedDirections.east}${ci}X 'B`,dms:`${t.abbreviatedDirections.north}${ci}Y 'A "B ,${t.abbreviatedDirections.east}${ci}X 'C "D`,dd:`${t.abbreviatedDirections.north}${ci}Y ,${t.abbreviatedDirections.east}${ci}X`,xy:`X${ci} ,Y${ci}`,basemap:"X ,Y"},g=w=>w!=null&&Object.keys(f).includes(w),v=new RegExp(`\\d{1,2}[\\.|\\${a}]?\\d*`,"i"),_=new RegExp(`\\d{1,3}[\\.|\\${a}]?\\d*`,"i");e.forEach(w=>{const{name:S}=w;if(S==="dd"?w.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:h,substitution:{input:b=>l[b],output:b=>t.abbreviatedDirections[my[b]]}},{alias:"X",description:"degrees longitude",searchPattern:_,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:p,substitution:{input:b=>l[b],output:b=>t.abbreviatedDirections[my[b]]}}]:S==="ddm"?w.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:"A",description:"minutes latitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:h,substitution:{input:b=>l[b],output:b=>t.abbreviatedDirections[my[b]]}},{alias:"X",description:"degrees longitude",searchPattern:_,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:"B",description:"minutes longitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:p,substitution:{input:b=>l[b],output:b=>t.abbreviatedDirections[my[b]]}}]:S==="dms"?w.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:"A",description:"minutes latitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:"B",description:"seconds latitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:h,substitution:{input:b=>l[b],output:b=>t.abbreviatedDirections[my[b]]}},{alias:"X",description:"degrees longitude",searchPattern:_,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:"C",description:"minutes longitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:"D",description:"seconds longitude",searchPattern:v,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:p,substitution:{input:b=>l[b],output:b=>t.abbreviatedDirections[my[b]]}}]:(w.name==="xy"||w.name==="basemap")&&(w.coordinateSegments=[{alias:"X",description:"easting",searchPattern:c,substitution:{input:b=>$t(b),output:b=>xt(b)}},{alias:"Y",description:"northing",searchPattern:c,substitution:{input:b=>$t(b),output:b=>xt(b)}}]),g(S)){const b=i?y[S]:f[S];w.defaultPattern=b,w.currentPattern=b}})}function d6e(){const t=new RegExp("N|S","i"),e=new RegExp("E|W","i");return[new cd({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:i$,substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"Y",description:"northing",searchPattern:i$,substitution:{input:i=>$t(i),output:i=>xt(i)}}],defaultPattern:"X, Y",viewModel:null}),new cd({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${Ef}]?\\d*(?=\\D*?[N|S])`,"i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"N",description:"north/south indicator",searchPattern:t},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}[\\.|\\${Ef}]?\\d*(?=\\D*?[E|W|])`,"i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"E",description:"east/west indicator",searchPattern:e}],defaultPattern:`Y${ci}N, X${ci}E`,viewModel:null}),new cd({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S])","i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}[\\.\\${Ef}]?\\d*(?=.*?[N|S])`,"i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"N",description:"north/south indicator",searchPattern:t},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=\\D*?\\s+.*?[E|W])","i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\|${Ef}]?\\d*(?=.*?[E|W])`,"i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"E",description:"east/west indicator",searchPattern:e}],defaultPattern:`Y${ci} A'N, X${ci} B'E`,viewModel:null}),new cd({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S])","i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[N|S])","i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${Ef}]?\\d*(?=.*?[N|S])`,"i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"N",description:"north/south indicator",searchPattern:t},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=.*?\\s+.*?[E|W])","i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[E|W])","i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${Ef}]?\\d*(?=.*?[E|W])`,"i"),substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"E",description:"east/west indicator",searchPattern:e}],defaultPattern:`Y${ci} A' B"N, X${ci} C' D"E`,viewModel:null}),new cd({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:i$,substitution:{input:i=>$t(i),output:i=>xt(i)}},{alias:"Y",description:"latitude",searchPattern:i$,substitution:{input:i=>$t(i),output:i=>xt(i)}}],defaultPattern:`X${ci}, Y${ci}`,viewModel:null}),new cd({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new cd({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new cd({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})]}function xt(t){const e=t.match(c6e),i=e?e[0]:"",r=t.includes(".")?t.split(".")[1].length:0;return i+Y4e(Number(t),{pattern:"###0.###",places:r,round:-1})}function $t(t){return X4e(t)}const r$={default:"default",crosshair:"crosshair"},h6e=new ce([0,0,500]),p6e="xy",f6e=["mgrs","utm","usng","dd","dms","ddm"],T9="esri__coordinateConversionWidgetState",xl={conversions:"conversions",formats:"formats",view:"view",viewChange:"view-change"},m6e="esri/images/search/search-symbol-32.png";let Ur=class extends iS(Vi.EventedAccessor){constructor(e){super(e),this._conversionPromise=null,this._locationGraphic=null,this._pointerCount=0,this.conversions=new se,this.formats=new se,this.formatterAvailable=!1,this.messages=null,this.filteredFormats=new se,this.locationSymbol=new Jh({url:qe(m6e),width:24,height:24}),this.storageEnabled=!0,this.storageType="session",this.view=null,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){const e=async()=>this.messages=await VT("esri/widgets/CoordinateConversion/t9n/CoordinateConversion");this.formats.addMany(d6e()),e().then(()=>{if(!this.destroyed&&(M9(this.messages,this.formats),this.storageEnabled&&this._loadWidgetState(),this.formats.forEach(i=>{i.viewModel=this,this.addHandles(D(()=>i.currentPattern,this._saveWidgetState),i.name??"unnamed-format")}),this.addHandles(this.conversions.on("change",this._handleConversionChange),xl.conversions),this.addHandles(this.formats.on("change",this._handleFormatChange),xl.formats),this.addHandles(ET(()=>{e().then(()=>{M9(this.messages,this.formats)})})),uu().then(()=>{this.formatterAvailable=!0}).catch(i=>{U.getLogger(this).error(new C("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:i})),this.formatterAvailable=!1,this._filterFormatsAndConversions()}).then(()=>this.addHandles(D(()=>this.view,this._handleViewChange,me),xl.viewChange)),this.conversions.length===0)){const i=this.formats.find(r=>r.name===p6e)||this.formats.at(0);this.conversions.add(new Ng({format:i}))}})}destroy(){this.removeHandles(),this._cleanUpView(this.view),this.view=null}castConversions(e){return this._castToConversions(e)}set currentLocation(e){this._set("currentLocation",e),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(e){switch(e){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",e);break;case"live":this._startLiveMode(),this._set("mode",e)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:e,view:i}=this,r=i==null?void 0:i.ready;return e?r?"ready":i?"loading":"disabled":"disabled"}get storage(){const{storageType:e}=this;return e==="session"?sessionStorage:localStorage}get waitingForConversions(){return this._conversionPromise!=null}setLocation(e){var r,n;if(this._locationGraphic&&((r=this.view)==null||r.graphics.remove(this._locationGraphic)),!e)return;const i=e.clone();i.hasZ&&(i.z=void 0),this._locationGraphic=new fi({geometry:i,symbol:this.locationSymbol}),(n=this.view)==null||n.graphics.add(this._locationGraphic)}async convert(e,i){if(!O3(i))throw new C("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:i});return Promise.resolve().then(()=>e.convert(i))}async goToLocation(e){var s,o,a;const{view:i}=this;if(!i)throw new C("coordinate-conversion:go-to-failed","no view");const r=i.type==="3d"?i.clippingArea:null,n=(o=(s=i.map)==null?void 0:s.basemap)==null?void 0:o.baseLayers;if(r||(n==null?void 0:n.length)>0){const l=r??((a=n.at(0))==null?void 0:a.fullExtent);if(l!=null&&!l.contains(e))throw new C("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:e})}return this.callGoTo({target:e})}pause(){this.currentLocation=null,this.removeHandles(xl.view),this.view&&(this.view.cursor=r$.default,this._locationGraphic&&this.view.graphics.remove(this._locationGraphic))}async previewConversion(e,i=this.currentLocation||h6e){return(await I9(e,i)).displayCoordinate}resume(){this.mode==="capture"?this._startCaptureMode():this._startLiveMode()}reverseConvert(e,i){return i.reverseConvert(e)}async updateConversions(e,i){if((i==null?void 0:i.type)!=="point")throw this._clearConversions(this.conversions),new C("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:i});return this._convertMany(e,i)}_castToConversions(e){const i=new se;return e.forEach(r=>{let n=null;if(r instanceof Ng)n=r;else if(typeof r=="string"){const s=this.formats.find(o=>o.name===r);s&&(n=new Ng({format:s}))}n&&i.add(n)}),i}_cleanUpView(e){e&&(this._locationGraphic&&e.graphics.remove(this._locationGraphic),this.removeHandles(xl.view),e.cursor=r$.default)}_clearConversions(e){e.forEach(i=>{i.position={location:null,coordinate:null}})}async _convertMany(e,i){return Promise.all(e.map(r=>I9(r,i)))}_handleConversionChange(e){for(const i of e.added){const{format:r}=i;r&&(r.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(r,this.currentLocation).then(n=>{i.position=n,this._set("waitingForConversions",!1)})))}this._saveWidgetState()}_handleFormatChange(e){e.added.forEach(i=>{this.addHandles(D(()=>i.currentPattern,this._saveWidgetState),i.name??"unnamed-format"),i.viewModel=this}),e.removed.forEach(i=>{i.viewModel=null;const r=this.conversions.filter(n=>n.format===i);this.conversions.removeMany(r),i.name&&this.removeHandles(i.name)})}_loadWidgetState(){try{const e=JSON.parse(this.storage.getItem(T9));e&&this._setWidgetState(e)}catch(e){U.getLogger(this).error(new C("coordinate-conversion:invalid-session-storage-json","Could not read from storage.",{error:e}))}}_startCaptureMode(){this.removeHandles(xl.view),this.view&&(this.view.cursor=r$.crosshair,this.currentLocation&&this.setLocation(this.currentLocation),this.addHandles(this.view.on("click",this._onClick),xl.view))}_startLiveMode(){this._pointerCount=0,this.removeHandles(xl.view),this.view&&(this.view.cursor=r$.default,this._locationGraphic&&this.view.graphics.remove(this._locationGraphic),this.addHandles([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],xl.view))}_handleViewChange(e,i){i&&i!==e&&this._cleanUpView(i),e&&(this.mode==="capture"?this._startCaptureMode():this._startLiveMode(),i&&this._filterFormatsAndConversions())}_onClick(e){var i;if(e.button===0){const r=(i=this.view)==null?void 0:i.toMap(e),n=r==null?void 0:r.normalize();this.setLocation(n),this.currentLocation=n}}_onPointerDown(e){var r;const{pointerType:i}=e;if(this._pointerCount++,(i==="touch"||i==="pen")&&this._pointerCount===1){const n=(r=this.view)==null?void 0:r.toMap(e);this.currentLocation=n==null?void 0:n.normalize()}}_onPointerMove(e){var r;const{pointerType:i}=e;if(i==="mouse"||this._pointerCount===1){const n=(r=this.view)==null?void 0:r.toMap(e);this.currentLocation=n==null?void 0:n.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(e){try{e.formats.forEach(i=>{const r=this.formats.find(n=>n.name===i.name);r&&e.locale===Yr()&&i.currentPattern&&(r.currentPattern=i.currentPattern),r&&i.index>=0&&this.conversions.add(new Ng({format:r}))})}catch(i){U.getLogger(this).warn(new C("coordinate-conversion:session-storage-read-error","Could not get widget state from stored JSON.",{error:i}))}}_saveWidgetState(){if(!this.storageEnabled)return;const e=this._toJSON();try{this.storage.setItem(T9,JSON.stringify({formats:e,locale:Yr()}))}catch(i){U.getLogger(this).error(new C("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:i}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter(e=>{const i=e.name;return i==="xy"||i==="basemap"||Z4e(i)}).map(e=>({name:e.name,currentPattern:e.currentPattern,defaultPattern:e.defaultPattern,index:this.conversions.findIndex(i=>i.format===e)})).sort((e,i)=>e.index-i.index).toArray()}_filterFormatsAndConversions(){const{formatterAvailable:e,conversions:i,formats:r}=this;e||this.addHandles(Ai(()=>{var n;return(n=this.view)==null?void 0:n.spatialReference},n=>{const s=n.isWebMercator||n.isWGS84,o=r.filter(c=>{const{name:h}=c;return!!y6e(h)||h==="xy"&&!s}),a=this.filteredFormats.filter(c=>c.name==="xy"&&s&&!this.formats.includes(c)),l=i.filter(c=>o.includes(c.format));r.removeMany(o),i.removeMany(l),this.filteredFormats.addMany(o.filter(c=>!this.filteredFormats.includes(c))),r.addMany(a)},{once:!0,initial:!0}),xl.view)}};async function I9(t,e){var i;try{t.position=await((i=t.format)==null?void 0:i.convert(e))}catch{t.position=null}return t}function y6e(t){return f6e.includes(t)}u([d()],Ur.prototype,"conversions",void 0),u([Re("conversions")],Ur.prototype,"castConversions",null),u([d({type:ce})],Ur.prototype,"currentLocation",null),u([d()],Ur.prototype,"formats",void 0),u([d()],Ur.prototype,"messages",void 0),u([d()],Ur.prototype,"mode",null),u([d()],Ur.prototype,"filteredFormats",void 0),u([d({readOnly:!0})],Ur.prototype,"state",null),u([d()],Ur.prototype,"locationSymbol",void 0),u([d({readOnly:!0,dependsOn:["storageType"]})],Ur.prototype,"storage",null),u([d()],Ur.prototype,"storageEnabled",void 0),u([d()],Ur.prototype,"storageType",void 0),u([d({readOnly:!0})],Ur.prototype,"waitingForConversions",null),u([d()],Ur.prototype,"view",void 0),Ur=u([E("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],Ur);const soe=Ur,ne={base:"esri-coordinate-conversion esri-widget",captureMode:"esri-coordinate-conversion--capture-mode",noBasemap:"esri-coordinate-conversion--no-basemap",popup:"esri-coordinate-conversion__popup",clipboardPopup:"esri-coordinate-conversion__clipboard-popup",conversionList:"esri-coordinate-conversion__conversion-list",conversionRow:"esri-coordinate-conversion__row",coordDisplay:"esri-coordinate-conversion__display",expanded:"esri-coordinate-conversion__conversions-view--expanded",expandDown:"esri-coordinate-conversion__conversions-view--expand-down",expandUp:"esri-coordinate-conversion__conversions-view--expand-up",conversionsView:"esri-coordinate-conversion__conversions-view",primarySelect:"esri-coordinate-conversion__select-primary",rowSelect:"esri-coordinate-conversion__select-row",toolDisplay:"esri-coordinate-conversion__tools",modeToggle:"esri-coordinate-conversion__mode-toggle",rowButton:"esri-coordinate-conversion__row-button",backButton:"esri-coordinate-conversion__back-button",convertButton:"esri-coordinate-conversion__button",convertButtonSpan:"esri-coordinate-conversion__convert-button-span",coordinateInput:"esri-coordinate-conversion__input-coordinate",inputForm:"esri-coordinate-conversion__input-form",inputFormGroup:"esri-coordinate-conversion__input-group",rejectInput:"esri-coordinate-conversion__input-coordinate--rejected",sectionHeading:"esri-coordinate-conversion__heading",patternInput:"esri-coordinate-conversion__pattern-input",settings:"esri-coordinate__settings",settingsFormGroup:"esri-coordinate-conversion__settings-group",settingsFormGroupHorizontal:"esri-coordinate-conversion__settings-group-horizontal",previewCoordinate:"esri-coordinate-conversion__preview-coordinate",disabled:"esri-disabled",input:"esri-input",button:"esri-button",header:"esri-widget__heading",widgetButton:"esri-widget--button",leftArrow:"esri-icon-left-arrow",rightArrow:"esri-icon-right-arrow",captureButton:"esri-icon-map-pin",collapseButton:"esri-icon-up",copyButton:"esri-icon-duplicate",editButton:"esri-icon-edit",esriSelect:"esri-select",expandButton:"esri-icon-down",goToButton:"esri-icon-locate",refresh:"esri-icon-refresh",removeConversion:"esri-icon-close",settingsButton:"esri-icon-settings2"},k9={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0},g6e=750,v6e=2500;let Lt=class extends Bt{constructor(t,e){super(t,e),this._popupMessage=null,this._popupTimeoutId=void 0,this._clipboardPopupTimeoutId=void 0,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._clipboardPopupVisible=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.orientation="auto",this.viewModel=new soe,this.visibleElements={...k9}}get conversions(){return this.viewModel.conversions}set conversions(t){this.viewModel.conversions=t}get currentLocation(){return this.viewModel.currentLocation}set currentLocation(t){this.viewModel.currentLocation=t}get formats(){return this.viewModel.formats}set formats(t){this.viewModel.formats=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get mode(){return this.viewModel.mode}set mode(t){this.viewModel.mode=t}set multipleConversions(t){t===!1&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",t)}get multipleConversions(){const t=this._get("multipleConversions");return typeof t!="boolean"||t}get locationSymbol(){return this.viewModel.locationSymbol}set locationSymbol(t){this.viewModel.locationSymbol=t}get storageEnabled(){return this.viewModel.storageEnabled}set storageEnabled(t){this.viewModel.storageEnabled=t}get storageType(){return this.viewModel.storageType}set storageType(t){this.viewModel.storageType=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...k9,...t}}reverseConvert(t,e){return this.viewModel.reverseConvert(t,e)}render(){var a;const t=this.get("viewModel.state"),e=t==="disabled"?x("div",{key:"esri-coordinate__no-basemap"},(a=this.messages)==null?void 0:a.noBasemap):null,i=!e&&this._inputVisible?this._renderInputForm():null,r=!e&&this._settingsVisible?this._renderSettings():null,n=e||i||r?null:this._renderConversionsView(),s=this._popupVisible?this._renderPopup():null,o={[ne.captureMode]:this.mode==="capture",[ne.disabled]:t==="loading",[ne.noBasemap]:t==="disabled"};return x("div",{class:this.classes(ne.base,o)},s,e,n,r,i)}_addConversion(t){const e=t.target,i=n$(e.options[e.options.selectedIndex]),r=C9(e);if(i==null||r==null)return;const n=new Ng({format:i});e.options.selectedIndex=0,r>=0?(this.conversions.removeAt(r),this.conversions.add(n,r)):this.conversions.add(n)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight((t,e)=>{const i=e.format;return i!=null&&i.hasDisplayProperties?i:t},null)||this.formats.find(t=>t.hasDisplayProperties)}_hidePopup(){this._popupTimeoutId&&(clearTimeout(this._popupTimeoutId),this._popupTimeoutId=void 0),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_hideClipboardPopup(){this._clipboardPopupTimeoutId&&(clearTimeout(this._clipboardPopupTimeoutId),this._clipboardPopupTimeoutId=void 0),this._clipboardPopupVisible=!1,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(t){var i,r;const e=(i=_6e(t.currentTarget))==null?void 0:i.displayCoordinate;e!=null&&((r=t.clipboardData)==null||r.setData("text/plain",e),this._showClipboardPopup(),t.preventDefault())}_processUserInput(t){const e=Va(t),i=this.viewModel;if(e!=="Enter"&&e)this._badInput&&(this._badInput=!1);else{const r=n$(this._coordinateInput);if(!r)return;const n=this._coordinateInput.value;this._reverseConvert(n,r).then(s=>{this.mode==="capture"?i.resume():this.mode="capture",this.currentLocation=s,i.setLocation(s),this._onConvertComplete()}).catch(s=>{var o;U.getLogger(this).error(s),this._showPopup((o=this.messages)==null?void 0:o.invalidCoordinate),this._badInput=!0})}}async _reverseConvert(t,e){const i=this.viewModel,r=await e.reverseConvert(t);return this._goToEnabled&&r&&i.goToLocation(r).catch(n=>{var s;U.getLogger(this).warn(n),this._showPopup((s=this.messages)==null?void 0:s.locationOffBasemap)}),r}_setInputFormat(t){const e=t.target,i=n$(e[e.options.selectedIndex]);i!=null&&(this._conversionFormat=i)}_setPreviewConversion(){var i,r;const t=this._findSettingsFormat(),e=this.viewModel;if(t){const n=this.conversions.find(s=>s.format===t);this._previewConversion=new Ng({format:t,position:{location:this.currentLocation,coordinate:(i=n==null?void 0:n.position)==null?void 0:i.coordinate}}),(r=this._previewConversion.position)!=null&&r.coordinate||e.previewConversion(this._previewConversion)}}_setSettingsFormat(t){const e=t.target,i=n$(e[e.options.selectedIndex]);i!=null&&(this._settingsFormat=i,this._setPreviewConversion())}_showClipboardPopup(){this._clipboardPopupVisible?clearTimeout(this._clipboardPopupTimeoutId):this._clipboardPopupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout(()=>{this._popupTimeoutId=void 0,this._hideClipboardPopup()},g6e)}_showPopup(t,e=v6e){this._popupMessage=t,this._popupVisible?clearTimeout(this._popupTimeoutId):this._popupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout(()=>{this._popupTimeoutId=void 0,this._hidePopup()},e)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(t){t.stopPropagation();const e=t.target,i=this._findSettingsFormat();i&&(i.currentPattern=e.value)}_renderConversion(t,e){const{messages:i}=this;if(!i)return x("li",null);const{format:r}=t,n=(r==null?void 0:r.label)??"",s=`${this.id}__list-item-${e}`,o=`${n} ${i.conversionOutputSuffix}`,a=e===0,l=a||this._expanded,c=a?this._renderFirstConversion(t):this._renderTools(e,t,s),h=a&&!t.displayCoordinate?i.noLocation:t.displayCoordinate,p=x("div",{"aria-label":h,class:ne.coordDisplay,"data-conversion":t,role:"listitem",tabindex:"0",title:h??""},h),f=this._renderOptions(this.formats.filter(y=>y!==r));return l?x("li",{"aria-label":o,class:ne.conversionRow,id:s,key:t,role:"group",title:o,tabindex:"0"},x("select",{"aria-controls":s,"aria-label":i.selectFormat,class:this.classes(ne.esriSelect,ne.rowSelect),bind:this,"data-index":e,onchange:this._addConversion,title:i.selectFormat},x("option",{"aria-label":n,selected:!0,title:n},n.toUpperCase()),f),p,c):null}_renderCopyButton(t){const e=this._clipboardPopupVisible&&this._renderClipboardPopup(),{messagesCommon:i}=this;return i?x("li",{"aria-label":i.copy,bind:this,class:this.classes(ne.widgetButton,ne.rowButton),"data-conversion":t,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:i.copy},e,x("span",{"aria-hidden":"true",class:ne.copyButton})):x("li",null)}_renderFirstConversion(t){const e=this.id,i={[ne.expandButton]:!this._expanded,[ne.collapseButton]:this._expanded},{messages:r,messagesCommon:n,multipleConversions:s,visibleElements:o}=this;if(!n||!r)return x("ul",null);const a=this.mode==="live"?r.captureMode:r.liveMode,l=this._expanded?n.collapse:n.expand,c=t.displayCoordinate&&this.mode==="capture"?this._renderCopyButton(t):null,h=s&&o.expandButton&&x("li",{"aria-controls":`${e}__${ne.conversionList}`,"aria-label":l,bind:this,class:ne.widgetButton,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:l},x("span",{"aria-hidden":"true",class:this.classes(i)})),p=!s&&o.captureButton&&x("li",{"aria-label":a,bind:this,class:this.classes(ne.widgetButton,ne.modeToggle),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:a},x("span",{"aria-hidden":"true",class:ne.captureButton}));return x("ul",{class:ne.toolDisplay},c,h,p)}_renderInputForm(){const t=this._conversionFormat||this.conversions.at(0).format,e=this.formats.findIndex(h=>h.name===(t==null?void 0:t.name)),i=this.id,r=`${i}__${ne.coordinateInput}`,n=`${i}__${ne.coordinateInput}__header`,s=this._renderOptions(this.formats,!0,e),o={[ne.rejectInput]:this._badInput},{messages:a,messagesCommon:l,headingLevel:c}=this;return l&&a?x("div",{"aria-labelledby":n,class:ne.inputForm,key:"esri-coordinate-conversion__input-form",role:"search"},x("div",{class:ne.sectionHeading},x("div",{"aria-label":l.back,bind:this,class:this.classes(ne.widgetButton,ne.backButton),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),x(Uo,{level:c,class:ne.header,id:n},a.inputCoordTitle)),x("div",{class:ne.inputFormGroup},x("select",{"aria-controls":r,"aria-label":a.selectFormat,bind:this,class:this.classes(ne.esriSelect,ne.rowSelect),onchange:this._setInputFormat,title:a.selectFormat},s),x("input",{afterCreate:mc,"aria-labelledby":n,"aria-required":"true",bind:this,class:this.classes(ne.coordinateInput,ne.input,o),"data-format":t,"data-node-ref":"_coordinateInput",id:r,onkeydown:this._processUserInput,placeholder:a.inputCoordTitle,role:"textbox",spellcheck:!1,title:a.inputCoordTitle,type:"text"})),x("div",{class:ne.inputFormGroup},x("label",{"aria-label":a.goTo},x("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:a.goTo,type:"checkbox"}),a.goTo),x("button",{"aria-label":a.convert,bind:this,class:this.classes(ne.convertButton,ne.button),onclick:this._processUserInput,title:a.convert,type:"button"},x("span",{class:ne.convertButtonSpan},a.convert)))):x("div",null)}_renderConversionsView(){const{messages:t}=this;if(!t)return x("div",null);const e=`${this.id}__${ne.conversionList}`,i=this._renderPrimaryTools(),r=this._renderOptions(this.formats),n=this.conversions.map((a,l)=>this._renderConversion(a,l)).toArray(),s=this._expanded?x("div",{class:ne.conversionRow},x("select",{"aria-controls":e,"aria-label":t.addConversion,bind:this,class:this.classes(ne.esriSelect,ne.primarySelect),"data-index":-1,onchange:this._addConversion,title:t.addConversion},x("option",{disabled:!0,selected:!0,value:""},t.addConversion),r),i):null,o={[ne.expanded]:this._expanded,[ne.expandUp]:this.orientation==="expand-up",[ne.expandDown]:this.orientation==="expand-down"};return x("div",{class:this.classes(ne.conversionsView,o),key:"esri-coordinate-conversion__main-view"},x("ul",{"aria-expanded":this._expanded?"true":"false",class:ne.conversionList,id:e},n),s)}_renderOptions(t,e,i){var s;const r=this.conversions.at(0),n=(s=r.format)==null?void 0:s.name;return t.map((o,a)=>{const l=!(e||!r)&&(n===o.name||this.conversions.map(c=>{var h;return(h=c.format)==null?void 0:h.name}).includes(o.name));return x("option",{"aria-label":o.label,"data-format":o,disabled:l,key:o.name??"unnamed-format",selected:a===i,value:o.label},o.label.toUpperCase())}).toArray()}_renderPopup(){return x("div",{class:ne.popup,role:"alert"},this._popupMessage)}_renderClipboardPopup(){const{messages:t}=this;return t?x("div",{class:this.classes(ne.popup,ne.clipboardPopup),role:"alert"},t.copySuccessMessage):x("div",null)}_renderPrimaryTools(){const{messages:t,visibleElements:e}=this;if(!t)return x("ul",null);const i=this.mode==="live"?t.captureMode:t.liveMode,r=e.inputButton&&x("li",{bind:this,class:ne.widgetButton,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:t.inputCoordTitle},x("span",{"aria-hidden":"true",class:ne.editButton})),n=e.captureButton&&x("li",{bind:this,class:this.classes(ne.widgetButton,ne.modeToggle),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:i},x("span",{"aria-hidden":"true",class:ne.captureButton})),s=e.settingsButton&&x("li",{bind:this,class:ne.widgetButton,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:t.settingsTitle},x("span",{"aria-hidden":"true",class:ne.settingsButton}));return x("ul",{class:ne.toolDisplay},r,n,s)}_renderSettings(){var f;const t=this.id,e=`${t}__${ne.patternInput}`,i=`${t}__${ne.patternInput}__header`,r=`${t}__${ne.previewCoordinate}`,n=this.formats.filter(y=>y.hasDisplayProperties),s=this._findSettingsFormat(),o=s?n.indexOf(s):-1,a=this._renderOptions(n,!0,o),l=s==null?void 0:s.get("currentPattern"),{messages:c,messagesCommon:h,headingLevel:p}=this;return h&&c?x("div",{"aria-labelledby":i,class:ne.settings,key:"esri-coordinate-conversion__settings"},x("div",{class:ne.sectionHeading},x("div",{bind:this,class:this.classes(ne.widgetButton,ne.backButton),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:h.back},this._renderBackIcon()),x(Uo,{level:p,class:ne.header,id:i},c.settingsTitle)),x("div",{class:ne.settingsFormGroup},x("label",{for:e},c.changeCoordinateDisplay),x("select",{"aria-label":c.selectFormat,class:ne.esriSelect,bind:this,onchange:this._setSettingsFormat,title:c.selectFormat},a),x("div",{class:ne.settingsFormGroupHorizontal},x("input",{"aria-controls":r,bind:this,class:this.classes(ne.patternInput,ne.input),id:e,oninput:this._updateCurrentPattern,spellcheck:!1,title:c.changeCoordinateDisplay,type:"text",value:l}),x("div",{"aria-controls":e,bind:this,class:ne.widgetButton,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:c.defaultPattern},x("span",{"aria-hidden":"true",class:ne.refresh})))),x("div",{class:ne.settingsFormGroup},x("label",null,h.preview,x("div",{class:ne.previewCoordinate,id:r,tabindex:"0"},(f=this._previewConversion)==null?void 0:f.displayCoordinate)))):x("div",null)}_renderBackIcon(){return x("span",{"aria-hidden":"true",class:Fc(this.container)?ne.rightArrow:ne.leftArrow})}_renderTools(t,e,i){const r=e.displayCoordinate&&this.mode==="capture"?this._renderCopyButton(e):null,{messages:n}=this;return n?x("ul",{class:ne.toolDisplay,role:"listitem"},r,x("li",{"aria-controls":i,"aria-label":n.removeConversion,bind:this,class:this.classes(ne.widgetButton,ne.rowButton),"data-index":t,key:`${i}__${ne.widgetButton}`,onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:n.removeConversion},x("span",{"aria-hidden":"true",class:ne.removeConversion}))):x("ul",null)}_copyCoordinateOutput(t){const e=t.target;if(!("createTextRange"in document.body)){const i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i==null||i.removeAllRanges(),i==null||i.addRange(r)}document.execCommand("copy")}_removeConversion(t){const e=C9(t.currentTarget);e!=null&&this.conversions.removeAt(e)}_setDefaultPattern(t){t.stopPropagation();const e=this._findSettingsFormat();e&&(e.currentPattern=e.get("defaultPattern"))}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode=this.mode==="live"?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};function C9(t){return t["data-index"]}function n$(t){return t["data-format"]}function _6e(t){return t["data-conversion"]}u([d()],Lt.prototype,"conversions",null),u([d()],Lt.prototype,"currentLocation",null),u([d()],Lt.prototype,"formats",null),u([d()],Lt.prototype,"goToOverride",null),u([d()],Lt.prototype,"headingLevel",void 0),u([d()],Lt.prototype,"label",null),u([d(),rt("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],Lt.prototype,"messages",void 0),u([d(),rt("esri/t9n/common")],Lt.prototype,"messagesCommon",void 0),u([d()],Lt.prototype,"mode",null),u([d()],Lt.prototype,"orientation",void 0),u([d()],Lt.prototype,"multipleConversions",null),u([d()],Lt.prototype,"locationSymbol",null),u([d()],Lt.prototype,"storageEnabled",null),u([d()],Lt.prototype,"storageType",null),u([d()],Lt.prototype,"view",null),u([d({type:soe})],Lt.prototype,"viewModel",void 0),u([d()],Lt.prototype,"visibleElements",void 0),u([Re("visibleElements")],Lt.prototype,"castVisibleElements",null),u([At()],Lt.prototype,"_copyCoordinateOutput",null),u([At()],Lt.prototype,"_removeConversion",null),u([At()],Lt.prototype,"_setDefaultPattern",null),u([At()],Lt.prototype,"_toggleExpand",null),u([At()],Lt.prototype,"_toggleInputVisibility",null),u([At()],Lt.prototype,"_toggleMode",null),u([At()],Lt.prototype,"_toggleSettingsVisibility",null),Lt=u([E("esri.widgets.CoordinateConversion")],Lt);const w6e=Lt,b6e=()=>{const t=Ul.useRef(null),e=Ul.useRef(null),i=Ul.useRef(null),r=Ul.useRef(null),n=Ul.useRef(null),[s,o]=Ul.useState({latitude:0,longitude:0}),a=Ul.useId();return Ul.useEffect(()=>{Ye.apiKey="AAPK4b4113c9c3744936bfb62773e5264aeephEk2ardc21L5QjW12x19tQAoumUJIo3wOlYStHpMuhNzZTmf7cuv7okg-D0BUPY";const l=xDe(),c=MDe();e.current=new nQ({basemap:"streets-vector",layers:[l,c]});const h=new zTe({map:e.current,container:t.current??void 0,center:new ce({latitude:47.826334,longitude:35.15765}),zoom:11,popup:new eoe({dockEnabled:!0,dockOptions:{buttonEnabled:!1,breakpoint:!1,position:"bottom-left"},visibleElements:{closeButton:!1}})});let p,f;h.whenLayerView(l).then(S=>{if(r.current=S,!i.current)return;const b=new LNe({view:h,content:i.current,expandIcon:"filter",group:"top-left"});p=b.watch("expanded",()=>{!b.expanded&&r.current&&(r.current.filter=new h1)}),h.ui.add(b,"top-left"),new Promise($=>setTimeout(()=>$(),300)).then(()=>{i.current&&(i.current.style.display="block")})}),h.whenLayerView(c).then(S=>{n.current=S,f=EDe(h,l,n.current)});const y=new SDe({view:h}),g=new TDe({view:h}),v=new ONe({view:h}),_=new w6e({view:h});h.on("pointer-move",()=>{const{latitude:S,longitude:b}=_.viewModel.currentLocation;o({latitude:S,longitude:b})}),y.viewModel.sketchViewModel.on("update",Lue(async S=>{const{geometry:b}=S.graphics[0];if("longitude"in b&&"latitude"in b){const $=await B4e(new ce({latitude:b.latitude,longitude:b.longitude}));if(!$)return;y.viewModel.featureFormViewModel.setValue("region",$.region),y.viewModel.featureFormViewModel.setValue("city",$.city),y.viewModel.featureFormViewModel.setValue("street",$.street)}},300));const w=document.getElementById(a);return w&&h.ui.add(w,"bottom-left"),h.ui.add(y,"top-right"),h.ui.add(g,"top-left"),h.ui.add(v,"top-left"),()=>{p.remove(),f.remove(),h.destroy()}},[]),Da.jsxs(Da.Fragment,{children:[Da.jsx("div",{ref:i,className:"seasons-filter esri-widget",children:[{type:"goverment",name:"Пункт Незламності"},{type:"business",name:"Пункт Незламності відповідального бізнесу"}].map(({type:l,name:c})=>Da.jsx("button",{type:"button",className:"season-item",onClick:()=>{r.current&&(r.current.filter=new h1({where:`typeOfPoint = '${l}'`}))},children:c},l))}),Da.jsx("div",{ref:t,className:"map-view"}),Da.jsx(G4e,{coords:s,id:a})]})};const S6e=()=>Da.jsx(Da.Fragment,{children:Da.jsx(b6e,{})});IP.createRoot(document.getElementById("root")).render(Da.jsx(S6e,{}));export{sse as $,dp as A,B7e as B,o9e as C,cI as D,Ue as E,fi as F,rr as G,n9e as H,Qxe as I,Om as J,mJ as K,_i as L,V as M,Hr as N,sl as O,Go as P,Mm as Q,Pi as R,Si as S,Yx as T,rN as U,se as V,iN as W,fZ as X,rm as Y,nN as Z,p8e as _,d9e as a,R6 as a$,Lhe as a0,Yf as a1,xg as a2,Nw as a3,ij as a4,Or as a5,S$ as a6,$L as a7,Ye as a8,X as a9,ce as aA,Un as aB,No as aC,_T as aD,lt as aE,Xr as aF,jc as aG,B1 as aH,Vi as aI,T8e as aJ,$T as aK,Ve as aL,zc as aM,uu as aN,Jo as aO,Ss as aP,cu as aQ,e1 as aR,Yt as aS,_L as aT,bL as aU,K2 as aV,_e as aW,oK as aX,Be as aY,jk as aZ,PN as a_,F as aa,Zte as ab,ZCe as ac,YCe as ad,C as ae,Ge as af,tt as ag,Gm as ah,Wb as ai,QQ as aj,kj as ak,yte as al,TSe as am,qze as an,xs as ao,n2e as ap,t9e as aq,Y2e as ar,S9e as as,cTe as at,dTe as au,y9e as av,r9e as aw,w9e as ax,s9e as ay,v9e as az,tMe as b,EUe as b$,m8e as b0,K8e as b1,mUe as b2,TCe as b3,Q7e as b4,Jb as b5,h1 as b6,O as b7,Zw as b8,bie as b9,LAe as bA,RAe as bB,FAe as bC,Ft as bD,Je as bE,_s as bF,ye as bG,G as bH,tm as bI,mj as bJ,pHe as bK,M6e as bL,cS as bM,Di as bN,wc as bO,yHe as bP,mHe as bQ,mOe as bR,bBe as bS,Q as bT,ebe as bU,j4 as bV,E_e as bW,xA as bX,Pm as bY,TUe as bZ,QSe as b_,wBe as ba,AOe as bb,lr as bc,r1 as bd,eGe as be,_r as bf,c9e as bg,Z1 as bh,Tt as bi,Ut as bj,vs as bk,$Be as bl,I2 as bm,bs as bn,xBe as bo,eo as bp,mT as bq,Et as br,lT as bs,lSe as bt,aSe as bu,Z7e as bv,W7e as bw,ZT as bx,hu as by,ase as bz,e9e as c,U1 as c$,mte as c0,nUe as c1,gUe as c2,ll as c3,En as c4,N1 as c5,Js as c6,$c as c7,or as c8,CQ as c9,so as cA,kpe as cB,Cpe as cC,Ppe as cD,Dpe as cE,Upe as cF,JW as cG,ZW as cH,YW as cI,zpe as cJ,Wpe as cK,Zpe as cL,F2 as cM,Ipe as cN,bT as cO,Bde as cP,aW as cQ,lW as cR,Gde as cS,BD as cT,HD as cU,R6e as cV,Vue as cW,kW as cX,$q as cY,pT as cZ,BN as c_,at as ca,Lc as cb,E0 as cc,VW as cd,JD as ce,nu as cf,KD as cg,ST as ch,xpe as ci,Yze as cj,Do as ck,O1 as cl,sr as cm,YJ as cn,Vc as co,fpe as cp,D_e as cq,R2 as cr,zW as cs,ae as ct,Bke as cu,QHe as cv,dS as cw,w5 as cx,Vb as cy,MI as cz,iTe as d,Ki as d$,Zb as d0,wh as d1,Qs as d2,z0e as d3,FT as d4,U0e as d5,bX as d6,kUe as d7,Gze as d8,Qne as d9,wre as dA,K4 as dB,IW as dC,Ui as dD,_n as dE,mG as dF,Rt as dG,yn as dH,Us as dI,Q5e as dJ,Mc as dK,N5e as dL,ke as dM,gVe as dN,Te as dO,zs as dP,mh as dQ,Ii as dR,pS as dS,lg as dT,pb as dU,c0 as dV,ld as dW,Ds as dX,$s as dY,hb as dZ,BE as d_,mNe as da,ute as db,e_ as dc,np as dd,hl as de,em as df,Y6e as dg,SA as dh,s2e as di,QH as dj,cl as dk,Bwe as dl,V$e as dm,U$e as dn,mpe as dp,Aze as dq,xze as dr,eEe as ds,uEe as dt,Kr as du,Wre as dv,Ai as dw,Hve as dx,Nze as dy,oM as dz,h9e as e,Afe as e$,sVe as e0,Jt as e1,sYe as e2,KZe as e3,C3 as e4,Y as e5,I3 as e6,k3 as e7,Dse as e8,nVe as e9,Wr as eA,wr as eB,JHe as eC,g5 as eD,QF as eE,KHe as eF,_I as eG,SLe as eH,vUe as eI,ZHe as eJ,LHe as eK,AHe as eL,Mg as eM,yLe as eN,OHe as eO,pUe as eP,jZe as eQ,cfe as eR,Vde as eS,CCe as eT,qfe as eU,OZe as eV,Jje as eW,Q0 as eX,Ese as eY,AZe as eZ,CZe as e_,g$ as ea,gYe as eb,Ze as ec,hVe as ed,Vn as ee,Cse as ef,S5e as eg,tVe as eh,_5e as ei,T5e as ej,pi as ek,oYe as el,mm as em,ir as en,rYe as eo,KG as ep,BM as eq,eYe as er,Q5 as es,iYe as et,w5e as eu,C5e as ev,Hs as ew,tYe as ex,nYe as ey,ERe as ez,dm as f,Re as f$,nm as f0,tme as f1,C8e as f2,o6 as f3,k8e as f4,Jze as f5,LZe as f6,A1 as f7,cse as f8,Q2 as f9,Es as fA,Jh as fB,Qo as fC,EOe as fD,RCe as fE,LCe as fF,_Pe as fG,ZWe as fH,mu as fI,XK as fJ,POe as fK,F0 as fL,ie as fM,Mt as fN,e5 as fO,Hm as fP,r8e as fQ,Swe as fR,h8e as fS,t8e as fT,Sn as fU,Zo as fV,e6 as fW,th as fX,qb as fY,gQ as fZ,Ro as f_,C3e as fa,P3e as fb,Qqe as fc,F5 as fd,b3e as fe,Pqe as ff,hWe as fg,dWe as fh,xm as fi,Uq as fj,R5 as fk,tqe as fl,bfe as fm,Nue as fn,K0 as fo,Jte as fp,xOe as fq,cOe as fr,yOe as fs,Eie as ft,Rte as fu,Wl as fv,Db as fw,DPe as fx,LPe as fy,OPe as fz,g9e as g,lu as g$,J0 as g0,EBe as g1,Sg as g2,bUe as g3,PUe as g4,JTe as g5,lse as g6,xv as g7,Ox as g8,fF as g9,tE as gA,H6e as gB,_Ze as gC,XQ as gD,XL as gE,j0 as gF,q$e as gG,eX as gH,qe as gI,E2e as gJ,oS as gK,Kb as gL,f9e as gM,m9e as gN,tTe as gO,u9e as gP,XMe as gQ,a9e as gR,l9e as gS,GX as gT,jD as gU,W$e as gV,U6e as gW,e8e as gX,Cr as gY,G$e as gZ,KJ as g_,h7e as ga,Ne as gb,m7e as gc,up as gd,hqe as ge,pqe as gf,Wh as gg,Z0e as gh,uFe as gi,dqe as gj,SC as gk,nke as gl,Nc as gm,BGe as gn,Ite as go,pc as gp,O7e as gq,R0 as gr,p5 as gs,w8e as gt,io as gu,$g as gv,Yo as gw,uie as gx,ul as gy,FN as gz,$X as h,EB as h$,ICe as h0,C1 as h1,Eze as h2,IUe as h3,M8 as h4,MBe as h5,tu as h6,hP as h7,TZe as h8,Fa as h9,JJ as hA,P_e as hB,ht as hC,qqe as hD,SBe as hE,Bqe as hF,Wg as hG,Aje as hH,O6e as hI,ype as hJ,jh as hK,Q6e as hL,C0e as hM,P0 as hN,zN as hO,Dce as hP,Xwe as hQ,Am as hR,pOe as hS,lOe as hT,MPe as hU,n6 as hV,_Z as hW,LOe as hX,RPe as hY,a5 as hZ,yI as h_,Nje as ha,MZe as hb,EZe as hc,rK as hd,W0 as he,HG as hf,$Ze as hg,uT as hh,cT as hi,pm as hj,KW as hk,Zhe as hl,Yhe as hm,Jhe as hn,ife as ho,Hhe as hp,q_e as hq,owe as hr,M0 as hs,jde as ht,su as hu,R7e as hv,tCe as hw,Q4e as hx,Whe as hy,awe as hz,b9e as i,uze as i$,OF as i0,o5 as i1,hI as i2,SCe as i3,APe as i4,f5 as i5,Iie as i6,MOe as i7,bSe as i8,wSe as i9,zAe as iA,wAe as iB,wPe as iC,rAe as iD,sAe as iE,XSe as iF,zPe as iG,UPe as iH,BPe as iI,HPe as iJ,qPe as iK,WPe as iL,ZPe as iM,YPe as iN,JPe as iO,KPe as iP,QPe as iQ,XPe as iR,$U as iS,Tie as iT,FPe as iU,z0 as iV,aCe as iW,Hze as iX,f$e as iY,$W as iZ,xhe as i_,ySe as ia,Pz as ib,Bn as ic,Ci as id,Xt as ie,j6e as ig,i6 as ih,Kg as ii,au as ij,Ja as ik,Wo as il,d1 as im,u5 as io,iie as ip,jPe as iq,NPe as ir,Z0 as is,eAe as it,zee as iu,Uc as iv,dI as iw,fte as ix,BAe as iy,UAe as iz,O$e as j,Qze as j$,h0e as j0,RHe as j1,q6e as j2,J1 as j3,L6e as j4,I6e as j5,_M as j6,Ws as j7,mze as j8,to as j9,SHe as jA,aAe as jB,dT as jC,M2 as jD,KU as jE,tGe as jF,Ode as jG,it as jH,eZ as jI,qT as jJ,ufe as jK,b8e as jL,lM as jM,Qge as jN,rq as jO,zt as jP,G6e as jQ,bj as jR,txe as jS,ixe as jT,kD as jU,CD as jV,Qj as jW,S8e as jX,Uh as jY,gB as jZ,Hb as j_,$I as ja,lHe as jb,G8e as jc,dl as jd,Sqe as je,Fwe as jf,Lge as jg,Gpe as jh,vv as ji,ru as jj,UW as jk,Fqe as jl,g1 as jm,Io as jn,S0 as jo,kPe as jp,OD as jq,Awe as jr,Yh as js,rF as jt,fHe as ju,lie as jv,LD as jw,Kh as jx,Hy as jy,fR as jz,Mre as k,s8e as k$,Um as k0,kI as k1,II as k2,Ere as k3,IDe as k4,zb as k5,sce as k6,iq as k7,T6e as k8,zue as k9,vT as kA,Oze as kB,k6e as kC,Rje as kD,r6 as kE,zJ as kF,Oo as kG,sK as kH,nce as kI,AN as kJ,X8e as kK,J8e as kL,Nre as kM,M as kN,$ze as kO,E1 as kP,E6e as kQ,RZe as kR,mje as kS,zZe as kT,um as kU,W6e as kV,Z6e as kW,sBe as kX,c8e as kY,SZe as kZ,FZe as k_,hX as ka,fk as kb,oI as kc,AD as kd,$e as ke,hZ as kf,y8e as kg,Dhe as kh,Uze as ki,Lke as kj,x7e as kk,Jge as kl,aQ as km,ofe as kn,NZe as ko,GG as kp,VZe as kq,P1 as kr,zD as ks,IZe as kt,_se as ku,Sse as kv,yse as kw,whe as kx,The as ky,$se as kz,D as l,Xie as l$,T2 as l0,Kxe as l1,qhe as l2,Gke as l3,uI as l4,Kze as l5,jY as l6,rt as l7,Bt as l8,x as l9,jO as lA,pJ as lB,jN as lC,aM as lD,fxe as lE,Pf as lF,hHe as lG,nOe as lH,YHe as lI,T1e as lJ,ZL as lK,xFe as lL,e$e as lM,$n as lN,Ba as lO,i0 as lP,pke as lQ,DW as lR,$Ue as lS,gie as lT,ly as lU,tie as lV,Z$e as lW,XHe as lX,Cf as lY,Fc as lZ,cj as l_,er as la,mc as lb,fm as lc,nq as ld,SUe as le,d0e as lf,RT as lg,CUe as lh,Mqe as li,Hf as lj,uv as lk,Wze as ll,qg as lm,RSe as ln,tM as lo,B$e as lp,Nxe as lq,PQ as lr,Q1 as ls,YD as lt,TN as lu,xUe as lv,tq as lw,lJ as lx,UN as ly,wUe as lz,xn as m,$re as m$,ere as m0,XLe as m1,Qie as m2,rRe as m3,nRe as m4,sRe as m5,nre as m6,Pt as m7,lI as m8,cRe as m9,ET as mA,RL as mB,At as mC,Uo as mD,fw as mE,aRe as mF,D6e as mG,N6e as mH,F6e as mI,T0e as mJ,N_e as mK,C_e as mL,A_e as mM,eq as mN,K7e as mO,V1e as mP,GY as mQ,X7e as mR,exe as mS,Vh as mT,Exe as mU,Sj as mV,jze as mW,Rhe as mX,Gre as mY,n1 as mZ,qre as m_,pZe as ma,eqe as mb,mZe as mc,uM as md,rse as me,KNe as mf,HNe as mg,tQ as mh,ZNe as mi,YNe as mj,nqe as mk,ije as ml,gZe as mm,wF as mn,iqe as mo,rqe as mp,nje as mq,yZe as mr,vZe as ms,QNe as mt,fZe as mu,fre as mv,mke as mw,WA as mx,eje as my,VT as mz,Fm as n,bse as n$,n3e as n0,Cqe as n1,ji as n2,je as n3,GL as n4,r3e as n5,k3e as n6,_pe as n7,Bxe as n8,fp as n9,oke as nA,ake as nB,tte as nC,xRe as nD,Mke as nE,$Re as nF,Wj as nG,EM as nH,Ha as nI,Kee as nJ,Xw as nK,bje as nL,Mje as nM,Fje as nN,DZe as nO,Xve as nP,j7e as nQ,pP as nR,fP as nS,kZe as nT,It as nU,wZe as nV,c2e as nW,G5 as nX,Rue as nY,PZe as nZ,u8e as n_,Cxe as na,Pxe as nb,$j as nc,hv as nd,jn as ne,x3 as nf,L7e as ng,A7e as nh,ZQ as ni,Y2 as nj,tr as nk,o1 as nl,EPe as nm,I8e as nn,x8e as no,E8e as np,$8e as nq,M8e as nr,Zs as ns,lme as nt,vie as nu,_ie as nv,oOe as nw,hEe as nx,yv as ny,qj as nz,ZGe as o,VAe as o$,Xze as o0,afe as o1,lfe as o2,cHe as o3,dHe as o4,uHe as o5,Y3e as o6,pu as o7,V3e as o8,dne as o9,Cze as oA,yce as oB,iX as oC,H5 as oD,Qa as oE,XT as oF,zQ as oG,UQ as oH,s$e as oI,oGe as oJ,y$e as oK,aGe as oL,$Q as oM,JT as oN,D0 as oO,K1 as oP,Zl as oQ,cLe as oR,Cte as oS,vCe as oT,Xj as oU,Pte as oV,cre as oW,gCe as oX,ARe as oY,NAe as oZ,jAe as o_,Ize as oa,ML as ob,Aqe as oc,Pwe as od,Zm as oe,Jxe as of,s1 as og,Uxe as oh,Spe as oi,upe as oj,tWe as ok,ar as ol,epe as om,jW as on,NW as oo,gEe as op,vEe as oq,pEe as or,Kge as os,XB as ot,pX as ou,b0 as ov,WGe as ow,MUe as ox,ahe as oy,ohe as oz,i9e as p,VHe as p$,UA as p0,Z9e as p1,Y9e as p2,fv as p3,iI as p4,N9e as p5,j9e as p6,V9e as p7,z9e as p8,q9e as p9,sJ as pA,p7e as pB,f7e as pC,y7e as pD,SM as pE,Lze as pF,Che as pG,f8e as pH,Vze as pI,XD as pJ,PW as pK,Phe as pL,jb as pM,hfe as pN,Vhe as pO,Rze as pP,Bze as pQ,j$e as pR,FHe as pS,WHe as pT,BHe as pU,UHe as pV,GHe as pW,HHe as pX,UB as pY,GB as pZ,BB as p_,U9e as pa,B9e as pb,G9e as pc,H9e as pd,W9e as pe,kze as pf,C5 as pg,Tze as ph,Mze as pi,Bre as pj,fK as pk,Oqe as pl,Cwe as pm,Ure as pn,MCe as po,Qh as pp,Yje as pq,Y4e as pr,Yr as ps,X4e as pt,_x as pu,fqe as pv,yqe as pw,mqe as px,gqe as py,vqe as pz,p9e as q,X_e as q$,zHe as q0,LT as q1,kM as q2,NHe as q3,jHe as q4,i8e as q5,qHe as q6,hLe as q7,pLe as q8,Die as q9,WD as qA,UT as qB,rj as qC,W1 as qD,kqe as qE,B6e as qF,uUe as qG,V_e as qH,F_e as qI,Mpe as qJ,O_e as qK,l3e as qL,St as qM,zze as qN,Zz as qO,Rqe as qP,jx as qQ,qUe as qR,Z_e as qS,R_e as qT,uwe as qU,Y_e as qV,zxe as qW,WW as qX,Bs as qY,D2 as qZ,Tpe as q_,DHe as qa,fLe as qb,aN as qc,X4 as qd,A3e as qe,B8e as qf,eUe as qg,M_e as qh,eWe as qi,a3e as qj,Ko as qk,Xqe as ql,Lr as qm,rUe as qn,lUe as qo,ah as qp,i3e as qq,U8e as qr,Jz as qs,V8e as qt,_q as qu,z8e as qv,Twe as qw,l8e as qx,Yz as qy,pp as qz,bGe as r,Rwe as r$,Hke as r0,qke as r1,kQ as r2,cze as r3,oh as r4,EC as r5,M1 as r6,P6e as r7,dze as r8,lde as r9,av as rA,die as rB,Nge as rC,aHe as rD,Kqe as rE,fUe as rF,aUe as rG,Fue as rH,Tve as rI,sUe as rJ,BUe as rK,UUe as rL,Xge as rM,A6e as rN,Jqe as rO,zwe as rP,Zqe as rQ,b1e as rR,tUe as rS,n8e as rT,hUe as rU,oUe as rV,T_e as rW,Q8e as rX,dRe as rY,G0e as rZ,B_e as r_,Q_e as ra,Dze as rb,Fze as rc,Nhe as rd,Uke as re,L_e as rf,j1 as rg,V1 as rh,z1 as ri,J7e as rj,_K as rk,Wxe as rl,K0e as rm,cUe as rn,dUe as ro,d8e as rp,QD as rq,X$e as rr,lwe as rs,sxe as rt,iGe as ru,Iqe as rv,Eke as rw,NT as rx,q1 as ry,H1 as rz,U as s,dre as s0,$6e as s1,x6e as s2,iUe as s3,yUe as s4,N0 as s5,AQ as s6,Zze as s7,Rxe as s8,M1e as s9,UL as sa,V6e as sb,Mx as sc,Yqe as sd,EL as se,Hqe as sf,TBe as sg,DT as sh,qm as si,a8e as sj,o8e as sk,fve as sl,tBe as sm,aI as sn,C7e as so,iHe as sp,$He as sq,_9e as t,u,d as v,E as w,me as x,_Ge as y,pI as z};
